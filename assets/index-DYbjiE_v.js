function IC(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(s,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function PC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sp={exports:{}},zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS;function t1(){if(ZS)return zo;ZS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:t,type:s,key:l,ref:r!==void 0?r:null,props:o}}return zo.Fragment=e,zo.jsx=n,zo.jsxs=n,zo}var e0;function n1(){return e0||(e0=1,Sp.exports=t1()),Sp.exports}var C=n1(),Tp={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function s1(){if(t0)return Le;t0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function g(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function w(A,$,K){this.props=A,this.context=$,this.refs=T,this.updater=K||v}w.prototype.isReactComponent={},w.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},w.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function R(){}R.prototype=w.prototype;function O(A,$,K){this.props=A,this.context=$,this.refs=T,this.updater=K||v}var k=O.prototype=new R;k.constructor=O,S(k,w.prototype),k.isPureReactComponent=!0;var D=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function G(A,$,K,se,ue,xe){return K=xe.ref,{$$typeof:t,type:A,key:$,ref:K!==void 0?K:null,props:xe}}function X(A,$){return G(A.type,$,void 0,void 0,void 0,A.props)}function ie(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function ee(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return $[K]})}var le=/\/+/g;function re(A,$){return typeof A=="object"&&A!==null&&A.key!=null?ee(""+A.key):$.toString(36)}function oe(){}function te(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(oe,oe):(A.status="pending",A.then(function($){A.status==="pending"&&(A.status="fulfilled",A.value=$)},function($){A.status==="pending"&&(A.status="rejected",A.reason=$)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Y(A,$,K,se,ue){var xe=typeof A;(xe==="undefined"||xe==="boolean")&&(A=null);var fe=!1;if(A===null)fe=!0;else switch(xe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(A.$$typeof){case t:case e:fe=!0;break;case m:return fe=A._init,Y(fe(A._payload),$,K,se,ue)}}if(fe)return ue=ue(A),fe=se===""?"."+re(A,0):se,D(ue)?(K="",fe!=null&&(K=fe.replace(le,"$&/")+"/"),Y(ue,$,K,"",function(Lt){return Lt})):ue!=null&&(ie(ue)&&(ue=X(ue,K+(ue.key==null||A&&A.key===ue.key?"":(""+ue.key).replace(le,"$&/")+"/")+fe)),$.push(ue)),1;fe=0;var Ke=se===""?".":se+":";if(D(A))for(var Ve=0;Ve<A.length;Ve++)se=A[Ve],xe=Ke+re(se,Ve),fe+=Y(se,$,K,xe,ue);else if(Ve=g(A),typeof Ve=="function")for(A=Ve.call(A),Ve=0;!(se=A.next()).done;)se=se.value,xe=Ke+re(se,Ve++),fe+=Y(se,$,K,xe,ue);else if(xe==="object"){if(typeof A.then=="function")return Y(te(A),$,K,se,ue);throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return fe}function L(A,$,K){if(A==null)return A;var se=[],ue=0;return Y(A,se,"","",function(xe){return $.call(K,xe,ue++)}),se}function q(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var F=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function ne(){}return Le.Children={map:L,forEach:function(A,$,K){L(A,function(){$.apply(this,arguments)},K)},count:function(A){var $=0;return L(A,function(){$++}),$},toArray:function(A){return L(A,function($){return $})||[]},only:function(A){if(!ie(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Le.Component=w,Le.Fragment=n,Le.Profiler=r,Le.PureComponent=O,Le.StrictMode=s,Le.Suspense=h,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Le.__COMPILER_RUNTIME={__proto__:null,c:function(A){return P.H.useMemoCache(A)}},Le.cache=function(A){return function(){return A.apply(null,arguments)}},Le.cloneElement=function(A,$,K){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var se=S({},A.props),ue=A.key,xe=void 0;if($!=null)for(fe in $.ref!==void 0&&(xe=void 0),$.key!==void 0&&(ue=""+$.key),$)!H.call($,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&$.ref===void 0||(se[fe]=$[fe]);var fe=arguments.length-2;if(fe===1)se.children=K;else if(1<fe){for(var Ke=Array(fe),Ve=0;Ve<fe;Ve++)Ke[Ve]=arguments[Ve+2];se.children=Ke}return G(A.type,ue,void 0,void 0,xe,se)},Le.createContext=function(A){return A={$$typeof:l,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Le.createElement=function(A,$,K){var se,ue={},xe=null;if($!=null)for(se in $.key!==void 0&&(xe=""+$.key),$)H.call($,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ue[se]=$[se]);var fe=arguments.length-2;if(fe===1)ue.children=K;else if(1<fe){for(var Ke=Array(fe),Ve=0;Ve<fe;Ve++)Ke[Ve]=arguments[Ve+2];ue.children=Ke}if(A&&A.defaultProps)for(se in fe=A.defaultProps,fe)ue[se]===void 0&&(ue[se]=fe[se]);return G(A,xe,void 0,void 0,null,ue)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(A){return{$$typeof:u,render:A}},Le.isValidElement=ie,Le.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:q}},Le.memo=function(A,$){return{$$typeof:d,type:A,compare:$===void 0?null:$}},Le.startTransition=function(A){var $=P.T,K={};P.T=K;try{var se=A(),ue=P.S;ue!==null&&ue(K,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ne,F)}catch(xe){F(xe)}finally{P.T=$}},Le.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Le.use=function(A){return P.H.use(A)},Le.useActionState=function(A,$,K){return P.H.useActionState(A,$,K)},Le.useCallback=function(A,$){return P.H.useCallback(A,$)},Le.useContext=function(A){return P.H.useContext(A)},Le.useDebugValue=function(){},Le.useDeferredValue=function(A,$){return P.H.useDeferredValue(A,$)},Le.useEffect=function(A,$,K){var se=P.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(A,$)},Le.useId=function(){return P.H.useId()},Le.useImperativeHandle=function(A,$,K){return P.H.useImperativeHandle(A,$,K)},Le.useInsertionEffect=function(A,$){return P.H.useInsertionEffect(A,$)},Le.useLayoutEffect=function(A,$){return P.H.useLayoutEffect(A,$)},Le.useMemo=function(A,$){return P.H.useMemo(A,$)},Le.useOptimistic=function(A,$){return P.H.useOptimistic(A,$)},Le.useReducer=function(A,$,K){return P.H.useReducer(A,$,K)},Le.useRef=function(A){return P.H.useRef(A)},Le.useState=function(A){return P.H.useState(A)},Le.useSyncExternalStore=function(A,$,K){return P.H.useSyncExternalStore(A,$,K)},Le.useTransition=function(){return P.H.useTransition()},Le.version="19.1.0",Le}var n0;function ng(){return n0||(n0=1,Tp.exports=s1()),Tp.exports}var x=ng();const im=PC(x),LC=IC({__proto__:null,default:im},[x]);var Cp={exports:{}},qo={},wp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function i1(){return s0||(s0=1,function(t){function e(L,q){var F=L.length;L.push(q);e:for(;0<F;){var ne=F-1>>>1,A=L[ne];if(0<r(A,q))L[ne]=q,L[F]=A,F=ne;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var q=L[0],F=L.pop();if(F!==q){L[0]=F;e:for(var ne=0,A=L.length,$=A>>>1;ne<$;){var K=2*(ne+1)-1,se=L[K],ue=K+1,xe=L[ue];if(0>r(se,F))ue<A&&0>r(xe,se)?(L[ne]=xe,L[ue]=F,ne=ue):(L[ne]=se,L[K]=F,ne=K);else if(ue<A&&0>r(xe,F))L[ne]=xe,L[ue]=F,ne=ue;else break e}}return q}function r(L,q){var F=L.sortIndex-q.sortIndex;return F!==0?F:L.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,b=null,g=3,v=!1,S=!1,T=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function D(L){for(var q=n(d);q!==null;){if(q.callback===null)s(d);else if(q.startTime<=L)s(d),q.sortIndex=q.expirationTime,e(h,q);else break;q=n(d)}}function P(L){if(T=!1,D(L),!S)if(n(h)!==null)S=!0,H||(H=!0,re());else{var q=n(d);q!==null&&Y(P,q.startTime-L)}}var H=!1,G=-1,X=5,ie=-1;function ee(){return w?!0:!(t.unstable_now()-ie<X)}function le(){if(w=!1,H){var L=t.unstable_now();ie=L;var q=!0;try{e:{S=!1,T&&(T=!1,O(G),G=-1),v=!0;var F=g;try{t:{for(D(L),b=n(h);b!==null&&!(b.expirationTime>L&&ee());){var ne=b.callback;if(typeof ne=="function"){b.callback=null,g=b.priorityLevel;var A=ne(b.expirationTime<=L);if(L=t.unstable_now(),typeof A=="function"){b.callback=A,D(L),q=!0;break t}b===n(h)&&s(h),D(L)}else s(h);b=n(h)}if(b!==null)q=!0;else{var $=n(d);$!==null&&Y(P,$.startTime-L),q=!1}}break e}finally{b=null,g=F,v=!1}q=void 0}}finally{q?re():H=!1}}}var re;if(typeof k=="function")re=function(){k(le)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,te=oe.port2;oe.port1.onmessage=le,re=function(){te.postMessage(null)}}else re=function(){R(le,0)};function Y(L,q){G=R(function(){L(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var F=g;g=q;try{return L()}finally{g=F}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=g;g=L;try{return q()}finally{g=F}},t.unstable_scheduleCallback=function(L,q,F){var ne=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ne+F:ne):F=ne,L){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=F+A,L={id:m++,callback:q,priorityLevel:L,startTime:F,expirationTime:A,sortIndex:-1},F>ne?(L.sortIndex=F,e(d,L),n(h)===null&&L===n(d)&&(T?(O(G),G=-1):T=!0,Y(P,F-ne))):(L.sortIndex=A,e(h,L),S||v||(S=!0,H||(H=!0,re()))),L},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(L){var q=g;return function(){var F=g;g=q;try{return L.apply(this,arguments)}finally{g=F}}}}(Ep)),Ep}var i0;function r1(){return i0||(i0=1,wp.exports=i1()),wp.exports}var xp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function a1(){if(r0)return cn;r0=1;var t=ng();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,d,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:h,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(h,d,null,m)},cn.flushSync=function(h){var d=l.T,m=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=d,s.p=m,s.d.f()}},cn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},cn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},cn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,b=u(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:b,integrity:g,fetchPriority:v}):m==="script"&&s.d.X(h,{crossOrigin:b,integrity:g,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},cn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},cn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,b=u(m,d.crossOrigin);s.d.L(h,m,{crossOrigin:b,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},cn.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=u(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},cn.requestFormReset=function(h){s.d.r(h)},cn.unstable_batchedUpdates=function(h,d){return h(d)},cn.useFormState=function(h,d,m){return l.H.useFormState(h,d,m)},cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},cn.version="19.1.0",cn}var a0;function jC(){if(a0)return xp.exports;a0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xp.exports=a1(),xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function o1(){if(o0)return qo;o0=1;var t=r1(),e=ng(),n=jC();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(o(i)!==i)throw Error(s(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(s(188));return a!==i?null:i}for(var c=i,f=a;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(f=p.return,f!==null){c=f;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return u(p),i;if(y===f)return u(p),a;y=y.sibling}throw Error(s(188))}if(c.return!==f.return)c=p,f=y;else{for(var E=!1,_=p.child;_;){if(_===c){E=!0,c=p,f=y;break}if(_===f){E=!0,f=p,c=y;break}_=_.sibling}if(!E){for(_=y.child;_;){if(_===c){E=!0,c=y,f=p;break}if(_===f){E=!0,f=y,c=p;break}_=_.sibling}if(!E)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:a}function d(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=d(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case w:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case ie:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case k:return(i.displayName||"Context")+".Provider";case O:return(i._context.displayName||"Context")+".Consumer";case D:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return a=i.displayName||null,a!==null?a:te(i.type)||"Memo";case X:a=i._payload,i=i._init;try{return te(i(a))}catch{}}return null}var Y=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},ne=[],A=-1;function $(i){return{current:i}}function K(i){0>A||(i.current=ne[A],ne[A]=null,A--)}function se(i,a){A++,ne[A]=i.current,i.current=a}var ue=$(null),xe=$(null),fe=$(null),Ke=$(null);function Ve(i,a){switch(se(fe,a),se(xe,i),se(ue,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?_S(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=_S(a),i=kS(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(ue),se(ue,i)}function Lt(){K(ue),K(xe),K(fe)}function rn(i){i.memoizedState!==null&&se(Ke,i);var a=ue.current,c=kS(a,i.type);a!==c&&(se(xe,i),se(ue,c))}function ke(i){xe.current===i&&(K(ue),K(xe)),Ke.current===i&&(K(Ke),Bo._currentValue=F)}var Ue=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,Oe=t.unstable_cancelCallback,tt=t.unstable_shouldYield,ht=t.unstable_requestPaint,et=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,nt=t.unstable_UserBlockingPriority,jt=t.unstable_NormalPriority,ve=t.unstable_LowPriority,Ie=t.unstable_IdlePriority,ge=t.log,Xe=t.unstable_setDisableYieldValue,he=null,pe=null;function ye(i){if(typeof ge=="function"&&Xe(i),pe&&typeof pe.setStrictMode=="function")try{pe.setStrictMode(he,i)}catch{}}var Ne=Math.clz32?Math.clz32:Me,Xt=Math.log,pt=Math.LN2;function Me(i){return i>>>=0,i===0?32:31-(Xt(i)/pt|0)|0}var Se=256,Ht=4194304;function Sn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function qn(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var p=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var _=f&134217727;return _!==0?(f=_&~y,f!==0?p=Sn(f):(E&=_,E!==0?p=Sn(E):c||(c=_&~i,c!==0&&(p=Sn(c))))):(_=f&~y,_!==0?p=Sn(_):E!==0?p=Sn(E):c||(c=f&~i,c!==0&&(p=Sn(c)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:p}function Tn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Ir(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zc(){var i=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),i}function Ka(){var i=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),i}function Pr(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ya(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function HR(i,a,c,f,p,y){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var _=i.entanglements,N=i.expirationTimes,U=i.hiddenUpdates;for(c=E&~c;0<c;){var J=31-Ne(c),W=1<<J;_[J]=0,N[J]=-1;var B=U[J];if(B!==null)for(U[J]=null,J=0;J<B.length;J++){var V=B[J];V!==null&&(V.lane&=-536870913)}c&=~W}f!==0&&dy(i,f,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~a))}function dy(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-Ne(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&4194090}function hy(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Ne(c),p=1<<f;p&a|i[f]&a&&(i[f]|=a),c&=~p}}function ud(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function fd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function py(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:KS(i.type))}function zR(i,a){var c=q.p;try{return q.p=i,a()}finally{q.p=c}}var fi=Math.random().toString(36).slice(2),an="__reactFiber$"+fi,Cn="__reactProps$"+fi,Lr="__reactContainer$"+fi,dd="__reactEvents$"+fi,qR="__reactListeners$"+fi,GR="__reactHandles$"+fi,my="__reactResources$"+fi,Ja="__reactMarker$"+fi;function hd(i){delete i[an],delete i[Cn],delete i[dd],delete i[qR],delete i[GR]}function jr(i){var a=i[an];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Lr]||c[an]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=DS(i);i!==null;){if(c=i[an])return c;i=DS(i)}return a}i=c,c=i.parentNode}return null}function Mr(i){if(i=i[an]||i[Lr]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Xa(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Ur(i){var a=i[my];return a||(a=i[my]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function zt(i){i[Ja]=!0}var gy=new Set,yy={};function Qi(i,a){Br(i,a),Br(i+"Capture",a)}function Br(i,a){for(yy[i]=a,i=0;i<a.length;i++)gy.add(a[i])}var KR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),by={},vy={};function YR(i){return Ue.call(vy,i)?!0:Ue.call(by,i)?!1:KR.test(i)?vy[i]=!0:(by[i]=!0,!1)}function qc(i,a,c){if(YR(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function Gc(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function Ms(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}var pd,Sy;function Fr(i){if(pd===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);pd=a&&a[1]||"",Sy=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pd+i+Sy}var md=!1;function gd(i,a){if(!i||md)return"";md=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(V){var B=V}Reflect.construct(i,[],W)}else{try{W.call()}catch(V){B=V}i.call(W.prototype)}}else{try{throw Error()}catch(V){B=V}(W=i())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(V){if(V&&B&&typeof V.stack=="string")return[V.stack,B.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),E=y[0],_=y[1];if(E&&_){var N=E.split(`
`),U=_.split(`
`);for(p=f=0;f<N.length&&!N[f].includes("DetermineComponentFrameRoot");)f++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(f===N.length||p===U.length)for(f=N.length-1,p=U.length-1;1<=f&&0<=p&&N[f]!==U[p];)p--;for(;1<=f&&0<=p;f--,p--)if(N[f]!==U[p]){if(f!==1||p!==1)do if(f--,p--,0>p||N[f]!==U[p]){var J=`
`+N[f].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=f&&0<=p);break}}}finally{md=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Fr(c):""}function JR(i){switch(i.tag){case 26:case 27:case 5:return Fr(i.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return gd(i.type,!1);case 11:return gd(i.type.render,!1);case 1:return gd(i.type,!0);case 31:return Fr("Activity");default:return""}}function Ty(i){try{var a="";do a+=JR(i),i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cy(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function XR(i){var a=Cy(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(E){f=""+E,y.call(this,E)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Kc(i){i._valueTracker||(i._valueTracker=XR(i))}function wy(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=Cy(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function Yc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var QR=/[\n"\\]/g;function Kn(i){return i.replace(QR,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function yd(i,a,c,f,p,y,E,_){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Gn(a)):i.value!==""+Gn(a)&&(i.value=""+Gn(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?bd(i,E,Gn(a)):c!=null?bd(i,E,Gn(c)):f!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+Gn(_):i.removeAttribute("name")}function Ey(i,a,c,f,p,y,E,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;c=c!=null?""+Gn(c):"",a=a!=null?""+Gn(a):c,_||a===i.value||(i.value=a),i.defaultValue=a}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=_?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function bd(i,a,c){a==="number"&&Yc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Vr(i,a,c,f){if(i=i.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<i.length;c++)p=a.hasOwnProperty("$"+i[c].value),i[c].selected!==p&&(i[c].selected=p),p&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Gn(c),a=null,p=0;p<i.length;p++){if(i[p].value===c){i[p].selected=!0,f&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function xy(i,a,c){if(a!=null&&(a=""+Gn(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+Gn(c):""}function Ry(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(s(92));if(Y(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Gn(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f)}function $r(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var WR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _y(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||WR.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function ky(i,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var p in a)f=a[p],a.hasOwnProperty(p)&&c[p]!==f&&_y(i,p,f)}else for(var y in a)a.hasOwnProperty(y)&&_y(i,y,a[y])}function vd(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jc(i){return e_.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Sd=null;function Td(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hr=null,zr=null;function Oy(i){var a=Mr(i);if(a&&(i=a.stateNode)){var c=i[Cn]||null;e:switch(i=a.stateNode,a.type){case"input":if(yd(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var p=f[Cn]||null;if(!p)throw Error(s(90));yd(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&wy(f)}break e;case"textarea":xy(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Vr(i,!!c.multiple,a,!1)}}}var Cd=!1;function Ay(i,a,c){if(Cd)return i(a,c);Cd=!0;try{var f=i(a);return f}finally{if(Cd=!1,(Hr!==null||zr!==null)&&(Pl(),Hr&&(a=Hr,i=zr,zr=Hr=null,Oy(a),i)))for(a=0;a<i.length;a++)Oy(i[a])}}function Qa(i,a){var c=i.stateNode;if(c===null)return null;var f=c[Cn]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(Us)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{wd=!1}var di=null,Ed=null,Xc=null;function Ny(){if(Xc)return Xc;var i,a=Ed,c=a.length,f,p="value"in di?di.value:di.textContent,y=p.length;for(i=0;i<c&&a[i]===p[i];i++);var E=c-i;for(f=1;f<=E&&a[c-f]===p[y-f];f++);return Xc=p.slice(i,1<f?1-f:void 0)}function Qc(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Wc(){return!0}function Dy(){return!1}function wn(i){function a(c,f,p,y,E){this._reactName=c,this._targetInst=p,this.type=f,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(c=i[_],this[_]=c?c(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Wc:Dy,this.isPropagationStopped=Dy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),a}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zc=wn(Wi),Za=m({},Wi,{view:0,detail:0}),t_=wn(Za),xd,Rd,eo,el=m({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==eo&&(eo&&i.type==="mousemove"?(xd=i.screenX-eo.screenX,Rd=i.screenY-eo.screenY):Rd=xd=0,eo=i),xd)},movementY:function(i){return"movementY"in i?i.movementY:Rd}}),Iy=wn(el),n_=m({},el,{dataTransfer:0}),s_=wn(n_),i_=m({},Za,{relatedTarget:0}),_d=wn(i_),r_=m({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),a_=wn(r_),o_=m({},Wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),c_=wn(o_),l_=m({},Wi,{data:0}),Py=wn(l_),u_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h_(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=d_[i])?!!a[i]:!1}function kd(){return h_}var p_=m({},Za,{key:function(i){if(i.key){var a=u_[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Qc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?f_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(i){return i.type==="keypress"?Qc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),m_=wn(p_),g_=m({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=wn(g_),y_=m({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),b_=wn(y_),v_=m({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S_=wn(v_),T_=m({},el,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),C_=wn(T_),w_=m({},Wi,{newState:0,oldState:0}),E_=wn(w_),x_=[9,13,27,32],Od=Us&&"CompositionEvent"in window,to=null;Us&&"documentMode"in document&&(to=document.documentMode);var R_=Us&&"TextEvent"in window&&!to,jy=Us&&(!Od||to&&8<to&&11>=to),My=" ",Uy=!1;function By(i,a){switch(i){case"keyup":return x_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qr=!1;function __(i,a){switch(i){case"compositionend":return Fy(a);case"keypress":return a.which!==32?null:(Uy=!0,My);case"textInput":return i=a.data,i===My&&Uy?null:i;default:return null}}function k_(i,a){if(qr)return i==="compositionend"||!Od&&By(i,a)?(i=Ny(),Xc=Ed=di=null,qr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return jy&&a.locale!=="ko"?null:a.data;default:return null}}var O_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!O_[i.type]:a==="textarea"}function $y(i,a,c,f){Hr?zr?zr.push(f):zr=[f]:Hr=f,a=Fl(a,"onChange"),0<a.length&&(c=new Zc("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var no=null,so=null;function A_(i){CS(i,0)}function tl(i){var a=Xa(i);if(wy(a))return i}function Hy(i,a){if(i==="change")return a}var zy=!1;if(Us){var Ad;if(Us){var Nd="oninput"in document;if(!Nd){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Nd=typeof qy.oninput=="function"}Ad=Nd}else Ad=!1;zy=Ad&&(!document.documentMode||9<document.documentMode)}function Gy(){no&&(no.detachEvent("onpropertychange",Ky),so=no=null)}function Ky(i){if(i.propertyName==="value"&&tl(so)){var a=[];$y(a,so,i,Td(i)),Ay(A_,a)}}function N_(i,a,c){i==="focusin"?(Gy(),no=a,so=c,no.attachEvent("onpropertychange",Ky)):i==="focusout"&&Gy()}function D_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return tl(so)}function I_(i,a){if(i==="click")return tl(a)}function P_(i,a){if(i==="input"||i==="change")return tl(a)}function L_(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Ln=typeof Object.is=="function"?Object.is:L_;function io(i,a){if(Ln(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var p=c[f];if(!Ue.call(a,p)||!Ln(i[p],a[p]))return!1}return!0}function Yy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jy(i,a){var c=Yy(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Yy(c)}}function Xy(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Xy(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Qy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Yc(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=Yc(i.document)}return a}function Dd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var j_=Us&&"documentMode"in document&&11>=document.documentMode,Gr=null,Id=null,ro=null,Pd=!1;function Wy(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Pd||Gr==null||Gr!==Yc(f)||(f=Gr,"selectionStart"in f&&Dd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ro&&io(ro,f)||(ro=f,f=Fl(Id,"onSelect"),0<f.length&&(a=new Zc("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=Gr)))}function Zi(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Kr={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Ld={},Zy={};Us&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function er(i){if(Ld[i])return Ld[i];if(!Kr[i])return i;var a=Kr[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Zy)return Ld[i]=a[c];return i}var eb=er("animationend"),tb=er("animationiteration"),nb=er("animationstart"),M_=er("transitionrun"),U_=er("transitionstart"),B_=er("transitioncancel"),sb=er("transitionend"),ib=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function is(i,a){ib.set(i,a),Qi(a,[i])}var rb=new WeakMap;function Yn(i,a){if(typeof i=="object"&&i!==null){var c=rb.get(i);return c!==void 0?c:(a={value:i,source:a,stack:Ty(a)},rb.set(i,a),a)}return{value:i,source:a,stack:Ty(a)}}var Jn=[],Yr=0,Md=0;function nl(){for(var i=Yr,a=Md=Yr=0;a<i;){var c=Jn[a];Jn[a++]=null;var f=Jn[a];Jn[a++]=null;var p=Jn[a];Jn[a++]=null;var y=Jn[a];if(Jn[a++]=null,f!==null&&p!==null){var E=f.pending;E===null?p.next=p:(p.next=E.next,E.next=p),f.pending=p}y!==0&&ab(c,p,y)}}function sl(i,a,c,f){Jn[Yr++]=i,Jn[Yr++]=a,Jn[Yr++]=c,Jn[Yr++]=f,Md|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Ud(i,a,c,f){return sl(i,a,c,f),il(i)}function Jr(i,a){return sl(i,null,null,a),il(i)}function ab(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var p=!1,y=i.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&a!==null&&(p=31-Ne(c),i=y.hiddenUpdates,f=i[p],f===null?i[p]=[a]:f.push(a),a.lane=c|536870912),y):null}function il(i){if(50<No)throw No=0,zh=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Xr={};function F_(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,a,c,f){return new F_(i,a,c,f)}function Bd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bs(i,a){var c=i.alternate;return c===null?(c=jn(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function ob(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function rl(i,a,c,f,p,y){var E=0;if(f=i,typeof i=="function")Bd(i)&&(E=1);else if(typeof i=="string")E=$k(i,c,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ie:return i=jn(31,c,a,p),i.elementType=ie,i.lanes=y,i;case S:return tr(c.children,p,y,a);case T:E=8,p|=24;break;case w:return i=jn(12,c,a,p|2),i.elementType=w,i.lanes=y,i;case P:return i=jn(13,c,a,p),i.elementType=P,i.lanes=y,i;case H:return i=jn(19,c,a,p),i.elementType=H,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:case k:E=10;break e;case O:E=9;break e;case D:E=11;break e;case G:E=14;break e;case X:E=16,f=null;break e}E=29,c=Error(s(130,i===null?"null":typeof i,"")),f=null}return a=jn(E,c,a,p),a.elementType=i,a.type=f,a.lanes=y,a}function tr(i,a,c,f){return i=jn(7,i,f,a),i.lanes=c,i}function Fd(i,a,c){return i=jn(6,i,null,a),i.lanes=c,i}function Vd(i,a,c){return a=jn(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Qr=[],Wr=0,al=null,ol=0,Xn=[],Qn=0,nr=null,Fs=1,Vs="";function sr(i,a){Qr[Wr++]=ol,Qr[Wr++]=al,al=i,ol=a}function cb(i,a,c){Xn[Qn++]=Fs,Xn[Qn++]=Vs,Xn[Qn++]=nr,nr=i;var f=Fs;i=Vs;var p=32-Ne(f)-1;f&=~(1<<p),c+=1;var y=32-Ne(a)+p;if(30<y){var E=p-p%5;y=(f&(1<<E)-1).toString(32),f>>=E,p-=E,Fs=1<<32-Ne(a)+p|c<<p|f,Vs=y+i}else Fs=1<<y|c<<p|f,Vs=i}function $d(i){i.return!==null&&(sr(i,1),cb(i,1,0))}function Hd(i){for(;i===al;)al=Qr[--Wr],Qr[Wr]=null,ol=Qr[--Wr],Qr[Wr]=null;for(;i===nr;)nr=Xn[--Qn],Xn[Qn]=null,Vs=Xn[--Qn],Xn[Qn]=null,Fs=Xn[--Qn],Xn[Qn]=null}var mn=null,Ct=null,Qe=!1,ir=null,Ss=!1,zd=Error(s(519));function rr(i){var a=Error(s(418,""));throw co(Yn(a,i)),zd}function lb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[an]=i,a[Cn]=f,c){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(c=0;c<Io.length;c++)He(Io[c],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),Ey(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Kc(a);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),Ry(a,f.value,f.defaultValue,f.children),Kc(a)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||RS(a.textContent,c)?(f.popover!=null&&(He("beforetoggle",a),He("toggle",a)),f.onScroll!=null&&He("scroll",a),f.onScrollEnd!=null&&He("scrollend",a),f.onClick!=null&&(a.onclick=Vl),a=!0):a=!1,a||rr(i)}function ub(i){for(mn=i.return;mn;)switch(mn.tag){case 5:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:mn=mn.return}}function ao(i){if(i!==mn)return!1;if(!Qe)return ub(i),Qe=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||ap(i.type,i.memoizedProps)),c=!c),c&&Ct&&rr(i),ub(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(a===0){Ct=as(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;i=i.nextSibling}Ct=null}}else a===27?(a=Ct,ki(i.type)?(i=up,up=null,Ct=i):Ct=a):Ct=mn?as(i.stateNode.nextSibling):null;return!0}function oo(){Ct=mn=null,Qe=!1}function fb(){var i=ir;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),ir=null),i}function co(i){ir===null?ir=[i]:ir.push(i)}var qd=$(null),ar=null,$s=null;function hi(i,a,c){se(qd,a._currentValue),a._currentValue=c}function Hs(i){i._currentValue=qd.current,K(qd)}function Gd(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function Kd(i,a,c,f){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var _=y;y=p;for(var N=0;N<a.length;N++)if(_.context===a[N]){y.lanes|=c,_=y.alternate,_!==null&&(_.lanes|=c),Gd(y.return,c,i),f||(E=null);break e}y=_.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(s(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),Gd(E,c,i),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===i){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function lo(i,a,c,f){i=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var _=p.type;Ln(p.pendingProps.value,E.value)||(i!==null?i.push(_):i=[_])}}else if(p===Ke.current){if(E=p.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Bo):i=[Bo])}p=p.return}i!==null&&Kd(a,i,c,f),a.flags|=262144}function cl(i){for(i=i.firstContext;i!==null;){if(!Ln(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function or(i){ar=i,$s=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function on(i){return db(ar,i)}function ll(i,a){return ar===null&&or(i),db(i,a)}function db(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},$s===null){if(i===null)throw Error(s(308));$s=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else $s=$s.next=a;return c}var V_=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},$_=t.unstable_scheduleCallback,H_=t.unstable_NormalPriority,Mt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new V_,data:new Map,refCount:0}}function uo(i){i.refCount--,i.refCount===0&&$_(H_,function(){i.controller.abort()})}var fo=null,Jd=0,Zr=0,ea=null;function z_(i,a){if(fo===null){var c=fo=[];Jd=0,Zr=Qh(),ea={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Jd++,a.then(hb,hb),a}function hb(){if(--Jd===0&&fo!==null){ea!==null&&(ea.status="fulfilled");var i=fo;fo=null,Zr=0,ea=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function q_(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(f.status="rejected",f.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),f}var pb=L.S;L.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&z_(i,a),pb!==null&&pb(i,a)};var cr=$(null);function Xd(){var i=cr.current;return i!==null?i:ft.pooledCache}function ul(i,a){a===null?se(cr,cr.current):se(cr,a.pool)}function mb(){var i=Xd();return i===null?null:{parent:Mt._currentValue,pool:i}}var ho=Error(s(460)),gb=Error(s(474)),fl=Error(s(542)),Qd={then:function(){}};function yb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dl(){}function bb(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(dl,dl),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Sb(i),i;default:if(typeof a.status=="string")a.then(dl,dl);else{if(i=ft,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=f}},function(f){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Sb(i),i}throw po=a,ho}}var po=null;function vb(){if(po===null)throw Error(s(459));var i=po;return po=null,i}function Sb(i){if(i===ho||i===fl)throw Error(s(483))}var pi=!1;function Wd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function mi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(st&2)!==0){var p=f.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),f.pending=a,a=il(i),ab(i,null,c),a}return sl(i,f,a,c),il(i)}function mo(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,hy(i,c)}}function eh(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?p=y=a:y=y.next=a}else p=y=a;c={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var th=!1;function go(){if(th){var i=ea;if(i!==null)throw i}}function yo(i,a,c,f){th=!1;var p=i.updateQueue;pi=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var N=_,U=N.next;N.next=null,E===null?y=U:E.next=U,E=N;var J=i.alternate;J!==null&&(J=J.updateQueue,_=J.lastBaseUpdate,_!==E&&(_===null?J.firstBaseUpdate=U:_.next=U,J.lastBaseUpdate=N))}if(y!==null){var W=p.baseState;E=0,J=U=N=null,_=y;do{var B=_.lane&-536870913,V=B!==_.lane;if(V?(Ge&B)===B:(f&B)===B){B!==0&&B===Zr&&(th=!0),J!==null&&(J=J.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var _e=i,Ce=_;B=a;var ct=c;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){W=_e.call(ct,W,B);break e}W=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,B=typeof _e=="function"?_e.call(ct,W,B):_e,B==null)break e;W=m({},W,B);break e;case 2:pi=!0}}B=_.callback,B!==null&&(i.flags|=64,V&&(i.flags|=8192),V=p.callbacks,V===null?p.callbacks=[B]:V.push(B))}else V={lane:B,tag:_.tag,payload:_.payload,callback:_.callback,next:null},J===null?(U=J=V,N=W):J=J.next=V,E|=B;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;V=_,_=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);J===null&&(N=W),p.baseState=N,p.firstBaseUpdate=U,p.lastBaseUpdate=J,y===null&&(p.shared.lanes=0),Ei|=E,i.lanes=E,i.memoizedState=W}}function Tb(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function Cb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Tb(c[i],a)}var ta=$(null),hl=$(0);function wb(i,a){i=Xs,se(hl,i),se(ta,a),Xs=i|a.baseLanes}function nh(){se(hl,Xs),se(ta,ta.current)}function sh(){Xs=hl.current,K(ta),K(hl)}var yi=0,Be=null,at=null,Nt=null,pl=!1,na=!1,lr=!1,ml=0,bo=0,sa=null,G_=0;function _t(){throw Error(s(321))}function ih(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Ln(i[c],a[c]))return!1;return!0}function rh(i,a,c,f,p,y){return yi=y,Be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=i===null||i.memoizedState===null?av:ov,lr=!1,y=c(f,p),lr=!1,na&&(y=xb(a,c,f,p)),Eb(i),y}function Eb(i){L.H=Tl;var a=at!==null&&at.next!==null;if(yi=0,Nt=at=Be=null,pl=!1,bo=0,sa=null,a)throw Error(s(300));i===null||qt||(i=i.dependencies,i!==null&&cl(i)&&(qt=!0))}function xb(i,a,c,f){Be=i;var p=0;do{if(na&&(sa=null),bo=0,na=!1,25<=p)throw Error(s(301));if(p+=1,Nt=at=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}L.H=Z_,y=a(c,f)}while(na);return y}function K_(){var i=L.H,a=i.useState()[0];return a=typeof a.then=="function"?vo(a):a,i=i.useState()[0],(at!==null?at.memoizedState:null)!==i&&(Be.flags|=1024),a}function ah(){var i=ml!==0;return ml=0,i}function oh(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function ch(i){if(pl){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}pl=!1}yi=0,Nt=at=Be=null,na=!1,bo=ml=0,sa=null}function En(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Be.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Dt(){if(at===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=at.next;var a=Nt===null?Be.memoizedState:Nt.next;if(a!==null)Nt=a,at=i;else{if(i===null)throw Be.alternate===null?Error(s(467)):Error(s(310));at=i,i={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Nt===null?Be.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(i){var a=bo;return bo+=1,sa===null&&(sa=[]),i=bb(sa,i,a),a=Be,(Nt===null?a.memoizedState:Nt.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?av:ov),i}function gl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vo(i);if(i.$$typeof===k)return on(i)}throw Error(s(438,String(i)))}function uh(i){var a=null,c=Be.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=lh(),Be.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=ee;return a.index++,c}function zs(i,a){return typeof a=="function"?a(i):a}function yl(i){var a=Dt();return fh(a,at,i)}function fh(i,a,c){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var p=i.baseQueue,y=f.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}a.baseQueue=p=y,f.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{a=p.next;var _=E=null,N=null,U=a,J=!1;do{var W=U.lane&-536870913;if(W!==U.lane?(Ge&W)===W:(yi&W)===W){var B=U.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),W===Zr&&(J=!0);else if((yi&B)===B){U=U.next,B===Zr&&(J=!0);continue}else W={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(_=N=W,E=y):N=N.next=W,Be.lanes|=B,Ei|=B;W=U.action,lr&&c(y,W),y=U.hasEagerState?U.eagerState:c(y,W)}else B={lane:W,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(_=N=B,E=y):N=N.next=B,Be.lanes|=W,Ei|=W;U=U.next}while(U!==null&&U!==a);if(N===null?E=y:N.next=_,!Ln(y,i.memoizedState)&&(qt=!0,J&&(c=ea,c!==null)))throw c;i.memoizedState=y,i.baseState=E,i.baseQueue=N,f.lastRenderedState=y}return p===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function dh(i){var a=Dt(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var f=c.dispatch,p=c.pending,y=a.memoizedState;if(p!==null){c.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Ln(y,a.memoizedState)||(qt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function Rb(i,a,c){var f=Be,p=Dt(),y=Qe;if(y){if(c===void 0)throw Error(s(407));c=c()}else c=a();var E=!Ln((at||p).memoizedState,c);E&&(p.memoizedState=c,qt=!0),p=p.queue;var _=Ob.bind(null,f,p,i);if(So(2048,8,_,[i]),p.getSnapshot!==a||E||Nt!==null&&Nt.memoizedState.tag&1){if(f.flags|=2048,ia(9,bl(),kb.bind(null,f,p,c,a),null),ft===null)throw Error(s(349));y||(yi&124)!==0||_b(f,a,c)}return c}function _b(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Be.updateQueue,a===null?(a=lh(),Be.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function kb(i,a,c,f){a.value=c,a.getSnapshot=f,Ab(a)&&Nb(i)}function Ob(i,a,c){return c(function(){Ab(a)&&Nb(i)})}function Ab(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Ln(i,c)}catch{return!0}}function Nb(i){var a=Jr(i,2);a!==null&&Vn(a,i,2)}function hh(i){var a=En();if(typeof i=="function"){var c=i;if(i=c(),lr){ye(!0);try{c()}finally{ye(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:i},a}function Db(i,a,c,f){return i.baseState=c,fh(i,at,typeof f=="function"?f:zs)}function Y_(i,a,c,f,p){if(Sl(i))throw Error(s(485));if(i=a.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};L.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,Ib(a,y)):(y.next=c.next,a.pending=c.next=y)}}function Ib(i,a){var c=a.action,f=a.payload,p=i.state;if(a.isTransition){var y=L.T,E={};L.T=E;try{var _=c(p,f),N=L.S;N!==null&&N(E,_),Pb(i,a,_)}catch(U){ph(i,a,U)}finally{L.T=y}}else try{y=c(p,f),Pb(i,a,y)}catch(U){ph(i,a,U)}}function Pb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Lb(i,a,f)},function(f){return ph(i,a,f)}):Lb(i,a,c)}function Lb(i,a,c){a.status="fulfilled",a.value=c,jb(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Ib(i,c)))}function ph(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,jb(a),a=a.next;while(a!==f)}i.action=null}function jb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Mb(i,a){return a}function Ub(i,a){if(Qe){var c=ft.formState;if(c!==null){e:{var f=Be;if(Qe){if(Ct){t:{for(var p=Ct,y=Ss;p.nodeType!==8;){if(!y){p=null;break t}if(p=as(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ct=as(p.nextSibling),f=p.data==="F!";break e}}rr(f)}f=!1}f&&(a=c[0])}}return c=En(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mb,lastRenderedState:a},c.queue=f,c=sv.bind(null,Be,f),f.dispatch=c,f=hh(!1),y=vh.bind(null,Be,!1,f.queue),f=En(),p={state:a,dispatch:null,action:i,pending:null},f.queue=p,c=Y_.bind(null,Be,p,y,c),p.dispatch=c,f.memoizedState=i,[a,c,!1]}function Bb(i){var a=Dt();return Fb(a,at,i)}function Fb(i,a,c){if(a=fh(i,a,Mb)[0],i=yl(zs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=vo(a)}catch(E){throw E===ho?fl:E}else f=a;a=Dt();var p=a.queue,y=p.dispatch;return c!==a.memoizedState&&(Be.flags|=2048,ia(9,bl(),J_.bind(null,p,c),null)),[f,y,i]}function J_(i,a){i.action=a}function Vb(i){var a=Dt(),c=at;if(c!==null)return Fb(a,c,i);Dt(),a=a.memoizedState,c=Dt();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function ia(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=Be.updateQueue,a===null&&(a=lh(),Be.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function bl(){return{destroy:void 0,resource:void 0}}function $b(){return Dt().memoizedState}function vl(i,a,c,f){var p=En();f=f===void 0?null:f,Be.flags|=i,p.memoizedState=ia(1|a,bl(),c,f)}function So(i,a,c,f){var p=Dt();f=f===void 0?null:f;var y=p.memoizedState.inst;at!==null&&f!==null&&ih(f,at.memoizedState.deps)?p.memoizedState=ia(a,y,c,f):(Be.flags|=i,p.memoizedState=ia(1|a,y,c,f))}function Hb(i,a){vl(8390656,8,i,a)}function zb(i,a){So(2048,8,i,a)}function qb(i,a){return So(4,2,i,a)}function Gb(i,a){return So(4,4,i,a)}function Kb(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Yb(i,a,c){c=c!=null?c.concat([i]):null,So(4,4,Kb.bind(null,a,i),c)}function mh(){}function Jb(i,a){var c=Dt();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&ih(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function Xb(i,a){var c=Dt();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&ih(a,f[1]))return f[0];if(f=i(),lr){ye(!0);try{i()}finally{ye(!1)}}return c.memoizedState=[f,a],f}function gh(i,a,c){return c===void 0||(yi&1073741824)!==0?i.memoizedState=a:(i.memoizedState=c,i=Zv(),Be.lanes|=i,Ei|=i,c)}function Qb(i,a,c,f){return Ln(c,a)?c:ta.current!==null?(i=gh(i,c,f),Ln(i,a)||(qt=!0),i):(yi&42)===0?(qt=!0,i.memoizedState=c):(i=Zv(),Be.lanes|=i,Ei|=i,a)}function Wb(i,a,c,f,p){var y=q.p;q.p=y!==0&&8>y?y:8;var E=L.T,_={};L.T=_,vh(i,!1,a,c);try{var N=p(),U=L.S;if(U!==null&&U(_,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=q_(N,f);To(i,a,J,Fn(i))}else To(i,a,f,Fn(i))}catch(W){To(i,a,{then:function(){},status:"rejected",reason:W},Fn())}finally{q.p=y,L.T=E}}function X_(){}function yh(i,a,c,f){if(i.tag!==5)throw Error(s(476));var p=Zb(i).queue;Wb(i,p,a,F,c===null?X_:function(){return ev(i),c(f)})}function Zb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:F},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function ev(i){var a=Zb(i).next.queue;To(i,a,{},Fn())}function bh(){return on(Bo)}function tv(){return Dt().memoizedState}function nv(){return Dt().memoizedState}function Q_(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Fn();i=mi(c);var f=gi(a,i,c);f!==null&&(Vn(f,a,c),mo(f,a,c)),a={cache:Yd()},i.payload=a;return}a=a.return}}function W_(i,a,c){var f=Fn();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Sl(i)?iv(a,c):(c=Ud(i,a,c,f),c!==null&&(Vn(c,i,f),rv(c,a,f)))}function sv(i,a,c){var f=Fn();To(i,a,c,f)}function To(i,a,c,f){var p={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Sl(i))iv(a,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,_=y(E,c);if(p.hasEagerState=!0,p.eagerState=_,Ln(_,E))return sl(i,a,p,0),ft===null&&nl(),!1}catch{}finally{}if(c=Ud(i,a,p,f),c!==null)return Vn(c,i,f),rv(c,a,f),!0}return!1}function vh(i,a,c,f){if(f={lane:2,revertLane:Qh(),action:f,hasEagerState:!1,eagerState:null,next:null},Sl(i)){if(a)throw Error(s(479))}else a=Ud(i,c,f,2),a!==null&&Vn(a,i,2)}function Sl(i){var a=i.alternate;return i===Be||a!==null&&a===Be}function iv(i,a){na=pl=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function rv(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,hy(i,c)}}var Tl={readContext:on,use:gl,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},av={readContext:on,use:gl,useCallback:function(i,a){return En().memoizedState=[i,a===void 0?null:a],i},useContext:on,useEffect:Hb,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,vl(4194308,4,Kb.bind(null,a,i),c)},useLayoutEffect:function(i,a){return vl(4194308,4,i,a)},useInsertionEffect:function(i,a){vl(4,2,i,a)},useMemo:function(i,a){var c=En();a=a===void 0?null:a;var f=i();if(lr){ye(!0);try{i()}finally{ye(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=En();if(c!==void 0){var p=c(a);if(lr){ye(!0);try{c(a)}finally{ye(!1)}}}else p=a;return f.memoizedState=f.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},f.queue=i,i=i.dispatch=W_.bind(null,Be,i),[f.memoizedState,i]},useRef:function(i){var a=En();return i={current:i},a.memoizedState=i},useState:function(i){i=hh(i);var a=i.queue,c=sv.bind(null,Be,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:mh,useDeferredValue:function(i,a){var c=En();return gh(c,i,a)},useTransition:function(){var i=hh(!1);return i=Wb.bind(null,Be,i.queue,!0,!1),En().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=Be,p=En();if(Qe){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),ft===null)throw Error(s(349));(Ge&124)!==0||_b(f,a,c)}p.memoizedState=c;var y={value:c,getSnapshot:a};return p.queue=y,Hb(Ob.bind(null,f,y,i),[i]),f.flags|=2048,ia(9,bl(),kb.bind(null,f,y,c,a),null),c},useId:function(){var i=En(),a=ft.identifierPrefix;if(Qe){var c=Vs,f=Fs;c=(f&~(1<<32-Ne(f)-1)).toString(32)+c,a=""+a+"R"+c,c=ml++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=G_++,a=""+a+"r"+c.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:bh,useFormState:Ub,useActionState:Ub,useOptimistic:function(i){var a=En();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=vh.bind(null,Be,!0,c),c.dispatch=a,[i,a]},useMemoCache:uh,useCacheRefresh:function(){return En().memoizedState=Q_.bind(null,Be)}},ov={readContext:on,use:gl,useCallback:Jb,useContext:on,useEffect:zb,useImperativeHandle:Yb,useInsertionEffect:qb,useLayoutEffect:Gb,useMemo:Xb,useReducer:yl,useRef:$b,useState:function(){return yl(zs)},useDebugValue:mh,useDeferredValue:function(i,a){var c=Dt();return Qb(c,at.memoizedState,i,a)},useTransition:function(){var i=yl(zs)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:vo(i),a]},useSyncExternalStore:Rb,useId:tv,useHostTransitionStatus:bh,useFormState:Bb,useActionState:Bb,useOptimistic:function(i,a){var c=Dt();return Db(c,at,i,a)},useMemoCache:uh,useCacheRefresh:nv},Z_={readContext:on,use:gl,useCallback:Jb,useContext:on,useEffect:zb,useImperativeHandle:Yb,useInsertionEffect:qb,useLayoutEffect:Gb,useMemo:Xb,useReducer:dh,useRef:$b,useState:function(){return dh(zs)},useDebugValue:mh,useDeferredValue:function(i,a){var c=Dt();return at===null?gh(c,i,a):Qb(c,at.memoizedState,i,a)},useTransition:function(){var i=dh(zs)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:vo(i),a]},useSyncExternalStore:Rb,useId:tv,useHostTransitionStatus:bh,useFormState:Vb,useActionState:Vb,useOptimistic:function(i,a){var c=Dt();return at!==null?Db(c,at,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:uh,useCacheRefresh:nv},ra=null,Co=0;function Cl(i){var a=Co;return Co+=1,ra===null&&(ra=[]),bb(ra,i,a)}function wo(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function wl(i,a){throw a.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function cv(i){var a=i._init;return a(i._payload)}function lv(i){function a(j,I){if(i){var M=j.deletions;M===null?(j.deletions=[I],j.flags|=16):M.push(I)}}function c(j,I){if(!i)return null;for(;I!==null;)a(j,I),I=I.sibling;return null}function f(j){for(var I=new Map;j!==null;)j.key!==null?I.set(j.key,j):I.set(j.index,j),j=j.sibling;return I}function p(j,I){return j=Bs(j,I),j.index=0,j.sibling=null,j}function y(j,I,M){return j.index=M,i?(M=j.alternate,M!==null?(M=M.index,M<I?(j.flags|=67108866,I):M):(j.flags|=67108866,I)):(j.flags|=1048576,I)}function E(j){return i&&j.alternate===null&&(j.flags|=67108866),j}function _(j,I,M,Q){return I===null||I.tag!==6?(I=Fd(M,j.mode,Q),I.return=j,I):(I=p(I,M),I.return=j,I)}function N(j,I,M,Q){var me=M.type;return me===S?J(j,I,M.props.children,Q,M.key):I!==null&&(I.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&cv(me)===I.type)?(I=p(I,M.props),wo(I,M),I.return=j,I):(I=rl(M.type,M.key,M.props,null,j.mode,Q),wo(I,M),I.return=j,I)}function U(j,I,M,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==M.containerInfo||I.stateNode.implementation!==M.implementation?(I=Vd(M,j.mode,Q),I.return=j,I):(I=p(I,M.children||[]),I.return=j,I)}function J(j,I,M,Q,me){return I===null||I.tag!==7?(I=tr(M,j.mode,Q,me),I.return=j,I):(I=p(I,M),I.return=j,I)}function W(j,I,M){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Fd(""+I,j.mode,M),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case g:return M=rl(I.type,I.key,I.props,null,j.mode,M),wo(M,I),M.return=j,M;case v:return I=Vd(I,j.mode,M),I.return=j,I;case X:var Q=I._init;return I=Q(I._payload),W(j,I,M)}if(Y(I)||re(I))return I=tr(I,j.mode,M,null),I.return=j,I;if(typeof I.then=="function")return W(j,Cl(I),M);if(I.$$typeof===k)return W(j,ll(j,I),M);wl(j,I)}return null}function B(j,I,M,Q){var me=I!==null?I.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return me!==null?null:_(j,I,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case g:return M.key===me?N(j,I,M,Q):null;case v:return M.key===me?U(j,I,M,Q):null;case X:return me=M._init,M=me(M._payload),B(j,I,M,Q)}if(Y(M)||re(M))return me!==null?null:J(j,I,M,Q,null);if(typeof M.then=="function")return B(j,I,Cl(M),Q);if(M.$$typeof===k)return B(j,I,ll(j,M),Q);wl(j,M)}return null}function V(j,I,M,Q,me){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return j=j.get(M)||null,_(I,j,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case g:return j=j.get(Q.key===null?M:Q.key)||null,N(I,j,Q,me);case v:return j=j.get(Q.key===null?M:Q.key)||null,U(I,j,Q,me);case X:var Fe=Q._init;return Q=Fe(Q._payload),V(j,I,M,Q,me)}if(Y(Q)||re(Q))return j=j.get(M)||null,J(I,j,Q,me,null);if(typeof Q.then=="function")return V(j,I,M,Cl(Q),me);if(Q.$$typeof===k)return V(j,I,M,ll(I,Q),me);wl(I,Q)}return null}function _e(j,I,M,Q){for(var me=null,Fe=null,be=I,Ee=I=0,Kt=null;be!==null&&Ee<M.length;Ee++){be.index>Ee?(Kt=be,be=null):Kt=be.sibling;var Je=B(j,be,M[Ee],Q);if(Je===null){be===null&&(be=Kt);break}i&&be&&Je.alternate===null&&a(j,be),I=y(Je,I,Ee),Fe===null?me=Je:Fe.sibling=Je,Fe=Je,be=Kt}if(Ee===M.length)return c(j,be),Qe&&sr(j,Ee),me;if(be===null){for(;Ee<M.length;Ee++)be=W(j,M[Ee],Q),be!==null&&(I=y(be,I,Ee),Fe===null?me=be:Fe.sibling=be,Fe=be);return Qe&&sr(j,Ee),me}for(be=f(be);Ee<M.length;Ee++)Kt=V(be,j,Ee,M[Ee],Q),Kt!==null&&(i&&Kt.alternate!==null&&be.delete(Kt.key===null?Ee:Kt.key),I=y(Kt,I,Ee),Fe===null?me=Kt:Fe.sibling=Kt,Fe=Kt);return i&&be.forEach(function(Ii){return a(j,Ii)}),Qe&&sr(j,Ee),me}function Ce(j,I,M,Q){if(M==null)throw Error(s(151));for(var me=null,Fe=null,be=I,Ee=I=0,Kt=null,Je=M.next();be!==null&&!Je.done;Ee++,Je=M.next()){be.index>Ee?(Kt=be,be=null):Kt=be.sibling;var Ii=B(j,be,Je.value,Q);if(Ii===null){be===null&&(be=Kt);break}i&&be&&Ii.alternate===null&&a(j,be),I=y(Ii,I,Ee),Fe===null?me=Ii:Fe.sibling=Ii,Fe=Ii,be=Kt}if(Je.done)return c(j,be),Qe&&sr(j,Ee),me;if(be===null){for(;!Je.done;Ee++,Je=M.next())Je=W(j,Je.value,Q),Je!==null&&(I=y(Je,I,Ee),Fe===null?me=Je:Fe.sibling=Je,Fe=Je);return Qe&&sr(j,Ee),me}for(be=f(be);!Je.done;Ee++,Je=M.next())Je=V(be,j,Ee,Je.value,Q),Je!==null&&(i&&Je.alternate!==null&&be.delete(Je.key===null?Ee:Je.key),I=y(Je,I,Ee),Fe===null?me=Je:Fe.sibling=Je,Fe=Je);return i&&be.forEach(function(e1){return a(j,e1)}),Qe&&sr(j,Ee),me}function ct(j,I,M,Q){if(typeof M=="object"&&M!==null&&M.type===S&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case g:e:{for(var me=M.key;I!==null;){if(I.key===me){if(me=M.type,me===S){if(I.tag===7){c(j,I.sibling),Q=p(I,M.props.children),Q.return=j,j=Q;break e}}else if(I.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&cv(me)===I.type){c(j,I.sibling),Q=p(I,M.props),wo(Q,M),Q.return=j,j=Q;break e}c(j,I);break}else a(j,I);I=I.sibling}M.type===S?(Q=tr(M.props.children,j.mode,Q,M.key),Q.return=j,j=Q):(Q=rl(M.type,M.key,M.props,null,j.mode,Q),wo(Q,M),Q.return=j,j=Q)}return E(j);case v:e:{for(me=M.key;I!==null;){if(I.key===me)if(I.tag===4&&I.stateNode.containerInfo===M.containerInfo&&I.stateNode.implementation===M.implementation){c(j,I.sibling),Q=p(I,M.children||[]),Q.return=j,j=Q;break e}else{c(j,I);break}else a(j,I);I=I.sibling}Q=Vd(M,j.mode,Q),Q.return=j,j=Q}return E(j);case X:return me=M._init,M=me(M._payload),ct(j,I,M,Q)}if(Y(M))return _e(j,I,M,Q);if(re(M)){if(me=re(M),typeof me!="function")throw Error(s(150));return M=me.call(M),Ce(j,I,M,Q)}if(typeof M.then=="function")return ct(j,I,Cl(M),Q);if(M.$$typeof===k)return ct(j,I,ll(j,M),Q);wl(j,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,I!==null&&I.tag===6?(c(j,I.sibling),Q=p(I,M),Q.return=j,j=Q):(c(j,I),Q=Fd(M,j.mode,Q),Q.return=j,j=Q),E(j)):c(j,I)}return function(j,I,M,Q){try{Co=0;var me=ct(j,I,M,Q);return ra=null,me}catch(be){if(be===ho||be===fl)throw be;var Fe=jn(29,be,null,j.mode);return Fe.lanes=Q,Fe.return=j,Fe}finally{}}}var aa=lv(!0),uv=lv(!1),Wn=$(null),Ts=null;function bi(i){var a=i.alternate;se(Ut,Ut.current&1),se(Wn,i),Ts===null&&(a===null||ta.current!==null||a.memoizedState!==null)&&(Ts=i)}function fv(i){if(i.tag===22){if(se(Ut,Ut.current),se(Wn,i),Ts===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Ts=i)}}else vi()}function vi(){se(Ut,Ut.current),se(Wn,Wn.current)}function qs(i){K(Wn),Ts===i&&(Ts=null),K(Ut)}var Ut=$(0);function El(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||lp(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Sh(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Th={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Fn(),p=mi(f);p.payload=a,c!=null&&(p.callback=c),a=gi(i,p,f),a!==null&&(Vn(a,i,f),mo(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Fn(),p=mi(f);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=gi(i,p,f),a!==null&&(Vn(a,i,f),mo(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Fn(),f=mi(c);f.tag=2,a!=null&&(f.callback=a),a=gi(i,f,c),a!==null&&(Vn(a,i,c),mo(a,i,c))}};function dv(i,a,c,f,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,E):a.prototype&&a.prototype.isPureReactComponent?!io(c,f)||!io(p,y):!0}function hv(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Th.enqueueReplaceState(a,a.state,null)}function ur(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var p in i)c[p]===void 0&&(c[p]=i[p])}return c}var xl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function pv(i){xl(i)}function mv(i){console.error(i)}function gv(i){xl(i)}function Rl(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function yv(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ch(i,a,c){return c=mi(c),c.tag=3,c.payload={element:null},c.callback=function(){Rl(i,a)},c}function bv(i){return i=mi(i),i.tag=3,i}function vv(i,a,c,f){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=f.value;i.payload=function(){return p(y)},i.callback=function(){yv(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){yv(a,c,f),typeof p!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var _=f.stack;this.componentDidCatch(f.value,{componentStack:_!==null?_:""})})}function ek(i,a,c,f,p){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&lo(a,c,p,!0),c=Wn.current,c!==null){switch(c.tag){case 13:return Ts===null?Gh():c.alternate===null&&wt===0&&(wt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,f===Qd?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),Yh(i,f,p)),!1;case 22:return c.flags|=65536,f===Qd?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),Yh(i,f,p)),!1}throw Error(s(435,c.tag))}return Yh(i,f,p),Gh(),!1}if(Qe)return a=Wn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,f!==zd&&(i=Error(s(422),{cause:f}),co(Yn(i,c)))):(f!==zd&&(a=Error(s(423),{cause:f}),co(Yn(a,c))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,f=Yn(f,c),p=Ch(i.stateNode,f,p),eh(i,p),wt!==4&&(wt=2)),!1;var y=Error(s(520),{cause:f});if(y=Yn(y,c),Ao===null?Ao=[y]:Ao.push(y),wt!==4&&(wt=2),a===null)return!0;f=Yn(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=p&-p,c.lanes|=i,i=Ch(c.stateNode,f,i),eh(c,i),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xi===null||!xi.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=bv(p),vv(p,i,c,f),eh(c,p),!1}c=c.return}while(c!==null);return!1}var Sv=Error(s(461)),qt=!1;function Qt(i,a,c,f){a.child=i===null?uv(a,null,c,f):aa(a,i.child,c,f)}function Tv(i,a,c,f,p){c=c.render;var y=a.ref;if("ref"in f){var E={};for(var _ in f)_!=="ref"&&(E[_]=f[_])}else E=f;return or(a),f=rh(i,a,c,E,y,p),_=ah(),i!==null&&!qt?(oh(i,a,p),Gs(i,a,p)):(Qe&&_&&$d(a),a.flags|=1,Qt(i,a,f,p),a.child)}function Cv(i,a,c,f,p){if(i===null){var y=c.type;return typeof y=="function"&&!Bd(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,wv(i,a,y,f,p)):(i=rl(c.type,null,f,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Ah(i,p)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:io,c(E,f)&&i.ref===a.ref)return Gs(i,a,p)}return a.flags|=1,i=Bs(y,f),i.ref=a.ref,i.return=a,a.child=i}function wv(i,a,c,f,p){if(i!==null){var y=i.memoizedProps;if(io(y,f)&&i.ref===a.ref)if(qt=!1,a.pendingProps=f=y,Ah(i,p))(i.flags&131072)!==0&&(qt=!0);else return a.lanes=i.lanes,Gs(i,a,p)}return wh(i,a,c,f,p)}function Ev(i,a,c){var f=a.pendingProps,p=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=y!==null?y.baseLanes|c:c,i!==null){for(p=a.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;a.childLanes=y&~f}else a.childLanes=0,a.child=null;return xv(i,a,f,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&ul(a,y!==null?y.cachePool:null),y!==null?wb(a,y):nh(),fv(a);else return a.lanes=a.childLanes=536870912,xv(i,a,y!==null?y.baseLanes|c:c,c)}else y!==null?(ul(a,y.cachePool),wb(a,y),vi(),a.memoizedState=null):(i!==null&&ul(a,null),nh(),vi());return Qt(i,a,p,c),a.child}function xv(i,a,c,f){var p=Xd();return p=p===null?null:{parent:Mt._currentValue,pool:p},a.memoizedState={baseLanes:c,cachePool:p},i!==null&&ul(a,null),nh(),fv(a),i!==null&&lo(i,a,f,!0),null}function _l(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function wh(i,a,c,f,p){return or(a),c=rh(i,a,c,f,void 0,p),f=ah(),i!==null&&!qt?(oh(i,a,p),Gs(i,a,p)):(Qe&&f&&$d(a),a.flags|=1,Qt(i,a,c,p),a.child)}function Rv(i,a,c,f,p,y){return or(a),a.updateQueue=null,c=xb(a,f,c,p),Eb(i),f=ah(),i!==null&&!qt?(oh(i,a,y),Gs(i,a,y)):(Qe&&f&&$d(a),a.flags|=1,Qt(i,a,c,y),a.child)}function _v(i,a,c,f,p){if(or(a),a.stateNode===null){var y=Xr,E=c.contextType;typeof E=="object"&&E!==null&&(y=on(E)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Th,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},Wd(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?on(E):Xr,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Sh(a,c,E,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Th.enqueueReplaceState(y,y.state,null),yo(a,f,y,p),go(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){y=a.stateNode;var _=a.memoizedProps,N=ur(c,_);y.props=N;var U=y.context,J=c.contextType;E=Xr,typeof J=="object"&&J!==null&&(E=on(J));var W=c.getDerivedStateFromProps;J=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,J||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||U!==E)&&hv(a,y,f,E),pi=!1;var B=a.memoizedState;y.state=B,yo(a,f,y,p),go(),U=a.memoizedState,_||B!==U||pi?(typeof W=="function"&&(Sh(a,c,W,f),U=a.memoizedState),(N=pi||dv(a,c,N,f,B,U,E))?(J||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=U),y.props=f,y.state=U,y.context=E,f=N):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,Zd(i,a),E=a.memoizedProps,J=ur(c,E),y.props=J,W=a.pendingProps,B=y.context,U=c.contextType,N=Xr,typeof U=="object"&&U!==null&&(N=on(U)),_=c.getDerivedStateFromProps,(U=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==W||B!==N)&&hv(a,y,f,N),pi=!1,B=a.memoizedState,y.state=B,yo(a,f,y,p),go();var V=a.memoizedState;E!==W||B!==V||pi||i!==null&&i.dependencies!==null&&cl(i.dependencies)?(typeof _=="function"&&(Sh(a,c,_,f),V=a.memoizedState),(J=pi||dv(a,c,J,f,B,V,N)||i!==null&&i.dependencies!==null&&cl(i.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,V,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,V,N)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&B===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&B===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=V),y.props=f,y.state=V,y.context=N,f=J):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&B===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&B===i.memoizedState||(a.flags|=1024),f=!1)}return y=f,_l(i,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&f?(a.child=aa(a,i.child,null,p),a.child=aa(a,null,c,p)):Qt(i,a,c,p),a.memoizedState=y.state,i=a.child):i=Gs(i,a,p),i}function kv(i,a,c,f){return oo(),a.flags|=256,Qt(i,a,c,f),a.child}var Eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xh(i){return{baseLanes:i,cachePool:mb()}}function Rh(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Zn),i}function Ov(i,a,c){var f=a.pendingProps,p=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(Ut.current&2)!==0),E&&(p=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(Qe){if(p?bi(a):vi(),Qe){var _=Ct,N;if(N=_){e:{for(N=_,_=Ss;N.nodeType!==8;){if(!_){_=null;break e}if(N=as(N.nextSibling),N===null){_=null;break e}}_=N}_!==null?(a.memoizedState={dehydrated:_,treeContext:nr!==null?{id:Fs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},N=jn(18,null,null,0),N.stateNode=_,N.return=a,a.child=N,mn=a,Ct=null,N=!0):N=!1}N||rr(a)}if(_=a.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return lp(_)?a.lanes=32:a.lanes=536870912,null;qs(a)}return _=f.children,f=f.fallback,p?(vi(),p=a.mode,_=kl({mode:"hidden",children:_},p),f=tr(f,p,c,null),_.return=a,f.return=a,_.sibling=f,a.child=_,p=a.child,p.memoizedState=xh(c),p.childLanes=Rh(i,E,c),a.memoizedState=Eh,f):(bi(a),_h(a,_))}if(N=i.memoizedState,N!==null&&(_=N.dehydrated,_!==null)){if(y)a.flags&256?(bi(a),a.flags&=-257,a=kh(i,a,c)):a.memoizedState!==null?(vi(),a.child=i.child,a.flags|=128,a=null):(vi(),p=f.fallback,_=a.mode,f=kl({mode:"visible",children:f.children},_),p=tr(p,_,c,null),p.flags|=2,f.return=a,p.return=a,f.sibling=p,a.child=f,aa(a,i.child,null,c),f=a.child,f.memoizedState=xh(c),f.childLanes=Rh(i,E,c),a.memoizedState=Eh,a=p);else if(bi(a),lp(_)){if(E=_.nextSibling&&_.nextSibling.dataset,E)var U=E.dgst;E=U,f=Error(s(419)),f.stack="",f.digest=E,co({value:f,source:null,stack:null}),a=kh(i,a,c)}else if(qt||lo(i,a,c,!1),E=(c&i.childLanes)!==0,qt||E){if(E=ft,E!==null&&(f=c&-c,f=(f&42)!==0?1:ud(f),f=(f&(E.suspendedLanes|c))!==0?0:f,f!==0&&f!==N.retryLane))throw N.retryLane=f,Jr(i,f),Vn(E,i,f),Sv;_.data==="$?"||Gh(),a=kh(i,a,c)}else _.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=N.treeContext,Ct=as(_.nextSibling),mn=a,Qe=!0,ir=null,Ss=!1,i!==null&&(Xn[Qn++]=Fs,Xn[Qn++]=Vs,Xn[Qn++]=nr,Fs=i.id,Vs=i.overflow,nr=a),a=_h(a,f.children),a.flags|=4096);return a}return p?(vi(),p=f.fallback,_=a.mode,N=i.child,U=N.sibling,f=Bs(N,{mode:"hidden",children:f.children}),f.subtreeFlags=N.subtreeFlags&65011712,U!==null?p=Bs(U,p):(p=tr(p,_,c,null),p.flags|=2),p.return=a,f.return=a,f.sibling=p,a.child=f,f=p,p=a.child,_=i.child.memoizedState,_===null?_=xh(c):(N=_.cachePool,N!==null?(U=Mt._currentValue,N=N.parent!==U?{parent:U,pool:U}:N):N=mb(),_={baseLanes:_.baseLanes|c,cachePool:N}),p.memoizedState=_,p.childLanes=Rh(i,E,c),a.memoizedState=Eh,f):(bi(a),c=i.child,i=c.sibling,c=Bs(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=c,a.memoizedState=null,c)}function _h(i,a){return a=kl({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function kl(i,a){return i=jn(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function kh(i,a,c){return aa(a,i.child,null,c),i=_h(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Av(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Gd(i.return,a,c)}function Oh(i,a,c,f,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=p)}function Nv(i,a,c){var f=a.pendingProps,p=f.revealOrder,y=f.tail;if(Qt(i,a,f.children,c),f=Ut.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Av(i,c,a);else if(i.tag===19)Av(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(se(Ut,f),p){case"forwards":for(c=a.child,p=null;c!==null;)i=c.alternate,i!==null&&El(i)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),Oh(a,!1,p,c,y);break;case"backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&El(i)===null){a.child=p;break}i=p.sibling,p.sibling=c,c=p,p=i}Oh(a,!0,c,null,y);break;case"together":Oh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Gs(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Ei|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(lo(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,c=Bs(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Bs(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Ah(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&cl(i)))}function tk(i,a,c){switch(a.tag){case 3:Ve(a,a.stateNode.containerInfo),hi(a,Mt,i.memoizedState.cache),oo();break;case 27:case 5:rn(a);break;case 4:Ve(a,a.stateNode.containerInfo);break;case 10:hi(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(bi(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Ov(i,a,c):(bi(a),i=Gs(i,a,c),i!==null?i.sibling:null);bi(a);break;case 19:var p=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(lo(i,a,c,!1),f=(c&a.childLanes)!==0),p){if(f)return Nv(i,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),se(Ut,Ut.current),f)break;return null;case 22:case 23:return a.lanes=0,Ev(i,a,c);case 24:hi(a,Mt,i.memoizedState.cache)}return Gs(i,a,c)}function Dv(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)qt=!0;else{if(!Ah(i,c)&&(a.flags&128)===0)return qt=!1,tk(i,a,c);qt=(i.flags&131072)!==0}else qt=!1,Qe&&(a.flags&1048576)!==0&&cb(a,ol,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var f=a.elementType,p=f._init;if(f=p(f._payload),a.type=f,typeof f=="function")Bd(f)?(i=ur(f,i),a.tag=1,a=_v(null,a,f,i,c)):(a.tag=0,a=wh(null,a,f,i,c));else{if(f!=null){if(p=f.$$typeof,p===D){a.tag=11,a=Tv(null,a,f,i,c);break e}else if(p===G){a.tag=14,a=Cv(null,a,f,i,c);break e}}throw a=te(f)||f,Error(s(306,a,""))}}return a;case 0:return wh(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,p=ur(f,a.pendingProps),_v(i,a,f,p,c);case 3:e:{if(Ve(a,a.stateNode.containerInfo),i===null)throw Error(s(387));f=a.pendingProps;var y=a.memoizedState;p=y.element,Zd(i,a),yo(a,f,null,c);var E=a.memoizedState;if(f=E.cache,hi(a,Mt,f),f!==y.cache&&Kd(a,[Mt],c,!0),go(),f=E.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=kv(i,a,f,c);break e}else if(f!==p){p=Yn(Error(s(424)),a),co(p),a=kv(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ct=as(i.firstChild),mn=a,Qe=!0,ir=null,Ss=!0,c=uv(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(oo(),f===p){a=Gs(i,a,c);break e}Qt(i,a,f,c)}a=a.child}return a;case 26:return _l(i,a),i===null?(c=jS(a.type,null,a.pendingProps,null))?a.memoizedState=c:Qe||(c=a.type,i=a.pendingProps,f=$l(fe.current).createElement(c),f[an]=a,f[Cn]=i,Zt(f,c,i),zt(f),a.stateNode=f):a.memoizedState=jS(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return rn(a),i===null&&Qe&&(f=a.stateNode=IS(a.type,a.pendingProps,fe.current),mn=a,Ss=!0,p=Ct,ki(a.type)?(up=p,Ct=as(f.firstChild)):Ct=p),Qt(i,a,a.pendingProps.children,c),_l(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Qe&&((p=f=Ct)&&(f=Ok(f,a.type,a.pendingProps,Ss),f!==null?(a.stateNode=f,mn=a,Ct=as(f.firstChild),Ss=!1,p=!0):p=!1),p||rr(a)),rn(a),p=a.type,y=a.pendingProps,E=i!==null?i.memoizedProps:null,f=y.children,ap(p,y)?f=null:E!==null&&ap(p,E)&&(a.flags|=32),a.memoizedState!==null&&(p=rh(i,a,K_,null,null,c),Bo._currentValue=p),_l(i,a),Qt(i,a,f,c),a.child;case 6:return i===null&&Qe&&((i=c=Ct)&&(c=Ak(c,a.pendingProps,Ss),c!==null?(a.stateNode=c,mn=a,Ct=null,i=!0):i=!1),i||rr(a)),null;case 13:return Ov(i,a,c);case 4:return Ve(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=aa(a,null,f,c):Qt(i,a,f,c),a.child;case 11:return Tv(i,a,a.type,a.pendingProps,c);case 7:return Qt(i,a,a.pendingProps,c),a.child;case 8:return Qt(i,a,a.pendingProps.children,c),a.child;case 12:return Qt(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,hi(a,a.type,f.value),Qt(i,a,f.children,c),a.child;case 9:return p=a.type._context,f=a.pendingProps.children,or(a),p=on(p),f=f(p),a.flags|=1,Qt(i,a,f,c),a.child;case 14:return Cv(i,a,a.type,a.pendingProps,c);case 15:return wv(i,a,a.type,a.pendingProps,c);case 19:return Nv(i,a,c);case 31:return f=a.pendingProps,c=a.mode,f={mode:f.mode,children:f.children},i===null?(c=kl(f,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Bs(i.child,f),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return Ev(i,a,c);case 24:return or(a),f=on(Mt),i===null?(p=Xd(),p===null&&(p=ft,y=Yd(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),a.memoizedState={parent:f,cache:p},Wd(a),hi(a,Mt,p)):((i.lanes&c)!==0&&(Zd(i,a),yo(a,null,null,c),go()),p=i.memoizedState,y=a.memoizedState,p.parent!==f?(p={parent:f,cache:f},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),hi(a,Mt,f)):(f=y.cache,hi(a,Mt,f),f!==p.cache&&Kd(a,[Mt],c,!0))),Qt(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ks(i){i.flags|=4}function Iv(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!VS(a)){if(a=Wn.current,a!==null&&((Ge&4194048)===Ge?Ts!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||a!==Ts))throw po=Qd,gb;i.flags|=8192}}function Ol(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ka():536870912,i.lanes|=a,ua|=a)}function Eo(i,a){if(!Qe)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function St(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var p=i.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function nk(i,a,c){var f=a.pendingProps;switch(Hd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(a),null;case 1:return St(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Hs(Mt),Lt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ao(a)?Ks(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,fb())),St(a),null;case 26:return c=a.memoizedState,i===null?(Ks(a),c!==null?(St(a),Iv(a,c)):(St(a),a.flags&=-16777217)):c?c!==i.memoizedState?(Ks(a),St(a),Iv(a,c)):(St(a),a.flags&=-16777217):(i.memoizedProps!==f&&Ks(a),St(a),a.flags&=-16777217),null;case 27:ke(a),c=fe.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ks(a);else{if(!f){if(a.stateNode===null)throw Error(s(166));return St(a),null}i=ue.current,ao(a)?lb(a):(i=IS(p,f,c),a.stateNode=i,Ks(a))}return St(a),null;case 5:if(ke(a),c=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ks(a);else{if(!f){if(a.stateNode===null)throw Error(s(166));return St(a),null}if(i=ue.current,ao(a))lb(a);else{switch(p=$l(fe.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?p.createElement(c,{is:f.is}):p.createElement(c)}}i[an]=a,i[Cn]=f;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;e:switch(Zt(i,c,f),c){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ks(a)}}return St(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Ks(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(s(166));if(i=fe.current,ao(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,p=mn,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}i[an]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||RS(i.nodeValue,c)),i||rr(a)}else i=$l(i).createTextNode(f),i[an]=a,a.stateNode=i}return St(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ao(a),f!==null&&f.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[an]=a}else oo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;St(a),p=!1}else p=fb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(qs(a),a):(qs(a),null)}if(qs(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=f!==null,i=i!==null&&i.memoizedState!==null,c){f=a.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048)}return c!==i&&c&&(a.child.flags|=8192),Ol(a,a.updateQueue),St(a),null;case 4:return Lt(),i===null&&tp(a.stateNode.containerInfo),St(a),null;case 10:return Hs(a.type),St(a),null;case 19:if(K(Ut),p=a.memoizedState,p===null)return St(a),null;if(f=(a.flags&128)!==0,y=p.rendering,y===null)if(f)Eo(p,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=El(i),y!==null){for(a.flags|=128,Eo(p,!1),i=y.updateQueue,a.updateQueue=i,Ol(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)ob(c,i),c=c.sibling;return se(Ut,Ut.current&1|2),a.child}i=i.sibling}p.tail!==null&&et()>Dl&&(a.flags|=128,f=!0,Eo(p,!1),a.lanes=4194304)}else{if(!f)if(i=El(y),i!==null){if(a.flags|=128,f=!0,i=i.updateQueue,a.updateQueue=i,Ol(a,i),Eo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Qe)return St(a),null}else 2*et()-p.renderingStartTime>Dl&&c!==536870912&&(a.flags|=128,f=!0,Eo(p,!1),a.lanes=4194304);p.isBackwards?(y.sibling=a.child,a.child=y):(i=p.last,i!==null?i.sibling=y:a.child=y,p.last=y)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=et(),a.sibling=null,i=Ut.current,se(Ut,f?i&1|2:i&1),a):(St(a),null);case 22:case 23:return qs(a),sh(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(St(a),a.subtreeFlags&6&&(a.flags|=8192)):St(a),c=a.updateQueue,c!==null&&Ol(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&K(cr),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Hs(Mt),St(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function sk(i,a){switch(Hd(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Hs(Mt),Lt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ke(a),null;case 13:if(qs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));oo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return K(Ut),null;case 4:return Lt(),null;case 10:return Hs(a.type),null;case 22:case 23:return qs(a),sh(),i!==null&&K(cr),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Hs(Mt),null;case 25:return null;default:return null}}function Pv(i,a){switch(Hd(a),a.tag){case 3:Hs(Mt),Lt();break;case 26:case 27:case 5:ke(a);break;case 4:Lt();break;case 13:qs(a);break;case 19:K(Ut);break;case 10:Hs(a.type);break;case 22:case 23:qs(a),sh(),i!==null&&K(cr);break;case 24:Hs(Mt)}}function xo(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&i)===i){f=void 0;var y=c.create,E=c.inst;f=y(),E.destroy=f}c=c.next}while(c!==p)}}catch(_){lt(a,a.return,_)}}function Si(i,a,c){try{var f=a.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&i)===i){var E=f.inst,_=E.destroy;if(_!==void 0){E.destroy=void 0,p=a;var N=c,U=_;try{U()}catch(J){lt(p,N,J)}}}f=f.next}while(f!==y)}}catch(J){lt(a,a.return,J)}}function Lv(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{Cb(a,c)}catch(f){lt(i,i.return,f)}}}function jv(i,a,c){c.props=ur(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){lt(i,a,f)}}function Ro(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(p){lt(i,a,p)}}function Cs(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(p){lt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){lt(i,a,p)}else c.current=null}function Mv(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(p){lt(i,i.return,p)}}function Nh(i,a,c){try{var f=i.stateNode;Ek(f,i.type,c,a),f[Cn]=a}catch(p){lt(i,i.return,p)}}function Uv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ki(i.type)||i.tag===4}function Dh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ki(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ih(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Vl));else if(f!==4&&(f===27&&ki(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(Ih(i,a,c),i=i.sibling;i!==null;)Ih(i,a,c),i=i.sibling}function Al(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&ki(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Al(i,a,c),i=i.sibling;i!==null;)Al(i,a,c),i=i.sibling}function Bv(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Zt(a,f,c),a[an]=i,a[Cn]=c}catch(y){lt(i,i.return,y)}}var Ys=!1,kt=!1,Ph=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function ik(i,a){if(i=i.containerInfo,ip=Yl,i=Qy(i),Dd(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var p=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,_=-1,N=-1,U=0,J=0,W=i,B=null;t:for(;;){for(var V;W!==c||p!==0&&W.nodeType!==3||(_=E+p),W!==y||f!==0&&W.nodeType!==3||(N=E+f),W.nodeType===3&&(E+=W.nodeValue.length),(V=W.firstChild)!==null;)B=W,W=V;for(;;){if(W===i)break t;if(B===c&&++U===p&&(_=E),B===y&&++J===f&&(N=E),(V=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=V}c=_===-1||N===-1?null:{start:_,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(rp={focusedElem:i,selectionRange:c},Yl=!1,Gt=a;Gt!==null;)if(a=Gt,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Gt=i;else for(;Gt!==null;){switch(a=Gt,y=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=a,p=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var _e=ur(c.type,p,c.elementType===c.type);i=f.getSnapshotBeforeUpdate(_e,y),f.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){lt(c,c.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)cp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":cp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,Gt=i;break}Gt=a.return}}function Vv(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ti(i,c),f&4&&xo(5,c);break;case 1:if(Ti(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(E){lt(c,c.return,E)}else{var p=ur(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){lt(c,c.return,E)}}f&64&&Lv(c),f&512&&Ro(c,c.return);break;case 3:if(Ti(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Cb(i,a)}catch(E){lt(c,c.return,E)}}break;case 27:a===null&&f&4&&Bv(c);case 26:case 5:Ti(i,c),a===null&&f&4&&Mv(c),f&512&&Ro(c,c.return);break;case 12:Ti(i,c);break;case 13:Ti(i,c),f&4&&zv(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=hk.bind(null,c),Nk(i,c))));break;case 22:if(f=c.memoizedState!==null||Ys,!f){a=a!==null&&a.memoizedState!==null||kt,p=Ys;var y=kt;Ys=f,(kt=a)&&!y?Ci(i,c,(c.subtreeFlags&8772)!==0):Ti(i,c),Ys=p,kt=y}break;case 30:break;default:Ti(i,c)}}function $v(i){var a=i.alternate;a!==null&&(i.alternate=null,$v(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&hd(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var gt=null,xn=!1;function Js(i,a,c){for(c=c.child;c!==null;)Hv(i,a,c),c=c.sibling}function Hv(i,a,c){if(pe&&typeof pe.onCommitFiberUnmount=="function")try{pe.onCommitFiberUnmount(he,c)}catch{}switch(c.tag){case 26:kt||Cs(c,a),Js(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:kt||Cs(c,a);var f=gt,p=xn;ki(c.type)&&(gt=c.stateNode,xn=!1),Js(i,a,c),Lo(c.stateNode),gt=f,xn=p;break;case 5:kt||Cs(c,a);case 6:if(f=gt,p=xn,gt=null,Js(i,a,c),gt=f,xn=p,gt!==null)if(xn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(c.stateNode)}catch(y){lt(c,a,y)}else try{gt.removeChild(c.stateNode)}catch(y){lt(c,a,y)}break;case 18:gt!==null&&(xn?(i=gt,NS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ho(i)):NS(gt,c.stateNode));break;case 4:f=gt,p=xn,gt=c.stateNode.containerInfo,xn=!0,Js(i,a,c),gt=f,xn=p;break;case 0:case 11:case 14:case 15:kt||Si(2,c,a),kt||Si(4,c,a),Js(i,a,c);break;case 1:kt||(Cs(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&jv(c,a,f)),Js(i,a,c);break;case 21:Js(i,a,c);break;case 22:kt=(f=kt)||c.memoizedState!==null,Js(i,a,c),kt=f;break;default:Js(i,a,c)}}function zv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ho(i)}catch(c){lt(a,a.return,c)}}function rk(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Fv),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Fv),a;default:throw Error(s(435,i.tag))}}function Lh(i,a){var c=rk(i);a.forEach(function(f){var p=pk.bind(null,i,f);c.has(f)||(c.add(f),f.then(p,p))})}function Mn(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var p=c[f],y=i,E=a,_=E;e:for(;_!==null;){switch(_.tag){case 27:if(ki(_.type)){gt=_.stateNode,xn=!1;break e}break;case 5:gt=_.stateNode,xn=!1;break e;case 3:case 4:gt=_.stateNode.containerInfo,xn=!0;break e}_=_.return}if(gt===null)throw Error(s(160));Hv(y,E,p),gt=null,xn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)qv(a,i),a=a.sibling}var rs=null;function qv(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mn(a,i),Un(i),f&4&&(Si(3,i,i.return),xo(3,i),Si(5,i,i.return));break;case 1:Mn(a,i),Un(i),f&512&&(kt||c===null||Cs(c,c.return)),f&64&&Ys&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var p=rs;if(Mn(a,i),Un(i),f&512&&(kt||c===null||Cs(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ja]||y[an]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(f),p.head.insertBefore(y,p.querySelector("head > title"))),Zt(y,f,c),y[an]=i,zt(y),f=y;break e;case"link":var E=BS("link","href",p).get(f+(c.href||""));if(E){for(var _=0;_<E.length;_++)if(y=E[_],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(_,1);break t}}y=p.createElement(f),Zt(y,f,c),p.head.appendChild(y);break;case"meta":if(E=BS("meta","content",p).get(f+(c.content||""))){for(_=0;_<E.length;_++)if(y=E[_],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(_,1);break t}}y=p.createElement(f),Zt(y,f,c),p.head.appendChild(y);break;default:throw Error(s(468,f))}y[an]=i,zt(y),f=y}i.stateNode=f}else FS(p,i.type,i.stateNode);else i.stateNode=US(p,f,i.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?FS(p,i.type,i.stateNode):US(p,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Nh(i,i.memoizedProps,c.memoizedProps)}break;case 27:Mn(a,i),Un(i),f&512&&(kt||c===null||Cs(c,c.return)),c!==null&&f&4&&Nh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Mn(a,i),Un(i),f&512&&(kt||c===null||Cs(c,c.return)),i.flags&32){p=i.stateNode;try{$r(p,"")}catch(V){lt(i,i.return,V)}}f&4&&i.stateNode!=null&&(p=i.memoizedProps,Nh(i,p,c!==null?c.memoizedProps:p)),f&1024&&(Ph=!0);break;case 6:if(Mn(a,i),Un(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(V){lt(i,i.return,V)}}break;case 3:if(ql=null,p=rs,rs=Hl(a.containerInfo),Mn(a,i),rs=p,Un(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ho(a.containerInfo)}catch(V){lt(i,i.return,V)}Ph&&(Ph=!1,Gv(i));break;case 4:f=rs,rs=Hl(i.stateNode.containerInfo),Mn(a,i),Un(i),rs=f;break;case 12:Mn(a,i),Un(i);break;case 13:Mn(a,i),Un(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Vh=et()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Lh(i,f)));break;case 22:p=i.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,U=Ys,J=kt;if(Ys=U||p,kt=J||N,Mn(a,i),kt=J,Ys=U,Un(i),f&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||N||Ys||kt||fr(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){N=c=a;try{if(y=N.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{_=N.stateNode;var W=N.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;_.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(V){lt(N,N.return,V)}}}else if(a.tag===6){if(c===null){N=a;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(V){lt(N,N.return,V)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Lh(i,c))));break;case 19:Mn(a,i),Un(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Lh(i,f)));break;case 30:break;case 21:break;default:Mn(a,i),Un(i)}}function Un(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(Uv(f)){c=f;break}f=f.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var p=c.stateNode,y=Dh(i);Al(i,y,p);break;case 5:var E=c.stateNode;c.flags&32&&($r(E,""),c.flags&=-33);var _=Dh(i);Al(i,_,E);break;case 3:case 4:var N=c.stateNode.containerInfo,U=Dh(i);Ih(i,U,N);break;default:throw Error(s(161))}}catch(J){lt(i,i.return,J)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Gv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Gv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ti(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Vv(i,a.alternate,a),a=a.sibling}function fr(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Si(4,a,a.return),fr(a);break;case 1:Cs(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&jv(a,a.return,c),fr(a);break;case 27:Lo(a.stateNode);case 26:case 5:Cs(a,a.return),fr(a);break;case 22:a.memoizedState===null&&fr(a);break;case 30:fr(a);break;default:fr(a)}i=i.sibling}}function Ci(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,p=i,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Ci(p,y,c),xo(4,y);break;case 1:if(Ci(p,y,c),f=y,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){lt(f,f.return,U)}if(f=y,p=f.updateQueue,p!==null){var _=f.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Tb(N[p],_)}catch(U){lt(f,f.return,U)}}c&&E&64&&Lv(y),Ro(y,y.return);break;case 27:Bv(y);case 26:case 5:Ci(p,y,c),c&&f===null&&E&4&&Mv(y),Ro(y,y.return);break;case 12:Ci(p,y,c);break;case 13:Ci(p,y,c),c&&E&4&&zv(p,y);break;case 22:y.memoizedState===null&&Ci(p,y,c),Ro(y,y.return);break;case 30:break;default:Ci(p,y,c)}a=a.sibling}}function jh(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&uo(c))}function Mh(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&uo(i))}function ws(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Kv(i,a,c,f),a=a.sibling}function Kv(i,a,c,f){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ws(i,a,c,f),p&2048&&xo(9,a);break;case 1:ws(i,a,c,f);break;case 3:ws(i,a,c,f),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&uo(i)));break;case 12:if(p&2048){ws(i,a,c,f),i=a.stateNode;try{var y=a.memoizedProps,E=y.id,_=y.onPostCommit;typeof _=="function"&&_(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){lt(a,a.return,N)}}else ws(i,a,c,f);break;case 13:ws(i,a,c,f);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?ws(i,a,c,f):_o(i,a):y._visibility&2?ws(i,a,c,f):(y._visibility|=2,oa(i,a,c,f,(a.subtreeFlags&10256)!==0)),p&2048&&jh(E,a);break;case 24:ws(i,a,c,f),p&2048&&Mh(a.alternate,a);break;default:ws(i,a,c,f)}}function oa(i,a,c,f,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=i,E=a,_=c,N=f,U=E.flags;switch(E.tag){case 0:case 11:case 15:oa(y,E,_,N,p),xo(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?oa(y,E,_,N,p):_o(y,E):(J._visibility|=2,oa(y,E,_,N,p)),p&&U&2048&&jh(E.alternate,E);break;case 24:oa(y,E,_,N,p),p&&U&2048&&Mh(E.alternate,E);break;default:oa(y,E,_,N,p)}a=a.sibling}}function _o(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,p=f.flags;switch(f.tag){case 22:_o(c,f),p&2048&&jh(f.alternate,f);break;case 24:_o(c,f),p&2048&&Mh(f.alternate,f);break;default:_o(c,f)}a=a.sibling}}var ko=8192;function ca(i){if(i.subtreeFlags&ko)for(i=i.child;i!==null;)Yv(i),i=i.sibling}function Yv(i){switch(i.tag){case 26:ca(i),i.flags&ko&&i.memoizedState!==null&&zk(rs,i.memoizedState,i.memoizedProps);break;case 5:ca(i);break;case 3:case 4:var a=rs;rs=Hl(i.stateNode.containerInfo),ca(i),rs=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=ko,ko=16777216,ca(i),ko=a):ca(i));break;default:ca(i)}}function Jv(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Oo(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Gt=f,Qv(f,i)}Jv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xv(i),i=i.sibling}function Xv(i){switch(i.tag){case 0:case 11:case 15:Oo(i),i.flags&2048&&Si(9,i,i.return);break;case 3:Oo(i);break;case 12:Oo(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Nl(i)):Oo(i);break;default:Oo(i)}}function Nl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Gt=f,Qv(f,i)}Jv(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Si(8,a,a.return),Nl(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Nl(a));break;default:Nl(a)}i=i.sibling}}function Qv(i,a){for(;Gt!==null;){var c=Gt;switch(c.tag){case 0:case 11:case 15:Si(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:uo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Gt=f;else e:for(c=i;Gt!==null;){f=Gt;var p=f.sibling,y=f.return;if($v(f),f===c){Gt=null;break e}if(p!==null){p.return=y,Gt=p;break e}Gt=y}}}var ak={getCacheForType:function(i){var a=on(Mt),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c}},ok=typeof WeakMap=="function"?WeakMap:Map,st=0,ft=null,$e=null,Ge=0,it=0,Bn=null,wi=!1,la=!1,Uh=!1,Xs=0,wt=0,Ei=0,dr=0,Bh=0,Zn=0,ua=0,Ao=null,Rn=null,Fh=!1,Vh=0,Dl=1/0,Il=null,xi=null,Wt=0,Ri=null,fa=null,da=0,$h=0,Hh=null,Wv=null,No=0,zh=null;function Fn(){if((st&2)!==0&&Ge!==0)return Ge&-Ge;if(L.T!==null){var i=Zr;return i!==0?i:Qh()}return py()}function Zv(){Zn===0&&(Zn=(Ge&536870912)===0||Qe?zc():536870912);var i=Wn.current;return i!==null&&(i.flags|=32),Zn}function Vn(i,a,c){(i===ft&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(ha(i,0),_i(i,Ge,Zn,!1)),Ya(i,c),((st&2)===0||i!==ft)&&(i===ft&&((st&2)===0&&(dr|=c),wt===4&&_i(i,Ge,Zn,!1)),Es(i))}function eS(i,a,c){if((st&6)!==0)throw Error(s(327));var f=!c&&(a&124)===0&&(a&i.expiredLanes)===0||Tn(i,a),p=f?uk(i,a):Kh(i,a,!0),y=f;do{if(p===0){la&&!f&&_i(i,a,0,!1);break}else{if(c=i.current.alternate,y&&!ck(c)){p=Kh(i,a,!1),y=!1;continue}if(p===2){if(y=a,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var _=i;p=Ao;var N=_.current.memoizedState.isDehydrated;if(N&&(ha(_,E).flags|=256),E=Kh(_,E,!1),E!==2){if(Uh&&!N){_.errorRecoveryDisabledLanes|=y,dr|=y,p=4;break e}y=Rn,Rn=p,y!==null&&(Rn===null?Rn=y:Rn.push.apply(Rn,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){ha(i,0),_i(i,a,0,!0);break}e:{switch(f=i,y=p,y){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:_i(f,a,Zn,!wi);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(p=Vh+300-et(),10<p)){if(_i(f,a,Zn,!wi),qn(f,0,!0)!==0)break e;f.timeoutHandle=OS(tS.bind(null,f,c,Rn,Il,Fh,a,Zn,dr,ua,wi,y,2,-0,0),p);break e}tS(f,c,Rn,Il,Fh,a,Zn,dr,ua,wi,y,0,-0,0)}}break}while(!0);Es(i)}function tS(i,a,c,f,p,y,E,_,N,U,J,W,B,V){if(i.timeoutHandle=-1,W=a.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Uo={stylesheets:null,count:0,unsuspend:Hk},Yv(a),W=qk(),W!==null)){i.cancelPendingCommit=W(cS.bind(null,i,a,y,c,f,p,E,_,N,J,1,B,V)),_i(i,y,E,!U);return}cS(i,a,y,c,f,p,E,_,N)}function ck(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var p=c[f],y=p.getSnapshot;p=p.value;try{if(!Ln(y(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _i(i,a,c,f){a&=~Bh,a&=~dr,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var p=a;0<p;){var y=31-Ne(p),E=1<<y;f[y]=-1,p&=~E}c!==0&&dy(i,c,a)}function Pl(){return(st&6)===0?(Do(0),!1):!0}function qh(){if($e!==null){if(it===0)var i=$e.return;else i=$e,$s=ar=null,ch(i),ra=null,Co=0,i=$e;for(;i!==null;)Pv(i.alternate,i),i=i.return;$e=null}}function ha(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Rk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),qh(),ft=i,$e=c=Bs(i.current,null),Ge=a,it=0,Bn=null,wi=!1,la=Tn(i,a),Uh=!1,ua=Zn=Bh=dr=Ei=wt=0,Rn=Ao=null,Fh=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var p=31-Ne(f),y=1<<p;a|=i[p],f&=~y}return Xs=a,nl(),c}function nS(i,a){Be=null,L.H=Tl,a===ho||a===fl?(a=vb(),it=3):a===gb?(a=vb(),it=4):it=a===Sv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bn=a,$e===null&&(wt=1,Rl(i,Yn(a,i.current)))}function sS(){var i=L.H;return L.H=Tl,i===null?Tl:i}function iS(){var i=L.A;return L.A=ak,i}function Gh(){wt=4,wi||(Ge&4194048)!==Ge&&Wn.current!==null||(la=!0),(Ei&134217727)===0&&(dr&134217727)===0||ft===null||_i(ft,Ge,Zn,!1)}function Kh(i,a,c){var f=st;st|=2;var p=sS(),y=iS();(ft!==i||Ge!==a)&&(Il=null,ha(i,a)),a=!1;var E=wt;e:do try{if(it!==0&&$e!==null){var _=$e,N=Bn;switch(it){case 8:qh(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(a=!0);var U=it;if(it=0,Bn=null,pa(i,_,N,U),c&&la){E=0;break e}break;default:U=it,it=0,Bn=null,pa(i,_,N,U)}}lk(),E=wt;break}catch(J){nS(i,J)}while(!0);return a&&i.shellSuspendCounter++,$s=ar=null,st=f,L.H=p,L.A=y,$e===null&&(ft=null,Ge=0,nl()),E}function lk(){for(;$e!==null;)rS($e)}function uk(i,a){var c=st;st|=2;var f=sS(),p=iS();ft!==i||Ge!==a?(Il=null,Dl=et()+500,ha(i,a)):la=Tn(i,a);e:do try{if(it!==0&&$e!==null){a=$e;var y=Bn;t:switch(it){case 1:it=0,Bn=null,pa(i,a,y,1);break;case 2:case 9:if(yb(y)){it=0,Bn=null,aS(a);break}a=function(){it!==2&&it!==9||ft!==i||(it=7),Es(i)},y.then(a,a);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:yb(y)?(it=0,Bn=null,aS(a)):(it=0,Bn=null,pa(i,a,y,7));break;case 5:var E=null;switch($e.tag){case 26:E=$e.memoizedState;case 5:case 27:var _=$e;if(!E||VS(E)){it=0,Bn=null;var N=_.sibling;if(N!==null)$e=N;else{var U=_.return;U!==null?($e=U,Ll(U)):$e=null}break t}}it=0,Bn=null,pa(i,a,y,5);break;case 6:it=0,Bn=null,pa(i,a,y,6);break;case 8:qh(),wt=6;break e;default:throw Error(s(462))}}fk();break}catch(J){nS(i,J)}while(!0);return $s=ar=null,L.H=f,L.A=p,st=c,$e!==null?0:(ft=null,Ge=0,nl(),wt)}function fk(){for(;$e!==null&&!tt();)rS($e)}function rS(i){var a=Dv(i.alternate,i,Xs);i.memoizedProps=i.pendingProps,a===null?Ll(i):$e=a}function aS(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Rv(c,a,a.pendingProps,a.type,void 0,Ge);break;case 11:a=Rv(c,a,a.pendingProps,a.type.render,a.ref,Ge);break;case 5:ch(a);default:Pv(c,a),a=$e=ob(a,Xs),a=Dv(c,a,Xs)}i.memoizedProps=i.pendingProps,a===null?Ll(i):$e=a}function pa(i,a,c,f){$s=ar=null,ch(a),ra=null,Co=0;var p=a.return;try{if(ek(i,p,a,c,Ge)){wt=1,Rl(i,Yn(c,i.current)),$e=null;return}}catch(y){if(p!==null)throw $e=p,y;wt=1,Rl(i,Yn(c,i.current)),$e=null;return}a.flags&32768?(Qe||f===1?i=!0:la||(Ge&536870912)!==0?i=!1:(wi=i=!0,(f===2||f===9||f===3||f===6)&&(f=Wn.current,f!==null&&f.tag===13&&(f.flags|=16384))),oS(a,i)):Ll(a)}function Ll(i){var a=i;do{if((a.flags&32768)!==0){oS(a,wi);return}i=a.return;var c=nk(a.alternate,a,Xs);if(c!==null){$e=c;return}if(a=a.sibling,a!==null){$e=a;return}$e=a=i}while(a!==null);wt===0&&(wt=5)}function oS(i,a){do{var c=sk(i.alternate,i);if(c!==null){c.flags&=32767,$e=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){$e=i;return}$e=i=c}while(i!==null);wt=6,$e=null}function cS(i,a,c,f,p,y,E,_,N){i.cancelPendingCommit=null;do jl();while(Wt!==0);if((st&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(y=a.lanes|a.childLanes,y|=Md,HR(i,c,y,E,_,N),i===ft&&($e=ft=null,Ge=0),fa=a,Ri=i,da=c,$h=y,Hh=p,Wv=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mk(jt,function(){return hS(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=L.T,L.T=null,p=q.p,q.p=2,E=st,st|=4;try{ik(i,a,c)}finally{st=E,q.p=p,L.T=f}}Wt=1,lS(),uS(),fS()}}function lS(){if(Wt===1){Wt=0;var i=Ri,a=fa,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var f=q.p;q.p=2;var p=st;st|=4;try{qv(a,i);var y=rp,E=Qy(i.containerInfo),_=y.focusedElem,N=y.selectionRange;if(E!==_&&_&&_.ownerDocument&&Xy(_.ownerDocument.documentElement,_)){if(N!==null&&Dd(_)){var U=N.start,J=N.end;if(J===void 0&&(J=U),"selectionStart"in _)_.selectionStart=U,_.selectionEnd=Math.min(J,_.value.length);else{var W=_.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var V=B.getSelection(),_e=_.textContent.length,Ce=Math.min(N.start,_e),ct=N.end===void 0?Ce:Math.min(N.end,_e);!V.extend&&Ce>ct&&(E=ct,ct=Ce,Ce=E);var j=Jy(_,Ce),I=Jy(_,ct);if(j&&I&&(V.rangeCount!==1||V.anchorNode!==j.node||V.anchorOffset!==j.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var M=W.createRange();M.setStart(j.node,j.offset),V.removeAllRanges(),Ce>ct?(V.addRange(M),V.extend(I.node,I.offset)):(M.setEnd(I.node,I.offset),V.addRange(M))}}}}for(W=[],V=_;V=V.parentNode;)V.nodeType===1&&W.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<W.length;_++){var Q=W[_];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Yl=!!ip,rp=ip=null}finally{st=p,q.p=f,L.T=c}}i.current=a,Wt=2}}function uS(){if(Wt===2){Wt=0;var i=Ri,a=fa,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var f=q.p;q.p=2;var p=st;st|=4;try{Vv(i,a.alternate,a)}finally{st=p,q.p=f,L.T=c}}Wt=3}}function fS(){if(Wt===4||Wt===3){Wt=0,ht();var i=Ri,a=fa,c=da,f=Wv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Wt=5:(Wt=0,fa=Ri=null,dS(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(xi=null),fd(c),a=a.stateNode,pe&&typeof pe.onCommitFiberRoot=="function")try{pe.onCommitFiberRoot(he,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=L.T,p=q.p,q.p=2,L.T=null;try{for(var y=i.onRecoverableError,E=0;E<f.length;E++){var _=f[E];y(_.value,{componentStack:_.stack})}}finally{L.T=a,q.p=p}}(da&3)!==0&&jl(),Es(i),p=i.pendingLanes,(c&4194090)!==0&&(p&42)!==0?i===zh?No++:(No=0,zh=i):No=0,Do(0)}}function dS(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,uo(a)))}function jl(i){return lS(),uS(),fS(),hS()}function hS(){if(Wt!==5)return!1;var i=Ri,a=$h;$h=0;var c=fd(da),f=L.T,p=q.p;try{q.p=32>c?32:c,L.T=null,c=Hh,Hh=null;var y=Ri,E=da;if(Wt=0,fa=Ri=null,da=0,(st&6)!==0)throw Error(s(331));var _=st;if(st|=4,Xv(y.current),Kv(y,y.current,E,c),st=_,Do(0,!1),pe&&typeof pe.onPostCommitFiberRoot=="function")try{pe.onPostCommitFiberRoot(he,y)}catch{}return!0}finally{q.p=p,L.T=f,dS(i,a)}}function pS(i,a,c){a=Yn(c,a),a=Ch(i.stateNode,a,2),i=gi(i,a,2),i!==null&&(Ya(i,2),Es(i))}function lt(i,a,c){if(i.tag===3)pS(i,i,c);else for(;a!==null;){if(a.tag===3){pS(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(xi===null||!xi.has(f))){i=Yn(c,i),c=bv(2),f=gi(a,c,2),f!==null&&(vv(c,f,a,i),Ya(f,2),Es(f));break}}a=a.return}}function Yh(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new ok;var p=new Set;f.set(a,p)}else p=f.get(a),p===void 0&&(p=new Set,f.set(a,p));p.has(c)||(Uh=!0,p.add(c),i=dk.bind(null,i,a,c),a.then(i,i))}function dk(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ft===i&&(Ge&c)===c&&(wt===4||wt===3&&(Ge&62914560)===Ge&&300>et()-Vh?(st&2)===0&&ha(i,0):Bh|=c,ua===Ge&&(ua=0)),Es(i)}function mS(i,a){a===0&&(a=Ka()),i=Jr(i,a),i!==null&&(Ya(i,a),Es(i))}function hk(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),mS(i,c)}function pk(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,p=i.memoizedState;p!==null&&(c=p.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(a),mS(i,c)}function mk(i,a){return Re(i,a)}var Ml=null,ma=null,Jh=!1,Ul=!1,Xh=!1,hr=0;function Es(i){i!==ma&&i.next===null&&(ma===null?Ml=ma=i:ma=ma.next=i),Ul=!0,Jh||(Jh=!0,yk())}function Do(i,a){if(!Xh&&Ul){Xh=!0;do for(var c=!1,f=Ml;f!==null;){if(i!==0){var p=f.pendingLanes;if(p===0)var y=0;else{var E=f.suspendedLanes,_=f.pingedLanes;y=(1<<31-Ne(42|i)+1)-1,y&=p&~(E&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,vS(f,y))}else y=Ge,y=qn(f,f===ft?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||Tn(f,y)||(c=!0,vS(f,y));f=f.next}while(c);Xh=!1}}function gk(){gS()}function gS(){Ul=Jh=!1;var i=0;hr!==0&&(xk()&&(i=hr),hr=0);for(var a=et(),c=null,f=Ml;f!==null;){var p=f.next,y=yS(f,a);y===0?(f.next=null,c===null?Ml=p:c.next=p,p===null&&(ma=c)):(c=f,(i!==0||(y&3)!==0)&&(Ul=!0)),f=p}Do(i)}function yS(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-Ne(y),_=1<<E,N=p[E];N===-1?((_&c)===0||(_&f)!==0)&&(p[E]=Ir(_,a)):N<=a&&(i.expiredLanes|=_),y&=~_}if(a=ft,c=Ge,c=qn(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(it===2||it===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Oe(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Tn(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&Oe(f),fd(c)){case 2:case 8:c=nt;break;case 32:c=jt;break;case 268435456:c=Ie;break;default:c=jt}return f=bS.bind(null,i),c=Re(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&Oe(f),i.callbackPriority=2,i.callbackNode=null,2}function bS(i,a){if(Wt!==0&&Wt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(jl()&&i.callbackNode!==c)return null;var f=Ge;return f=qn(i,i===ft?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(eS(i,f,a),yS(i,et()),i.callbackNode!=null&&i.callbackNode===c?bS.bind(null,i):null)}function vS(i,a){if(jl())return null;eS(i,a,!0)}function yk(){_k(function(){(st&6)!==0?Re(ze,gk):gS()})}function Qh(){return hr===0&&(hr=zc()),hr}function SS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jc(""+i)}function TS(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function bk(i,a,c,f,p){if(a==="submit"&&c&&c.stateNode===p){var y=SS((p[Cn]||null).action),E=f.submitter;E&&(a=(a=E[Cn]||null)?SS(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var _=new Zc("action","action",null,f,p);i.push({event:_,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(hr!==0){var N=E?TS(p,E):new FormData(p);yh(c,{pending:!0,data:N,method:p.method,action:y},null,N)}}else typeof y=="function"&&(_.preventDefault(),N=E?TS(p,E):new FormData(p),yh(c,{pending:!0,data:N,method:p.method,action:y},y,N))},currentTarget:p}]})}}for(var Wh=0;Wh<jd.length;Wh++){var Zh=jd[Wh],vk=Zh.toLowerCase(),Sk=Zh[0].toUpperCase()+Zh.slice(1);is(vk,"on"+Sk)}is(eb,"onAnimationEnd"),is(tb,"onAnimationIteration"),is(nb,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(M_,"onTransitionRun"),is(U_,"onTransitionStart"),is(B_,"onTransitionCancel"),is(sb,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function CS(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],p=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var E=f.length-1;0<=E;E--){var _=f[E],N=_.instance,U=_.currentTarget;if(_=_.listener,N!==y&&p.isPropagationStopped())break e;y=_,p.currentTarget=U;try{y(p)}catch(J){xl(J)}p.currentTarget=null,y=N}else for(E=0;E<f.length;E++){if(_=f[E],N=_.instance,U=_.currentTarget,_=_.listener,N!==y&&p.isPropagationStopped())break e;y=_,p.currentTarget=U;try{y(p)}catch(J){xl(J)}p.currentTarget=null,y=N}}}}function He(i,a){var c=a[dd];c===void 0&&(c=a[dd]=new Set);var f=i+"__bubble";c.has(f)||(wS(a,i,2,!1),c.add(f))}function ep(i,a,c){var f=0;a&&(f|=4),wS(c,i,f,a)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function tp(i){if(!i[Bl]){i[Bl]=!0,gy.forEach(function(c){c!=="selectionchange"&&(Tk.has(c)||ep(c,!1,i),ep(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Bl]||(a[Bl]=!0,ep("selectionchange",!1,a))}}function wS(i,a,c,f){switch(KS(a)){case 2:var p=Yk;break;case 8:p=Jk;break;default:p=mp}c=p.bind(null,a,c,i),p=void 0,!wd||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),f?p!==void 0?i.addEventListener(a,c,{capture:!0,passive:p}):i.addEventListener(a,c,!0):p!==void 0?i.addEventListener(a,c,{passive:p}):i.addEventListener(a,c,!1)}function np(i,a,c,f,p){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var _=f.stateNode.containerInfo;if(_===p)break;if(E===4)for(E=f.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;_!==null;){if(E=jr(_),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){f=y=E;continue e}_=_.parentNode}}f=f.return}Ay(function(){var U=y,J=Td(c),W=[];e:{var B=ib.get(i);if(B!==void 0){var V=Zc,_e=i;switch(i){case"keypress":if(Qc(c)===0)break e;case"keydown":case"keyup":V=m_;break;case"focusin":_e="focus",V=_d;break;case"focusout":_e="blur",V=_d;break;case"beforeblur":case"afterblur":V=_d;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=s_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=b_;break;case eb:case tb:case nb:V=a_;break;case sb:V=S_;break;case"scroll":case"scrollend":V=t_;break;case"wheel":V=C_;break;case"copy":case"cut":case"paste":V=c_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Ly;break;case"toggle":case"beforetoggle":V=E_}var Ce=(a&4)!==0,ct=!Ce&&(i==="scroll"||i==="scrollend"),j=Ce?B!==null?B+"Capture":null:B;Ce=[];for(var I=U,M;I!==null;){var Q=I;if(M=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||M===null||j===null||(Q=Qa(I,j),Q!=null&&Ce.push(Po(I,Q,M))),ct)break;I=I.return}0<Ce.length&&(B=new V(B,_e,null,c,J),W.push({event:B,listeners:Ce}))}}if((a&7)===0){e:{if(B=i==="mouseover"||i==="pointerover",V=i==="mouseout"||i==="pointerout",B&&c!==Sd&&(_e=c.relatedTarget||c.fromElement)&&(jr(_e)||_e[Lr]))break e;if((V||B)&&(B=J.window===J?J:(B=J.ownerDocument)?B.defaultView||B.parentWindow:window,V?(_e=c.relatedTarget||c.toElement,V=U,_e=_e?jr(_e):null,_e!==null&&(ct=o(_e),Ce=_e.tag,_e!==ct||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(V=null,_e=U),V!==_e)){if(Ce=Iy,Q="onMouseLeave",j="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=Ly,Q="onPointerLeave",j="onPointerEnter",I="pointer"),ct=V==null?B:Xa(V),M=_e==null?B:Xa(_e),B=new Ce(Q,I+"leave",V,c,J),B.target=ct,B.relatedTarget=M,Q=null,jr(J)===U&&(Ce=new Ce(j,I+"enter",_e,c,J),Ce.target=M,Ce.relatedTarget=ct,Q=Ce),ct=Q,V&&_e)t:{for(Ce=V,j=_e,I=0,M=Ce;M;M=ga(M))I++;for(M=0,Q=j;Q;Q=ga(Q))M++;for(;0<I-M;)Ce=ga(Ce),I--;for(;0<M-I;)j=ga(j),M--;for(;I--;){if(Ce===j||j!==null&&Ce===j.alternate)break t;Ce=ga(Ce),j=ga(j)}Ce=null}else Ce=null;V!==null&&ES(W,B,V,Ce,!1),_e!==null&&ct!==null&&ES(W,ct,_e,Ce,!0)}}e:{if(B=U?Xa(U):window,V=B.nodeName&&B.nodeName.toLowerCase(),V==="select"||V==="input"&&B.type==="file")var me=Hy;else if(Vy(B))if(zy)me=P_;else{me=D_;var Fe=N_}else V=B.nodeName,!V||V.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?U&&vd(U.elementType)&&(me=Hy):me=I_;if(me&&(me=me(i,U))){$y(W,me,c,J);break e}Fe&&Fe(i,B,U),i==="focusout"&&U&&B.type==="number"&&U.memoizedProps.value!=null&&bd(B,"number",B.value)}switch(Fe=U?Xa(U):window,i){case"focusin":(Vy(Fe)||Fe.contentEditable==="true")&&(Gr=Fe,Id=U,ro=null);break;case"focusout":ro=Id=Gr=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Wy(W,c,J);break;case"selectionchange":if(j_)break;case"keydown":case"keyup":Wy(W,c,J)}var be;if(Od)e:{switch(i){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else qr?By(i,c)&&(Ee="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ee="onCompositionStart");Ee&&(jy&&c.locale!=="ko"&&(qr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&qr&&(be=Ny()):(di=J,Ed="value"in di?di.value:di.textContent,qr=!0)),Fe=Fl(U,Ee),0<Fe.length&&(Ee=new Py(Ee,i,null,c,J),W.push({event:Ee,listeners:Fe}),be?Ee.data=be:(be=Fy(c),be!==null&&(Ee.data=be)))),(be=R_?__(i,c):k_(i,c))&&(Ee=Fl(U,"onBeforeInput"),0<Ee.length&&(Fe=new Py("onBeforeInput","beforeinput",null,c,J),W.push({event:Fe,listeners:Ee}),Fe.data=be)),bk(W,i,U,c,J)}CS(W,a)})}function Po(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Fl(i,a){for(var c=a+"Capture",f=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Qa(i,c),p!=null&&f.unshift(Po(i,p,y)),p=Qa(i,a),p!=null&&f.push(Po(i,p,y))),i.tag===3)return f;i=i.return}return[]}function ga(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ES(i,a,c,f,p){for(var y=a._reactName,E=[];c!==null&&c!==f;){var _=c,N=_.alternate,U=_.stateNode;if(_=_.tag,N!==null&&N===f)break;_!==5&&_!==26&&_!==27||U===null||(N=U,p?(U=Qa(c,y),U!=null&&E.unshift(Po(c,U,N))):p||(U=Qa(c,y),U!=null&&E.push(Po(c,U,N)))),c=c.return}E.length!==0&&i.push({event:a,listeners:E})}var Ck=/\r\n?/g,wk=/\u0000|\uFFFD/g;function xS(i){return(typeof i=="string"?i:""+i).replace(Ck,`
`).replace(wk,"")}function RS(i,a){return a=xS(a),xS(i)===a}function Vl(){}function ot(i,a,c,f,p,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||$r(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&$r(i,""+f);break;case"className":Gc(i,"class",f);break;case"tabIndex":Gc(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Gc(i,c,f);break;case"style":ky(i,f,y);break;case"data":if(a!=="object"){Gc(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Jc(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ot(i,a,"name",p.name,p,null),ot(i,a,"formEncType",p.formEncType,p,null),ot(i,a,"formMethod",p.formMethod,p,null),ot(i,a,"formTarget",p.formTarget,p,null)):(ot(i,a,"encType",p.encType,p,null),ot(i,a,"method",p.method,p,null),ot(i,a,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Jc(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=Vl);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=Jc(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":He("beforetoggle",i),He("toggle",i),qc(i,"popover",f);break;case"xlinkActuate":Ms(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ms(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ms(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ms(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ms(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ms(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":qc(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=ZR.get(c)||c,qc(i,c,f))}}function sp(i,a,c,f,p,y){switch(c){case"style":ky(i,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof f=="string"?$r(i,f):(typeof f=="number"||typeof f=="bigint")&&$r(i,""+f);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yy.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),y=i[Cn]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(a,y,p),typeof f=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,p);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):qc(i,c,f)}}}function Zt(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var f=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ot(i,a,y,E,c,null)}}p&&ot(i,a,"srcSet",c.srcSet,c,null),f&&ot(i,a,"src",c.src,c,null);return;case"input":He("invalid",i);var _=y=E=p=null,N=null,U=null;for(f in c)if(c.hasOwnProperty(f)){var J=c[f];if(J!=null)switch(f){case"name":p=J;break;case"type":E=J;break;case"checked":N=J;break;case"defaultChecked":U=J;break;case"value":y=J;break;case"defaultValue":_=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,a));break;default:ot(i,a,f,J,c,null)}}Ey(i,y,_,N,U,E,p,!1),Kc(i);return;case"select":He("invalid",i),f=E=y=null;for(p in c)if(c.hasOwnProperty(p)&&(_=c[p],_!=null))switch(p){case"value":y=_;break;case"defaultValue":E=_;break;case"multiple":f=_;default:ot(i,a,p,_,c,null)}a=y,c=E,i.multiple=!!f,a!=null?Vr(i,!!f,a,!1):c!=null&&Vr(i,!!f,c,!0);return;case"textarea":He("invalid",i),y=p=f=null;for(E in c)if(c.hasOwnProperty(E)&&(_=c[E],_!=null))switch(E){case"value":f=_;break;case"defaultValue":p=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:ot(i,a,E,_,c,null)}Ry(i,f,p,y),Kc(i);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(f=c[N],f!=null))switch(N){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ot(i,a,N,f,c,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(f=0;f<Io.length;f++)He(Io[f],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in c)if(c.hasOwnProperty(U)&&(f=c[U],f!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ot(i,a,U,f,c,null)}return;default:if(vd(a)){for(J in c)c.hasOwnProperty(J)&&(f=c[J],f!==void 0&&sp(i,a,J,f,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(f=c[_],f!=null&&ot(i,a,_,f,c,null))}function Ek(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,_=null,N=null,U=null,J=null;for(V in c){var W=c[V];if(c.hasOwnProperty(V)&&W!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=W;default:f.hasOwnProperty(V)||ot(i,a,V,null,f,W)}}for(var B in f){var V=f[B];if(W=c[B],f.hasOwnProperty(B)&&(V!=null||W!=null))switch(B){case"type":y=V;break;case"name":p=V;break;case"checked":U=V;break;case"defaultChecked":J=V;break;case"value":E=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,a));break;default:V!==W&&ot(i,a,B,V,f,W)}}yd(i,E,_,N,U,J,y,p);return;case"select":V=E=_=B=null;for(y in c)if(N=c[y],c.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":V=N;default:f.hasOwnProperty(y)||ot(i,a,y,null,f,N)}for(p in f)if(y=f[p],N=c[p],f.hasOwnProperty(p)&&(y!=null||N!=null))switch(p){case"value":B=y;break;case"defaultValue":_=y;break;case"multiple":E=y;default:y!==N&&ot(i,a,p,y,f,N)}a=_,c=E,f=V,B!=null?Vr(i,!!c,B,!1):!!f!=!!c&&(a!=null?Vr(i,!!c,a,!0):Vr(i,!!c,c?[]:"",!1));return;case"textarea":V=B=null;for(_ in c)if(p=c[_],c.hasOwnProperty(_)&&p!=null&&!f.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ot(i,a,_,null,f,p)}for(E in f)if(p=f[E],y=c[E],f.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":B=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&ot(i,a,E,p,f,y)}xy(i,B,V);return;case"option":for(var _e in c)if(B=c[_e],c.hasOwnProperty(_e)&&B!=null&&!f.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:ot(i,a,_e,null,f,B)}for(N in f)if(B=f[N],V=c[N],f.hasOwnProperty(N)&&B!==V&&(B!=null||V!=null))switch(N){case"selected":i.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:ot(i,a,N,B,f,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in c)B=c[Ce],c.hasOwnProperty(Ce)&&B!=null&&!f.hasOwnProperty(Ce)&&ot(i,a,Ce,null,f,B);for(U in f)if(B=f[U],V=c[U],f.hasOwnProperty(U)&&B!==V&&(B!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,a));break;default:ot(i,a,U,B,f,V)}return;default:if(vd(a)){for(var ct in c)B=c[ct],c.hasOwnProperty(ct)&&B!==void 0&&!f.hasOwnProperty(ct)&&sp(i,a,ct,void 0,f,B);for(J in f)B=f[J],V=c[J],!f.hasOwnProperty(J)||B===V||B===void 0&&V===void 0||sp(i,a,J,B,f,V);return}}for(var j in c)B=c[j],c.hasOwnProperty(j)&&B!=null&&!f.hasOwnProperty(j)&&ot(i,a,j,null,f,B);for(W in f)B=f[W],V=c[W],!f.hasOwnProperty(W)||B===V||B==null&&V==null||ot(i,a,W,B,f,V)}var ip=null,rp=null;function $l(i){return i.nodeType===9?i:i.ownerDocument}function _S(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kS(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function ap(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var op=null;function xk(){var i=window.event;return i&&i.type==="popstate"?i===op?!1:(op=i,!0):(op=null,!1)}var OS=typeof setTimeout=="function"?setTimeout:void 0,Rk=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,_k=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(i){return AS.resolve(null).then(i).catch(kk)}:OS;function kk(i){setTimeout(function(){throw i})}function ki(i){return i==="head"}function NS(i,a){var c=a,f=0,p=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<f&&8>f){c=f;var E=i.ownerDocument;if(c&1&&Lo(E.documentElement),c&2&&Lo(E.body),c&4)for(c=E.head,Lo(c),E=c.firstChild;E;){var _=E.nextSibling,N=E.nodeName;E[Ja]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||c.removeChild(E),E=_}}if(p===0){i.removeChild(y),Ho(a);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:f=c.charCodeAt(0)-48;else f=0;c=y}while(c);Ho(a)}function cp(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":cp(c),hd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Ok(i,a,c,f){for(;i.nodeType===1;){var p=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Ja])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=as(i.nextSibling),i===null)break}return null}function Ak(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=as(i.nextSibling),i===null))return null;return i}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function Nk(i,a){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function as(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var up=null;function DS(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}function IS(i,a,c){switch(a=$l(c),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Lo(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);hd(i)}var es=new Map,PS=new Set;function Hl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Qs=q.d;q.d={f:Dk,r:Ik,D:Pk,C:Lk,L:jk,m:Mk,X:Bk,S:Uk,M:Fk};function Dk(){var i=Qs.f(),a=Pl();return i||a}function Ik(i){var a=Mr(i);a!==null&&a.tag===5&&a.type==="form"?ev(a):Qs.r(i)}var ya=typeof document>"u"?null:document;function LS(i,a,c){var f=ya;if(f&&typeof a=="string"&&a){var p=Kn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),PS.has(p)||(PS.add(p),i={rel:i,crossOrigin:c,href:a},f.querySelector(p)===null&&(a=f.createElement("link"),Zt(a,"link",i),zt(a),f.head.appendChild(a)))}}function Pk(i){Qs.D(i),LS("dns-prefetch",i,null)}function Lk(i,a){Qs.C(i,a),LS("preconnect",i,a)}function jk(i,a,c){Qs.L(i,a,c);var f=ya;if(f&&i&&a){var p='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+Kn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+Kn(c.imageSizes)+'"]')):p+='[href="'+Kn(i)+'"]';var y=p;switch(a){case"style":y=ba(i);break;case"script":y=va(i)}es.has(y)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),es.set(y,i),f.querySelector(p)!==null||a==="style"&&f.querySelector(jo(y))||a==="script"&&f.querySelector(Mo(y))||(a=f.createElement("link"),Zt(a,"link",i),zt(a),f.head.appendChild(a)))}}function Mk(i,a){Qs.m(i,a);var c=ya;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Kn(f)+'"][href="'+Kn(i)+'"]',y=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=va(i)}if(!es.has(y)&&(i=m({rel:"modulepreload",href:i},a),es.set(y,i),c.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Mo(y)))return}f=c.createElement("link"),Zt(f,"link",i),zt(f),c.head.appendChild(f)}}}function Uk(i,a,c){Qs.S(i,a,c);var f=ya;if(f&&i){var p=Ur(f).hoistableStyles,y=ba(i);a=a||"default";var E=p.get(y);if(!E){var _={loading:0,preload:null};if(E=f.querySelector(jo(y)))_.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=es.get(y))&&fp(i,c);var N=E=f.createElement("link");zt(N),Zt(N,"link",i),N._p=new Promise(function(U,J){N.onload=U,N.onerror=J}),N.addEventListener("load",function(){_.loading|=1}),N.addEventListener("error",function(){_.loading|=2}),_.loading|=4,zl(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:_},p.set(y,E)}}}function Bk(i,a){Qs.X(i,a);var c=ya;if(c&&i){var f=Ur(c).hoistableScripts,p=va(i),y=f.get(p);y||(y=c.querySelector(Mo(p)),y||(i=m({src:i,async:!0},a),(a=es.get(p))&&dp(i,a),y=c.createElement("script"),zt(y),Zt(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function Fk(i,a){Qs.M(i,a);var c=ya;if(c&&i){var f=Ur(c).hoistableScripts,p=va(i),y=f.get(p);y||(y=c.querySelector(Mo(p)),y||(i=m({src:i,async:!0,type:"module"},a),(a=es.get(p))&&dp(i,a),y=c.createElement("script"),zt(y),Zt(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function jS(i,a,c,f){var p=(p=fe.current)?Hl(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=ba(c.href),c=Ur(p).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=ba(c.href);var y=Ur(p).hoistableStyles,E=y.get(i);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=p.querySelector(jo(i)))&&!y._p&&(E.instance=y,E.state.loading=5),es.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},es.set(i,c),y||Vk(p,i,c,E.state))),a&&f===null)throw Error(s(528,""));return E}if(a&&f!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=va(c),c=Ur(p).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ba(i){return'href="'+Kn(i)+'"'}function jo(i){return'link[rel="stylesheet"]['+i+"]"}function MS(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function Vk(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Zt(a,"link",c),zt(a),i.head.appendChild(a))}function va(i){return'[src="'+Kn(i)+'"]'}function Mo(i){return"script[async]"+i}function US(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+Kn(c.href)+'"]');if(f)return a.instance=f,zt(f),f;var p=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),zt(f),Zt(f,"style",p),zl(f,c.precedence,i),a.instance=f;case"stylesheet":p=ba(c.href);var y=i.querySelector(jo(p));if(y)return a.state.loading|=4,a.instance=y,zt(y),y;f=MS(c),(p=es.get(p))&&fp(f,p),y=(i.ownerDocument||i).createElement("link"),zt(y);var E=y;return E._p=new Promise(function(_,N){E.onload=_,E.onerror=N}),Zt(y,"link",f),a.state.loading|=4,zl(y,c.precedence,i),a.instance=y;case"script":return y=va(c.src),(p=i.querySelector(Mo(y)))?(a.instance=p,zt(p),p):(f=c,(p=es.get(y))&&(f=m({},c),dp(f,p)),i=i.ownerDocument||i,p=i.createElement("script"),zt(p),Zt(p,"link",f),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,zl(f,c.precedence,i));return a.instance}function zl(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,y=p,E=0;E<f.length;E++){var _=f[E];if(_.dataset.precedence===a)y=_;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function fp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function dp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var ql=null;function BS(i,a,c){if(ql===null){var f=new Map,p=ql=new Map;p.set(c,f)}else p=ql,f=p.get(c),f||(f=new Map,p.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),p=0;p<c.length;p++){var y=c[p];if(!(y[Ja]||y[an]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=i+E;var _=f.get(E);_?_.push(y):f.set(E,[y])}}return f}function FS(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function $k(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function VS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Uo=null;function Hk(){}function zk(i,a,c){if(Uo===null)throw Error(s(475));var f=Uo;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=ba(c.href),y=i.querySelector(jo(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=Gl.bind(f),i.then(f,f)),a.state.loading|=4,a.instance=y,zt(y);return}y=i.ownerDocument||i,c=MS(c),(p=es.get(p))&&fp(c,p),y=y.createElement("link"),zt(y);var E=y;E._p=new Promise(function(_,N){E.onload=_,E.onerror=N}),Zt(y,"link",c),a.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=Gl.bind(f),i.addEventListener("load",a),i.addEventListener("error",a))}}function qk(){if(Uo===null)throw Error(s(475));var i=Uo;return i.stylesheets&&i.count===0&&hp(i,i.stylesheets),0<i.count?function(a){var c=setTimeout(function(){if(i.stylesheets&&hp(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Gl(){if(this.count--,this.count===0){if(this.stylesheets)hp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kl=null;function hp(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kl=new Map,a.forEach(Gk,i),Kl=null,Gl.call(i))}function Gk(i,a){if(!(a.state.loading&4)){var c=Kl.get(i);if(c)var f=c.get(null);else{c=new Map,Kl.set(i,c);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}p=a.instance,E=p.getAttribute("data-precedence"),y=c.get(E)||f,y===f&&c.set(null,p),c.set(E,p),this.count++,f=Gl.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var Bo={$$typeof:k,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Kk(i,a,c,f,p,y,E,_){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function $S(i,a,c,f,p,y,E,_,N,U,J,W){return i=new Kk(i,a,c,E,_,N,U,W),a=1,y===!0&&(a|=24),y=jn(3,null,null,a),i.current=y,y.stateNode=i,a=Yd(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},Wd(y),i}function HS(i){return i?(i=Xr,i):Xr}function zS(i,a,c,f,p,y){p=HS(p),f.context===null?f.context=p:f.pendingContext=p,f=mi(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=gi(i,f,a),c!==null&&(Vn(c,i,a),mo(c,i,a))}function qS(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function pp(i,a){qS(i,a),(i=i.alternate)&&qS(i,a)}function GS(i){if(i.tag===13){var a=Jr(i,67108864);a!==null&&Vn(a,i,67108864),pp(i,67108864)}}var Yl=!0;function Yk(i,a,c,f){var p=L.T;L.T=null;var y=q.p;try{q.p=2,mp(i,a,c,f)}finally{q.p=y,L.T=p}}function Jk(i,a,c,f){var p=L.T;L.T=null;var y=q.p;try{q.p=8,mp(i,a,c,f)}finally{q.p=y,L.T=p}}function mp(i,a,c,f){if(Yl){var p=gp(f);if(p===null)np(i,a,f,Jl,c),YS(i,f);else if(Qk(p,i,a,c,f))f.stopPropagation();else if(YS(i,f),a&4&&-1<Xk.indexOf(i)){for(;p!==null;){var y=Mr(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Sn(y.pendingLanes);if(E!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;E;){var N=1<<31-Ne(E);_.entanglements[1]|=N,E&=~N}Es(y),(st&6)===0&&(Dl=et()+500,Do(0))}}break;case 13:_=Jr(y,2),_!==null&&Vn(_,y,2),Pl(),pp(y,2)}if(y=gp(f),y===null&&np(i,a,f,Jl,c),y===p)break;p=y}p!==null&&f.stopPropagation()}else np(i,a,f,null,c)}}function gp(i){return i=Td(i),yp(i)}var Jl=null;function yp(i){if(Jl=null,i=jr(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Jl=i,null}function KS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case ze:return 2;case nt:return 8;case jt:case ve:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var bp=!1,Oi=null,Ai=null,Ni=null,Fo=new Map,Vo=new Map,Di=[],Xk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YS(i,a){switch(i){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Fo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(a.pointerId)}}function $o(i,a,c,f,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[p]},a!==null&&(a=Mr(a),a!==null&&GS(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function Qk(i,a,c,f,p){switch(a){case"focusin":return Oi=$o(Oi,i,a,c,f,p),!0;case"dragenter":return Ai=$o(Ai,i,a,c,f,p),!0;case"mouseover":return Ni=$o(Ni,i,a,c,f,p),!0;case"pointerover":var y=p.pointerId;return Fo.set(y,$o(Fo.get(y)||null,i,a,c,f,p)),!0;case"gotpointercapture":return y=p.pointerId,Vo.set(y,$o(Vo.get(y)||null,i,a,c,f,p)),!0}return!1}function JS(i){var a=jr(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,zR(i.priority,function(){if(c.tag===13){var f=Fn();f=ud(f);var p=Jr(c,f);p!==null&&Vn(p,c,f),pp(c,f)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xl(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=gp(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Sd=f,c.target.dispatchEvent(f),Sd=null}else return a=Mr(c),a!==null&&GS(a),i.blockedOn=c,!1;a.shift()}return!0}function XS(i,a,c){Xl(i)&&c.delete(a)}function Wk(){bp=!1,Oi!==null&&Xl(Oi)&&(Oi=null),Ai!==null&&Xl(Ai)&&(Ai=null),Ni!==null&&Xl(Ni)&&(Ni=null),Fo.forEach(XS),Vo.forEach(XS)}function Ql(i,a){i.blockedOn===a&&(i.blockedOn=null,bp||(bp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Wk)))}var Wl=null;function QS(i){Wl!==i&&(Wl=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Wl===i&&(Wl=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],p=i[a+2];if(typeof f!="function"){if(yp(f||c)===null)continue;break}var y=Mr(c);y!==null&&(i.splice(a,3),a-=3,yh(y,{pending:!0,data:p,method:c.method,action:f},f,p))}}))}function Ho(i){function a(N){return Ql(N,i)}Oi!==null&&Ql(Oi,i),Ai!==null&&Ql(Ai,i),Ni!==null&&Ql(Ni,i),Fo.forEach(a),Vo.forEach(a);for(var c=0;c<Di.length;c++){var f=Di[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Di.length&&(c=Di[0],c.blockedOn===null);)JS(c),c.blockedOn===null&&Di.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var p=c[f],y=c[f+1],E=p[Cn]||null;if(typeof y=="function")E||QS(c);else if(E){var _=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[Cn]||null)_=E.formAction;else if(yp(p)!==null)continue}else _=E.action;typeof _=="function"?c[f+1]=_:(c.splice(f,3),f-=3),QS(c)}}}function vp(i){this._internalRoot=i}Zl.prototype.render=vp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,f=Fn();zS(c,f,i,a,null,null)},Zl.prototype.unmount=vp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;zS(i.current,2,null,i,null,null),Pl(),a[Lr]=null}};function Zl(i){this._internalRoot=i}Zl.prototype.unstable_scheduleHydration=function(i){if(i){var a=py();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Di.length&&a!==0&&a<Di[c].priority;c++);Di.splice(c,0,i),c===0&&JS(i)}};var WS=e.version;if(WS!=="19.1.0")throw Error(s(527,WS,"19.1.0"));q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(a),i=i!==null?d(i):null,i=i===null?null:i.stateNode,i};var Zk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{he=eu.inject(Zk),pe=eu}catch{}}return qo.createRoot=function(i,a){if(!r(i))throw Error(s(299));var c=!1,f="",p=pv,y=mv,E=gv,_=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_=a.unstable_transitionCallbacks)),a=$S(i,1,!1,null,null,c,f,p,y,E,_,null),i[Lr]=a.current,tp(i),new vp(a)},qo.hydrateRoot=function(i,a,c){if(!r(i))throw Error(s(299));var f=!1,p="",y=pv,E=mv,_=gv,N=null,U=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&(U=c.formState)),a=$S(i,1,!0,a,c??null,f,p,y,E,_,N,U),a.context=HS(null),c=a.current,f=Fn(),f=ud(f),p=mi(f),p.callback=null,gi(c,p,f),c=f,a.current.lanes=c,Ya(a,c),Es(a),i[Lr]=a.current,tp(i),new Zl(a)},qo.version="19.1.0",qo}var c0;function c1(){if(c0)return Cp.exports;c0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cp.exports=o1(),Cp.exports}var l1=c1(),Go={},l0;function u1(){if(l0)return Go;l0=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.parse=l,Go.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function l(g,v){const S=new o,T=g.length;if(T<2)return S;const w=v?.decode||m;let R=0;do{const O=g.indexOf("=",R);if(O===-1)break;const k=g.indexOf(";",R),D=k===-1?T:k;if(O>D){R=g.lastIndexOf(";",O-1)+1;continue}const P=u(g,R,O),H=h(g,O,P),G=g.slice(P,H);if(S[G]===void 0){let X=u(g,O+1,D),ie=h(g,D,X);const ee=w(g.slice(X,ie));S[G]=ee}R=D+1}while(R<T);return S}function u(g,v,S){do{const T=g.charCodeAt(v);if(T!==32&&T!==9)return v}while(++v<S);return S}function h(g,v,S){for(;v>S;){const T=g.charCodeAt(--v);if(T!==32&&T!==9)return v+1}return S}function d(g,v,S){const T=S?.encode||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const w=T(v);if(!e.test(w))throw new TypeError(`argument val is invalid: ${v}`);let R=g+"="+w;if(!S)return R;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);R+="; Max-Age="+S.maxAge}if(S.domain){if(!n.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);R+="; Domain="+S.domain}if(S.path){if(!s.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);R+="; Path="+S.path}if(S.expires){if(!b(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);R+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(R+="; HttpOnly"),S.secure&&(R+="; Secure"),S.partitioned&&(R+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return R}function m(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function b(g){return r.call(g)==="[object Date]"}return Go}u1();var u0="popstate";function f1(t={}){function e(s,r){let{pathname:o,search:l,hash:u}=s.location;return rm("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:hc(r)}return h1(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d1(){return Math.random().toString(36).substring(2,10)}function f0(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ua(e):e,state:n,key:e&&e.key||s||d1()}}function hc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ua(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function h1(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,l=r.history,u="POP",h=null,d=m();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function m(){return(l.state||{idx:null}).idx}function b(){u="POP";let w=m(),R=w==null?null:w-d;d=w,h&&h({action:u,location:T.location,delta:R})}function g(w,R){u="PUSH";let O=rm(T.location,w,R);d=m()+1;let k=f0(O,d),D=T.createHref(O);try{l.pushState(k,"",D)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(D)}o&&h&&h({action:u,location:T.location,delta:1})}function v(w,R){u="REPLACE";let O=rm(T.location,w,R);d=m();let k=f0(O,d),D=T.createHref(O);l.replaceState(k,"",D),o&&h&&h({action:u,location:T.location,delta:0})}function S(w){return p1(w)}let T={get action(){return u},get location(){return t(r,l)},listen(w){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(u0,b),h=w,()=>{r.removeEventListener(u0,b),h=null}},createHref(w){return e(r,w)},createURL:S,encodeLocation(w){let R=S(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:g,replace:v,go(w){return l.go(w)}};return T}function p1(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),bt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:hc(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function MC(t,e,n="/"){return m1(t,e,n,!1)}function m1(t,e,n,s){let r=typeof e=="string"?Ua(e):e,o=ri(r.pathname||"/",n);if(o==null)return null;let l=UC(t);g1(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let d=_1(o);u=x1(l[h],d,s)}return u}function UC(t,e=[],n=[],s=""){let r=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(bt(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let d=si([s,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(bt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),UC(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:w1(d,o.index),routesMeta:m})};return t.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))r(o,l);else for(let u of BC(o.path))r(o,l,u)}),e}function BC(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let l=BC(s.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...l),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function g1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E1(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var y1=/^:[\w-]+$/,b1=3,v1=2,S1=1,T1=10,C1=-2,d0=t=>t==="*";function w1(t,e){let n=t.split("/"),s=n.length;return n.some(d0)&&(s+=C1),e&&(s+=v1),n.filter(r=>!d0(r)).reduce((r,o)=>r+(y1.test(o)?b1:o===""?S1:T1),s)}function E1(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function x1(t,e,n=!1){let{routesMeta:s}=t,r={},o="/",l=[];for(let u=0;u<s.length;++u){let h=s[u],d=u===s.length-1,m=o==="/"?e:e.slice(o.length)||"/",b=zu({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},m),g=h.route;if(!b&&d&&n&&!s[s.length-1].route.index&&(b=zu({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!b)return null;Object.assign(r,b.params),l.push({params:r,pathname:si([o,b.pathname]),pathnameBase:N1(si([o,b.pathnameBase])),route:g}),b.pathnameBase!=="/"&&(o=si([o,b.pathnameBase]))}return l}function zu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=R1(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((d,{paramName:m,isOptional:b},g)=>{if(m==="*"){let S=u[g]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=u[g];return b&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:t}}function R1(t,e=!1,n=!0){hs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function _1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ri(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function k1(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Ua(t):t;return{pathname:n?n.startsWith("/")?n:O1(n,e):e,search:D1(s),hash:I1(r)}}function O1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Rp(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sg(t){let e=A1(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function ig(t,e,n,s=!1){let r;typeof t=="string"?r=Ua(t):(r={...t},bt(!r.pathname||!r.pathname.includes("?"),Rp("?","pathname","search",r)),bt(!r.pathname||!r.pathname.includes("#"),Rp("#","pathname","hash",r)),bt(!r.search||!r.search.includes("#"),Rp("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=n;else{let b=e.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),b-=1;r.pathname=g.join("/")}u=b>=0?e[b]:"/"}let h=k1(r,u),d=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(d||m)&&(h.pathname+="/"),h}var si=t=>t.join("/").replace(/\/\/+/g,"/"),N1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,I1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var FC=["POST","PUT","PATCH","DELETE"];new Set(FC);var L1=["GET",...FC];new Set(L1);var Ba=x.createContext(null);Ba.displayName="DataRouter";var xf=x.createContext(null);xf.displayName="DataRouterState";var VC=x.createContext({isTransitioning:!1});VC.displayName="ViewTransition";var j1=x.createContext(new Map);j1.displayName="Fetchers";var M1=x.createContext(null);M1.displayName="Await";var gs=x.createContext(null);gs.displayName="Navigation";var kc=x.createContext(null);kc.displayName="Location";var ys=x.createContext({outlet:null,matches:[],isDataRoute:!1});ys.displayName="Route";var rg=x.createContext(null);rg.displayName="RouteError";function U1(t,{relative:e}={}){bt(Fa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=x.useContext(gs),{hash:r,pathname:o,search:l}=Oc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:si([n,o])),s.createHref({pathname:u,search:l,hash:r})}function Fa(){return x.useContext(kc)!=null}function Yi(){return bt(Fa(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(kc).location}var $C="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HC(t){x.useContext(gs).static||x.useLayoutEffect(t)}function ag(){let{isDataRoute:t}=x.useContext(ys);return t?W1():B1()}function B1(){bt(Fa(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Ba),{basename:e,navigator:n}=x.useContext(gs),{matches:s}=x.useContext(ys),{pathname:r}=Yi(),o=JSON.stringify(sg(s)),l=x.useRef(!1);return HC(()=>{l.current=!0}),x.useCallback((h,d={})=>{if(hs(l.current,$C),!l.current)return;if(typeof h=="number"){n.go(h);return}let m=ig(h,JSON.parse(o),r,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:si([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,o,r,t])}x.createContext(null);function F1(){let{matches:t}=x.useContext(ys),e=t[t.length-1];return e?e.params:{}}function Oc(t,{relative:e}={}){let{matches:n}=x.useContext(ys),{pathname:s}=Yi(),r=JSON.stringify(sg(n));return x.useMemo(()=>ig(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function V1(t,e){return zC(t,e)}function zC(t,e,n,s){bt(Fa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=x.useContext(gs),{matches:o}=x.useContext(ys),l=o[o.length-1],u=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",m=l&&l.route;{let R=m&&m.path||"";qC(h,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=Yi(),g;if(e){let R=typeof e=="string"?Ua(e):e;bt(d==="/"||R.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${R.pathname}" was given in the \`location\` prop.`),g=R}else g=b;let v=g.pathname||"/",S=v;if(d!=="/"){let R=d.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=MC(t,{pathname:S});hs(m||T!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),hs(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=G1(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:si([d,r.encodeLocation?r.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?d:si([d,r.encodeLocation?r.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,n,s);return e&&w?x.createElement(kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function $1(){let t=Q1(),e=P1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:r},n):null,l)}var H1=x.createElement($1,null),z1=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(ys.Provider,{value:this.props.routeContext},x.createElement(rg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q1({routeContext:t,match:e,children:n}){let s=x.useContext(Ba);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(ys.Provider,{value:t},n)}function G1(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=n?.errors;if(o!=null){let h=r.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);bt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:m,errors:b}=n,g=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!b||b[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((h,d,m)=>{let b,g=!1,v=null,S=null;n&&(b=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||H1,l&&(u<0&&m===0?(qC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,S=null):u===m&&(g=!0,S=d.route.hydrateFallbackElement||null)));let T=e.concat(r.slice(0,m+1)),w=()=>{let R;return b?R=v:g?R=S:d.route.Component?R=x.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=h,x.createElement(q1,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:R})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?x.createElement(z1,{location:n.location,revalidation:n.revalidation,component:v,error:b,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):w()},null)}function og(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K1(t){let e=x.useContext(Ba);return bt(e,og(t)),e}function Y1(t){let e=x.useContext(xf);return bt(e,og(t)),e}function J1(t){let e=x.useContext(ys);return bt(e,og(t)),e}function cg(t){let e=J1(t),n=e.matches[e.matches.length-1];return bt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function X1(){return cg("useRouteId")}function Q1(){let t=x.useContext(rg),e=Y1("useRouteError"),n=cg("useRouteError");return t!==void 0?t:e.errors?.[n]}function W1(){let{router:t}=K1("useNavigate"),e=cg("useNavigate"),n=x.useRef(!1);return HC(()=>{n.current=!0}),x.useCallback(async(r,o={})=>{hs(n.current,$C),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...o}))},[t,e])}var h0={};function qC(t,e,n){!e&&!h0[t]&&(h0[t]=!0,hs(!1,n))}x.memo(Z1);function Z1({routes:t,future:e,state:n}){return zC(t,void 0,n,e)}function Ko({to:t,replace:e,state:n,relative:s}){bt(Fa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=x.useContext(gs);hs(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(ys),{pathname:l}=Yi(),u=ag(),h=ig(t,sg(o),l,s==="path"),d=JSON.stringify(h);return x.useEffect(()=>{u(JSON.parse(d),{replace:e,state:n,relative:s})},[u,d,s,e,n]),null}function pr(t){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eO({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:o=!1}){bt(!Fa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof n=="string"&&(n=Ua(n));let{pathname:h="/",search:d="",hash:m="",state:b=null,key:g="default"}=n,v=x.useMemo(()=>{let S=ri(h,l);return S==null?null:{location:{pathname:S,search:d,hash:m,state:b,key:g},navigationType:s}},[l,h,d,m,b,g,s]);return hs(v!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:x.createElement(gs.Provider,{value:u},x.createElement(kc.Provider,{children:e,value:v}))}function tO({children:t,location:e}){return V1(am(t),e)}function am(t,e=[]){let n=[];return x.Children.forEach(t,(s,r)=>{if(!x.isValidElement(s))return;let o=[...e,r];if(s.type===x.Fragment){n.push.apply(n,am(s.props.children,o));return}bt(s.type===pr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=am(s.props.children,o)),n.push(l)}),n}var Su="get",Tu="application/x-www-form-urlencoded";function Rf(t){return t!=null&&typeof t.tagName=="string"}function nO(t){return Rf(t)&&t.tagName.toLowerCase()==="button"}function sO(t){return Rf(t)&&t.tagName.toLowerCase()==="form"}function iO(t){return Rf(t)&&t.tagName.toLowerCase()==="input"}function rO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aO(t,e){return t.button===0&&(!e||e==="_self")&&!rO(t)}var tu=null;function oO(){if(tu===null)try{new FormData(document.createElement("form"),0),tu=!1}catch{tu=!0}return tu}var cO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _p(t){return t!=null&&!cO.has(t)?(hs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tu}"`),null):t}function lO(t,e){let n,s,r,o,l;if(sO(t)){let u=t.getAttribute("action");s=u?ri(u,e):null,n=t.getAttribute("method")||Su,r=_p(t.getAttribute("enctype"))||Tu,o=new FormData(t)}else if(nO(t)||iO(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||u.getAttribute("action");if(s=h?ri(h,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Su,r=_p(t.getAttribute("formenctype"))||_p(u.getAttribute("enctype"))||Tu,o=new FormData(u,t),!oO()){let{name:d,type:m,value:b}=t;if(m==="image"){let g=d?`${d}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else d&&o.append(d,b)}}else{if(Rf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Su,s=null,r=Tu,l=t}return o&&r==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:o,body:l}}function lg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function uO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dO(t,e,n){let s=await Promise.all(t.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await uO(o,n);return l.links?l.links():[]}return[]}));return gO(s.flat(1).filter(fO).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function p0(t,e,n,s,r,o){let l=(h,d)=>n[d]?h.route.id!==n[d].route.id:!0,u=(h,d)=>n[d].pathname!==h.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,d)=>l(h,d)||u(h,d)):o==="data"?e.filter((h,d)=>{let m=s.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(l(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function hO(t,e,{includeHydrateFallback:n}={}){return pO(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function pO(t){return[...new Set(t)]}function mO(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function gO(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let o=JSON.stringify(mO(r));return n.has(o)||(n.add(o),s.push({key:o,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yO=new Set([100,101,204,205]);function bO(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ri(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function GC(){let t=x.useContext(Ba);return lg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vO(){let t=x.useContext(xf);return lg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ug=x.createContext(void 0);ug.displayName="FrameworkContext";function KC(){let t=x.useContext(ug);return lg(t,"You must render this element inside a <HydratedRouter> element"),t}function SO(t,e){let n=x.useContext(ug),[s,r]=x.useState(!1),[o,l]=x.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:m,onTouchStart:b}=e,g=x.useRef(null);x.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let T=R=>{R.forEach(O=>{l(O.isIntersecting)})},w=new IntersectionObserver(T,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),x.useEffect(()=>{if(s){let T=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(T)}}},[s]);let v=()=>{r(!0)},S=()=>{r(!1),l(!1)};return n?t!=="intent"?[o,g,{}]:[o,g,{onFocus:Yo(u,v),onBlur:Yo(h,S),onMouseEnter:Yo(d,v),onMouseLeave:Yo(m,S),onTouchStart:Yo(b,v)}]:[!1,g,{}]}function Yo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function TO({page:t,...e}){let{router:n}=GC(),s=x.useMemo(()=>MC(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?x.createElement(wO,{page:t,matches:s,...e}):null}function CO(t){let{manifest:e,routeModules:n}=KC(),[s,r]=x.useState([]);return x.useEffect(()=>{let o=!1;return dO(t,e,n).then(l=>{o||r(l)}),()=>{o=!0}},[t,e,n]),s}function wO({page:t,matches:e,...n}){let s=Yi(),{manifest:r,routeModules:o}=KC(),{basename:l}=GC(),{loaderData:u,matches:h}=vO(),d=x.useMemo(()=>p0(t,e,h,r,s,"data"),[t,e,h,r,s]),m=x.useMemo(()=>p0(t,e,h,r,s,"assets"),[t,e,h,r,s]),b=x.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let S=new Set,T=!1;if(e.forEach(R=>{let O=r.routes[R.route.id];!O||!O.hasLoader||(!d.some(k=>k.route.id===R.route.id)&&R.route.id in u&&o[R.route.id]?.shouldRevalidate||O.hasClientLoader?T=!0:S.add(R.route.id))}),S.size===0)return[];let w=bO(t,l);return T&&S.size>0&&w.searchParams.set("_routes",e.filter(R=>S.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[l,u,s,r,d,e,t,o]),g=x.useMemo(()=>hO(m,r),[m,r]),v=CO(m);return x.createElement(x.Fragment,null,b.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),g.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),v.map(({key:S,link:T})=>x.createElement("link",{key:S,...T})))}function EO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var YC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YC&&(window.__reactRouterVersion="7.6.3")}catch{}function xO({basename:t,children:e,window:n}){let s=x.useRef();s.current==null&&(s.current=f1({window:n,v5Compat:!0}));let r=s.current,[o,l]=x.useState({action:r.action,location:r.location}),u=x.useCallback(h=>{x.startTransition(()=>l(h))},[l]);return x.useLayoutEffect(()=>r.listen(u),[r,u]),x.createElement(eO,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r})}var JC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=x.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:o,replace:l,state:u,target:h,to:d,preventScrollReset:m,viewTransition:b,...g},v){let{basename:S}=x.useContext(gs),T=typeof d=="string"&&JC.test(d),w,R=!1;if(typeof d=="string"&&T&&(w=d,YC))try{let ie=new URL(window.location.href),ee=d.startsWith("//")?new URL(ie.protocol+d):new URL(d),le=ri(ee.pathname,S);ee.origin===ie.origin&&le!=null?d=le+ee.search+ee.hash:R=!0}catch{hs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=U1(d,{relative:r}),[k,D,P]=SO(s,g),H=OO(d,{replace:l,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:b});function G(ie){e&&e(ie),ie.defaultPrevented||H(ie)}let X=x.createElement("a",{...g,...P,href:w||O,onClick:R||o?e:G,ref:EO(v,D),target:h,"data-discover":!T&&n==="render"?"true":void 0});return k&&!T?x.createElement(x.Fragment,null,X,x.createElement(TO,{page:O})):X});vr.displayName="Link";var RO=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:o,to:l,viewTransition:u,children:h,...d},m){let b=Oc(l,{relative:d.relative}),g=Yi(),v=x.useContext(xf),{navigator:S,basename:T}=x.useContext(gs),w=v!=null&&PO(b)&&u===!0,R=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,O=g.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(O=O.toLowerCase(),k=k?k.toLowerCase():null,R=R.toLowerCase()),k&&T&&(k=ri(k,T)||k);const D=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let P=O===R||!r&&O.startsWith(R)&&O.charAt(D)==="/",H=k!=null&&(k===R||!r&&k.startsWith(R)&&k.charAt(R.length)==="/"),G={isActive:P,isPending:H,isTransitioning:w},X=P?e:void 0,ie;typeof s=="function"?ie=s(G):ie=[s,P?"active":null,H?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let ee=typeof o=="function"?o(G):o;return x.createElement(vr,{...d,"aria-current":X,className:ie,ref:m,style:ee,to:l,viewTransition:u},typeof h=="function"?h(G):h)});RO.displayName="NavLink";var _O=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:o,method:l=Su,action:u,onSubmit:h,relative:d,preventScrollReset:m,viewTransition:b,...g},v)=>{let S=DO(),T=IO(u,{relative:d}),w=l.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&JC.test(u),O=k=>{if(h&&h(k),k.defaultPrevented)return;k.preventDefault();let D=k.nativeEvent.submitter,P=D?.getAttribute("formmethod")||l;S(D||k.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:r,state:o,relative:d,preventScrollReset:m,viewTransition:b})};return x.createElement("form",{ref:v,method:w,action:T,onSubmit:s?h:O,...g,"data-discover":!R&&t==="render"?"true":void 0})});_O.displayName="Form";function kO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XC(t){let e=x.useContext(Ba);return bt(e,kO(t)),e}function OO(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:o,viewTransition:l}={}){let u=ag(),h=Yi(),d=Oc(t,{relative:o});return x.useCallback(m=>{if(aO(m,e)){m.preventDefault();let b=n!==void 0?n:hc(h)===hc(d);u(t,{replace:b,state:s,preventScrollReset:r,relative:o,viewTransition:l})}},[h,u,d,n,s,e,t,r,o,l])}var AO=0,NO=()=>`__${String(++AO)}__`;function DO(){let{router:t}=XC("useSubmit"),{basename:e}=x.useContext(gs),n=X1();return x.useCallback(async(s,r={})=>{let{action:o,method:l,encType:u,formData:h,body:d}=lO(s,e);if(r.navigate===!1){let m=r.fetcherKey||NO();await t.fetch(m,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await t.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function IO(t,{relative:e}={}){let{basename:n}=x.useContext(gs),s=x.useContext(ys);bt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...Oc(t||".",{relative:e})},l=Yi();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(m=>m==="")){u.delete("index"),h.filter(b=>b).forEach(b=>u.append("index",b));let m=u.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:si([n,o.pathname])),hc(o)}function PO(t,e={}){let n=x.useContext(VC);bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=XC("useViewTransitionState"),r=Oc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=ri(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=ri(n.nextLocation.pathname,s)||n.nextLocation.pathname;return zu(r.pathname,l)!=null||zu(r.pathname,o)!=null}[...yO];var QC=jC();const m0=t=>{let e;const n=new Set,s=(d,m)=>{const b=typeof d=="function"?d(e):d;if(!Object.is(b,e)){const g=e;e=m??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(v=>v(e,g))}},r=()=>e,u={setState:s,getState:r,getInitialState:()=>h,subscribe:d=>(n.add(d),()=>n.delete(d))},h=e=t(s,r,u);return u},LO=t=>t?m0(t):m0,jO=t=>t;function MO(t,e=jO){const n=im.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return im.useDebugValue(n),n}const g0=t=>{const e=LO(t),n=s=>MO(e,s);return Object.assign(n,e),n},fg=t=>t?g0(t):g0;function WC(t,e){return function(){return t.apply(e,arguments)}}const{toString:UO}=Object.prototype,{getPrototypeOf:dg}=Object,{iterator:_f,toStringTag:ZC}=Symbol,kf=(t=>e=>{const n=UO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bs=t=>(t=t.toLowerCase(),e=>kf(e)===t),Of=t=>e=>typeof e===t,{isArray:Va}=Array,pc=Of("undefined");function BO(t){return t!==null&&!pc(t)&&t.constructor!==null&&!pc(t.constructor)&&Nn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ew=bs("ArrayBuffer");function FO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ew(t.buffer),e}const VO=Of("string"),Nn=Of("function"),tw=Of("number"),Af=t=>t!==null&&typeof t=="object",$O=t=>t===!0||t===!1,Cu=t=>{if(kf(t)!=="object")return!1;const e=dg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ZC in t)&&!(_f in t)},HO=bs("Date"),zO=bs("File"),qO=bs("Blob"),GO=bs("FileList"),KO=t=>Af(t)&&Nn(t.pipe),YO=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Nn(t.append)&&((e=kf(t))==="formdata"||e==="object"&&Nn(t.toString)&&t.toString()==="[object FormData]"))},JO=bs("URLSearchParams"),[XO,QO,WO,ZO]=["ReadableStream","Request","Response","Headers"].map(bs),eA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ac(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),Va(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let u;for(s=0;s<l;s++)u=o[s],e.call(null,t[u],u,t)}}function nw(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const yr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sw=t=>!pc(t)&&t!==yr;function om(){const{caseless:t}=sw(this)&&this||{},e={},n=(s,r)=>{const o=t&&nw(e,r)||r;Cu(e[o])&&Cu(s)?e[o]=om(e[o],s):Cu(s)?e[o]=om({},s):Va(s)?e[o]=s.slice():e[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Ac(arguments[s],n);return e}const tA=(t,e,n,{allOwnKeys:s}={})=>(Ac(e,(r,o)=>{n&&Nn(r)?t[o]=WC(r,n):t[o]=r},{allOwnKeys:s}),t),nA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),sA=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},iA=(t,e,n,s)=>{let r,o,l;const u={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!s||s(l,t,e))&&!u[l]&&(e[l]=t[l],u[l]=!0);t=n!==!1&&dg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rA=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},aA=t=>{if(!t)return null;if(Va(t))return t;let e=t.length;if(!tw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},oA=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&dg(Uint8Array)),cA=(t,e)=>{const s=(t&&t[_f]).call(t);let r;for(;(r=s.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},lA=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},uA=bs("HTMLFormElement"),fA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),dA=bs("RegExp"),iw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Ac(n,(r,o)=>{let l;(l=e(r,o,t))!==!1&&(s[o]=l||r)}),Object.defineProperties(t,s)},hA=t=>{iw(t,(e,n)=>{if(Nn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Nn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pA=(t,e)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return Va(t)?s(t):s(String(t).split(e)),n},mA=()=>{},gA=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function yA(t){return!!(t&&Nn(t.append)&&t[ZC]==="FormData"&&t[_f])}const bA=t=>{const e=new Array(10),n=(s,r)=>{if(Af(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const o=Va(s)?[]:{};return Ac(s,(l,u)=>{const h=n(l,r+1);!pc(h)&&(o[u]=h)}),e[r]=void 0,o}}return s};return n(t,0)},vA=bs("AsyncFunction"),SA=t=>t&&(Af(t)||Nn(t))&&Nn(t.then)&&Nn(t.catch),rw=((t,e)=>t?setImmediate:e?((n,s)=>(yr.addEventListener("message",({source:r,data:o})=>{r===yr&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),yr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Nn(yr.postMessage)),TA=typeof queueMicrotask<"u"?queueMicrotask.bind(yr):typeof process<"u"&&process.nextTick||rw,CA=t=>t!=null&&Nn(t[_f]),z={isArray:Va,isArrayBuffer:ew,isBuffer:BO,isFormData:YO,isArrayBufferView:FO,isString:VO,isNumber:tw,isBoolean:$O,isObject:Af,isPlainObject:Cu,isReadableStream:XO,isRequest:QO,isResponse:WO,isHeaders:ZO,isUndefined:pc,isDate:HO,isFile:zO,isBlob:qO,isRegExp:dA,isFunction:Nn,isStream:KO,isURLSearchParams:JO,isTypedArray:oA,isFileList:GO,forEach:Ac,merge:om,extend:tA,trim:eA,stripBOM:nA,inherits:sA,toFlatObject:iA,kindOf:kf,kindOfTest:bs,endsWith:rA,toArray:aA,forEachEntry:cA,matchAll:lA,isHTMLForm:uA,hasOwnProperty:y0,hasOwnProp:y0,reduceDescriptors:iw,freezeMethods:hA,toObjectSet:pA,toCamelCase:fA,noop:mA,toFiniteNumber:gA,findKey:nw,global:yr,isContextDefined:sw,isSpecCompliantForm:yA,toJSONObject:bA,isAsyncFn:vA,isThenable:SA,setImmediate:rw,asap:TA,isIterable:CA};function Pe(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}z.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const aw=Pe.prototype,ow={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ow[t]={value:t}});Object.defineProperties(Pe,ow);Object.defineProperty(aw,"isAxiosError",{value:!0});Pe.from=(t,e,n,s,r,o)=>{const l=Object.create(aw);return z.toFlatObject(t,l,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Pe.call(l,t.message,e,n,s,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const wA=null;function cm(t){return z.isPlainObject(t)||z.isArray(t)}function cw(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function b0(t,e,n){return t?t.concat(e).map(function(r,o){return r=cw(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function EA(t){return z.isArray(t)&&!t.some(cm)}const xA=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function Nf(t,e,n){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,w){return!z.isUndefined(w[T])});const s=n.metaTokens,r=n.visitor||m,o=n.dots,l=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(r))throw new TypeError("visitor must be a function");function d(S){if(S===null)return"";if(z.isDate(S))return S.toISOString();if(z.isBoolean(S))return S.toString();if(!h&&z.isBlob(S))throw new Pe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(S)||z.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function m(S,T,w){let R=S;if(S&&!w&&typeof S=="object"){if(z.endsWith(T,"{}"))T=s?T:T.slice(0,-2),S=JSON.stringify(S);else if(z.isArray(S)&&EA(S)||(z.isFileList(S)||z.endsWith(T,"[]"))&&(R=z.toArray(S)))return T=cw(T),R.forEach(function(k,D){!(z.isUndefined(k)||k===null)&&e.append(l===!0?b0([T],D,o):l===null?T:T+"[]",d(k))}),!1}return cm(S)?!0:(e.append(b0(w,T,o),d(S)),!1)}const b=[],g=Object.assign(xA,{defaultVisitor:m,convertValue:d,isVisitable:cm});function v(S,T){if(!z.isUndefined(S)){if(b.indexOf(S)!==-1)throw Error("Circular reference detected in "+T.join("."));b.push(S),z.forEach(S,function(R,O){(!(z.isUndefined(R)||R===null)&&r.call(e,R,z.isString(O)?O.trim():O,T,g))===!0&&v(R,T?T.concat(O):[O])}),b.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return v(t),e}function v0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function hg(t,e){this._pairs=[],t&&Nf(t,this,e)}const lw=hg.prototype;lw.append=function(e,n){this._pairs.push([e,n])};lw.toString=function(e){const n=e?function(s){return e.call(this,s,v0)}:v0;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function RA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uw(t,e,n){if(!e)return t;const s=n&&n.encode||RA;z.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(e,n):o=z.isURLSearchParams(e)?e.toString():new hg(e,n).toString(s),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class S0{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(s){s!==null&&e(s)})}}const fw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_A=typeof URLSearchParams<"u"?URLSearchParams:hg,kA=typeof FormData<"u"?FormData:null,OA=typeof Blob<"u"?Blob:null,AA={isBrowser:!0,classes:{URLSearchParams:_A,FormData:kA,Blob:OA},protocols:["http","https","file","blob","url","data"]},pg=typeof window<"u"&&typeof document<"u",lm=typeof navigator=="object"&&navigator||void 0,NA=pg&&(!lm||["ReactNative","NativeScript","NS"].indexOf(lm.product)<0),DA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IA=pg&&window.location.href||"http://localhost",PA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pg,hasStandardBrowserEnv:NA,hasStandardBrowserWebWorkerEnv:DA,navigator:lm,origin:IA},Symbol.toStringTag,{value:"Module"})),dn={...PA,...AA};function LA(t,e){return Nf(t,new dn.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return dn.isNode&&z.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function jA(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function MA(t){const e={},n=Object.keys(t);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],e[o]=t[o];return e}function dw(t){function e(n,s,r,o){let l=n[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),h=o>=n.length;return l=!l&&z.isArray(r)?r.length:l,h?(z.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!u):((!r[l]||!z.isObject(r[l]))&&(r[l]=[]),e(n,s,r[l],o)&&z.isArray(r[l])&&(r[l]=MA(r[l])),!u)}if(z.isFormData(t)&&z.isFunction(t.entries)){const n={};return z.forEachEntry(t,(s,r)=>{e(jA(s),r,n,0)}),n}return null}function UA(t,e,n){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Nc={transitional:fw,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=z.isObject(e);if(o&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return r?JSON.stringify(dw(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return LA(e,this.formSerializer).toString();if((u=z.isFileList(e))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Nf(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),UA(e)):e}],transformResponse:[function(e){const n=this.transitional||Nc.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(s&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?Pe.from(u,Pe.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{Nc.headers[t]={}});const BA=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FA=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),s=l.substring(r+1).trim(),!(!n||e[n]&&BA[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},T0=Symbol("internals");function Jo(t){return t&&String(t).trim().toLowerCase()}function wu(t){return t===!1||t==null?t:z.isArray(t)?t.map(wu):String(t)}function VA(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const $A=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function kp(t,e,n,s,r){if(z.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!z.isString(e)){if(z.isString(s))return e.indexOf(s)!==-1;if(z.isRegExp(s))return s.test(e)}}function HA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function zA(t,e){const n=z.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,o,l){return this[s].call(this,e,r,o,l)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function o(u,h,d){const m=Jo(h);if(!m)throw new Error("header name must be a non-empty string");const b=z.findKey(r,m);(!b||r[b]===void 0||d===!0||d===void 0&&r[b]!==!1)&&(r[b||h]=wu(u))}const l=(u,h)=>z.forEach(u,(d,m)=>o(d,m,h));if(z.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(z.isString(e)&&(e=e.trim())&&!$A(e))l(FA(e),n);else if(z.isObject(e)&&z.isIterable(e)){let u={},h,d;for(const m of e){if(!z.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[d=m[0]]=(h=u[d])?z.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}l(u,n)}else e!=null&&o(n,e,s);return this}get(e,n){if(e=Jo(e),e){const s=z.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return VA(r);if(z.isFunction(n))return n.call(this,r,s);if(z.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jo(e),e){const s=z.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||kp(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function o(l){if(l=Jo(l),l){const u=z.findKey(s,l);u&&(!n||kp(s,s[u],u,n))&&(delete s[u],r=!0)}}return z.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!e||kp(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,s={};return z.forEach(this,(r,o)=>{const l=z.findKey(s,o);if(l){n[l]=wu(r),delete n[o];return}const u=e?HA(o):String(o).trim();u!==o&&delete n[o],n[u]=wu(r),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return z.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&z.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[T0]=this[T0]={accessors:{}}).accessors,r=this.prototype;function o(l){const u=Jo(l);s[u]||(zA(r,l),s[u]=!0)}return z.isArray(e)?e.forEach(o):o(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Dn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});z.freezeMethods(Dn);function Op(t,e){const n=this||Nc,s=e||n,r=Dn.from(s.headers);let o=s.data;return z.forEach(t,function(u){o=u.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function hw(t){return!!(t&&t.__CANCEL__)}function $a(t,e,n){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,e,n),this.name="CanceledError"}z.inherits($a,Pe,{__CANCEL__:!0});function pw(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Pe("Request failed with status code "+n.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function qA(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function GA(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const d=Date.now(),m=s[o];l||(l=d),n[r]=h,s[r]=d;let b=o,g=0;for(;b!==r;)g+=n[b++],b=b%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),d-l<e)return;const v=m&&d-m;return v?Math.round(g*1e3/v):void 0}}function KA(t,e){let n=0,s=1e3/e,r,o;const l=(d,m=Date.now())=>{n=m,r=null,o&&(clearTimeout(o),o=null),t.apply(null,d)};return[(...d)=>{const m=Date.now(),b=m-n;b>=s?l(d,m):(r=d,o||(o=setTimeout(()=>{o=null,l(r)},s-b)))},()=>r&&l(r)]}const qu=(t,e,n=3)=>{let s=0;const r=GA(50,250);return KA(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,h=l-s,d=r(h),m=l<=u;s=l;const b={loaded:l,total:u,progress:u?l/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&m?(u-l)/d:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(b)},n)},C0=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},w0=t=>(...e)=>z.asap(()=>t(...e)),YA=dn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,dn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,JA=dn.hasStandardBrowserEnv?{write(t,e,n,s,r,o){const l=[t+"="+encodeURIComponent(e)];z.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),z.isString(s)&&l.push("path="+s),z.isString(r)&&l.push("domain="+r),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function QA(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function mw(t,e,n){let s=!XA(e);return t&&(s||n==!1)?QA(t,e):e}const E0=t=>t instanceof Dn?{...t}:t;function Cr(t,e){e=e||{};const n={};function s(d,m,b,g){return z.isPlainObject(d)&&z.isPlainObject(m)?z.merge.call({caseless:g},d,m):z.isPlainObject(m)?z.merge({},m):z.isArray(m)?m.slice():m}function r(d,m,b,g){if(z.isUndefined(m)){if(!z.isUndefined(d))return s(void 0,d,b,g)}else return s(d,m,b,g)}function o(d,m){if(!z.isUndefined(m))return s(void 0,m)}function l(d,m){if(z.isUndefined(m)){if(!z.isUndefined(d))return s(void 0,d)}else return s(void 0,m)}function u(d,m,b){if(b in e)return s(d,m);if(b in t)return s(void 0,d)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(d,m,b)=>r(E0(d),E0(m),b,!0)};return z.forEach(Object.keys(Object.assign({},t,e)),function(m){const b=h[m]||r,g=b(t[m],e[m],m);z.isUndefined(g)&&b!==u||(n[m]=g)}),n}const gw=t=>{const e=Cr({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:l,auth:u}=e;e.headers=l=Dn.from(l),e.url=uw(mw(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(z.isFormData(n)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[d,...m]=h?h.split(";").map(b=>b.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...m].join("; "))}}if(dn.hasStandardBrowserEnv&&(s&&z.isFunction(s)&&(s=s(e)),s||s!==!1&&YA(e.url))){const d=r&&o&&JA.read(o);d&&l.set(r,d)}return e},WA=typeof XMLHttpRequest<"u",ZA=WA&&function(t){return new Promise(function(n,s){const r=gw(t);let o=r.data;const l=Dn.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=r,m,b,g,v,S;function T(){v&&v(),S&&S(),r.cancelToken&&r.cancelToken.unsubscribe(m),r.signal&&r.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function R(){if(!w)return;const k=Dn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:k,config:t,request:w};pw(function(G){n(G),T()},function(G){s(G),T()},P),w=null}"onloadend"in w?w.onloadend=R:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(R)},w.onabort=function(){w&&(s(new Pe("Request aborted",Pe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){s(new Pe("Network Error",Pe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let D=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const P=r.transitional||fw;r.timeoutErrorMessage&&(D=r.timeoutErrorMessage),s(new Pe(D,P.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,w)),w=null},o===void 0&&l.setContentType(null),"setRequestHeader"in w&&z.forEach(l.toJSON(),function(D,P){w.setRequestHeader(P,D)}),z.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),u&&u!=="json"&&(w.responseType=r.responseType),d&&([g,S]=qu(d,!0),w.addEventListener("progress",g)),h&&w.upload&&([b,v]=qu(h),w.upload.addEventListener("progress",b),w.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(m=k=>{w&&(s(!k||k.type?new $a(null,t,w):k),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(m),r.signal&&(r.signal.aborted?m():r.signal.addEventListener("abort",m)));const O=qA(r.url);if(O&&dn.protocols.indexOf(O)===-1){s(new Pe("Unsupported protocol "+O+":",Pe.ERR_BAD_REQUEST,t));return}w.send(o||null)})},eN=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const o=function(d){if(!r){r=!0,u();const m=d instanceof Error?d:this.reason;s.abort(m instanceof Pe?m:new $a(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,o(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const u=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:h}=s;return h.unsubscribe=()=>z.asap(u),h}},tN=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},nN=async function*(t,e){for await(const n of sN(t))yield*tN(n,e)},sN=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},x0=(t,e,n,s)=>{const r=nN(t,e);let o=0,l,u=h=>{l||(l=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:d,value:m}=await r.next();if(d){u(),h.close();return}let b=m.byteLength;if(n){let g=o+=b;n(g)}h.enqueue(new Uint8Array(m))}catch(d){throw u(d),d}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},Df=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yw=Df&&typeof ReadableStream=="function",iN=Df&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bw=(t,...e)=>{try{return!!t(...e)}catch{return!1}},rN=yw&&bw(()=>{let t=!1;const e=new Request(dn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),R0=64*1024,um=yw&&bw(()=>z.isReadableStream(new Response("").body)),Gu={stream:um&&(t=>t.body)};Df&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Gu[e]&&(Gu[e]=z.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,s)})})})(new Response);const aN=async t=>{if(t==null)return 0;if(z.isBlob(t))return t.size;if(z.isSpecCompliantForm(t))return(await new Request(dn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(z.isArrayBufferView(t)||z.isArrayBuffer(t))return t.byteLength;if(z.isURLSearchParams(t)&&(t=t+""),z.isString(t))return(await iN(t)).byteLength},oN=async(t,e)=>{const n=z.toFiniteNumber(t.getContentLength());return n??aN(e)},cN=Df&&(async t=>{let{url:e,method:n,data:s,signal:r,cancelToken:o,timeout:l,onDownloadProgress:u,onUploadProgress:h,responseType:d,headers:m,withCredentials:b="same-origin",fetchOptions:g}=gw(t);d=d?(d+"").toLowerCase():"text";let v=eN([r,o&&o.toAbortSignal()],l),S;const T=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let w;try{if(h&&rN&&n!=="get"&&n!=="head"&&(w=await oN(m,s))!==0){let P=new Request(e,{method:"POST",body:s,duplex:"half"}),H;if(z.isFormData(s)&&(H=P.headers.get("content-type"))&&m.setContentType(H),P.body){const[G,X]=C0(w,qu(w0(h)));s=x0(P.body,R0,G,X)}}z.isString(b)||(b=b?"include":"omit");const R="credentials"in Request.prototype;S=new Request(e,{...g,signal:v,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:s,duplex:"half",credentials:R?b:void 0});let O=await fetch(S,g);const k=um&&(d==="stream"||d==="response");if(um&&(u||k&&T)){const P={};["status","statusText","headers"].forEach(ie=>{P[ie]=O[ie]});const H=z.toFiniteNumber(O.headers.get("content-length")),[G,X]=u&&C0(H,qu(w0(u),!0))||[];O=new Response(x0(O.body,R0,G,()=>{X&&X(),T&&T()}),P)}d=d||"text";let D=await Gu[z.findKey(Gu,d)||"text"](O,t);return!k&&T&&T(),await new Promise((P,H)=>{pw(P,H,{data:D,headers:Dn.from(O.headers),status:O.status,statusText:O.statusText,config:t,request:S})})}catch(R){throw T&&T(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,S),{cause:R.cause||R}):Pe.from(R,R&&R.code,t,S)}}),fm={http:wA,xhr:ZA,fetch:cN};z.forEach(fm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _0=t=>`- ${t}`,lN=t=>z.isFunction(t)||t===null||t===!1,vw={getAdapter:t=>{t=z.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let o=0;o<e;o++){n=t[o];let l;if(s=n,!lN(n)&&(s=fm[(l=String(n)).toLowerCase()],s===void 0))throw new Pe(`Unknown adapter '${l}'`);if(s)break;r[l||"#"+o]=s}if(!s){const o=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(_0).join(`
`):" "+_0(o[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:fm};function Ap(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $a(null,t)}function k0(t){return Ap(t),t.headers=Dn.from(t.headers),t.data=Op.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),vw.getAdapter(t.adapter||Nc.adapter)(t).then(function(s){return Ap(t),s.data=Op.call(t,t.transformResponse,s),s.headers=Dn.from(s.headers),s},function(s){return hw(s)||(Ap(t),s&&s.response&&(s.response.data=Op.call(t,t.transformResponse,s.response),s.response.headers=Dn.from(s.response.headers))),Promise.reject(s)})}const Sw="1.10.0",If={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{If[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const O0={};If.transitional=function(e,n,s){function r(o,l){return"[Axios v"+Sw+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,u)=>{if(e===!1)throw new Pe(r(l," has been removed"+(n?" in "+n:"")),Pe.ERR_DEPRECATED);return n&&!O0[l]&&(O0[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,u):!0}};If.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function uN(t,e,n){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const o=s[r],l=e[o];if(l){const u=t[o],h=u===void 0||l(u,o,t);if(h!==!0)throw new Pe("option "+o+" must be "+h,Pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pe("Unknown option "+o,Pe.ERR_BAD_OPTION)}}const Eu={assertOptions:uN,validators:If},xs=Eu.validators;let Sr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new S0,response:new S0}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Cr(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&Eu.assertOptions(s,{silentJSONParsing:xs.transitional(xs.boolean),forcedJSONParsing:xs.transitional(xs.boolean),clarifyTimeoutError:xs.transitional(xs.boolean)},!1),r!=null&&(z.isFunction(r)?n.paramsSerializer={serialize:r}:Eu.assertOptions(r,{encode:xs.function,serialize:xs.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Eu.assertOptions(n,{baseUrl:xs.spelling("baseURL"),withXsrfToken:xs.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&z.merge(o.common,o[n.method]);o&&z.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),n.headers=Dn.concat(l,o);const u=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(h=h&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let m,b=0,g;if(!h){const S=[k0.bind(this),void 0];for(S.unshift.apply(S,u),S.push.apply(S,d),g=S.length,m=Promise.resolve(n);b<g;)m=m.then(S[b++],S[b++]);return m}g=u.length;let v=n;for(b=0;b<g;){const S=u[b++],T=u[b++];try{v=S(v)}catch(w){T.call(this,w);break}}try{m=k0.call(this,v)}catch(S){return Promise.reject(S)}for(b=0,g=d.length;b<g;)m=m.then(d[b++],d[b++]);return m}getUri(e){e=Cr(this.defaults,e);const n=mw(e.baseURL,e.url,e.allowAbsoluteUrls);return uw(n,e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){Sr.prototype[e]=function(n,s){return this.request(Cr(s||{},{method:e,url:n,data:(s||{}).data}))}});z.forEach(["post","put","patch"],function(e){function n(s){return function(o,l,u){return this.request(Cr(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Sr.prototype[e]=n(),Sr.prototype[e+"Form"]=n(!0)});let fN=class Tw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(u=>{s.subscribe(u),o=u}).then(r);return l.cancel=function(){s.unsubscribe(o)},l},e(function(o,l,u){s.reason||(s.reason=new $a(o,l,u),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Tw(function(r){e=r}),cancel:e}}};function dN(t){return function(n){return t.apply(null,n)}}function hN(t){return z.isObject(t)&&t.isAxiosError===!0}const dm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dm).forEach(([t,e])=>{dm[e]=t});function Cw(t){const e=new Sr(t),n=WC(Sr.prototype.request,e);return z.extend(n,Sr.prototype,e,{allOwnKeys:!0}),z.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Cw(Cr(t,r))},n}const Tt=Cw(Nc);Tt.Axios=Sr;Tt.CanceledError=$a;Tt.CancelToken=fN;Tt.isCancel=hw;Tt.VERSION=Sw;Tt.toFormData=Nf;Tt.AxiosError=Pe;Tt.Cancel=Tt.CanceledError;Tt.all=function(e){return Promise.all(e)};Tt.spread=dN;Tt.isAxiosError=hN;Tt.mergeConfig=Cr;Tt.AxiosHeaders=Dn;Tt.formToJSON=t=>dw(z.isHTMLForm(t)?new FormData(t):t);Tt.getAdapter=vw.getAdapter;Tt.HttpStatusCode=dm;Tt.default=Tt;const{Axios:m$,AxiosError:g$,CanceledError:y$,isCancel:b$,CancelToken:v$,VERSION:S$,all:T$,Cancel:C$,isAxiosError:w$,spread:E$,toFormData:x$,AxiosHeaders:R$,HttpStatusCode:_$,formToJSON:k$,getAdapter:O$,mergeConfig:A$}=Tt,Li=Tt.create({baseURL:"/api",withCredentials:!0});let pN={data:""},mN=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||pN,gN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yN=/\/\*[^]*?\*\/|  +/g,A0=/\n+/g,ji=(t,e)=>{let n="",s="",r="";for(let o in t){let l=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":s+=o[1]=="f"?ji(l,o):o+"{"+ji(l,o[1]=="k"?"":e)+"}":typeof l=="object"?s+=ji(l,e?e.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ji.p?ji.p(o,l):o+":"+l+";")}return n+(e&&r?e+"{"+r+"}":r)+s},Ws={},ww=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+ww(t[n]);return e}return t},bN=(t,e,n,s,r)=>{let o=ww(t),l=Ws[o]||(Ws[o]=(h=>{let d=0,m=11;for(;d<h.length;)m=101*m+h.charCodeAt(d++)>>>0;return"go"+m})(o));if(!Ws[l]){let h=o!==t?t:(d=>{let m,b,g=[{}];for(;m=gN.exec(d.replace(yN,""));)m[4]?g.shift():m[3]?(b=m[3].replace(A0," ").trim(),g.unshift(g[0][b]=g[0][b]||{})):g[0][m[1]]=m[2].replace(A0," ").trim();return g[0]})(t);Ws[l]=ji(r?{["@keyframes "+l]:h}:h,n?"":"."+l)}let u=n&&Ws.g?Ws.g:null;return n&&(Ws.g=Ws[l]),((h,d,m,b)=>{b?d.data=d.data.replace(b,h):d.data.indexOf(h)===-1&&(d.data=m?h+d.data:d.data+h)})(Ws[l],e,s,u),l},vN=(t,e,n)=>t.reduce((s,r,o)=>{let l=e[o];if(l&&l.call){let u=l(n),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=h?"."+h:u&&typeof u=="object"?u.props?"":ji(u,""):u===!1?"":u}return s+r+(l??"")},"");function Pf(t){let e=this||{},n=t.call?t(e.p):t;return bN(n.unshift?n.raw?vN(n,[].slice.call(arguments,1),e.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):n,mN(e.target),e.g,e.o,e.k)}let Ew,hm,pm;Pf.bind({g:1});let ai=Pf.bind({k:1});function SN(t,e,n,s){ji.p=e,Ew=t,hm=n,pm=s}function Ji(t,e){let n=this||{};return function(){let s=arguments;function r(o,l){let u=Object.assign({},o),h=u.className||r.className;n.p=Object.assign({theme:hm&&hm()},u),n.o=/ *go\d+/.test(h),u.className=Pf.apply(n,s)+(h?" "+h:"");let d=t;return t[0]&&(d=u.as||t,delete u.as),pm&&d[0]&&pm(u),Ew(d,u)}return r}}var TN=t=>typeof t=="function",Ku=(t,e)=>TN(t)?t(e):t,CN=(()=>{let t=0;return()=>(++t).toString()})(),xw=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),wN=20,Rw=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,wN)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return Rw(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},xu=[],br={toasts:[],pausedAt:void 0},_r=t=>{br=Rw(br,t),xu.forEach(e=>{e(br)})},EN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xN=(t={})=>{let[e,n]=x.useState(br),s=x.useRef(br);x.useEffect(()=>(s.current!==br&&n(br),xu.push(n),()=>{let o=xu.indexOf(n);o>-1&&xu.splice(o,1)}),[]);let r=e.toasts.map(o=>{var l,u,h;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||t?.removeDelay,duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||t?.duration||EN[o.type],style:{...t.style,...(h=t[o.type])==null?void 0:h.style,...o.style}}});return{...e,toasts:r}},RN=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||CN()}),Dc=t=>(e,n)=>{let s=RN(e,t,n);return _r({type:2,toast:s}),s.id},gn=(t,e)=>Dc("blank")(t,e);gn.error=Dc("error");gn.success=Dc("success");gn.loading=Dc("loading");gn.custom=Dc("custom");gn.dismiss=t=>{_r({type:3,toastId:t})};gn.remove=t=>_r({type:4,toastId:t});gn.promise=(t,e,n)=>{let s=gn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let o=e.success?Ku(e.success,r):void 0;return o?gn.success(o,{id:s,...n,...n?.success}):gn.dismiss(s),r}).catch(r=>{let o=e.error?Ku(e.error,r):void 0;o?gn.error(o,{id:s,...n,...n?.error}):gn.dismiss(s)}),t};var _N=(t,e)=>{_r({type:1,toast:{id:t,height:e}})},kN=()=>{_r({type:5,time:Date.now()})},ac=new Map,ON=1e3,AN=(t,e=ON)=>{if(ac.has(t))return;let n=setTimeout(()=>{ac.delete(t),_r({type:4,toastId:t})},e);ac.set(t,n)},NN=t=>{let{toasts:e,pausedAt:n}=xN(t);x.useEffect(()=>{if(n)return;let o=Date.now(),l=e.map(u=>{if(u.duration===1/0)return;let h=(u.duration||0)+u.pauseDuration-(o-u.createdAt);if(h<0){u.visible&&gn.dismiss(u.id);return}return setTimeout(()=>gn.dismiss(u.id),h)});return()=>{l.forEach(u=>u&&clearTimeout(u))}},[e,n]);let s=x.useCallback(()=>{n&&_r({type:6,time:Date.now()})},[n]),r=x.useCallback((o,l)=>{let{reverseOrder:u=!1,gutter:h=8,defaultPosition:d}=l||{},m=e.filter(v=>(v.position||d)===(o.position||d)&&v.height),b=m.findIndex(v=>v.id===o.id),g=m.filter((v,S)=>S<b&&v.visible).length;return m.filter(v=>v.visible).slice(...u?[g+1]:[0,g]).reduce((v,S)=>v+(S.height||0)+h,0)},[e]);return x.useEffect(()=>{e.forEach(o=>{if(o.dismissed)AN(o.id,o.removeDelay);else{let l=ac.get(o.id);l&&(clearTimeout(l),ac.delete(o.id))}})},[e]),{toasts:e,handlers:{updateHeight:_N,startPause:kN,endPause:s,calculateOffset:r}}},DN=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,IN=ai`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PN=ai`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LN=Ji("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${IN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${PN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jN=ai`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MN=Ji("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${jN} 1s linear infinite;
`,UN=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BN=ai`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FN=Ji("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,VN=Ji("div")`
  position: absolute;
`,$N=Ji("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HN=ai`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zN=Ji("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qN=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?x.createElement(zN,null,e):e:n==="blank"?null:x.createElement($N,null,x.createElement(MN,{...s}),n!=="loading"&&x.createElement(VN,null,n==="error"?x.createElement(LN,{...s}):x.createElement(FN,{...s})))},GN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,YN="0%{opacity:0;} 100%{opacity:1;}",JN="0%{opacity:1;} 100%{opacity:0;}",XN=Ji("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,QN=Ji("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WN=(t,e)=>{let n=t.includes("top")?1:-1,[s,r]=xw()?[YN,JN]:[GN(n),KN(n)];return{animation:e?`${ai(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ai(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZN=x.memo(({toast:t,position:e,style:n,children:s})=>{let r=t.height?WN(t.position||e||"top-center",t.visible):{opacity:0},o=x.createElement(qN,{toast:t}),l=x.createElement(QN,{...t.ariaProps},Ku(t.message,t));return x.createElement(XN,{className:t.className,style:{...r,...n,...t.style}},typeof s=="function"?s({icon:o,message:l}):x.createElement(x.Fragment,null,o,l))});SN(x.createElement);var eD=({id:t,className:e,style:n,onHeightUpdate:s,children:r})=>{let o=x.useCallback(l=>{if(l){let u=()=>{let h=l.getBoundingClientRect().height;s(t,h)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return x.createElement("div",{ref:o,className:e,style:n},r)},tD=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...r}},nD=Pf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,nu=16,sD=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:r,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:h}=NN(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:nu,left:nu,right:nu,bottom:nu,pointerEvents:"none",...o},className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(d=>{let m=d.position||e,b=h.calculateOffset(d,{reverseOrder:t,gutter:s,defaultPosition:e}),g=tD(m,b);return x.createElement(eD,{id:d.id,key:d.id,onHeightUpdate:h.updateHeight,className:d.visible?nD:"",style:g},d.type==="custom"?Ku(d.message,d):r?r(d):x.createElement(ZN,{toast:d,position:m}))}))},Yt=gn;const Ds=Object.create(null);Ds.open="0";Ds.close="1";Ds.ping="2";Ds.pong="3";Ds.message="4";Ds.upgrade="5";Ds.noop="6";const Ru=Object.create(null);Object.keys(Ds).forEach(t=>{Ru[Ds[t]]=t});const mm={type:"error",data:"parser error"},_w=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kw=typeof ArrayBuffer=="function",Ow=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,mg=({type:t,data:e},n,s)=>_w&&e instanceof Blob?n?s(e):N0(e,s):kw&&(e instanceof ArrayBuffer||Ow(e))?n?s(e):N0(new Blob([e]),s):s(Ds[t]+(e||"")),N0=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function D0(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Np;function iD(t,e){if(_w&&t.data instanceof Blob)return t.data.arrayBuffer().then(D0).then(e);if(kw&&(t.data instanceof ArrayBuffer||Ow(t.data)))return e(D0(t.data));mg(t,!1,n=>{Np||(Np=new TextEncoder),e(Np.encode(n))})}const I0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<I0.length;t++)tc[I0.charCodeAt(t)]=t;const rD=t=>{let e=t.length*.75,n=t.length,s,r=0,o,l,u,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),m=new Uint8Array(d);for(s=0;s<n;s+=4)o=tc[t.charCodeAt(s)],l=tc[t.charCodeAt(s+1)],u=tc[t.charCodeAt(s+2)],h=tc[t.charCodeAt(s+3)],m[r++]=o<<2|l>>4,m[r++]=(l&15)<<4|u>>2,m[r++]=(u&3)<<6|h&63;return d},aD=typeof ArrayBuffer=="function",gg=(t,e)=>{if(typeof t!="string")return{type:"message",data:Aw(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:oD(t.substring(1),e)}:Ru[n]?t.length>1?{type:Ru[n],data:t.substring(1)}:{type:Ru[n]}:mm},oD=(t,e)=>{if(aD){const n=rD(t);return Aw(n,e)}else return{base64:!0,data:t}},Aw=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Nw="",cD=(t,e)=>{const n=t.length,s=new Array(n);let r=0;t.forEach((o,l)=>{mg(o,!1,u=>{s[l]=u,++r===n&&e(s.join(Nw))})})},lD=(t,e)=>{const n=t.split(Nw),s=[];for(let r=0;r<n.length;r++){const o=gg(n[r],e);if(s.push(o),o.type==="error")break}return s};function uD(){return new TransformStream({transform(t,e){iD(t,n=>{const s=n.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{r=new Uint8Array(9);const o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(n)})}})}let Dp;function su(t){return t.reduce((e,n)=>e+n.length,0)}function iu(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)n[r]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function fD(t,e){Dp||(Dp=new TextDecoder);const n=[];let s=0,r=-1,o=!1;return new TransformStream({transform(l,u){for(n.push(l);;){if(s===0){if(su(n)<1)break;const h=iu(n,1);o=(h[0]&128)===128,r=h[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(su(n)<2)break;const h=iu(n,2);r=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),s=3}else if(s===2){if(su(n)<8)break;const h=iu(n,8),d=new DataView(h.buffer,h.byteOffset,h.length),m=d.getUint32(0);if(m>Math.pow(2,21)-1){u.enqueue(mm);break}r=m*Math.pow(2,32)+d.getUint32(4),s=3}else{if(su(n)<r)break;const h=iu(n,r);u.enqueue(gg(o?h:Dp.decode(h),e)),s=0}if(r===0||r>t){u.enqueue(mm);break}}}})}const Dw=4;function Pt(t){if(t)return dD(t)}function dD(t){for(var e in Pt.prototype)t[e]=Pt.prototype[e];return t}Pt.prototype.on=Pt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Pt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Pt.prototype.off=Pt.prototype.removeListener=Pt.prototype.removeAllListeners=Pt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,r=0;r<n.length;r++)if(s=n[r],s===e||s.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Pt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,r=n.length;s<r;++s)n[s].apply(this,e)}return this};Pt.prototype.emitReserved=Pt.prototype.emit;Pt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Pt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Lf=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),ts=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),hD="arraybuffer";function Iw(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const pD=ts.setTimeout,mD=ts.clearTimeout;function jf(t,e){e.useNativeTimers?(t.setTimeoutFn=pD.bind(ts),t.clearTimeoutFn=mD.bind(ts)):(t.setTimeoutFn=ts.setTimeout.bind(ts),t.clearTimeoutFn=ts.clearTimeout.bind(ts))}const gD=1.33;function yD(t){return typeof t=="string"?bD(t):Math.ceil((t.byteLength||t.size)*gD)}function bD(t){let e=0,n=0;for(let s=0,r=t.length;s<r;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function Pw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function vD(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function SD(t){let e={},n=t.split("&");for(let s=0,r=n.length;s<r;s++){let o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class TD extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class yg extends Pt{constructor(e){super(),this.writable=!1,jf(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new TD(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=gg(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=vD(e);return n.length?"?"+n:""}}class CD extends yg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};lD(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,cD(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Pw()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Lw=!1;try{Lw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wD=Lw;function ED(){}class xD extends CD{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}let wa=class _u extends Pt{constructor(e,n,s){super(),this.createRequest=e,jf(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=Iw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=_u.requestsCount++,_u.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ED,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _u.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};wa.requestsCount=0;wa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",P0);else if(typeof addEventListener=="function"){const t="onpagehide"in ts?"pagehide":"unload";addEventListener(t,P0,!1)}}function P0(){for(let t in wa.requests)wa.requests.hasOwnProperty(t)&&wa.requests[t].abort()}const RD=function(){const t=jw({xdomain:!1});return t&&t.responseType!==null}();class _D extends xD{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=RD&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new wa(jw,this.uri(),e)}}function jw(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||wD))return new XMLHttpRequest}catch{}if(!e)try{return new ts[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Mw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class kD extends yg{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=Mw?{}:Iw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;mg(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}r&&Lf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Pw()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Ip=ts.WebSocket||ts.MozWebSocket;class OD extends kD{createSocket(e,n,s){return Mw?new Ip(e,n,s):n?new Ip(e,n):new Ip(e)}doWrite(e,n){this.ws.send(n)}}class AD extends yg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=fD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),r=uD();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{s.read().then(({done:u,value:h})=>{u||(this.onPacket(h),o())}).catch(u=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;this._writer.write(s).then(()=>{r&&Lf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ND={websocket:OD,webtransport:AD,polling:_D},DD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ID=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function gm(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let r=DD.exec(t||""),o={},l=14;for(;l--;)o[ID[l]]=r[l]||"";return n!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=PD(o,o.path),o.queryKey=LD(o,o.query),o}function PD(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function LD(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,o){r&&(n[r]=o)}),n}const ym=typeof addEventListener=="function"&&typeof removeEventListener=="function",ku=[];ym&&addEventListener("offline",()=>{ku.forEach(t=>t())},!1);class Fi extends Pt{constructor(e,n){if(super(),this.binaryType=hD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=gm(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=gm(n.host).host);jf(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=SD(this.opts.query)),ym&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ku.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Dw,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Fi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Fi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(n+=yD(r)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Lf(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,r){if(typeof n=="function"&&(r=n,n=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Fi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ym&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=ku.indexOf(this._offlineEventListener);s!==-1&&ku.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Fi.protocol=Dw;class jD extends Fi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;Fi.priorWebsocketSuccess=!1;const r=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Fi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=n.name,this.emitReserved("upgradeError",g)}}))};function o(){s||(s=!0,m(),n.close(),n=null)}const l=b=>{const g=new Error("probe error: "+b);g.transport=n.name,o(),this.emitReserved("upgradeError",g)};function u(){l("transport closed")}function h(){l("socket closed")}function d(b){n&&b.name!==n.name&&o()}const m=()=>{n.removeListener("open",r),n.removeListener("error",l),n.removeListener("close",u),this.off("close",h),this.off("upgrading",d)};n.once("open",r),n.once("error",l),n.once("close",u),this.once("close",h),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let MD=class extends jD{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>ND[r]).filter(r=>!!r)),super(e,s)}};function UD(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=gm(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const BD=typeof ArrayBuffer=="function",FD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Uw=Object.prototype.toString,VD=typeof Blob=="function"||typeof Blob<"u"&&Uw.call(Blob)==="[object BlobConstructor]",$D=typeof File=="function"||typeof File<"u"&&Uw.call(File)==="[object FileConstructor]";function bg(t){return BD&&(t instanceof ArrayBuffer||FD(t))||VD&&t instanceof Blob||$D&&t instanceof File}function Ou(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Ou(t[n]))return!0;return!1}if(bg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ou(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ou(t[n]))return!0;return!1}function HD(t){const e=[],n=t.data,s=t;return s.data=bm(n,e),s.attachments=e.length,{packet:s,buffers:e}}function bm(t,e){if(!t)return t;if(bg(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=bm(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=bm(t[s],e));return n}return t}function zD(t,e){return t.data=vm(t.data,e),delete t.attachments,t}function vm(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=vm(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=vm(t[n],e));return t}const qD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],GD=5;var qe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(qe||(qe={}));class KD{constructor(e){this.replacer=e}encode(e){return(e.type===qe.EVENT||e.type===qe.ACK)&&Ou(e)?this.encodeAsBinary({type:e.type===qe.EVENT?qe.BINARY_EVENT:qe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===qe.BINARY_EVENT||e.type===qe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=HD(e),s=this.encodeAsString(n.packet),r=n.buffers;return r.unshift(s),r}}function L0(t){return Object.prototype.toString.call(t)==="[object Object]"}class vg extends Pt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===qe.BINARY_EVENT;s||n.type===qe.BINARY_ACK?(n.type=s?qe.EVENT:qe.ACK,this.reconstructor=new YD(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(bg(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(qe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===qe.BINARY_EVENT||s.type===qe.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const l=e.substring(o,n);if(l!=Number(l)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(o,n)}else s.nsp="/";const r=e.charAt(n+1);if(r!==""&&Number(r)==r){const o=n+1;for(;++n;){const l=e.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===e.length)break}s.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(vg.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case qe.CONNECT:return L0(n);case qe.DISCONNECT:return n===void 0;case qe.CONNECT_ERROR:return typeof n=="string"||L0(n);case qe.EVENT:case qe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&qD.indexOf(n[0])===-1);case qe.ACK:case qe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class YD{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=zD(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const JD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:vg,Encoder:KD,get PacketType(){return qe},protocol:GD},Symbol.toStringTag,{value:"Module"}));function ls(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const XD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Bw extends Pt{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ls(e,"open",this.onopen.bind(this)),ls(e,"packet",this.onpacket.bind(this)),ls(e,"error",this.onerror.bind(this)),ls(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,r,o;if(XD.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:qe.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,b=n.pop();this._registerAckCallback(m,b),l.id=m}const u=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(h?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,n){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);n.call(this,new Error("operation has timed out"))},r),l=(...u)=>{this.io.clearTimeoutFn(o),n.apply(this,u)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...n){return new Promise((s,r)=>{const o=(l,u)=>l?r(l):s(u);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(r)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qe.EVENT:case qe.BINARY_EVENT:this.onevent(e);break;case qe.ACK:case qe.BINARY_ACK:this.onack(e);break;case qe.DISCONNECT:this.ondisconnect();break;case qe.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...r){s||(s=!0,n.packet({type:qe.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function Ha(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ha.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Ha.prototype.reset=function(){this.attempts=0};Ha.prototype.setMin=function(t){this.ms=t};Ha.prototype.setMax=function(t){this.max=t};Ha.prototype.setJitter=function(t){this.jitter=t};class Sm extends Pt{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,jf(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ha({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||JD;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new MD(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=ls(n,"open",function(){s.onopen(),e&&e()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},l=ls(n,"error",o);if(this._timeout!==!1){const u=this._timeout,h=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),n.close()},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ls(e,"ping",this.onping.bind(this)),ls(e,"data",this.ondata.bind(this)),ls(e,"error",this.onerror.bind(this)),ls(e,"close",this.onclose.bind(this)),ls(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Lf(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Bw(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Xo={};function Au(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=UD(t,e.path||"/socket.io"),s=n.source,r=n.id,o=n.path,l=Xo[r]&&o in Xo[r].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let h;return u?h=new Sm(s,e):(Xo[r]||(Xo[r]=new Sm(s,e)),h=Xo[r]),n.query&&!e.query&&(e.query=n.queryKey),h.socket(n.path,e)}Object.assign(Au,{Manager:Sm,Socket:Bw,io:Au,connect:Au});const QD="/",ps=fg((t,e)=>({authUser:null,isSigningUp:!1,isLoggingIn:!1,isUpdatingProfile:!1,isCheckingAuth:!0,onlineUsers:[],socket:null,checkAuth:async()=>{try{const n=await Li.get("/auth/check");t({authUser:n.data}),e().connectSocket()}catch(n){console.log("Error in checkAuth:",n),t({authUser:null})}finally{t({isCheckingAuth:!1})}},signup:async n=>{t({isSigningUp:!0});try{const s=await Li.post("/auth/signup",n);t({authUser:s.data}),Yt.success("Account created successfully"),e().connectSocket()}catch(s){Yt.error(s.response.data.message)}finally{t({isSigningUp:!1})}},login:async n=>{t({isLoggingIn:!0});try{const s=await Li.post("/auth/login",n);t({authUser:s.data}),Yt.success("Logged in successfully"),e().connectSocket()}catch(s){Yt.error(s.response.data.message)}finally{t({isLoggingIn:!1})}},logout:async()=>{try{await Li.post("/auth/logout"),t({authUser:null}),Yt.success("Logged out successfully"),e().disconnectSocket()}catch(n){Yt.error(n.response.data.message)}},updateProfile:async n=>{t({isUpdatingProfile:!0});try{const s=await Li.put("/auth/update-profile",n);t({authUser:s.data}),Yt.success("Profile updated successfully")}catch(s){console.log("error in update profile:",s),Yt.error(s.response.data.message)}finally{t({isUpdatingProfile:!1})}},connectSocket:()=>{const{authUser:n}=e();if(!n||e().socket?.connected)return;const s=Au(QD,{query:{userId:n._id}});s.connect(),t({socket:s}),s.on("getOnlineUsers",r=>{t({onlineUsers:r})})},disconnectSocket:()=>{e().socket?.connected&&e().socket.disconnect()}}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),j0=t=>{const e=ZD(t);return e.charAt(0).toUpperCase()+e.slice(1)},Fw=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),e2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:l,...u},h)=>x.createElement("svg",{ref:h,...t2,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Fw("lucide",r),...!o&&!e2(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>x.createElement(d,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=(t,e)=>{const n=x.forwardRef(({className:s,...r},o)=>x.createElement(n2,{ref:o,iconNode:e,className:Fw(`lucide-${WD(j0(t))}`,`lucide-${t}`,s),...r}));return n.displayName=j0(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],i2=vn("camera",s2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Vw=vn("eye-off",r2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$w=vn("eye",a2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],c2=vn("image",o2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hw=vn("loader-circle",l2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],zw=vn("loader",u2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qw=vn("lock",f2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],h2=vn("log-out",d2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Sg=vn("mail",p2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Mf=vn("message-square",m2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gw=vn("send",g2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b2=vn("settings",y2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tg=vn("user",v2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Kw=vn("users",S2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yw=vn("x",T2),C2=()=>{const{logout:t,authUser:e}=ps();return C.jsx("header",{className:`bg-base-100 border-b border-base-300 fixed w-full top-0 z-40 \r
    backdrop-blur-lg bg-base-100/80`,children:C.jsx("div",{className:"container mx-auto px-4 h-16",children:C.jsxs("div",{className:"flex items-center justify-between h-full",children:[C.jsx("div",{className:"flex items-center gap-8",children:C.jsxs(vr,{to:"/",className:"flex items-center gap-2.5 hover:opacity-80 transition-all",children:[C.jsx("div",{className:"size-9 rounded-lg bg-primary/10 flex items-center justify-center",children:C.jsx(Mf,{className:"w-5 h-5 text-primary"})}),C.jsx("h1",{className:"text-lg font-bold",children:"Convo"})]})}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsxs(vr,{to:"/settings",className:`
              btn btn-sm gap-2 transition-colors
              
              `,children:[C.jsx(b2,{className:"w-4 h-4"}),C.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),e&&C.jsxs(C.Fragment,{children:[C.jsxs(vr,{to:"/profile",className:"btn btn-sm gap-2",children:[C.jsx(Tg,{className:"size-5"}),C.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),C.jsxs("button",{className:"flex gap-2 items-center",onClick:t,children:[C.jsx(h2,{className:"size-5"}),C.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})]})})})},Ic=fg((t,e)=>({messages:[],users:[],selectedUser:null,isUsersLoading:!1,isMessagesLoading:!1,getUsers:async()=>{t({isUsersLoading:!0});try{const n=await Li.get("/messages/users");t({users:n.data})}catch(n){Yt.error(n.response.data.message)}finally{t({isUsersLoading:!1})}},getMessages:async n=>{t({isMessagesLoading:!0});try{const s=await Li.get(`/messages/${n}`);t({messages:s.data})}catch(s){Yt.error(s.response.data.message)}finally{t({isMessagesLoading:!1})}},sendMessage:async n=>{const{selectedUser:s,messages:r}=e();try{const o=await Li.post(`/messages/send/${s._id}`,n);t({messages:[...r,o.data]})}catch(o){Yt.error(o.response.data.message)}},subscribeToMessages:()=>{const{selectedUser:n}=e();if(!n)return;ps.getState().socket.on("newMessage",r=>{r.senderId===n._id&&t({messages:[...e().messages,r]})})},unsubscribeFromMessages:()=>{ps.getState().socket.off("newMessage")},setSelectedUser:n=>t({selectedUser:n})})),w2=()=>{const t=Array(8).fill(null);return C.jsxs("aside",{className:`h-full w-20 lg:w-72 border-r border-base-300 \r
    flex flex-col transition-all duration-200`,children:[C.jsx("div",{className:"border-b border-base-300 w-full p-5",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Kw,{className:"w-6 h-6"}),C.jsx("span",{className:"font-medium hidden lg:block",children:"Contacts"})]})}),C.jsx("div",{className:"overflow-y-auto w-full py-3",children:t.map((e,n)=>C.jsxs("div",{className:"w-full p-3 flex items-center gap-3",children:[C.jsx("div",{className:"relative mx-auto lg:mx-0",children:C.jsx("div",{className:"skeleton size-12 rounded-full"})}),C.jsxs("div",{className:"hidden lg:block text-left min-w-0 flex-1",children:[C.jsx("div",{className:"skeleton h-4 w-32 mb-2"}),C.jsx("div",{className:"skeleton h-3 w-16"})]})]},n))})]})},E2=()=>{const{getUsers:t,users:e,selectedUser:n,setSelectedUser:s,isUsersLoading:r}=Ic(),{onlineUsers:o}=ps(),[l,u]=x.useState(!1);x.useEffect(()=>{t()},[t]);const h=l?e.filter(d=>o.includes(d._id)):e;return r?C.jsx(w2,{}):C.jsxs("aside",{className:"h-full w-20 lg:w-72 border-r border-base-300 flex flex-col transition-all duration-200",children:[C.jsxs("div",{className:"border-b border-base-300 w-full p-5",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Kw,{className:"size-6"}),C.jsx("span",{className:"font-medium hidden lg:block",children:"Contacts"})]}),C.jsxs("div",{className:"mt-3 hidden lg:flex items-center gap-2",children:[C.jsxs("label",{className:"cursor-pointer flex items-center gap-2",children:[C.jsx("input",{type:"checkbox",checked:l,onChange:d=>u(d.target.checked),className:"checkbox checkbox-sm"}),C.jsx("span",{className:"text-sm",children:"Show online only"})]}),C.jsxs("span",{className:"text-xs text-zinc-500",children:["(",o.length-1," online)"]})]})]}),C.jsxs("div",{className:"overflow-y-auto w-full py-3",children:[h.map(d=>C.jsxs("button",{onClick:()=>s(d),className:`
              w-full p-3 flex items-center gap-3
              hover:bg-base-300 transition-colors
              ${n?._id===d._id?"bg-base-300 ring-1 ring-base-300":""}
            `,children:[C.jsxs("div",{className:"relative mx-auto lg:mx-0",children:[C.jsx("img",{src:d.profilePic||"/avatar.png",alt:d.name,className:"size-12 object-cover rounded-full"}),o.includes(d._id)&&C.jsx("span",{className:`absolute bottom-0 right-0 size-3 bg-green-500 \r
                  rounded-full ring-2 ring-zinc-900`})]}),C.jsxs("div",{className:"hidden lg:block text-left min-w-0",children:[C.jsx("div",{className:"font-medium truncate",children:d.fullName}),C.jsx("div",{className:"text-sm text-zinc-400",children:o.includes(d._id)?"Online":"Offline"})]})]},d._id)),h.length===0&&C.jsx("div",{className:"text-center text-zinc-500 py-4",children:"No online users"})]})]})},x2=()=>C.jsx("div",{className:"w-full flex flex-1 flex-col items-center justify-center p-16 bg-base-100/50",children:C.jsxs("div",{className:"max-w-md text-center space-y-6",children:[C.jsx("div",{className:"flex justify-center gap-4 mb-4",children:C.jsx("div",{className:"relative",children:C.jsx("div",{className:`w-16 h-16 rounded-2xl bg-primary/10 flex items-center\r
             justify-center animate-bounce`,children:C.jsx(Mf,{className:"w-8 h-8 text-primary "})})})}),C.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to Chatty!"}),C.jsx("p",{className:"text-base-content/60",children:"Select a conversation from the sidebar to start chatting"})]})}),M0=()=>{const{selectedUser:t,setSelectedUser:e}=Ic(),{onlineUsers:n}=ps();return C.jsx("div",{className:"p-2.5 border-b border-base-300",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"avatar",children:C.jsx("div",{className:"size-10 rounded-full relative",children:C.jsx("img",{src:t.profilePic||"/avatar.png",alt:t.fullName})})}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-medium",children:t.fullName}),C.jsx("p",{className:"text-sm text-base-content/70",children:n.includes(t._id)?"Online":"Offline"})]})]}),C.jsx("button",{onClick:()=>e(null),children:C.jsx(Yw,{})})]})})},U0=()=>{const[t,e]=x.useState(""),[n,s]=x.useState(null),r=x.useRef(null),{sendMessage:o}=Ic(),l=d=>{const m=d.target.files[0];if(!m.type.startsWith("image/")){Yt.error("Please select an image file");return}const b=new FileReader;b.onloadend=()=>{s(b.result)},b.readAsDataURL(m)},u=()=>{s(null),r.current&&(r.current.value="")},h=async d=>{if(d.preventDefault(),!(!t.trim()&&!n))try{await o({text:t.trim(),image:n}),e(""),s(null),r.current&&(r.current.value="")}catch(m){console.error("Failed to send message:",m)}};return C.jsxs("div",{className:"p-4 w-full",children:[n&&C.jsx("div",{className:"mb-3 flex items-center gap-2",children:C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:n,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-zinc-700"}),C.jsx("button",{onClick:u,className:`absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-base-300\r
              flex items-center justify-center`,type:"button",children:C.jsx(Yw,{className:"size-3"})})]})}),C.jsxs("form",{onSubmit:h,className:"flex items-center gap-2",children:[C.jsxs("div",{className:"flex-1 flex gap-2",children:[C.jsx("input",{type:"text",className:"w-full input input-bordered rounded-lg input-sm sm:input-md",placeholder:"Type a message...",value:t,onChange:d=>e(d.target.value)}),C.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:r,onChange:l}),C.jsx("button",{type:"button",className:`hidden sm:flex btn btn-circle
                     ${n?"text-emerald-500":"text-zinc-400"}`,onClick:()=>r.current?.click(),children:C.jsx(c2,{size:20})})]}),C.jsx("button",{type:"submit",className:"btn btn-sm btn-circle",disabled:!t.trim()&&!n,children:C.jsx(Gw,{size:22})})]})]})},R2=()=>{const t=Array(6).fill(null);return C.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:t.map((e,n)=>C.jsxs("div",{className:`chat ${n%2===0?"chat-start":"chat-end"}`,children:[C.jsx("div",{className:"chat-image avatar",children:C.jsx("div",{className:"size-10 rounded-full",children:C.jsx("div",{className:"skeleton w-full h-full rounded-full"})})}),C.jsx("div",{className:"chat-header mb-1",children:C.jsx("div",{className:"skeleton h-4 w-16"})}),C.jsx("div",{className:"chat-bubble bg-transparent p-0",children:C.jsx("div",{className:"skeleton h-16 w-[200px]"})})]},n))})};function _2(t){return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}const k2=()=>{const{messages:t,getMessages:e,isMessagesLoading:n,selectedUser:s,subscribeToMessages:r,unsubscribeFromMessages:o}=Ic(),{authUser:l}=ps(),u=x.useRef(null);return x.useEffect(()=>(e(s._id),r(),()=>o()),[s._id,e,r,o]),x.useEffect(()=>{u.current&&t&&u.current.scrollIntoView({behavior:"smooth"})},[t]),n?C.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[C.jsx(M0,{}),C.jsx(R2,{}),C.jsx(U0,{})]}):C.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[C.jsx(M0,{}),C.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:t.map(h=>C.jsxs("div",{className:`chat ${h.senderId===l._id?"chat-end":"chat-start"}`,ref:u,children:[C.jsx("div",{className:" chat-image avatar",children:C.jsx("div",{className:"size-10 rounded-full border",children:C.jsx("img",{src:h.senderId===l._id?l.profilePic||"/avatar.png":s.profilePic||"/avatar.png",alt:"profile pic"})})}),C.jsx("div",{className:"chat-header mb-1",children:C.jsx("time",{className:"text-xs opacity-50 ml-1",children:_2(h.createdAt)})}),C.jsxs("div",{className:"chat-bubble flex flex-col",children:[h.image&&C.jsx("img",{src:h.image,alt:"Attachment",className:"sm:max-w-[200px] rounded-md mb-2"}),h.text&&C.jsx("p",{children:h.text})]})]},h._id))}),C.jsx(U0,{})]})},O2=()=>{const{selectedUser:t}=Ic();return C.jsx("div",{className:"h-screen bg-base-200",children:C.jsx("div",{className:"flex items-center justify-center pt-20 px-4",children:C.jsx("div",{className:"bg-base-100 rounded-lg shadow-cl w-full max-w-6xl h-[calc(100vh-8rem)]",children:C.jsxs("div",{className:"flex h-full rounded-lg overflow-hidden",children:[C.jsx(E2,{}),t?C.jsx(k2,{}):C.jsx(x2,{})]})})})})},Jw=({title:t,subtitle:e})=>C.jsx("div",{className:"hidden lg:flex items-center justify-center bg-base-200 p-12",children:C.jsxs("div",{className:"max-w-md text-center",children:[C.jsx("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[...Array(9)].map((n,s)=>C.jsx("div",{className:`aspect-square rounded-2xl bg-primary/10 ${s%2===0?"animate-pulse":""}`},s))}),C.jsx("h2",{className:"text-2xl font-bold mb-4",children:t}),C.jsx("p",{className:"text-base-content/60",children:e})]})}),A2=()=>{const[t,e]=x.useState(!1),[n,s]=x.useState({fullName:"",email:"",password:""}),{signup:r,isSigningUp:o}=ps(),l=()=>n.fullName.trim()?n.email.trim()?/\S+@\S+\.\S+/.test(n.email)?n.password?n.password.length<6?Yt.error("Password must be at least 6 characters"):!0:Yt.error("Password is required"):Yt.error("Invalid email format"):Yt.error("Email is required"):Yt.error("Full name is required"),u=h=>{h.preventDefault(),l()===!0&&r(n)};return C.jsxs("div",{className:"min-h-screen grid lg:grid-cols-2",children:[C.jsx("div",{className:"flex flex-col justify-center items-center p-6 sm:p-12",children:C.jsxs("div",{className:"w-full max-w-md space-y-8",children:[C.jsx("div",{className:"text-center mb-8",children:C.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[C.jsx("div",{className:`size-12 rounded-xl bg-primary/10 flex items-center justify-center \r
              group-hover:bg-primary/20 transition-colors`,children:C.jsx(Mf,{className:"size-6 text-primary"})}),C.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Create Account"}),C.jsx("p",{className:"text-base-content/60",children:"Get started with your free account"})]})}),C.jsxs("form",{onSubmit:u,className:"space-y-6",children:[C.jsxs("div",{className:"form-control",children:[C.jsx("label",{className:"label",children:C.jsx("span",{className:"label-text font-medium",children:"Full Name"})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(Tg,{className:"size-5 text-base-content/40"})}),C.jsx("input",{type:"text",className:"input input-bordered w-full pl-10",placeholder:"John Doe",value:n.fullName,onChange:h=>s({...n,fullName:h.target.value})})]})]}),C.jsxs("div",{className:"form-control",children:[C.jsx("label",{className:"label",children:C.jsx("span",{className:"label-text font-medium",children:"Email"})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(Sg,{className:"size-5 text-base-content/40"})}),C.jsx("input",{type:"email",className:"input input-bordered w-full pl-10",placeholder:"you@example.com",value:n.email,onChange:h=>s({...n,email:h.target.value})})]})]}),C.jsxs("div",{className:"form-control",children:[C.jsx("label",{className:"label",children:C.jsx("span",{className:"label-text font-medium",children:"Password"})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(qw,{className:"size-5 text-base-content/40"})}),C.jsx("input",{type:t?"text":"password",className:"input input-bordered w-full pl-10",placeholder:"",value:n.password,onChange:h=>s({...n,password:h.target.value})}),C.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>e(!t),children:t?C.jsx(Vw,{className:"size-5 text-base-content/40"}):C.jsx($w,{className:"size-5 text-base-content/40"})})]})]}),C.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:o,children:o?C.jsxs(C.Fragment,{children:[C.jsx(Hw,{className:"size-5 animate-spin"}),"Loading..."]}):"Create Account"})]}),C.jsx("div",{className:"text-center",children:C.jsxs("p",{className:"text-base-content/60",children:["Already have an account?"," ",C.jsx(vr,{to:"/login",className:"link link-primary",children:"Sign in"})]})})]})}),C.jsx(Jw,{title:"Join our community",subtitle:"Connect with friends, share moments, and stay in touch with your loved ones."})]})},N2=()=>{const[t,e]=x.useState(!1),[n,s]=x.useState({email:"",password:""}),{login:r,isLoggingIn:o}=ps(),l=async u=>{u.preventDefault(),r(n)};return C.jsxs("div",{className:"h-screen grid lg:grid-cols-2",children:[C.jsx("div",{className:"flex flex-col justify-center items-center p-6 sm:p-12",children:C.jsxs("div",{className:"w-full max-w-md space-y-8",children:[C.jsx("div",{className:"text-center mb-8",children:C.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[C.jsx("div",{className:`w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20\r
              transition-colors`,children:C.jsx(Mf,{className:"w-6 h-6 text-primary"})}),C.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Welcome Back"}),C.jsx("p",{className:"text-base-content/60",children:"Sign in to your account"})]})}),C.jsxs("form",{onSubmit:l,className:"space-y-6",children:[C.jsxs("div",{className:"form-control",children:[C.jsx("label",{className:"label",children:C.jsx("span",{className:"label-text font-medium",children:"Email"})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(Sg,{className:"h-5 w-5 text-base-content/40"})}),C.jsx("input",{type:"email",className:"input input-bordered w-full pl-10",placeholder:"you@example.com",value:n.email,onChange:u=>s({...n,email:u.target.value})})]})]}),C.jsxs("div",{className:"form-control",children:[C.jsx("label",{className:"label",children:C.jsx("span",{className:"label-text font-medium",children:"Password"})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(qw,{className:"h-5 w-5 text-base-content/40"})}),C.jsx("input",{type:t?"text":"password",className:"input input-bordered w-full pl-10",placeholder:"",value:n.password,onChange:u=>s({...n,password:u.target.value})}),C.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>e(!t),children:t?C.jsx(Vw,{className:"h-5 w-5 text-base-content/40"}):C.jsx($w,{className:"h-5 w-5 text-base-content/40"})})]})]}),C.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:o,children:o?C.jsxs(C.Fragment,{children:[C.jsx(Hw,{className:"h-5 w-5 animate-spin"}),"Loading..."]}):"Sign in"})]}),C.jsx("div",{className:"text-center",children:C.jsxs("p",{className:"text-base-content/60",children:["Don't have an account?"," ",C.jsx(vr,{to:"/signup",className:"link link-primary",children:"Create account"})]})})]})}),C.jsx(Jw,{title:"Welcome back!",subtitle:"Sign in to continue your conversations and catch up with your messages."})]})},D2=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset"],Xw=fg(t=>({theme:localStorage.getItem("chat-theme")||"coffee",setTheme:e=>{console.log("Setting theme to:",e),localStorage.setItem("chat-theme",e),t({theme:e})}})),I2=[{id:1,content:"Hey! How's it going?",isSent:!1},{id:2,content:"I'm doing great! Just working on some new features.",isSent:!0}],P2=()=>{const{theme:t,setTheme:e}=Xw();return C.jsx("div",{className:"h-screen container mx-auto px-4 pt-20 max-w-5xl",children:C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex flex-col gap-1",children:[C.jsx("h2",{className:"text-lg font-semibold",children:"Theme"}),C.jsx("p",{className:"text-sm text-base-content/70",children:"Choose a theme for your chat interface"})]}),C.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:D2.map(n=>C.jsxs("button",{className:`
                group flex flex-col items-center gap-1.5 p-2 rounded-lg transition-colors
                ${t===n?"bg-base-200":"hover:bg-base-200/50"}
              `,onClick:()=>e(n),children:[C.jsx("div",{className:"relative h-8 w-full rounded-md overflow-hidden","data-theme":n,children:C.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 gap-px p-1",children:[C.jsx("div",{className:"rounded bg-primary"}),C.jsx("div",{className:"rounded bg-secondary"}),C.jsx("div",{className:"rounded bg-accent"}),C.jsx("div",{className:"rounded bg-neutral"})]})}),C.jsx("span",{className:"text-[11px] font-medium truncate w-full text-center",children:n.charAt(0).toUpperCase()+n.slice(1)})]},n))}),C.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Preview"}),C.jsx("div",{className:"rounded-xl border border-base-300 overflow-hidden bg-base-100 shadow-lg",children:C.jsx("div",{className:"p-4 bg-base-200",children:C.jsx("div",{className:"max-w-lg mx-auto",children:C.jsxs("div",{className:"bg-base-100 rounded-xl shadow-sm overflow-hidden",children:[C.jsx("div",{className:"px-4 py-3 border-b border-base-300 bg-base-100",children:C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-content font-medium",children:"J"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-medium text-sm",children:"John Doe"}),C.jsx("p",{className:"text-xs text-base-content/70",children:"Online"})]})]})}),C.jsx("div",{className:"p-4 space-y-4 min-h-[200px] max-h-[200px] overflow-y-auto bg-base-100",children:I2.map(n=>C.jsx("div",{className:`flex ${n.isSent?"justify-end":"justify-start"}`,children:C.jsxs("div",{className:`
                          max-w-[80%] rounded-xl p-3 shadow-sm
                          ${n.isSent?"bg-primary text-primary-content":"bg-base-200"}
                        `,children:[C.jsx("p",{className:"text-sm",children:n.content}),C.jsx("p",{className:`
                            text-[10px] mt-1.5
                            ${n.isSent?"text-primary-content/70":"text-base-content/70"}
                          `,children:"12:00 PM"})]})},n.id))}),C.jsx("div",{className:"p-4 border-t border-base-300 bg-base-100",children:C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",className:"input input-bordered flex-1 text-sm h-10",placeholder:"Type a message...",value:"This is a preview",readOnly:!0}),C.jsx("button",{className:"btn btn-primary h-10 min-h-0",children:C.jsx(Gw,{size:18})})]})})]})})})})]})})},L2=()=>{const{authUser:t,isUpdatingProfile:e,updateProfile:n}=ps();console.log("authUser in profile page:",t);const[s,r]=x.useState(null),o=async l=>{const u=l.target.files[0];if(!u)return;const h=new FileReader;h.readAsDataURL(u),h.onload=async()=>{const d=h.result;console.log("Uploading base64Image:",d),r(d),await n({profilePic:d})}};return t?C.jsx("div",{className:"h-screen pt-20",children:C.jsx("div",{className:"max-w-2xl mx-auto p-4 py-8",children:C.jsxs("div",{className:"bg-base-300 rounded-xl p-6 space-y-8",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-2xl font-semibold ",children:"Profile"}),C.jsx("p",{className:"mt-2",children:"Your profile information"})]}),C.jsxs("div",{className:"flex flex-col items-center gap-4",children:[C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:s||t.profilePic||"/avatar.jpeg",alt:"Profile",className:"size-32 rounded-full object-cover border-4 "}),C.jsxs("label",{htmlFor:"avatar-upload",className:`
                  absolute bottom-0 right-0 
                  bg-base-content hover:scale-105
                  p-2 rounded-full cursor-pointer 
                  transition-all duration-200
                  ${e?"animate-pulse pointer-events-none":""}
                `,children:[C.jsx(i2,{className:"w-5 h-5 text-base-200"}),C.jsx("input",{type:"file",id:"avatar-upload",className:"hidden",accept:"image/*",onChange:o,disabled:e})]})]}),C.jsx("p",{className:"text-sm text-zinc-400",children:e?"Uploading...":"Click the camera icon to update your photo"})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"space-y-1.5",children:[C.jsxs("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[C.jsx(Tg,{className:"w-4 h-4"}),"Full Name"]}),C.jsx("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:t?.fullName})]}),C.jsxs("div",{className:"space-y-1.5",children:[C.jsxs("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[C.jsx(Sg,{className:"w-4 h-4"}),"Email Address"]}),C.jsx("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:t?.email})]})]}),C.jsxs("div",{className:"mt-6 bg-base-300 rounded-xl p-6",children:[C.jsx("h2",{className:"text-lg font-medium  mb-4",children:"Account Information"}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700",children:[C.jsx("span",{children:"Member Since"}),C.jsx("span",{children:t?.createdAt?t.createdAt.split("T")[0]:"N/A"})]}),C.jsxs("div",{className:"flex items-center justify-between py-2",children:[C.jsx("span",{children:"Account Status"}),C.jsx("span",{className:"text-green-500",children:"Active"})]})]})]})]})})}):C.jsx("div",{className:"flex justify-center items-center h-screen",children:C.jsx("p",{children:"Loading profile..."})})};var Cg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mc=typeof window>"u"||"Deno"in globalThis;function Tm(){}function B0(t){return typeof t=="number"&&t>=0&&t!==1/0}function j2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function oc(t,e){return typeof t=="function"?t(e):t}function _s(t,e){return typeof t=="function"?t(e):t}function Qw(t,e){if(t===e)return t;const n=F0(t)&&F0(e);if(n||V0(t)&&V0(e)){const s=n?t:Object.keys(t),r=s.length,o=n?e:Object.keys(e),l=o.length,u=n?[]:{},h=new Set(s);let d=0;for(let m=0;m<l;m++){const b=n?m:o[m];(!n&&h.has(b)||n)&&t[b]===void 0&&e[b]===void 0?(u[b]=void 0,d++):(u[b]=Qw(t[b],e[b]),u[b]===t[b]&&t[b]!==void 0&&d++)}return r===l&&d===r?t:u}return e}function Cm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function F0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function V0(t){if(!$0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!$0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function $0(t){return Object.prototype.toString.call(t)==="[object Object]"}function H0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Qw(t,e):e}function M2(t,e){return typeof t=="function"?t(...e):!!t}var U2=class extends Cg{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!mc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},B2=new U2,F2=class extends Cg{#t=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!mc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#t}},V2=new F2;function z0(){let t,e;const n=new Promise((r,o)=>{t=r,e=o});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}function $2(t){return(t??"online")==="online"?V2.isOnline():!0}var H2=t=>setTimeout(t,0);function z2(){let t=[],e=0,n=u=>{u()},s=u=>{u()},r=H2;const o=u=>{e?t.push(u):r(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&r(()=>{s(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},batchCalls:u=>(...h)=>{o(()=>{u(...h)})},schedule:o,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{r=u}}}var Ww=z2();function q2(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}var G2=class extends Cg{constructor(t,e){super(),this.options=e,this.#t=t,this.#r=null,this.#i=z0(),this.options.experimental_prefetchInRender||this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#s=void 0;#n=void 0;#o;#f;#i;#r;#m;#d;#h;#c;#l;#a;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),q0(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wm(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wm(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#T(),this.#e.removeObserver(this)}setOptions(t){const e=this.options,n=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _s(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#e.setOptions(this.options),e._defaulted&&!Cm(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&G0(this.#e,n,this.options,e)&&this.#u(),this.updateResult(),s&&(this.#e!==n||_s(this.options.enabled,this.#e)!==_s(e.enabled,this.#e)||oc(this.options.staleTime,this.#e)!==oc(e.staleTime,this.#e))&&this.#g();const r=this.#y();s&&(this.#e!==n||_s(this.options.enabled,this.#e)!==_s(e.enabled,this.#e)||r!==this.#a)&&this.#b(r)}getOptimisticResult(t){const e=this.#t.getQueryCache().build(this.#t,t),n=this.createResult(e,t);return Y2(this,n)&&(this.#n=n,this.#f=this.options,this.#o=this.#e.state),n}getCurrentResult(){return this.#n}trackResult(t,e){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),e?.(s),Reflect.get(n,s))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#t.defaultQueryOptions(t),n=this.#t.getQueryCache().build(this.#t,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#C();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Tm)),e}#g(){this.#S();const t=oc(this.options.staleTime,this.#e);if(mc||this.#n.isStale||!B0(t))return;const n=j2(this.#n.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(t){this.#T(),this.#a=t,!(mc||_s(this.options.enabled,this.#e)===!1||!B0(this.#a)||this.#a===0)&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||B2.isFocused())&&this.#u()},this.#a))}#v(){this.#g(),this.#b(this.#y())}#S(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#T(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#e,s=this.options,r=this.#n,o=this.#o,l=this.#f,h=t!==n?t.state:this.#s,{state:d}=t;let m={...d},b=!1,g;if(e._optimisticResults){const X=this.hasListeners(),ie=!X&&q0(t,e),ee=X&&G0(t,n,e,s);(ie||ee)&&(m={...m,...q2(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:S,status:T}=m;g=m.data;let w=!1;if(e.placeholderData!==void 0&&g===void 0&&T==="pending"){let X;r?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(X=r.data,w=!0):X=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,X!==void 0&&(T="success",g=H0(r?.data,X,e),b=!0)}if(e.select&&g!==void 0&&!w)if(r&&g===o?.data&&e.select===this.#m)g=this.#d;else try{this.#m=e.select,g=e.select(g),g=H0(r?.data,g,e),this.#d=g,this.#r=null}catch(X){this.#r=X}this.#r&&(v=this.#r,g=this.#d,S=Date.now(),T="error");const R=m.fetchStatus==="fetching",O=T==="pending",k=T==="error",D=O&&R,P=g!==void 0,G={status:T,fetchStatus:m.fetchStatus,isPending:O,isSuccess:T==="success",isError:k,isInitialLoading:D,isLoading:D,data:g,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:R,isRefetching:R&&!O,isLoadingError:k&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:k&&P,isStale:wg(t,e),refetch:this.refetch,promise:this.#i};if(this.options.experimental_prefetchInRender){const X=le=>{G.status==="error"?le.reject(G.error):G.data!==void 0&&le.resolve(G.data)},ie=()=>{const le=this.#i=G.promise=z0();X(le)},ee=this.#i;switch(ee.status){case"pending":t.queryHash===n.queryHash&&X(ee);break;case"fulfilled":(G.status==="error"||G.data!==ee.value)&&ie();break;case"rejected":(G.status!=="error"||G.error!==ee.reason)&&ie();break}}return G}updateResult(){const t=this.#n,e=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#f=this.options,this.#o.data!==void 0&&(this.#h=this.#e),Cm(e,t))return;this.#n=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#p.size)return!0;const o=new Set(r??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(l=>{const u=l;return this.#n[u]!==t[u]&&o.has(u)})};this.#w({listeners:n()})}#C(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const e=this.#e;this.#e=t,this.#s=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(t){Ww.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function K2(t,e){return _s(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function q0(t,e){return K2(t,e)||t.state.data!==void 0&&wm(t,e,e.refetchOnMount)}function wm(t,e,n){if(_s(e.enabled,t)!==!1&&oc(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&wg(t,e)}return!1}function G0(t,e,n,s){return(t!==e||_s(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&wg(t,n)}function wg(t,e){return _s(e.enabled,t)!==!1&&t.isStaleByTime(oc(e.staleTime,t))}function Y2(t,e){return!Cm(t.getCurrentResult(),e)}var J2=x.createContext(void 0),X2=t=>{const e=x.useContext(J2);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Zw=x.createContext(!1),Q2=()=>x.useContext(Zw);Zw.Provider;function W2(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Z2=x.createContext(W2()),eI=()=>x.useContext(Z2),tI=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},nI=t=>{x.useEffect(()=>{t.clearReset()},[t])},sI=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||M2(n,[t.error,s])),iI=t=>{if(t.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...s)=>e(n(...s)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},rI=(t,e)=>t.isLoading&&t.isFetching&&!e,aI=(t,e)=>t?.suspense&&e.isPending,K0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function oI(t,e,n){const s=Q2(),r=eI(),o=X2(),l=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=s?"isRestoring":"optimistic",iI(l),tI(l,r),nI(r);const u=!o.getQueryCache().get(l.queryHash),[h]=x.useState(()=>new e(o,l)),d=h.getOptimisticResult(l),m=!s&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(b=>{const g=m?h.subscribe(Ww.batchCalls(b)):Tm;return h.updateResult(),g},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x.useEffect(()=>{h.setOptions(l)},[l,h]),aI(l,d))throw K0(l,h,r);if(sI({result:d,errorResetBoundary:r,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!mc&&rI(d,s)&&(u?K0(l,h,r):o.getQueryCache().get(l.queryHash)?.promise)?.catch(Tm).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?d:h.trackResult(d)}function cI(t,e){return oI(t,G2)}const lI=async()=>(await Tt.get("http://localhost:5001/api/video/token",{withCredentials:!0})).data,uI="modulepreload",fI=function(t){return"/Chat_App/"+t},Y0={},dI=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let h=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");r=h(n.map(d=>{if(d=fI(d),d in Y0)return;Y0[d]=!0;const m=d.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":uI,m||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),m)return new Promise((v,S)=>{g.addEventListener("load",v),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return r.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};let eE=!0,tE=!0;function nc(t,e,n){const s=t.match(e);return s&&s.length>=n&&parseFloat(s[n],10)}function kr(t,e,n){if(!t.RTCPeerConnection)return;const s=t.RTCPeerConnection.prototype,r=s.addEventListener;s.addEventListener=function(l,u){if(l!==e)return r.apply(this,arguments);const h=d=>{const m=n(d);m&&(u.handleEvent?u.handleEvent(m):u(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,h),r.apply(this,[l,h])};const o=s.removeEventListener;s.removeEventListener=function(l,u){if(l!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(u))return o.apply(this,arguments);const h=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,h])},Object.defineProperty(s,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function hI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(eE=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function pI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(tE=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function nE(){if(typeof window=="object"){if(eE)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Eg(t,e){tE&&console.warn(t+" is deprecated, please use "+e+" instead.")}function mI(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(nc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(nc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(nc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=nc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function J0(t){return Object.prototype.toString.call(t)==="[object Object]"}function sE(t){return J0(t)?Object.keys(t).reduce(function(e,n){const s=J0(t[n]),r=s?sE(t[n]):t[n],o=s&&!Object.keys(r).length;return r===void 0||o?e:Object.assign(e,{[n]:r})},{}):t}function Em(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(s=>{s.endsWith("Id")?Em(t,t.get(e[s]),n):s.endsWith("Ids")&&e[s].forEach(r=>{Em(t,t.get(r),n)})}))}function X0(t,e,n){const s=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const o=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===e.id&&o.push(l)}),o.forEach(l=>{t.forEach(u=>{u.type===s&&u.trackId===l.id&&Em(t,u,r)})}),r}const Q0=nE;function iE(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const s=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const h={};return Object.keys(u).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const m=typeof u[d]=="object"?u[d]:{ideal:u[d]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const b=function(g,v){return g?g+v.charAt(0).toUpperCase()+v.slice(1):v==="deviceId"?"sourceId":v};if(m.ideal!==void 0){h.optional=h.optional||[];let g={};typeof m.ideal=="number"?(g[b("min",d)]=m.ideal,h.optional.push(g),g={},g[b("max",d)]=m.ideal,h.optional.push(g)):(g[b("",d)]=m.ideal,h.optional.push(g))}m.exact!==void 0&&typeof m.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[b("",d)]=m.exact):["min","max"].forEach(g=>{m[g]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[b(g,d)]=m[g])})}),u.advanced&&(h.optional=(h.optional||[]).concat(u.advanced)),h},r=function(u,h){if(e.version>=61)return h(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const d=function(m,b,g){b in m&&!(g in m)&&(m[g]=m[b],delete m[b])};u=JSON.parse(JSON.stringify(u)),d(u.audio,"autoGainControl","googAutoGainControl"),d(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=s(u.audio)}if(u&&typeof u.video=="object"){let d=u.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const m=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete u.video.facingMode;let b;if(d.exact==="environment"||d.ideal==="environment"?b=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let v=g.find(S=>b.some(T=>S.label.toLowerCase().includes(T)));return!v&&g.length&&b.includes("back")&&(v=g[g.length-1]),v&&(u.video.deviceId=d.exact?{exact:v.deviceId}:{ideal:v.deviceId}),u.video=s(u.video),Q0("chrome: "+JSON.stringify(u)),h(u)})}u.video=s(u.video)}return Q0("chrome: "+JSON.stringify(u)),h(u)},o=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,h,d){r(u,m=>{n.webkitGetUserMedia(m,h,b=>{d&&d(o(b))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(h){return r(h,d=>u(d).then(m=>{if(d.audio&&!m.getAudioTracks().length||d.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(o(m))))}}}function gI(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(s){return e(s).then(r=>{const o=s.video&&s.video.width,l=s.video&&s.video.height,u=s.video&&s.video.frameRate;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxFrameRate:u||3}},o&&(s.video.mandatory.maxWidth=o),l&&(s.video.mandatory.maxHeight=l),t.navigator.mediaDevices.getUserMedia(s)})}}}function rE(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function aE(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",r=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===r.track.id):o={track:r.track};const l=new Event("track");l.track=r.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[s.stream],this.dispatchEvent(l)}),s.stream.getTracks().forEach(r=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===r.id):o={track:r};const l=new Event("track");l.track=r,l.receiver=o,l.transceiver={receiver:o},l.streams=[s.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else kr(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function oE(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=r.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){let d=r.apply(this,arguments);return d||(d=e(this,u),this._senders.push(d)),d};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const h=this._senders.indexOf(u);h!==-1&&this._senders.splice(h,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],s.apply(this,[o]),o.getTracks().forEach(l=>{const u=this._senders.find(h=>h.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(r=>r._pc=this),s},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function cE(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,r,o]=arguments;if(arguments.length>0&&typeof s=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof s!="function"))return e.apply(this,[]);const l=function(h){const d={};return h.result().forEach(b=>{const g={id:b.id,timestamp:b.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[b.type]||b.type};b.names().forEach(v=>{g[v]=b.stat(v)}),d[g.id]=g}),d},u=function(h){return new Map(Object.keys(h).map(d=>[d,h[d]]))};if(arguments.length>=2){const h=function(d){r(u(l(d)))};return e.apply(this,[h,s])}return new Promise((h,d)=>{e.apply(this,[function(m){h(u(l(m)))},d])}).then(r,o)}}function lE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const s=t.RTCPeerConnection.prototype.addTrack;s&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=s.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>X0(l,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(o=>o._pc=this),r}),kr(t,"track",s=>(s.receiver._pc=s.srcElement,s)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(o=>X0(o,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const s=arguments[0];let r,o,l;return this.getSenders().forEach(u=>{u.track===s&&(r?l=!0:r=u)}),this.getReceivers().forEach(u=>(u.track===s&&(o?l=!0:o=u),u.track===s)),l||r&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function uE(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(h)===-1&&this._shimmedLocalStreams[u.id].push(h):this._shimmedLocalStreams[u.id]=[u,h],h};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(b=>b.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const h=this.getSenders().filter(d=>u.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(h)};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],s.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const h=this._shimmedLocalStreams[u].indexOf(l);h!==-1&&this._shimmedLocalStreams[u].splice(h,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),r.apply(this,arguments)}}function fE(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return uE(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(b=>this._reverseStreams[b.id])};const s=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(b=>{if(this.getSenders().find(v=>v.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const b=new t.MediaStream(m.getTracks());this._streams[m.id]=b,this._reverseStreams[b.id]=m,m=b}s.apply(this,[m])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(T=>T===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(T=>T.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[b.id];if(S)S.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const T=new t.MediaStream([m]);this._streams[b.id]=T,this._reverseStreams[T.id]=b,this.addStream(T)}return this.getSenders().find(T=>T.track===m)};function o(d,m){let b=m.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const v=d._reverseStreams[g],S=d._streams[v.id];b=b.replace(new RegExp(S.id,"g"),v.id)}),new RTCSessionDescription({type:m.type,sdp:b})}function l(d,m){let b=m.sdp;return Object.keys(d._reverseStreams||[]).forEach(g=>{const v=d._reverseStreams[g],S=d._streams[v.id];b=b.replace(new RegExp(v.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:b})}["createOffer","createAnswer"].forEach(function(d){const m=t.RTCPeerConnection.prototype[d],b={[d](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[S=>{const T=o(this,S);g[0].apply(null,[T])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):m.apply(this,arguments).then(S=>o(this,S))}};t.RTCPeerConnection.prototype[d]=b[d]});const u=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const d=h.get.apply(this);return d.type===""?d:o(this,d)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(v=>{this._streams[v].getTracks().find(T=>m.track===T)&&(g=this._streams[v])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xm(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function dE(t,e){kr(t,"negotiationneeded",n=>{const s=n.target;if(!((e.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const W0=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:dE,shimAddTrackRemoveTrack:fE,shimAddTrackRemoveTrackWithNative:uE,shimGetDisplayMedia:gI,shimGetSendersWithDtmf:oE,shimGetStats:cE,shimGetUserMedia:iE,shimMediaStream:rE,shimOnTrack:aE,shimPeerConnection:xm,shimSenderReceiverGetStats:lE},Symbol.toStringTag,{value:"Module"}));function hE(t,e){const n=t&&t.navigator,s=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,o,l){Eg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(o,l)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(l,u,h){u in l&&!(h in l)&&(l[h]=l[u],delete l[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l.audio,"autoGainControl","mozAutoGainControl"),r(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},s&&s.prototype.getSettings){const l=s.prototype.getSettings;s.prototype.getSettings=function(){const u=l.apply(this,arguments);return r(u,"mozAutoGainControl","autoGainControl"),r(u,"mozNoiseSuppression","noiseSuppression"),u}}if(s&&s.prototype.applyConstraints){const l=s.prototype.applyConstraints;s.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),r(u,"autoGainControl","mozAutoGainControl"),r(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function yI(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return s.video===!0?s.video={mediaSource:e}:s.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(s)})}function pE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Rm(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const o=t.RTCPeerConnection.prototype[r],l={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=l[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,l,u]=arguments;return s.apply(this,[o||null]).then(h=>{if(e.version<53&&!l)try{h.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;h.forEach((m,b)=>{h.set(b,Object.assign({},m,{type:n[m.type]||m.type}))})}return h}).then(l,u)}}function mE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(o=>o._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function gE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=e.apply(this,[]);return s.forEach(r=>r._pc=this),s}),kr(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function yE(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Eg("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function bE(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function vE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const r=s.length>0;r&&s.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(r){const{sender:l}=o,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=s,l.sendEncodings=s,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function SE(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const s=e.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function TE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function CE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Z0=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:vE,shimCreateAnswer:CE,shimCreateOffer:TE,shimGetDisplayMedia:yI,shimGetParameters:SE,shimGetUserMedia:hE,shimOnTrack:pE,shimPeerConnection:Rm,shimRTCDataChannel:bE,shimReceiverGetStats:gE,shimRemoveStream:yE,shimSenderGetStats:mE},Symbol.toStringTag,{value:"Module"}));function wE(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(r=>e.call(this,r,s)),s.getVideoTracks().forEach(r=>e.call(this,r,s))},t.RTCPeerConnection.prototype.addTrack=function(s,...r){return r&&r.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const r=n.getTracks();this.getSenders().forEach(o=>{r.includes(o.track)&&this.removeTrack(o)})})}}function EE(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const o=new Event("addstream");o.stream=r,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(o=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(o)>=0)return;s._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,s.dispatchEvent(l)})}),e.apply(s,arguments)}}}function xE(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,s=e.createAnswer,r=e.setLocalDescription,o=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(d,m){const b=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[b]);return m?(g.then(d,m),Promise.resolve()):g},e.createAnswer=function(d,m){const b=arguments.length>=2?arguments[2]:arguments[0],g=s.apply(this,[b]);return m?(g.then(d,m),Promise.resolve()):g};let u=function(h,d,m){const b=r.apply(this,[h]);return m?(b.then(d,m),Promise.resolve()):b};e.setLocalDescription=u,u=function(h,d,m){const b=o.apply(this,[h]);return m?(b.then(d,m),Promise.resolve()):b},e.setRemoteDescription=u,u=function(h,d,m){const b=l.apply(this,[h]);return m?(b.then(d,m),Promise.resolve()):b},e.addIceCandidate=u}function RE(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,s=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>s(_E(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(s,r,o){e.mediaDevices.getUserMedia(s).then(r,o)}).bind(e))}function _E(t){return t&&t.video!==void 0?Object.assign({},t,{video:sE(t.video)}):t}function kE(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(s,r){if(s&&s.iceServers){const o=[];for(let l=0;l<s.iceServers.length;l++){let u=s.iceServers[l];u.urls===void 0&&u.url?(Eg("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(s.iceServers[l])}s.iceServers=o}return new e(s,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function OE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function AE(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const r=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):s.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function NE(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const eT=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:NE,shimCallbacksAPI:xE,shimConstraints:_E,shimCreateOfferLegacy:AE,shimGetUserMedia:RE,shimLocalStreamsAPI:wE,shimRTCIceServerUrls:kE,shimRemoteStreamsAPI:EE,shimTrackEventTransceiver:OE},Symbol.toStringTag,{value:"Module"}));var Pp={exports:{}},tT;function bI(){return tT||(tT=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,o)=>(o>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const s=e.splitSections(n);return s&&s[0]},e.getMediaSections=function(n){const s=e.splitSections(n);return s.shift(),s},e.matchPrefix=function(n,s){return e.splitLines(n).filter(r=>r.indexOf(s)===0)},e.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const r={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let o=8;o<s.length;o+=2)switch(s[o]){case"raddr":r.relatedAddress=s[o+1];break;case"rport":r.relatedPort=parseInt(s[o+1],10);break;case"tcptype":r.tcpType=s[o+1];break;case"ufrag":r.ufrag=s[o+1],r.usernameFragment=s[o+1];break;default:r[s[o]]===void 0&&(r[s[o]]=s[o+1]);break}return r},e.writeCandidate=function(n){const s=[];s.push(n.foundation);const r=n.component;r==="rtp"?s.push(1):r==="rtcp"?s.push(2):s.push(r),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const o=n.type;return s.push("typ"),s.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let s=n.substring(9).split(" ");const r={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),r.name=s[0],r.clockRate=parseInt(s[1],10),r.channels=s.length===3?parseInt(s[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const s={};let r;const o=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<o.length;l++)r=o[l].trim().split("="),s[r[0].trim()]=r[1];return s},e.writeFmtp=function(n){let s="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?o.push(l+"="+n.parameters[l]):o.push(l)}),s+="a=fmtp:"+r+" "+o.join(";")+`\r
`}return s},e.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},e.writeRtcpFb=function(n){let s="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{s+="a=rtcp-fb:"+r+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),s},e.parseSsrcMedia=function(n){const s=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,s),10)},o=n.indexOf(":",s);return o>-1?(r.attribute=n.substring(s+1,o),r.value=n.substring(o+1)):r.attribute=n.substring(s+1),r},e.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(r=>parseInt(r,10))}},e.getMid=function(n){const s=e.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},e.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},e.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:e.matchPrefix(n+s,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,s){let r="a=setup:"+s+`\r
`;return n.fingerprints.forEach(o=>{r+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),r},e.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,s){return e.matchPrefix(n+s,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,s){const r=e.matchPrefix(n+s,"a=ice-ufrag:")[0],o=e.matchPrefix(n+s,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},e.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");s.profile=o[2];for(let u=3;u<o.length;u++){const h=o[u],d=e.matchPrefix(n,"a=rtpmap:"+h+" ")[0];if(d){const m=e.parseRtpMap(d),b=e.matchPrefix(n,"a=fmtp:"+h+" ");switch(m.parameters=b.length?e.parseFmtp(b[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),s.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(u=>{s.headerExtensions.push(e.parseExtmap(u))});const l=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return s.codecs.forEach(u=>{l.forEach(h=>{u.rtcpFeedback.find(m=>m.type===h.type&&m.parameter===h.parameter)||u.rtcpFeedback.push(h)})}),s},e.writeRtpDescription=function(n,s){let r="";r+="m="+n+" ",r+=s.codecs.length>0?"9":"0",r+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=s.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(l=>{r+=e.writeRtpMap(l),r+=e.writeFmtp(l),r+=e.writeRtcpFb(l)});let o=0;return s.codecs.forEach(l=>{l.maxptime>o&&(o=l.maxptime)}),o>0&&(r+="a=maxptime:"+o+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(l=>{r+=e.writeExtmap(l)}),r},e.parseRtpEncodingParameters=function(n){const s=[],r=e.parseRtpParameters(n),o=r.fecMechanisms.indexOf("RED")!==-1,l=r.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(n,"a=ssrc:").map(g=>e.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),h=u.length>0&&u[0].ssrc;let d;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));m.length>0&&m[0].length>1&&m[0][0]===h&&(d=m[0][1]),r.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let v={ssrc:h,codecPayloadType:parseInt(g.parameters.apt,10)};h&&d&&(v.rtx={ssrc:d}),s.push(v),o&&(v=JSON.parse(JSON.stringify(v)),v.fec={ssrc:h,mechanism:l?"red+ulpfec":"red"},s.push(v))}}),s.length===0&&h&&s.push({ssrc:h});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-50*40*8:b=void 0,s.forEach(g=>{g.maxBitrate=b})),s},e.parseRtcpParameters=function(n){const s={},r=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];r&&(s.cname=r.value,s.ssrc=r.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=o.length>0,s.compound=o.length===0;const l=e.matchPrefix(n,"a=rtcp-mux");return s.mux=l.length>0,s},e.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},e.parseMsid=function(n){let s;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return s=r[0].substring(7).split(" "),{stream:s[0],track:s[1]};const o=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(o.length>0)return s=o[0].value.split(" "),{stream:s[0],track:s[1]}},e.parseSctpDescription=function(n){const s=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let o;r.length>0&&(o=parseInt(r[0].substring(19),10)),isNaN(o)&&(o=65536);const l=e.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:s.fmt,maxMessageSize:o};const u=e.matchPrefix(n,"a=sctpmap:");if(u.length>0){const h=u[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,s){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&r.push("a=max-message-size:"+s.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,s,r){let o;const l=s!==void 0?s:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,s){const r=e.splitLines(n);for(let o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substring(2)}return s?e.getDirection(s):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=e.splitLines(n);for(let r=0;r<s.length;r++)if(s[r].length<2||s[r].charAt(1)!=="=")return!1;return!0},t.exports=e}(Pp)),Pp.exports}var DE=bI();const Ea=PC(DE),vI=IC({__proto__:null,default:Ea},[DE]);function Nu(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const r=new e(s),o=Ea.parseCandidate(s.candidate);for(const l in o)l in r||Object.defineProperty(r,l,{value:o[l]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(s)},t.RTCIceCandidate.prototype=e.prototype,kr(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function _m(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||kr(t,"icecandidate",e=>{if(e.candidate){const n=Ea.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Du(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const h=Ea.splitSections(u.sdp);return h.shift(),h.some(d=>{const m=Ea.parseMLine(d);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},s=function(u){const h=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const d=parseInt(h[1],10);return d!==d?-1:d},r=function(u){let h=65536;return e.browser==="firefox"&&(e.version<57?u===-1?h=16384:h=2147483637:e.version<60?h=e.version===57?65535:65536:h=2147483637),h},o=function(u,h){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const m=Ea.matchPrefix(u.sdp,"a=max-message-size:");return m.length>0?d=parseInt(m[0].substring(19),10):e.browser==="firefox"&&h!==-1&&(d=2147483637),d},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const h=s(arguments[0]),d=r(h),m=o(arguments[0],h);let b;d===0&&m===0?b=Number.POSITIVE_INFINITY:d===0||m===0?b=Math.max(d,m):b=Math.min(d,m);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return b}}),this._sctp=g}return l.apply(this,arguments)}}function Iu(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(s,r){const o=s.send;s.send=function(){const u=arguments[0],h=u.length||u.size||u.byteLength;if(s.readyState==="open"&&r.sctp&&h>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return o.apply(s,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},kr(t,"datachannel",s=>(e(s.channel,s.target),s))}function km(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const o=r.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",r);o.dispatchEvent(l)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Om(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=r.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:o}):r.sdp=o}return n.apply(this,arguments)}}function Pu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Lu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const SI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Om,shimAddIceCandidateNullOrEmpty:Pu,shimConnectionState:km,shimMaxMessageSize:Du,shimParameterlessSetLocalDescription:Lu,shimRTCIceCandidate:Nu,shimRTCIceCandidateRelayProtocol:_m,shimSendThrowTypeError:Iu},Symbol.toStringTag,{value:"Module"}));function TI({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=nE,s=mI(t),r={browserDetails:s,commonShim:SI,extractVersion:nc,disableLog:hI,disableWarnings:pI,sdp:vI};switch(s.browser){case"chrome":if(!W0||!xm||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=W0,Pu(t,s),Lu(t),iE(t,s),rE(t),xm(t,s),aE(t),fE(t,s),oE(t),cE(t),lE(t),dE(t,s),Nu(t),_m(t),km(t),Du(t,s),Iu(t),Om(t,s);break;case"firefox":if(!Z0||!Rm||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Z0,Pu(t,s),Lu(t),hE(t,s),Rm(t,s),pE(t),yE(t),mE(t),gE(t),bE(t),vE(t),SE(t),TE(t),CE(t),Nu(t),km(t),Du(t,s),Iu(t);break;case"safari":if(!eT||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=eT,Pu(t,s),Lu(t),kE(t),AE(t),xE(t),wE(t),EE(t),OE(t),RE(t),NE(t),Nu(t),_m(t),Du(t,s),Iu(t),Om(t,s);break;default:n("Unsupported browser!");break}return r}TI({window:typeof window>"u"?void 0:window});function za(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function Yu(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Uf=[];for(let t=0;t<ei.length;t++)Uf[ei[t].charCodeAt(0)]=t;Uf[45]=ei.indexOf("+");Uf[95]=ei.indexOf("/");function CI(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),s=0,r=0,o,l=0;for(let u=0;u<t.length;u++){if(o=Uf[t.charCodeAt(u)],o===void 0)switch(t[u]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:l=o,r=1;break;case 1:n[s++]=l<<2|(o&48)>>4,l=o,r=2;break;case 2:n[s++]=(l&15)<<4|(o&60)>>2,l=o,r=3;break;case 3:n[s++]=(l&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,s)}function wI(t){let e="",n=0,s,r=0;for(let o=0;o<t.length;o++)switch(s=t[o],n){case 0:e+=ei[s>>2],r=(s&3)<<4,n=1;break;case 1:e+=ei[r|s>>4],r=(s&15)<<2,n=2;break;case 2:e+=ei[r|s>>6],e+=ei[s&63],n=0;break}return n&&(e+=ei[r],e+="=",n==1&&(e+="=")),e}var Ju;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(n,s,r,o,l)=>{(e(s)?s[t.symbol]:s[t.symbol]=[]).push({no:r,wireType:o,data:l})},t.onWrite=(n,s,r)=>{for(let{no:o,wireType:l,data:u}of t.list(s))r.tag(o,l).raw(u)},t.list=(n,s)=>{if(e(n)){let r=n[t.symbol];return s?r.filter(o=>o.no==s):r}return[]},t.last=(n,s)=>t.list(n,s).slice(-1)[0];const e=n=>n&&Array.isArray(n[t.symbol])})(Ju||(Ju={}));function EI(t,e){return Object.assign(Object.assign({},t),e)}var Ot;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Ot||(Ot={}));function xI(){let t=0,e=0;for(let s=0;s<28;s+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let s=3;s<=31;s+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Lp(t,e,n){for(let o=0;o<28;o=o+7){const l=t>>>o,u=!(!(l>>>7)&&e==0),h=(u?l|128:l)&255;if(n.push(h),!u)return}const s=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?s|128:s)&255),!!r){for(let o=3;o<31;o=o+7){const l=e>>>o,u=!!(l>>>7),h=(u?l|128:l)&255;if(n.push(h),!u)return}n.push(e>>>31&1)}}const ju=65536*65536;function IE(t){let e=t[0]=="-";e&&(t=t.slice(1));const n=1e6;let s=0,r=0;function o(l,u){const h=Number(t.slice(l,u));r*=n,s=s*n+h,s>=ju&&(r=r+(s/ju|0),s=s%ju)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),[e,s,r]}function Am(t,e){if(e>>>0<=2097151)return""+(ju*e+(t>>>0));let n=t&16777215,s=(t>>>24|e<<8)>>>0&16777215,r=e>>16&65535,o=n+s*6777216+r*6710656,l=s+r*8147497,u=r*2,h=1e7;o>=h&&(l+=Math.floor(o/h),o%=h),l>=h&&(u+=Math.floor(l/h),l%=h);function d(m,b){let g=m?String(m):"";return b?"0000000".slice(g.length)+g:g}return d(u,0)+d(l,u)+d(o,1)}function nT(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function RI(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let ut;function _I(){const t=new DataView(new ArrayBuffer(8));ut=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}_I();function PE(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const LE=/^-?[0-9]+$/,Xu=4294967296,ru=2147483648;class jE{constructor(e,n){this.lo=e|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Xu+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class hn extends jE{static from(e){if(ut)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ut.C(e);case"number":if(e===0)return this.ZERO;e=ut.C(e);case"bigint":if(!e)return this.ZERO;if(e<ut.UMIN)throw new Error("signed value for ulong");if(e>ut.UMAX)throw new Error("ulong too large");return ut.V.setBigUint64(0,e,!0),new hn(ut.V.getInt32(0,!0),ut.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!LE.test(e))throw new Error("string is no integer");let[n,s,r]=IE(e);if(n)throw new Error("signed value for ulong");return new hn(s,r);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new hn(e,e/Xu)}throw new Error("unknown value "+typeof e)}toString(){return ut?this.toBigInt().toString():Am(this.lo,this.hi)}toBigInt(){return PE(ut),ut.V.setInt32(0,this.lo,!0),ut.V.setInt32(4,this.hi,!0),ut.V.getBigUint64(0,!0)}}hn.ZERO=new hn(0,0);class dt extends jE{static from(e){if(ut)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ut.C(e);case"number":if(e===0)return this.ZERO;e=ut.C(e);case"bigint":if(!e)return this.ZERO;if(e<ut.MIN)throw new Error("signed long too small");if(e>ut.MAX)throw new Error("signed long too large");return ut.V.setBigInt64(0,e,!0),new dt(ut.V.getInt32(0,!0),ut.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!LE.test(e))throw new Error("string is no integer");let[n,s,r]=IE(e);if(n){if(r>ru||r==ru&&s!=0)throw new Error("signed long too small")}else if(r>=ru)throw new Error("signed long too large");let o=new dt(s,r);return n?o.negate():o;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new dt(e,e/Xu):new dt(-e,-e/Xu).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&ru)!==0}negate(){let e=~this.hi,n=this.lo;return n?n=~n+1:e+=1,new dt(n,e)}toString(){if(ut)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Am(e.lo,e.hi)}return Am(this.lo,this.hi)}toBigInt(){return PE(ut),ut.V.setInt32(0,this.lo,!0),ut.V.setInt32(4,this.hi,!0),ut.V.getBigInt64(0,!0)}}dt.ZERO=new dt(0,0);const sT={readUnknownField:!0,readerFactory:t=>new OI(t)};function kI(t){return t?Object.assign(Object.assign({},sT),t):sT}class OI{constructor(e,n){this.varint64=xI,this.uint32=RI,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),n=e>>>3,s=e&7;if(n<=0||s<0||s>5)throw new Error("illegal tag: field no "+n+" wire type "+s);return[n,s]}skip(e){let n=this.pos;switch(e){case Ot.Varint:for(;this.buf[this.pos++]&128;);break;case Ot.Bit64:this.pos+=4;case Ot.Bit32:this.pos+=4;break;case Ot.LengthDelimited:let s=this.uint32();this.pos+=s;break;case Ot.StartGroup:let r;for(;(r=this.tag()[1])!==Ot.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new dt(...this.varint64())}uint64(){return new hn(...this.varint64())}sint64(){let[e,n]=this.varint64(),s=-(e&1);return e=(e>>>1|(n&1)<<31)^s,n=n>>>1^s,new dt(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new hn(this.sfixed32(),this.sfixed32())}sfixed64(){return new dt(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function We(t,e){if(!t)throw new Error(e)}const AI=34028234663852886e22,NI=-34028234663852886e22,DI=4294967295,II=2147483647,PI=-2147483648;function cc(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>II||t<PI)throw new Error("invalid int 32: "+t)}function Qu(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>DI||t<0)throw new Error("invalid uint 32: "+t)}function xg(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>AI||t<NI))throw new Error("invalid float 32: "+t)}const iT={writeUnknownFields:!0,writerFactory:()=>new jI};function LI(t){return t?Object.assign(Object.assign({},iT),t):iT}class jI{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),s=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],s),s+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Qu(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return cc(e),nT(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){xg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Qu(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){cc(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return cc(e),e=(e<<1^e>>31)>>>0,nT(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),s=new DataView(n.buffer),r=dt.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),s=new DataView(n.buffer),r=hn.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=dt.from(e);return Lp(n.lo,n.hi,this.buf),this}sint64(e){let n=dt.from(e),s=n.hi>>31,r=n.lo<<1^s,o=(n.hi<<1|n.lo>>>31)^s;return Lp(r,o,this.buf),this}uint64(e){let n=hn.from(e);return Lp(n.lo,n.hi,this.buf),this}}const rT={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},aT={ignoreUnknownFields:!1};function MI(t){return t?Object.assign(Object.assign({},aT),t):aT}function UI(t){return t?Object.assign(Object.assign({},rT),t):rT}function BI(t,e){var n,s;let r=Object.assign(Object.assign({},t),e);return r.typeRegistry=[...(n=t?.typeRegistry)!==null&&n!==void 0?n:[],...(s=e?.typeRegistry)!==null&&s!==void 0?s:[]],r}const ME=Symbol.for("protobuf-ts/message-type");function Wu(t){let e=!1;const n=[];for(let s=0;s<t.length;s++){let r=t.charAt(s);r=="_"?e=!0:/\d/.test(r)?(n.push(r),e=!0):e?(n.push(r.toUpperCase()),e=!1):s==0?n.push(r.toLowerCase()):n.push(r)}return n.join("")}var Z;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Z||(Z={}));var As;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(As||(As={}));var Zu;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(Zu||(Zu={}));function FI(t){var e,n,s,r;return t.localName=(e=t.localName)!==null&&e!==void 0?e:Wu(t.name),t.jsonName=(n=t.jsonName)!==null&&n!==void 0?n:Wu(t.name),t.repeat=(s=t.repeat)!==null&&s!==void 0?s:Zu.NO,t.opt=(r=t.opt)!==null&&r!==void 0?r:t.repeat||t.oneof?!1:t.kind=="message",t}function VI(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class $I{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;const e=[],n=[],s=[];for(let r of this.fields)if(r.oneof)s.includes(r.oneof)||(s.push(r.oneof),e.push(r.oneof),n.push(r.oneof));else switch(n.push(r.localName),r.kind){case"scalar":case"enum":(!r.opt||r.repeat)&&e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName);break}this.data={req:e,known:n,oneofs:Object.values(s)}}is(e,n,s=!1){if(n<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let r=Object.keys(e),o=this.data;if(r.length<o.req.length||o.req.some(l=>!r.includes(l))||!s&&r.some(l=>!o.known.includes(l)))return!1;if(n<1)return!0;for(const l of o.oneofs){const u=e[l];if(!VI(u))return!1;if(u.oneofKind===void 0)continue;const h=this.fields.find(d=>d.localName===u.oneofKind);if(!h||!this.field(u[u.oneofKind],h,s,n))return!1}for(const l of this.fields)if(l.oneof===void 0&&!this.field(e[l.localName],l,s,n))return!1;return!0}field(e,n,s,r){let o=n.repeat;switch(n.kind){case"scalar":return e===void 0?n.opt:o?this.scalars(e,n.T,r,n.L):this.scalar(e,n.T,n.L);case"enum":return e===void 0?n.opt:o?this.scalars(e,Z.INT32,r):this.scalar(e,Z.INT32);case"message":return e===void 0?!0:o?this.messages(e,n.T(),s,r):this.message(e,n.T(),s,r);case"map":if(typeof e!="object"||e===null)return!1;if(r<2)return!0;if(!this.mapKeys(e,n.K,r))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(e),n.V.T,r,n.V.L);case"enum":return this.scalars(Object.values(e),Z.INT32,r);case"message":return this.messages(Object.values(e),n.V.T(),s,r)}break}return!0}message(e,n,s,r){return s?n.isAssignable(e,r):n.is(e,r)}messages(e,n,s,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(s){for(let o=0;o<e.length&&o<r;o++)if(!n.isAssignable(e[o],r-1))return!1}else for(let o=0;o<e.length&&o<r;o++)if(!n.is(e[o],r-1))return!1;return!0}scalar(e,n,s){let r=typeof e;switch(n){case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:switch(s){case As.BIGINT:return r=="bigint";case As.NUMBER:return r=="number"&&!isNaN(e);default:return r=="string"}case Z.BOOL:return r=="boolean";case Z.STRING:return r=="string";case Z.BYTES:return e instanceof Uint8Array;case Z.DOUBLE:case Z.FLOAT:return r=="number"&&!isNaN(e);default:return r=="number"&&Number.isInteger(e)}}scalars(e,n,s,r){if(!Array.isArray(e))return!1;if(s<2)return!0;if(Array.isArray(e)){for(let o=0;o<e.length&&o<s;o++)if(!this.scalar(e[o],n,r))return!1}return!0}mapKeys(e,n,s){let r=Object.keys(e);switch(n){case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:return this.scalars(r.slice(0,s).map(o=>parseInt(o)),n,s);case Z.BOOL:return this.scalars(r.slice(0,s).map(o=>o=="true"?!0:o=="false"?!1:o),n,s);default:return this.scalars(r,n,s,As.STRING)}}}function us(t,e){switch(e){case As.BIGINT:return t.toBigInt();case As.NUMBER:return t.toNumber();default:return t.toString()}}class HI{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const n=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const s of n)this.fMap[s.name]=s,this.fMap[s.jsonName]=s,this.fMap[s.localName]=s}}assert(e,n,s){if(!e){let r=za(s);throw(r=="number"||r=="boolean")&&(r=s.toString()),new Error(`Cannot parse JSON ${r} for ${this.info.typeName}#${n}`)}}read(e,n,s){this.prepare();const r=[];for(const[o,l]of Object.entries(e)){const u=this.fMap[o];if(!u){if(!s.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${o}`);continue}const h=u.localName;let d;if(u.oneof){if(l===null&&(u.kind!=="enum"||u.T()[0]!=="google.protobuf.NullValue"))continue;if(r.includes(u.oneof))throw new Error(`Multiple members of the oneof group "${u.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(u.oneof),d=n[u.oneof]={oneofKind:h}}else d=n;if(u.kind=="map"){if(l===null)continue;this.assert(Yu(l),u.name,l);const m=d[h];for(const[b,g]of Object.entries(l)){this.assert(g!==null,u.name+" map value",null);let v;switch(u.V.kind){case"message":v=u.V.T().internalJsonRead(g,s);break;case"enum":if(v=this.enum(u.V.T(),g,u.name,s.ignoreUnknownFields),v===!1)continue;break;case"scalar":v=this.scalar(g,u.V.T,u.V.L,u.name);break}this.assert(v!==void 0,u.name+" map value",g);let S=b;u.K==Z.BOOL&&(S=S=="true"?!0:S=="false"?!1:S),S=this.scalar(S,u.K,As.STRING,u.name).toString(),m[S]=v}}else if(u.repeat){if(l===null)continue;this.assert(Array.isArray(l),u.name,l);const m=d[h];for(const b of l){this.assert(b!==null,u.name,null);let g;switch(u.kind){case"message":g=u.T().internalJsonRead(b,s);break;case"enum":if(g=this.enum(u.T(),b,u.name,s.ignoreUnknownFields),g===!1)continue;break;case"scalar":g=this.scalar(b,u.T,u.L,u.name);break}this.assert(g!==void 0,u.name,l),m.push(g)}}else switch(u.kind){case"message":if(l===null&&u.T().typeName!="google.protobuf.Value"){this.assert(u.oneof===void 0,u.name+" (oneof member)",null);continue}d[h]=u.T().internalJsonRead(l,s,d[h]);break;case"enum":if(l===null)continue;let m=this.enum(u.T(),l,u.name,s.ignoreUnknownFields);if(m===!1)continue;d[h]=m;break;case"scalar":if(l===null)continue;d[h]=this.scalar(l,u.T,u.L,u.name);break}}}enum(e,n,s,r){if(e[0]=="google.protobuf.NullValue"&&We(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return We(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${s}, enum can only be integral number, got ${n}.`),n;case"string":let o=n;e[2]&&n.substring(0,e[2].length)===e[2]&&(o=n.substring(e[2].length));let l=e[1][o];return typeof l>"u"&&r?!1:(We(typeof l=="number",`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} has no value for "${n}".`),l)}We(!1,`Unable to parse field ${this.info.typeName}#${s}, cannot parse enum value from ${typeof n}".`)}scalar(e,n,s,r){let o;try{switch(n){case Z.DOUBLE:case Z.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){o="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){o="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let l=Number(e);if(Number.isNaN(l)){o="not a number";break}if(!Number.isFinite(l)){o="too large or small";break}return n==Z.FLOAT&&xg(l),l;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:if(e===null)return 0;let u;if(typeof e=="number"?u=e:e===""?o="empty string":typeof e=="string"&&(e.trim().length!==e.length?o="extra whitespace":u=Number(e)),u===void 0)break;return n==Z.UINT32?Qu(u):cc(u),u;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(e===null)return us(dt.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return us(dt.from(e),s);case Z.FIXED64:case Z.UINT64:if(e===null)return us(hn.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return us(hn.from(e),s);case Z.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case Z.STRING:if(e===null)return"";if(typeof e!="string"){o="extra whitespace";break}try{encodeURIComponent(e)}catch(h){h="invalid UTF8";break}return e;case Z.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return CI(e)}}catch(l){o=l.message}this.assert(!1,r+(o?" - "+o:""),e)}}class zI{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}write(e,n){const s={},r=e;for(const o of this.fields){if(!o.oneof){let d=this.field(o,r[o.localName],n);d!==void 0&&(s[n.useProtoFieldName?o.name:o.jsonName]=d);continue}const l=r[o.oneof];if(l.oneofKind!==o.localName)continue;const u=o.kind=="scalar"||o.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n;let h=this.field(o,l[o.localName],u);We(h!==void 0),s[n.useProtoFieldName?o.name:o.jsonName]=h}return s}field(e,n,s){let r;if(e.kind=="map"){We(typeof n=="object"&&n!==null);const o={};switch(e.V.kind){case"scalar":for(const[h,d]of Object.entries(n)){const m=this.scalar(e.V.T,d,e.name,!1,!0);We(m!==void 0),o[h.toString()]=m}break;case"message":const l=e.V.T();for(const[h,d]of Object.entries(n)){const m=this.message(l,d,e.name,s);We(m!==void 0),o[h.toString()]=m}break;case"enum":const u=e.V.T();for(const[h,d]of Object.entries(n)){We(d===void 0||typeof d=="number");const m=this.enum(u,d,e.name,!1,!0,s.enumAsInteger);We(m!==void 0),o[h.toString()]=m}break}(s.emitDefaultValues||Object.keys(o).length>0)&&(r=o)}else if(e.repeat){We(Array.isArray(n));const o=[];switch(e.kind){case"scalar":for(let h=0;h<n.length;h++){const d=this.scalar(e.T,n[h],e.name,e.opt,!0);We(d!==void 0),o.push(d)}break;case"enum":const l=e.T();for(let h=0;h<n.length;h++){We(n[h]===void 0||typeof n[h]=="number");const d=this.enum(l,n[h],e.name,e.opt,!0,s.enumAsInteger);We(d!==void 0),o.push(d)}break;case"message":const u=e.T();for(let h=0;h<n.length;h++){const d=this.message(u,n[h],e.name,s);We(d!==void 0),o.push(d)}break}(s.emitDefaultValues||o.length>0||s.emitDefaultValues)&&(r=o)}else switch(e.kind){case"scalar":r=this.scalar(e.T,n,e.name,e.opt,s.emitDefaultValues);break;case"enum":r=this.enum(e.T(),n,e.name,e.opt,s.emitDefaultValues,s.enumAsInteger);break;case"message":r=this.message(e.T(),n,e.name,s);break}return r}enum(e,n,s,r,o,l){if(e[0]=="google.protobuf.NullValue")return!o&&!r?void 0:null;if(n===void 0){We(r);return}if(!(n===0&&!o&&!r))return We(typeof n=="number"),We(Number.isInteger(n)),l||!e[1].hasOwnProperty(n)?n:e[2]?e[2]+e[1][n]:e[1][n]}message(e,n,s,r){return n===void 0?r.emitDefaultValues?null:void 0:e.internalJsonWrite(n,r)}scalar(e,n,s,r,o){if(n===void 0){We(r);return}const l=o||r;switch(e){case Z.INT32:case Z.SFIXED32:case Z.SINT32:return n===0?l?0:void 0:(cc(n),n);case Z.FIXED32:case Z.UINT32:return n===0?l?0:void 0:(Qu(n),n);case Z.FLOAT:xg(n);case Z.DOUBLE:return n===0?l?0:void 0:(We(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case Z.STRING:return n===""?l?"":void 0:(We(typeof n=="string"),n);case Z.BOOL:return n===!1?l?!1:void 0:(We(typeof n=="boolean"),n);case Z.UINT64:case Z.FIXED64:We(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let u=hn.from(n);return u.isZero()&&!l?void 0:u.toString();case Z.INT64:case Z.SFIXED64:case Z.SINT64:We(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let h=dt.from(n);return h.isZero()&&!l?void 0:h.toString();case Z.BYTES:return We(n instanceof Uint8Array),n.byteLength?wI(n):l?"":void 0}}}function Nm(t,e=As.STRING){switch(t){case Z.BOOL:return!1;case Z.UINT64:case Z.FIXED64:return us(hn.ZERO,e);case Z.INT64:case Z.SFIXED64:case Z.SINT64:return us(dt.ZERO,e);case Z.DOUBLE:case Z.FLOAT:return 0;case Z.BYTES:return new Uint8Array(0);case Z.STRING:return"";default:return 0}}class qI{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const n=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(n.map(s=>[s.no,s]))}}read(e,n,s,r){this.prepare();const o=r===void 0?e.len:e.pos+r;for(;e.pos<o;){const[l,u]=e.tag(),h=this.fieldNoToField.get(l);if(!h){let g=s.readUnknownField;if(g=="throw")throw new Error(`Unknown field ${l} (wire type ${u}) for ${this.info.typeName}`);let v=e.skip(u);g!==!1&&(g===!0?Ju.onRead:g)(this.info.typeName,n,l,u,v);continue}let d=n,m=h.repeat,b=h.localName;switch(h.oneof&&(d=d[h.oneof],d.oneofKind!==b&&(d=n[h.oneof]={oneofKind:b})),h.kind){case"scalar":case"enum":let g=h.kind=="enum"?Z.INT32:h.T,v=h.kind=="scalar"?h.L:void 0;if(m){let w=d[b];if(u==Ot.LengthDelimited&&g!=Z.STRING&&g!=Z.BYTES){let R=e.uint32()+e.pos;for(;e.pos<R;)w.push(this.scalar(e,g,v))}else w.push(this.scalar(e,g,v))}else d[b]=this.scalar(e,g,v);break;case"message":if(m){let w=d[b],R=h.T().internalBinaryRead(e,e.uint32(),s);w.push(R)}else d[b]=h.T().internalBinaryRead(e,e.uint32(),s,d[b]);break;case"map":let[S,T]=this.mapEntry(h,e,s);d[b][S]=T;break}}}mapEntry(e,n,s){let r=n.uint32(),o=n.pos+r,l,u;for(;n.pos<o;){let[h,d]=n.tag();switch(h){case 1:e.K==Z.BOOL?l=n.bool().toString():l=this.scalar(n,e.K,As.STRING);break;case 2:switch(e.V.kind){case"scalar":u=this.scalar(n,e.V.T,e.V.L);break;case"enum":u=n.int32();break;case"message":u=e.V.T().internalBinaryRead(n,n.uint32(),s);break}break;default:throw new Error(`Unknown field ${h} (wire type ${d}) in map entry for ${this.info.typeName}#${e.name}`)}}if(l===void 0){let h=Nm(e.K);l=e.K==Z.BOOL?h.toString():h}if(u===void 0)switch(e.V.kind){case"scalar":u=Nm(e.V.T,e.V.L);break;case"enum":u=0;break;case"message":u=e.V.T().create();break}return[l,u]}scalar(e,n,s){switch(n){case Z.INT32:return e.int32();case Z.STRING:return e.string();case Z.BOOL:return e.bool();case Z.DOUBLE:return e.double();case Z.FLOAT:return e.float();case Z.INT64:return us(e.int64(),s);case Z.UINT64:return us(e.uint64(),s);case Z.FIXED64:return us(e.fixed64(),s);case Z.FIXED32:return e.fixed32();case Z.BYTES:return e.bytes();case Z.UINT32:return e.uint32();case Z.SFIXED32:return e.sfixed32();case Z.SFIXED64:return us(e.sfixed64(),s);case Z.SINT32:return e.sint32();case Z.SINT64:return us(e.sint64(),s)}}}class GI{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((n,s)=>n.no-s.no)}}write(e,n,s){this.prepare();for(const o of this.fields){let l,u,h=o.repeat,d=o.localName;if(o.oneof){const m=e[o.oneof];if(m.oneofKind!==d)continue;l=m[d],u=!0}else l=e[d],u=!1;switch(o.kind){case"scalar":case"enum":let m=o.kind=="enum"?Z.INT32:o.T;if(h)if(We(Array.isArray(l)),h==Zu.PACKED)this.packed(n,m,o.no,l);else for(const b of l)this.scalar(n,m,o.no,b,!0);else l===void 0?We(o.opt):this.scalar(n,m,o.no,l,u||o.opt);break;case"message":if(h){We(Array.isArray(l));for(const b of l)this.message(n,s,o.T(),o.no,b)}else this.message(n,s,o.T(),o.no,l);break;case"map":We(typeof l=="object"&&l!==null);for(const[b,g]of Object.entries(l))this.mapEntry(n,s,o,b,g);break}}let r=s.writeUnknownFields;r!==!1&&(r===!0?Ju.onWrite:r)(this.info.typeName,e,n)}mapEntry(e,n,s,r,o){e.tag(s.no,Ot.LengthDelimited),e.fork();let l=r;switch(s.K){case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:l=Number.parseInt(r);break;case Z.BOOL:We(r=="true"||r=="false"),l=r=="true";break}switch(this.scalar(e,s.K,1,l,!0),s.V.kind){case"scalar":this.scalar(e,s.V.T,2,o,!0);break;case"enum":this.scalar(e,Z.INT32,2,o,!0);break;case"message":this.message(e,n,s.V.T(),2,o);break}e.join()}message(e,n,s,r,o){o!==void 0&&(s.internalBinaryWrite(o,e.tag(r,Ot.LengthDelimited).fork(),n),e.join())}scalar(e,n,s,r,o){let[l,u,h]=this.scalarInfo(n,r);(!h||o)&&(e.tag(s,l),e[u](r))}packed(e,n,s,r){if(!r.length)return;We(n!==Z.BYTES&&n!==Z.STRING),e.tag(s,Ot.LengthDelimited),e.fork();let[,o]=this.scalarInfo(n);for(let l=0;l<r.length;l++)e[o](r[l]);e.join()}scalarInfo(e,n){let s=Ot.Varint,r,o=n===void 0,l=n===0;switch(e){case Z.INT32:r="int32";break;case Z.STRING:l=o||!n.length,s=Ot.LengthDelimited,r="string";break;case Z.BOOL:l=n===!1,r="bool";break;case Z.UINT32:r="uint32";break;case Z.DOUBLE:s=Ot.Bit64,r="double";break;case Z.FLOAT:s=Ot.Bit32,r="float";break;case Z.INT64:l=o||dt.from(n).isZero(),r="int64";break;case Z.UINT64:l=o||hn.from(n).isZero(),r="uint64";break;case Z.FIXED64:l=o||hn.from(n).isZero(),s=Ot.Bit64,r="fixed64";break;case Z.BYTES:l=o||!n.byteLength,s=Ot.LengthDelimited,r="bytes";break;case Z.FIXED32:s=Ot.Bit32,r="fixed32";break;case Z.SFIXED32:s=Ot.Bit32,r="sfixed32";break;case Z.SFIXED64:l=o||dt.from(n).isZero(),s=Ot.Bit64,r="sfixed64";break;case Z.SINT32:r="sint32";break;case Z.SINT64:l=o||dt.from(n).isZero(),r="sint64";break}return[s,r,o||l]}}function KI(t){const e=t.messagePrototype?Object.create(t.messagePrototype):Object.defineProperty({},ME,{value:t});for(let n of t.fields){let s=n.localName;if(!n.opt)if(n.oneof)e[n.oneof]={oneofKind:void 0};else if(n.repeat)e[s]=[];else switch(n.kind){case"scalar":e[s]=Nm(n.T,n.L);break;case"enum":e[s]=0;break;case"map":e[s]={};break}}return e}function jp(t,e,n){let s,r=n,o;for(let l of t.fields){let u=l.localName;if(l.oneof){const h=r[l.oneof];if(h?.oneofKind==null)continue;if(s=h[u],o=e[l.oneof],o.oneofKind=h.oneofKind,s==null){delete o[u];continue}}else if(s=r[u],o=e,s==null)continue;switch(l.repeat&&(o[u].length=s.length),l.kind){case"scalar":case"enum":if(l.repeat)for(let d=0;d<s.length;d++)o[u][d]=s[d];else o[u]=s;break;case"message":let h=l.T();if(l.repeat)for(let d=0;d<s.length;d++)o[u][d]=h.create(s[d]);else o[u]===void 0?o[u]=h.create(s):h.mergePartial(o[u],s);break;case"map":switch(l.V.kind){case"scalar":case"enum":Object.assign(o[u],s);break;case"message":let d=l.V.T();for(let m of Object.keys(s))o[u][m]=d.create(s[m]);break}break}}}function YI(t,e,n){if(e===n)return!0;if(!e||!n)return!1;for(let s of t.fields){let r=s.localName,o=s.oneof?e[s.oneof][r]:e[r],l=s.oneof?n[s.oneof][r]:n[r];switch(s.kind){case"enum":case"scalar":let u=s.kind=="enum"?Z.INT32:s.T;if(!(s.repeat?oT(u,o,l):UE(u,o,l)))return!1;break;case"map":if(!(s.V.kind=="message"?cT(s.V.T(),au(o),au(l)):oT(s.V.kind=="enum"?Z.INT32:s.V.T,au(o),au(l))))return!1;break;case"message":let h=s.T();if(!(s.repeat?cT(h,o,l):h.equals(o,l)))return!1;break}}return!0}const au=Object.values;function UE(t,e,n){if(e===n)return!0;if(t!==Z.BYTES)return!1;let s=e,r=n;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o]!=r[o])return!1;return!0}function oT(t,e,n){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!UE(t,e[s],n[s]))return!1;return!0}function cT(t,e,n){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!t.equals(e[s],n[s]))return!1;return!0}const BE=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({})),JI=BE[ME]={};class ce{constructor(e,n,s){this.defaultCheckDepth=16,this.typeName=e,this.fields=n.map(FI),this.options=s??{},JI.value=this,this.messagePrototype=Object.create(null,BE),this.refTypeCheck=new $I(this),this.refJsonReader=new HI(this),this.refJsonWriter=new zI(this),this.refBinReader=new qI(this),this.refBinWriter=new GI(this)}create(e){let n=KI(this);return e!==void 0&&jp(this,n,e),n}clone(e){let n=this.create();return jp(this,n,e),n}equals(e,n){return YI(this,e,n)}is(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!1)}isAssignable(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!0)}mergePartial(e,n){jp(this,e,n)}fromBinary(e,n){let s=kI(n);return this.internalBinaryRead(s.readerFactory(e),e.byteLength,s)}fromJson(e,n){return this.internalJsonRead(e,MI(n))}fromJsonString(e,n){let s=JSON.parse(e);return this.fromJson(s,n)}toJson(e,n){return this.internalJsonWrite(e,UI(n))}toJsonString(e,n){var s;let r=this.toJson(e,n);return JSON.stringify(r,null,(s=n?.prettySpaces)!==null&&s!==void 0?s:0)}toBinary(e,n){let s=LI(n);return this.internalBinaryWrite(e,s.writerFactory(),s).finish()}internalJsonRead(e,n,s){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let r=s??this.create();return this.refJsonReader.read(e,r,n),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${za(e)}.`)}internalJsonWrite(e,n){return this.refJsonWriter.write(e,n)}internalBinaryWrite(e,n,s){return this.refBinWriter.write(e,n,s),n}internalBinaryRead(e,n,s,r){let o=r??this.create();return this.refBinReader.read(e,o,s,n),o}}function XI(t,e){var n,s,r;let o=t;return o.service=e,o.localName=(n=o.localName)!==null&&n!==void 0?n:Wu(o.name),o.serverStreaming=!!o.serverStreaming,o.clientStreaming=!!o.clientStreaming,o.options=(s=o.options)!==null&&s!==void 0?s:{},o.idempotency=(r=o.idempotency)!==null&&r!==void 0?r:void 0,o}class QI{constructor(e,n,s){this.typeName=e,this.methods=n.map(r=>XI(r,this)),this.options=s??{}}}class _n extends Error{constructor(e,n="UNKNOWN",s){super(e),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=n,this.meta=s??{}}toString(){const e=[this.name+": "+this.message];this.code&&(e.push(""),e.push("Code: "+this.code)),this.serviceName&&this.methodName&&e.push("Method: "+this.serviceName+"/"+this.methodName);let n=Object.entries(this.meta);if(n.length){e.push(""),e.push("Meta:");for(let[s,r]of n)e.push(`  ${s}: ${r}`)}return e.join(`
`)}}function WI(t,e){if(!e)return t;let n={};ou(t,n),ou(e,n);for(let s of Object.keys(e)){let r=e[s];switch(s){case"jsonOptions":n.jsonOptions=BI(t.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=EI(t.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},ou(t.meta,n.meta),ou(e.meta,n.meta);break;case"interceptors":n.interceptors=t.interceptors?t.interceptors.concat(r):r.concat();break}}return n}function ou(t,e){if(!t)return;let n=e;for(let[s,r]of Object.entries(t))r instanceof Date?n[s]=new Date(r.getTime()):Array.isArray(r)?n[s]=r.concat():n[s]=r}var cs;(function(t){t[t.PENDING=0]="PENDING",t[t.REJECTED=1]="REJECTED",t[t.RESOLVED=2]="RESOLVED"})(cs||(cs={}));class cu{constructor(e=!0){this._state=cs.PENDING,this._promise=new Promise((n,s)=>{this._resolve=n,this._reject=s}),e&&this._promise.catch(n=>{})}get state(){return this._state}get promise(){return this._promise}resolve(e){if(this.state!==cs.PENDING)throw new Error(`cannot resolve ${cs[this.state].toLowerCase()}`);this._resolve(e),this._state=cs.RESOLVED}reject(e){if(this.state!==cs.PENDING)throw new Error(`cannot reject ${cs[this.state].toLowerCase()}`);this._reject(e),this._state=cs.REJECTED}resolvePending(e){this._state===cs.PENDING&&this.resolve(e)}rejectPending(e){this._state===cs.PENDING&&this.reject(e)}}var ZI=function(t,e,n,s){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(m){try{d(s.next(m))}catch(b){l(b)}}function h(m){try{d(s.throw(m))}catch(b){l(b)}}function d(m){m.done?o(m.value):r(m.value).then(u,h)}d((s=s.apply(t,e||[])).next())})};class eP{constructor(e,n,s,r,o,l,u){this.method=e,this.requestHeaders=n,this.request=s,this.headers=r,this.response=o,this.status=l,this.trailers=u}then(e,n){return this.promiseFinished().then(s=>e?Promise.resolve(e(s)):s,s=>n?Promise.resolve(n(s)):Promise.reject(s))}promiseFinished(){return ZI(this,void 0,void 0,function*(){let[e,n,s,r]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:e,response:n,status:s,trailers:r}})}}function Zs(t,e,n,s,r){var o;{let l=(u,h,d)=>e.unary(u,h,d);for(const u of((o=s.interceptors)!==null&&o!==void 0?o:[]).filter(h=>h.interceptUnary).reverse()){const h=l;l=(d,m,b)=>u.interceptUnary(h,d,m,b)}return l(n,r,s)}}var yt;(function(t){t[t.cancelled=0]="cancelled",t[t.unknown=1]="unknown",t[t.invalid_argument=2]="invalid_argument",t[t.malformed=3]="malformed",t[t.deadline_exceeded=4]="deadline_exceeded",t[t.not_found=5]="not_found",t[t.bad_route=6]="bad_route",t[t.already_exists=7]="already_exists",t[t.permission_denied=8]="permission_denied",t[t.unauthenticated=9]="unauthenticated",t[t.resource_exhausted=10]="resource_exhausted",t[t.failed_precondition=11]="failed_precondition",t[t.aborted=12]="aborted",t[t.out_of_range=13]="out_of_range",t[t.unimplemented=14]="unimplemented",t[t.internal=15]="internal",t[t.unavailable=16]="unavailable",t[t.dataloss=17]="dataloss"})(yt||(yt={}));function tP(t,e,n){if(n)for(let[s,r]of Object.entries(n))if(typeof r=="string")t.append(s,r);else for(let o of r)t.append(s,o);return t.set("Content-Type",e?"application/json":"application/protobuf"),t.set("Accept",e?"application/json":"application/protobuf, application/json"),t}function nP(t){if(!Yu(t)||typeof t.code!="string"||typeof t.msg!="string")return new _n("cannot read twirp error response",yt[yt.internal]);let e={};if(Yu(t.meta))for(let[n,s]of Object.entries(t.meta))typeof s=="string"&&(e[n]=s);return new _n(t.msg,t.code,e)}function sP(t){let e={};return t.forEach((n,s)=>{s.toLowerCase()!=="content-type"&&s.toLowerCase()!=="content-length"&&(e.hasOwnProperty(s)?e[s].push(n):e[s]=n)}),e}class iP{constructor(e){this.defaultOptions=e}mergeOptions(e){return WI(this.defaultOptions,e)}unary(e,n,s){var r,o,l;let u=s,h=this.makeUrl(e,u),d=(r=u.fetchInit)!==null&&r!==void 0?r:{},m=u.sendJson?e.I.toJsonString(n,u.jsonOptions):e.I.toBinary(n,u.binaryOptions),b=new cu,g=new cu,v=new cu,S=new cu;return globalThis.fetch(h,Object.assign(Object.assign({},d),{method:"POST",headers:tP(new globalThis.Headers,!!u.sendJson,u.meta),body:m,signal:(o=s.abort)!==null&&o!==void 0?o:null})).then(T=>{b.resolve(sP(T.headers));let w;try{w=T.type}catch{}switch(w){case"error":case"opaque":case"opaqueredirect":throw new _n(`fetch response type ${T.type}`,yt[yt.unknown])}return T.ok?u.sendJson?T.json().then(R=>e.O.fromJson(R,u.jsonOptions),()=>{throw new _n("unable to read response body as json",yt[yt.dataloss])}):T.arrayBuffer().then(R=>e.O.fromBinary(new Uint8Array(R),u.binaryOptions),()=>{throw new _n("unable to read response body",yt[yt.dataloss])}):T.json().then(R=>{throw nP(R)},()=>{throw new _n("received HTTP "+T.status+", unable to read response body as json",yt[yt.internal])})},T=>{throw T instanceof Error&&T.name==="AbortError"?new _n(T.message,yt[yt.cancelled]):new _n(T instanceof Error?T.message:T)}).then(T=>{g.resolve(T),v.resolve({code:"OK",detail:""}),S.resolve({})}).catch(T=>{let w=T instanceof _n?T:new _n(T instanceof Error?T.message:T,yt[yt.internal]);w.methodName=e.name,w.serviceName=e.service.typeName,b.rejectPending(w),g.rejectPending(w),v.rejectPending(w),S.rejectPending(w)}),new eP(e,(l=u.meta)!==null&&l!==void 0?l:{},n,b.promise,g.promise,v.promise,S.promise)}makeUrl(e,n){let s=n.baseUrl;s.endsWith("/")&&(s=s.substring(0,s.length-1));let r=e.name;return n.useProtoMethodName!==!0&&(r=Wu(r),r=r.substring(0,1).toUpperCase()+r.substring(1)),`${s}/${e.service.typeName}/${r}`}clientStreaming(e){const n=new _n("Client streaming is not supported by Twirp",yt[yt.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}duplex(e){const n=new _n("Duplex streaming is not supported by Twirp",yt[yt.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}serverStreaming(e){const n=new _n("Server streaming is not supported by Twirp",yt[yt.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}}var Dm=function(t,e){return Dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])},Dm(t,e)};function Is(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Dm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function rP(t,e,n,s){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(m){try{d(s.next(m))}catch(b){l(b)}}function h(m){try{d(s.throw(m))}catch(b){l(b)}}function d(m){m.done?o(m.value):r(m.value).then(u,h)}d((s=s.apply(t,e||[])).next())})}function FE(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,r,o,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(d){return function(m){return h([d,m])}}function h(d){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(n=0)),n;)try{if(s=1,r&&(o=d[0]&2?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,r=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(m){d=[6,m],r=0}finally{s=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Aa(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(u){l={error:u}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(l)throw l.error}}return o}function Na(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,o;s<r;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))}function xa(t){return this instanceof xa?(this.v=t,this):new xa(t)}function aP(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(v){return function(S){return Promise.resolve(S).then(v,b)}}function u(v,S){s[v]&&(r[v]=function(T){return new Promise(function(w,R){o.push([v,T,w,R])>1||h(v,T)})},S&&(r[v]=S(r[v])))}function h(v,S){try{d(s[v](S))}catch(T){g(o[0][3],T)}}function d(v){v.value instanceof xa?Promise.resolve(v.value.v).then(m,b):g(o[0][2],v)}function m(v){h("next",v)}function b(v){h("throw",v)}function g(v,S){v(S),o.shift(),o.length&&h(o[0][0],o[0][1])}}function oP(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Aa=="function"?Aa(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(o){n[o]=t[o]&&function(l){return new Promise(function(u,h){l=t[o](l),r(u,h,l.done,l.value)})}}function r(o,l,u,h){Promise.resolve(h).then(function(d){o({value:d,done:u})},l)}}function rt(t){return typeof t=="function"}function VE(t){var e=function(s){Error.call(s),s.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Mp=VE(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(s,r){return r+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function ef(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pc=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,s,r,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var u=Aa(l),h=u.next();!h.done;h=u.next()){var d=h.value;d.remove(this)}}catch(T){e={error:T}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}else l.remove(this);var m=this.initialTeardown;if(rt(m))try{m()}catch(T){o=T instanceof Mp?T.errors:[T]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var g=Aa(b),v=g.next();!v.done;v=g.next()){var S=v.value;try{lT(S)}catch(T){o=o??[],T instanceof Mp?o=Na(Na([],wr(o)),wr(T.errors)):o.push(T)}}}catch(T){s={error:T}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(s)throw s.error}}}if(o)throw new Mp(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)lT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&ef(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&ef(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),$E=Pc.EMPTY;function HE(t){return t instanceof Pc||t&&"closed"in t&&rt(t.remove)&&rt(t.add)&&rt(t.unsubscribe)}function lT(t){rt(t)?t():t.unsubscribe()}var cP={Promise:void 0},lP={setTimeout:function(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return setTimeout.apply(void 0,Na([t,e],wr(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function zE(t){lP.setTimeout(function(){throw t})}function uT(){}function Mu(t){t()}var Rg=function(t){Is(e,t);function e(n){var s=t.call(this)||this;return s.isStopped=!1,n?(s.destination=n,HE(n)&&n.add(s)):s.destination=dP,s}return e.create=function(n,s,r){return new gc(n,s,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Pc),uP=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(s){lu(s)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(s){lu(s)}else lu(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){lu(n)}},t}(),gc=function(t){Is(e,t);function e(n,s,r){var o=t.call(this)||this,l;return rt(n)||!n?l={next:n??void 0,error:s??void 0,complete:r??void 0}:l=n,o.destination=new uP(l),o}return e}(Rg);function lu(t){zE(t)}function fP(t){throw t}var dP={closed:!0,next:uT,error:fP,complete:uT},_g=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Lc(t){return t}function hP(t){return t.length===0?Lc:t.length===1?t[0]:function(n){return t.reduce(function(s,r){return r(s)},n)}}var bn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,s){var r=this,o=mP(e)?e:new gc(e,n,s);return Mu(function(){var l=r,u=l.operator,h=l.source;o.add(u?u.call(o,h):h?r._subscribe(o):r._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var s=this;return n=fT(n),new n(function(r,o){var l=new gc({next:function(u){try{e(u)}catch(h){o(h),l.unsubscribe()}},error:o,complete:r});s.subscribe(l)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[_g]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return hP(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=fT(e),new e(function(s,r){var o;n.subscribe(function(l){return o=l},function(l){return r(l)},function(){return s(o)})})},t.create=function(e){return new t(e)},t}();function fT(t){var e;return(e=t??cP.Promise)!==null&&e!==void 0?e:Promise}function pP(t){return t&&rt(t.next)&&rt(t.error)&&rt(t.complete)}function mP(t){return t&&t instanceof Rg||pP(t)&&HE(t)}function gP(t){return rt(t?.lift)}function Ps(t){return function(e){if(gP(e))return e.lift(function(n){try{return t(n,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function oi(t,e,n,s,r){return new yP(t,e,n,s,r)}var yP=function(t){Is(e,t);function e(n,s,r,o,l,u){var h=t.call(this,n)||this;return h.onFinalize=l,h.shouldUnsubscribe=u,h._next=s?function(d){try{s(d)}catch(m){n.error(m)}}:t.prototype._next,h._error=o?function(d){try{o(d)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,h._complete=r?function(){try{r()}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._complete,h}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;t.prototype.unsubscribe.call(this),!s&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Rg),bP=VE(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Bf=function(t){Is(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var s=new dT(this,this);return s.operator=n,s},e.prototype._throwIfClosed=function(){if(this.closed)throw new bP},e.prototype.next=function(n){var s=this;Mu(function(){var r,o;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var l=Aa(s.currentObservers),u=l.next();!u.done;u=l.next()){var h=u.value;h.next(n)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var s=this;Mu(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=n;for(var r=s.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;Mu(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var s=n.observers;s.length;)s.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var s=this,r=this,o=r.hasError,l=r.isStopped,u=r.observers;return o||l?$E:(this.currentObservers=null,u.push(n),new Pc(function(){s.currentObservers=null,ef(u,n)}))},e.prototype._checkFinalizedStatuses=function(n){var s=this,r=s.hasError,o=s.thrownError,l=s.isStopped;r?n.error(o):l&&n.complete()},e.prototype.asObservable=function(){var n=new bn;return n.source=this,n},e.create=function(n,s){return new dT(n,s)},e}(bn),dT=function(t){Is(e,t);function e(n,s){var r=t.call(this)||this;return r.destination=n,r.source=s,r}return e.prototype.next=function(n){var s,r;(r=(s=this.destination)===null||s===void 0?void 0:s.next)===null||r===void 0||r.call(s,n)},e.prototype.error=function(n){var s,r;(r=(s=this.destination)===null||s===void 0?void 0:s.error)===null||r===void 0||r.call(s,n)},e.prototype.complete=function(){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||s===void 0||s.call(n)},e.prototype._subscribe=function(n){var s,r;return(r=(s=this.source)===null||s===void 0?void 0:s.subscribe(n))!==null&&r!==void 0?r:$E},e}(Bf),je=function(t){Is(e,t);function e(n){var s=t.call(this)||this;return s._value=n,s}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var s=t.prototype._subscribe.call(this,n);return!s.closed&&n.next(this._value),s},e.prototype.getValue=function(){var n=this,s=n.hasError,r=n.thrownError,o=n._value;if(s)throw r;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Bf),kg={now:function(){return(kg.delegate||Date).now()},delegate:void 0},Im=function(t){Is(e,t);function e(n,s,r){n===void 0&&(n=1/0),s===void 0&&(s=1/0),r===void 0&&(r=kg);var o=t.call(this)||this;return o._bufferSize=n,o._windowTime=s,o._timestampProvider=r,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=s===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,s),o}return e.prototype.next=function(n){var s=this,r=s.isStopped,o=s._buffer,l=s._infiniteTimeWindow,u=s._timestampProvider,h=s._windowTime;r||(o.push(n),!l&&o.push(u.now()+h)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var s=this._innerSubscribe(n),r=this,o=r._infiniteTimeWindow,l=r._buffer,u=l.slice(),h=0;h<u.length&&!n.closed;h+=o?1:2)n.next(u[h]);return this._checkFinalizedStatuses(n),s},e.prototype._trimBuffer=function(){var n=this,s=n._bufferSize,r=n._timestampProvider,o=n._buffer,l=n._infiniteTimeWindow,u=(l?1:2)*s;if(s<1/0&&u<o.length&&o.splice(0,o.length-u),!l){for(var h=r.now(),d=0,m=1;m<o.length&&o[m]<=h;m+=2)d=m;d&&o.splice(0,d+1)}},e}(Bf),vP=function(t){Is(e,t);function e(n,s){return t.call(this)||this}return e.prototype.schedule=function(n,s){return this},e}(Pc),hT={setInterval:function(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return setInterval.apply(void 0,Na([t,e],wr(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},SP=function(t){Is(e,t);function e(n,s){var r=t.call(this,n,s)||this;return r.scheduler=n,r.work=s,r.pending=!1,r}return e.prototype.schedule=function(n,s){var r;if(s===void 0&&(s=0),this.closed)return this;this.state=n;var o=this.id,l=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(l,o,s)),this.pending=!0,this.delay=s,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(l,this.id,s),this},e.prototype.requestAsyncId=function(n,s,r){return r===void 0&&(r=0),hT.setInterval(n.flush.bind(n,this),r)},e.prototype.recycleAsyncId=function(n,s,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return s;s!=null&&hT.clearInterval(s)},e.prototype.execute=function(n,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,s);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,s){var r=!1,o;try{this.work(n)}catch(l){r=!0,o=l||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,s=n.id,r=n.scheduler,o=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ef(o,this),s!=null&&(this.id=this.recycleAsyncId(r,s,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(vP),pT=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(s,n)},t.now=kg.now,t}(),TP=function(t){Is(e,t);function e(n,s){s===void 0&&(s=pT.now);var r=t.call(this,n,s)||this;return r.actions=[],r._active=!1,r}return e.prototype.flush=function(n){var s=this.actions;if(this._active){s.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=s.shift());if(this._active=!1,r){for(;n=s.shift();)n.unsubscribe();throw r}},e}(pT),CP=new TP(SP),wP=new bn(function(t){return t.complete()});function EP(t){return t&&rt(t.schedule)}function Og(t){return t[t.length-1]}function xP(t){return rt(Og(t))?t.pop():void 0}function jc(t){return EP(Og(t))?t.pop():void 0}function RP(t,e){return typeof Og(t)=="number"?t.pop():e}var Ag=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function qE(t){return rt(t?.then)}function GE(t){return rt(t[_g])}function KE(t){return Symbol.asyncIterator&&rt(t?.[Symbol.asyncIterator])}function YE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function _P(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var JE=_P();function XE(t){return rt(t?.[JE])}function QE(t){return aP(this,arguments,function(){var n,s,r,o;return FE(this,function(l){switch(l.label){case 0:n=t.getReader(),l.label=1;case 1:l.trys.push([1,,9,10]),l.label=2;case 2:return[4,xa(n.read())];case 3:return s=l.sent(),r=s.value,o=s.done,o?[4,xa(void 0)]:[3,5];case 4:return[2,l.sent()];case 5:return[4,xa(r)];case 6:return[4,l.sent()];case 7:return l.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function WE(t){return rt(t?.getReader)}function ui(t){if(t instanceof bn)return t;if(t!=null){if(GE(t))return kP(t);if(Ag(t))return OP(t);if(qE(t))return AP(t);if(KE(t))return ZE(t);if(XE(t))return NP(t);if(WE(t))return DP(t)}throw YE(t)}function kP(t){return new bn(function(e){var n=t[_g]();if(rt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OP(t){return new bn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function AP(t){return new bn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,zE)})}function NP(t){return new bn(function(e){var n,s;try{for(var r=Aa(t),o=r.next();!o.done;o=r.next()){var l=o.value;if(e.next(l),e.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}e.complete()})}function ZE(t){return new bn(function(e){IP(t,e).catch(function(n){return e.error(n)})})}function DP(t){return ZE(QE(t))}function IP(t,e){var n,s,r,o;return rP(this,void 0,void 0,function(){var l,u;return FE(this,function(h){switch(h.label){case 0:h.trys.push([0,5,6,11]),n=oP(t),h.label=1;case 1:return[4,n.next()];case 2:if(s=h.sent(),!!s.done)return[3,4];if(l=s.value,e.next(l),e.closed)return[2];h.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=h.sent(),r={error:u},[3,11];case 6:return h.trys.push([6,,9,10]),s&&!s.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:h.sent(),h.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Vi(t,e,n,s,r){s===void 0&&(s=0),r===void 0&&(r=!1);var o=e.schedule(function(){n(),r?t.add(this.schedule(null,s)):this.unsubscribe()},s);if(t.add(o),!r)return o}function ex(t,e){return e===void 0&&(e=0),Ps(function(n,s){n.subscribe(oi(s,function(r){return Vi(s,t,function(){return s.next(r)},e)},function(){return Vi(s,t,function(){return s.complete()},e)},function(r){return Vi(s,t,function(){return s.error(r)},e)}))})}function tx(t,e){return e===void 0&&(e=0),Ps(function(n,s){s.add(t.schedule(function(){return n.subscribe(s)},e))})}function PP(t,e){return ui(t).pipe(tx(e),ex(e))}function LP(t,e){return ui(t).pipe(tx(e),ex(e))}function jP(t,e){return new bn(function(n){var s=0;return e.schedule(function(){s===t.length?n.complete():(n.next(t[s++]),n.closed||this.schedule())})})}function MP(t,e){return new bn(function(n){var s;return Vi(n,e,function(){s=t[JE](),Vi(n,e,function(){var r,o,l;try{r=s.next(),o=r.value,l=r.done}catch(u){n.error(u);return}l?n.complete():n.next(o)},0,!0)}),function(){return rt(s?.return)&&s.return()}})}function nx(t,e){if(!t)throw new Error("Iterable cannot be null");return new bn(function(n){Vi(n,e,function(){var s=t[Symbol.asyncIterator]();Vi(n,e,function(){s.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function UP(t,e){return nx(QE(t),e)}function BP(t,e){if(t!=null){if(GE(t))return PP(t,e);if(Ag(t))return jP(t,e);if(qE(t))return LP(t,e);if(KE(t))return nx(t,e);if(XE(t))return MP(t,e);if(WE(t))return UP(t,e)}throw YE(t)}function Or(t,e){return e?BP(t,e):ui(t)}function lc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jc(t);return Or(t,n)}function fn(t,e){return Ps(function(n,s){var r=0;n.subscribe(oi(s,function(o){s.next(t.call(e,o,r++))}))})}var FP=Array.isArray;function VP(t,e){return FP(e)?t.apply(void 0,Na([],wr(e))):t(e)}function sx(t){return fn(function(e){return VP(t,e)})}var $P=Array.isArray,HP=Object.getPrototypeOf,zP=Object.prototype,qP=Object.keys;function GP(t){if(t.length===1){var e=t[0];if($P(e))return{args:e,keys:null};if(KP(e)){var n=qP(e);return{args:n.map(function(s){return e[s]}),keys:n}}}return{args:t,keys:null}}function KP(t){return t&&typeof t=="object"&&HP(t)===zP}function YP(t,e){return t.reduce(function(n,s,r){return n[s]=e[r],n},{})}function Er(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jc(t),s=xP(t),r=GP(t),o=r.args,l=r.keys;if(o.length===0)return Or([],n);var u=new bn(JP(o,n,l?function(h){return YP(l,h)}:Lc));return s?u.pipe(sx(s)):u}function JP(t,e,n){return n===void 0&&(n=Lc),function(s){mT(e,function(){for(var r=t.length,o=new Array(r),l=r,u=r,h=function(m){mT(e,function(){var b=Or(t[m],e),g=!1;b.subscribe(oi(s,function(v){o[m]=v,g||(g=!0,u--),u||s.next(n(o.slice()))},function(){--l||s.complete()}))},s)},d=0;d<r;d++)h(d)},s)}}function mT(t,e,n){t?Vi(n,t,e):e()}function XP(t,e,n,s,r,o,l,u){var h=[],d=0,m=0,b=!1,g=function(){b&&!h.length&&!d&&e.complete()},v=function(T){return d<s?S(T):h.push(T)},S=function(T){d++;var w=!1;ui(n(T,m++)).subscribe(oi(e,function(R){e.next(R)},function(){w=!0},void 0,function(){if(w)try{d--;for(var R=function(){var O=h.shift();l||S(O)};h.length&&d<s;)R();g()}catch(O){e.error(O)}}))};return t.subscribe(oi(e,v,function(){b=!0,g()})),function(){}}function yc(t,e,n){return n===void 0&&(n=1/0),rt(e)?yc(function(s,r){return fn(function(o,l){return e(s,o,r,l)})(ui(t(s,r)))},n):(typeof e=="number"&&(n=e),Ps(function(s,r){return XP(s,r,t,n)}))}function ix(t){return t===void 0&&(t=1/0),yc(Lc,t)}function QP(){return ix(1)}function gT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return QP()(Or(t,jc(t)))}var WP=["addListener","removeListener"],ZP=["addEventListener","removeEventListener"],eL=["on","off"];function Pm(t,e,n,s){if(rt(n)&&(s=n,n=void 0),s)return Pm(t,e,n).pipe(sx(s));var r=wr(sL(t)?ZP.map(function(u){return function(h){return t[u](e,h,n)}}):tL(t)?WP.map(yT(t,e)):nL(t)?eL.map(yT(t,e)):[],2),o=r[0],l=r[1];if(!o&&Ag(t))return yc(function(u){return Pm(u,e,n)})(ui(t));if(!o)throw new TypeError("Invalid event target");return new bn(function(u){var h=function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];return u.next(1<d.length?d:d[0])};return o(h),function(){return l(h)}})}function yT(t,e){return function(n){return function(s){return t[n](e,s)}}}function tL(t){return rt(t.addListener)&&rt(t.removeListener)}function nL(t){return rt(t.on)&&rt(t.off)}function sL(t){return rt(t.addEventListener)&&rt(t.removeEventListener)}function iL(t,e,n){return new bn(function(s){var r=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return s.next(l.length===1?l[0]:l)},o=t(r);return rt(e)?function(){return e(r,o)}:void 0})}function Ng(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jc(t),s=RP(t,1/0),r=t;return r.length?r.length===1?ui(r[0]):ix(s)(Or(r,n)):wP}function Ff(t,e){return rt(e)?yc(t,e,1):yc(t,1)}function rL(t,e){return e===void 0&&(e=CP),Ps(function(n,s){var r=null,o=null,l=null,u=function(){if(r){r.unsubscribe(),r=null;var d=o;o=null,s.next(d)}};function h(){var d=l+t,m=e.now();if(m<d){r=this.schedule(void 0,d-m),s.add(r);return}u()}n.subscribe(oi(s,function(d){o=d,l=e.now(),r||(r=e.schedule(h,t),s.add(r))},function(){u(),s.complete()},void 0,function(){o=r=null}))})}function yn(t,e){return e===void 0&&(e=Lc),t=t??aL,Ps(function(n,s){var r,o=!0;n.subscribe(oi(s,function(l){var u=e(l);(o||!t(r,u))&&(o=!1,r=u,s.next(l))}))})}function aL(t,e){return t===e}function uu(t,e){return yn(function(n,s){return n[t]===s[t]})}function oL(){return Ps(function(t,e){var n,s=!1;t.subscribe(oi(e,function(r){var o=n;n=r,s&&e.next([o,r]),s=!0}))})}function cL(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Bf}:e,s=t.resetOnError,r=s===void 0?!0:s,o=t.resetOnComplete,l=o===void 0?!0:o,u=t.resetOnRefCountZero,h=u===void 0?!0:u;return function(d){var m,b,g,v=0,S=!1,T=!1,w=function(){b?.unsubscribe(),b=void 0},R=function(){w(),m=g=void 0,S=T=!1},O=function(){var k=m;R(),k?.unsubscribe()};return Ps(function(k,D){v++,!T&&!S&&w();var P=g=g??n();D.add(function(){v--,v===0&&!T&&!S&&(b=Up(O,h))}),P.subscribe(D),!m&&v>0&&(m=new gc({next:function(H){return P.next(H)},error:function(H){T=!0,w(),b=Up(R,r,H),P.error(H)},complete:function(){S=!0,w(),b=Up(R,l),P.complete()}}),ui(k).subscribe(m))})(d)}}function Up(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(e===!0){t();return}if(e!==!1){var r=new gc({next:function(){r.unsubscribe(),t()}});return ui(e.apply(void 0,Na([],wr(n)))).subscribe(r)}}function tn(t,e,n){var s,r,o,l,u=!1;return t&&typeof t=="object"?(s=t.bufferSize,l=s===void 0?1/0:s,r=t.windowTime,e=r===void 0?1/0:r,o=t.refCount,u=o===void 0?!1:o,n=t.scheduler):l=t??1/0,cL({connector:function(){return new Im(l,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function Vf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jc(t);return Ps(function(s,r){(n?gT(t,s,n):gT(t,s)).subscribe(r)})}function Lm(t,e){return e===void 0&&(e=!1),Ps(function(n,s){var r=0;n.subscribe(oi(s,function(o){var l=t(o,r++);(l||e)&&s.next(o),!l&&s.complete()}))})}var sc={exports:{}},lL=sc.exports,bT;function uL(){return bT||(bT=1,function(t,e){(function(n,s){var r="1.0.40",o="",l="?",u="function",h="undefined",d="object",m="string",b="major",g="model",v="name",S="type",T="vendor",w="version",R="architecture",O="console",k="mobile",D="tablet",P="smarttv",H="wearable",G="embedded",X=500,ie="Amazon",ee="Apple",le="ASUS",re="BlackBerry",oe="Browser",te="Chrome",Y="Edge",L="Firefox",q="Google",F="Huawei",ne="LG",A="Microsoft",$="Motorola",K="Opera",se="Samsung",ue="Sharp",xe="Sony",fe="Xiaomi",Ke="Zebra",Ve="Facebook",Lt="Chromium OS",rn="Mac OS",ke=" Browser",Ue=function(he,pe){var ye={};for(var Ne in he)pe[Ne]&&pe[Ne].length%2===0?ye[Ne]=pe[Ne].concat(he[Ne]):ye[Ne]=he[Ne];return ye},Re=function(he){for(var pe={},ye=0;ye<he.length;ye++)pe[he[ye].toUpperCase()]=he[ye];return pe},Oe=function(he,pe){return typeof he===m?tt(pe).indexOf(tt(he))!==-1:!1},tt=function(he){return he.toLowerCase()},ht=function(he){return typeof he===m?he.replace(/[^\d\.]/g,o).split(".")[0]:s},et=function(he,pe){if(typeof he===m)return he=he.replace(/^\s\s*/,o),typeof pe===h?he:he.substring(0,X)},vt=function(he,pe){for(var ye=0,Ne,Xt,pt,Me,Se,Ht;ye<pe.length&&!Se;){var Sn=pe[ye],qn=pe[ye+1];for(Ne=Xt=0;Ne<Sn.length&&!Se&&Sn[Ne];)if(Se=Sn[Ne++].exec(he),Se)for(pt=0;pt<qn.length;pt++)Ht=Se[++Xt],Me=qn[pt],typeof Me===d&&Me.length>0?Me.length===2?typeof Me[1]==u?this[Me[0]]=Me[1].call(this,Ht):this[Me[0]]=Me[1]:Me.length===3?typeof Me[1]===u&&!(Me[1].exec&&Me[1].test)?this[Me[0]]=Ht?Me[1].call(this,Ht,Me[2]):s:this[Me[0]]=Ht?Ht.replace(Me[1],Me[2]):s:Me.length===4&&(this[Me[0]]=Ht?Me[3].call(this,Ht.replace(Me[1],Me[2])):s):this[Me]=Ht||s;ye+=2}},ze=function(he,pe){for(var ye in pe)if(typeof pe[ye]===d&&pe[ye].length>0){for(var Ne=0;Ne<pe[ye].length;Ne++)if(Oe(pe[ye][Ne],he))return ye===l?s:ye}else if(Oe(pe[ye],he))return ye===l?s:ye;return pe.hasOwnProperty("*")?pe["*"]:he},nt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},jt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ve={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,w],[/opios[\/ ]+([\w\.]+)/i],[w,[v,K+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[w,[v,K+" GX"]],[/\bopr\/([\w\.]+)/i],[w,[v,K]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[w,[v,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[w,[v,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,w],[/quark(?:pc)?\/([-\w\.]+)/i],[w,[v,"Quark"]],[/\bddg\/([\w\.]+)/i],[w,[v,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[v,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[w,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[w,[v,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+oe],w],[/\bfocus\/([\w\.]+)/i],[w,[v,L+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[v,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[v,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[v,"MIUI"+ke]],[/fxios\/([\w\.-]+)/i],[w,[v,L]],[/\bqihoobrowser\/?([\w\.]*)/i],[w,[v,"360"]],[/\b(qq)\/([\w\.]+)/i],[[v,/(.+)/,"$1Browser"],w],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1"+ke],w],[/samsungbrowser\/([\w\.]+)/i],[w,[v,se+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[w,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[v,w],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[v],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[w,v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,Ve],w],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[v,te+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,te+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[v,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[w,ze,nt]],[/(webkit|khtml)\/([\w\.]+)/i],[v,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],w],[/(wolvic|librewolf)\/([\w\.]+)/i],[v,w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[v,L+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[v,[w,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[v,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,tt]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows (ce|mobile); ppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[R,/ower/,o,tt]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[T,se],[S,D]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[g,[T,se],[S,k]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[T,ee],[S,k]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[T,ee],[S,D]],[/(macintosh);/i],[g,[T,ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[T,ue],[S,k]],[/(?:honor)([-\w ]+)[;\)]/i],[g,[T,"Honor"],[S,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[T,F],[S,D]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[T,F],[S,k]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[g,/_/g," "],[T,fe],[S,k]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[T,fe],[S,D]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[T,"OPPO"],[S,k]],[/\b(opd2\d{3}a?) bui/i],[g,[T,"OPPO"],[S,D]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[T,"Vivo"],[S,k]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[T,"Realme"],[S,k]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[T,$],[S,k]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[T,$],[S,D]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[T,ne],[S,D]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[T,ne],[S,k]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[T,"Lenovo"],[S,D]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[T,"Nokia"],[S,k]],[/(pixel c)\b/i],[g,[T,q],[S,D]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[T,q],[S,k]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[T,xe],[S,k]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[T,xe],[S,D]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[T,"OnePlus"],[S,k]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[T,ie],[S,D]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[T,ie],[S,k]],[/(playbook);[-\w\),; ]+(rim)/i],[g,T,[S,D]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[T,re],[S,k]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[T,le],[S,D]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[T,le],[S,k]],[/(nexus 9)/i],[g,[T,"HTC"],[S,D]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[g,/_/g," "],[S,k]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[g,[T,"TCL"],[S,D]],[/(itel) ((\w+))/i],[[T,tt],g,[S,ze,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[T,"Acer"],[S,D]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[T,"Meizu"],[S,k]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[T,"Ulefone"],[S,k]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[g,[T,"Energizer"],[S,k]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[g,[T,"Cat"],[S,k]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[g,[T,"Smartfren"],[S,k]],[/droid.+; (a(?:015|06[35]|142p?))/i],[g,[T,"Nothing"],[S,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,g,[S,k]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,g,[S,D]],[/(surface duo)/i],[g,[T,A],[S,D]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[T,"Fairphone"],[S,k]],[/(u304aa)/i],[g,[T,"AT&T"],[S,k]],[/\bsie-(\w*)/i],[g,[T,"Siemens"],[S,k]],[/\b(rct\w+) b/i],[g,[T,"RCA"],[S,D]],[/\b(venue[\d ]{2,7}) b/i],[g,[T,"Dell"],[S,D]],[/\b(q(?:mv|ta)\w+) b/i],[g,[T,"Verizon"],[S,D]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[T,"Barnes & Noble"],[S,D]],[/\b(tm\d{3}\w+) b/i],[g,[T,"NuVision"],[S,D]],[/\b(k88) b/i],[g,[T,"ZTE"],[S,D]],[/\b(nx\d{3}j) b/i],[g,[T,"ZTE"],[S,k]],[/\b(gen\d{3}) b.+49h/i],[g,[T,"Swiss"],[S,k]],[/\b(zur\d{3}) b/i],[g,[T,"Swiss"],[S,D]],[/\b((zeki)?tb.*\b) b/i],[g,[T,"Zeki"],[S,D]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],g,[S,D]],[/\b(ns-?\w{0,9}) b/i],[g,[T,"Insignia"],[S,D]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[T,"NextBook"],[S,D]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],g,[S,k]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],g,[S,k]],[/\b(ph-1) /i],[g,[T,"Essential"],[S,k]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[T,"Envizen"],[S,D]],[/\b(trio[-\w\. ]+) b/i],[g,[T,"MachSpeed"],[S,D]],[/\btu_(1491) b/i],[g,[T,"Rotor"],[S,D]],[/(shield[\w ]+) b/i],[g,[T,"Nvidia"],[S,D]],[/(sprint) (\w+)/i],[T,g,[S,k]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[T,A],[S,k]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[T,Ke],[S,D]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[T,Ke],[S,k]],[/smart-tv.+(samsung)/i],[T,[S,P]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[T,se],[S,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,ne],[S,P]],[/(apple) ?tv/i],[T,[g,ee+" TV"],[S,P]],[/crkey/i],[[g,te+"cast"],[T,q],[S,P]],[/droid.+aft(\w+)( bui|\))/i],[g,[T,ie],[S,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[T,ue],[S,P]],[/(bravia[\w ]+)( bui|\))/i],[g,[T,xe],[S,P]],[/(mitv-\w{5}) bui/i],[g,[T,fe],[S,P]],[/Hbbtv.*(technisat) (.*);/i],[T,g,[S,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,et],[g,et],[S,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,P]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,g,[S,O]],[/droid.+; (shield) bui/i],[g,[T,"Nvidia"],[S,O]],[/(playstation [345portablevi]+)/i],[g,[T,xe],[S,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[T,A],[S,O]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[g,[T,se],[S,H]],[/((pebble))app/i],[T,g,[S,H]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[T,ee],[S,H]],[/droid.+; (glass) \d/i],[g,[T,q],[S,H]],[/droid.+; (wt63?0{2,3})\)/i],[g,[T,Ke],[S,H]],[/droid.+; (glass) \d/i],[g,[T,q],[S,H]],[/(pico) (4|neo3(?: link|pro)?)/i],[T,g,[S,H]],[/; (quest( \d| pro)?)/i],[g,[T,Ve],[S,H]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[S,G]],[/(aeobc)\b/i],[g,[T,ie],[S,G]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[g,[S,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[S,D]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,D]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,k]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[v,Y+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[v,w],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,w],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[w,ze,jt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,ze,jt],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,rn],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,w],[/\(bb(10);/i],[w,[v,re]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[v,L+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[v,te+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,Lt],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,w],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,w]]},Ie=function(he,pe){if(typeof he===d&&(pe=he,he=s),!(this instanceof Ie))return new Ie(he,pe).getResult();var ye=typeof n!==h&&n.navigator?n.navigator:s,Ne=he||(ye&&ye.userAgent?ye.userAgent:o),Xt=ye&&ye.userAgentData?ye.userAgentData:s,pt=pe?Ue(ve,pe):ve,Me=ye&&ye.userAgent==Ne;return this.getBrowser=function(){var Se={};return Se[v]=s,Se[w]=s,vt.call(Se,Ne,pt.browser),Se[b]=ht(Se[w]),Me&&ye&&ye.brave&&typeof ye.brave.isBrave==u&&(Se[v]="Brave"),Se},this.getCPU=function(){var Se={};return Se[R]=s,vt.call(Se,Ne,pt.cpu),Se},this.getDevice=function(){var Se={};return Se[T]=s,Se[g]=s,Se[S]=s,vt.call(Se,Ne,pt.device),Me&&!Se[S]&&Xt&&Xt.mobile&&(Se[S]=k),Me&&Se[g]=="Macintosh"&&ye&&typeof ye.standalone!==h&&ye.maxTouchPoints&&ye.maxTouchPoints>2&&(Se[g]="iPad",Se[S]=D),Se},this.getEngine=function(){var Se={};return Se[v]=s,Se[w]=s,vt.call(Se,Ne,pt.engine),Se},this.getOS=function(){var Se={};return Se[v]=s,Se[w]=s,vt.call(Se,Ne,pt.os),Me&&!Se[v]&&Xt&&Xt.platform&&Xt.platform!="Unknown"&&(Se[v]=Xt.platform.replace(/chrome os/i,Lt).replace(/macos/i,rn)),Se},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ne},this.setUA=function(Se){return Ne=typeof Se===m&&Se.length>X?et(Se,X):Se,this},this.setUA(Ne),this};Ie.VERSION=r,Ie.BROWSER=Re([v,w,b]),Ie.CPU=Re([R]),Ie.DEVICE=Re([g,T,S,O,k,P,D,H,G]),Ie.ENGINE=Ie.OS=Re([v,w]),t.exports&&(e=t.exports=Ie),e.UAParser=Ie;var ge=typeof n!==h&&(n.jQuery||n.Zepto);if(ge&&!ge.ua){var Xe=new Ie;ge.ua=Xe.getResult(),ge.ua.get=function(){return Xe.getUA()},ge.ua.set=function(he){Xe.setUA(he);var pe=Xe.getResult();for(var ye in pe)ge.ua[ye]=pe[ye]}}})(typeof window=="object"?window:lL)}(sc,sc.exports)),sc.exports}var fL=uL(),os={},Bp={},Fp={exports:{}},vT;function Dg(){if(vT)return Fp.exports;vT=1;var t=Fp.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(s){s.reg||(s.reg=/(.*)/),s.format||(s.format="%s")})}),Fp.exports}var ST;function dL(){return ST||(ST=1,function(t){var e=function(u){return String(Number(u))===u?Number(u):u},n=function(u,h,d,m){if(m&&!d)h[m]=e(u[1]);else for(var b=0;b<d.length;b+=1)u[b+1]!=null&&(h[d[b]]=e(u[b+1]))},s=function(u,h,d){var m=u.name&&u.names;u.push&&!h[u.push]?h[u.push]=[]:m&&!h[u.name]&&(h[u.name]={});var b=u.push?{}:m?h[u.name]:h;n(d.match(u.reg),b,u.names,u.name),u.push&&h[u.push].push(b)},r=Dg(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(u){var h={},d=[],m=h;return u.split(/(\r\n|\r|\n)/).filter(o).forEach(function(b){var g=b[0],v=b.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),m=d[d.length-1]);for(var S=0;S<(r[g]||[]).length;S+=1){var T=r[g][S];if(T.reg.test(v))return s(T,m,v)}}),h.media=d,h};var l=function(u,h){var d=h.split(/=(.+)/,2);return d.length===2?u[d[0]]=e(d[1]):d.length===1&&h.length>1&&(u[d[0]]=void 0),u};t.parseParams=function(u){return u.split(/;\s?/).reduce(l,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(u){return u.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(u){for(var h=[],d=u.split(" ").map(e),m=0;m<d.length;m+=3)h.push({component:d[m],ip:d[m+1],port:d[m+2]});return h},t.parseImageAttributes=function(u){return u.split(" ").map(function(h){return h.substring(1,h.length-1).split(",").reduce(l,{})})},t.parseSimulcastStreamList=function(u){return u.split(";").map(function(h){return h.split(",").map(function(d){var m,b=!1;return d[0]!=="~"?m=e(d):(m=e(d.substring(1,d.length)),b=!0),{scid:m,paused:b}})})}}(Bp)),Bp}var Vp,TT;function hL(){if(TT)return Vp;TT=1;var t=Dg(),e=/%[sdv%]/g,n=function(l){var u=1,h=arguments,d=h.length;return l.replace(e,function(m){if(u>=d)return m;var b=h[u];switch(u+=1,m){case"%%":return"%";case"%s":return String(b);case"%d":return Number(b);case"%v":return""}})},s=function(l,u,h){var d=u.format instanceof Function?u.format(u.push?h:h[u.name]):u.format,m=[l+"="+d];if(u.names)for(var b=0;b<u.names.length;b+=1){var g=u.names[b];u.name?m.push(h[u.name][g]):m.push(h[u.names[b]])}else m.push(h[u.name]);return n.apply(null,m)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Vp=function(l,u){u=u||{},l.version==null&&(l.version=0),l.name==null&&(l.name=" "),l.media.forEach(function(b){b.payloads==null&&(b.payloads="")});var h=u.outerOrder||r,d=u.innerOrder||o,m=[];return h.forEach(function(b){t[b].forEach(function(g){g.name in l&&l[g.name]!=null?m.push(s(b,g,l)):g.push in l&&l[g.push]!=null&&l[g.push].forEach(function(v){m.push(s(b,g,v))})})}),l.media.forEach(function(b){m.push(s("m",t.m[0],b)),d.forEach(function(g){t[g].forEach(function(v){v.name in b&&b[v.name]!=null?m.push(s(g,v,b)):v.push in b&&b[v.push]!=null&&b[v.push].forEach(function(S){m.push(s(g,v,S))})})})}),m.join(`\r
`)+`\r
`},Vp}var CT;function pL(){if(CT)return os;CT=1;var t=dL(),e=hL(),n=Dg();return os.grammar=n,os.write=e,os.parse=t.parse,os.parseParams=t.parseParams,os.parseFmtpConfig=t.parseFmtpConfig,os.parsePayloads=t.parsePayloads,os.parseRemoteCandidates=t.parseRemoteCandidates,os.parseImageAttributes=t.parseImageAttributes,os.parseSimulcastStreamList=t.parseSimulcastStreamList,os}var Uu=pL();const $p={AVAILABLE:"available",DISABLED:"disabled",AUTO_ON:"auto-on"},we={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_CLOSED_CAPTIONS_CALL:"start-closed-captions-call",START_FRAME_RECORD_CALL:"start-frame-record-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_CLOSED_CAPTIONS_CALL:"stop-closed-captions-call",STOP_FRAME_RECORD_CALL:"stop-frame-record-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};class rx extends Error{constructor({message:e,code:n,status:s,response:r,unrecoverable:o}){super(e),this.name="ErrorFromResponse",this.code=n,this.response=r,this.status=s,this.unrecoverable=o}toJSON(){const e=[["status",this.status],["code",this.code],["unrecoverable",this.unrecoverable]],n=[];for(const[s,r]of e)typeof r<"u"&&r!==null&&n.push(`${s}: ${r}`);return{message:`(${n.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}}var tf;(function(t){t[t.NULL_VALUE=0]="NULL_VALUE"})(tf||(tf={}));class mL extends ce{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>Ra}}])}internalJsonWrite(e,n){let s={};for(let[r,o]of Object.entries(e.fields))s[r]=Ra.toJson(o);return s}internalJsonRead(e,n,s){if(!Yu(e))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+za(e)+".");s||(s=this.create());for(let[r,o]of globalThis.Object.entries(e))s.fields[r]=Ra.fromJson(o);return s}}const nf=new mL;class gL extends ce{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",tf]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>nf},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>wT}])}internalJsonWrite(e,n){if(e.kind.oneofKind===void 0)throw new globalThis.Error;switch(e.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return e.kind.boolValue;case"nullValue":return null;case"numberValue":let s=e.kind.numberValue;if(typeof s=="number"&&!Number.isFinite(s))throw new globalThis.Error;return s;case"stringValue":return e.kind.stringValue;case"listValue":let r=this.fields.find(l=>l.no===6);if(r?.kind!=="message")throw new globalThis.Error;return r.T().toJson(e.kind.listValue);case"structValue":let o=this.fields.find(l=>l.no===5);if(o?.kind!=="message")throw new globalThis.Error;return o.T().toJson(e.kind.structValue)}}internalJsonRead(e,n,s){switch(s||(s=this.create()),typeof e){case"number":s.kind={oneofKind:"numberValue",numberValue:e};break;case"string":s.kind={oneofKind:"stringValue",stringValue:e};break;case"boolean":s.kind={oneofKind:"boolValue",boolValue:e};break;case"object":e===null?s.kind={oneofKind:"nullValue",nullValue:tf.NULL_VALUE}:globalThis.Array.isArray(e)?s.kind={oneofKind:"listValue",listValue:wT.fromJson(e)}:s.kind={oneofKind:"structValue",structValue:nf.fromJson(e)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+za(e))}return s}}const Ra=new gL;class yL extends ce{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:2,T:()=>Ra}])}internalJsonWrite(e,n){return e.values.map(s=>Ra.toJson(s))}internalJsonRead(e,n,s){if(!globalThis.Array.isArray(e))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+za(e));s||(s=this.create());let r=e.map(o=>Ra.fromJson(o));return s.values.push(...r),s}}const wT=new yL;class bL extends ce{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),n=Date.now();return e.seconds=dt.from(Math.floor(n/1e3)).toString(),e.nanos=n%1e3*1e6,e}toDate(e){return new Date(dt.from(e.seconds).toNumber()*1e3+Math.ceil(e.nanos/1e6))}fromDate(e){const n=this.create(),s=e.getTime();return n.seconds=dt.from(Math.floor(s/1e3)).toString(),n.nanos=(s%1e3+(s<0&&s%1e3!==0?1e3:0))*1e6,n}internalJsonWrite(e,n){let s=dt.from(e.seconds).toNumber()*1e3;if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let r="Z";if(e.nanos>0){let o=(e.nanos+1e9).toString().substring(1);o.substring(3)==="000000"?r="."+o.substring(0,3)+"Z":o.substring(6)==="000"?r="."+o.substring(0,6)+"Z":r="."+o+"Z"}return new Date(s).toISOString().replace(".000Z",r)}internalJsonRead(e,n,s){if(typeof e!="string")throw new Error("Unable to parse Timestamp from JSON "+za(e)+".");let r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let o=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(o))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(o<Date.parse("0001-01-01T00:00:00Z")||o>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return s||(s=this.create()),s.seconds=dt.from(o/1e3).toString(),s.nanos=0,r[7]&&(s.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),s}}const bc=new bL;var Ft;(function(t){t[t.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Ft||(Ft={}));var vc;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.POOR=1]="POOR",t[t.GOOD=2]="GOOD",t[t.EXCELLENT=3]="EXCELLENT"})(vc||(vc={}));var $i;(function(t){t[t.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",t[t.MID=1]="MID",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})($i||($i={}));var ae;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.AUDIO=1]="AUDIO",t[t.VIDEO=2]="VIDEO",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(ae||(ae={}));var xr;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",t[t.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",t[t.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",t[t.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",t[t.LIVE_ENDED=104]="LIVE_ENDED",t[t.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",t[t.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",t[t.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",t[t.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",t[t.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",t[t.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",t[t.PARTICIPANT_SIGNAL_LOST=206]="PARTICIPANT_SIGNAL_LOST",t[t.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",t[t.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",t[t.UNAUTHENTICATED=401]="UNAUTHENTICATED",t[t.PERMISSION_DENIED=403]="PERMISSION_DENIED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",t[t.SFU_FULL=700]="SFU_FULL"})(xr||(xr={}));var qi;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.REACT=1]="REACT",t[t.ANGULAR=2]="ANGULAR",t[t.ANDROID=3]="ANDROID",t[t.IOS=4]="IOS",t[t.FLUTTER=5]="FLUTTER",t[t.REACT_NATIVE=6]="REACT_NATIVE",t[t.UNITY=7]="UNITY",t[t.GO=8]="GO",t[t.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"})(qi||(qi={}));var Sc;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.USER_MUTED=1]="USER_MUTED",t[t.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",t[t.MODERATION=3]="MODERATION"})(Sc||(Sc={}));var sf;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SHUTTING_DOWN=1]="SHUTTING_DOWN",t[t.REBALANCE=2]="REBALANCE"})(sf||(sf={}));var Da;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ENDED=1]="ENDED",t[t.LIVE_ENDED=2]="LIVE_ENDED",t[t.KICKED=3]="KICKED",t[t.SESSION_ENDED=4]="SESSION_ENDED"})(Da||(Da={}));var De;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.DISCONNECT=1]="DISCONNECT",t[t.FAST=2]="FAST",t[t.REJOIN=3]="REJOIN",t[t.MIGRATE=4]="MIGRATE"})(De||(De={}));var rf;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.NONE=1]="NONE",t[t.LIGHT=2]="LIGHT",t[t.MODERATE=3]="MODERATE",t[t.SEVERE=4]="SEVERE",t[t.CRITICAL=5]="CRITICAL",t[t.EMERGENCY=6]="EMERGENCY",t[t.SHUTDOWN=7]="SHUTDOWN"})(rf||(rf={}));var af;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.NOMINAL=1]="NOMINAL",t[t.FAIR=2]="FAIR",t[t.SERIOUS=3]="SERIOUS",t[t.CRITICAL=4]="CRITICAL"})(af||(af={}));class vL extends ce{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:2,T:()=>Ar},{no:2,name:"started_at",kind:"message",T:()=>bc},{no:3,name:"participant_count",kind:"message",T:()=>Ig},{no:4,name:"pins",kind:"message",repeat:2,T:()=>Pg}])}}const ax=new vL;class SL extends ce{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}}const Ig=new SL;class TL extends ce{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const Pg=new TL;class CL extends ce{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>bc},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",vc,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>nf},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}}const Ar=new CL;class wL extends ce{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",$i,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}}const EL=new wL;class xL extends ce{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}}const Mc=new xL;class RL extends ce{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>Mc},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",$i,"VIDEO_QUALITY_"]}])}}const ox=new RL;class _L extends ce{constructor(){super("stream.video.sfu.models.SubscribeOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:2,name:"codecs",kind:"message",repeat:2,T:()=>Ls}])}}const Lg=new _L;class kL extends ce{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Ls},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5},{no:7,name:"video_dimension",kind:"message",T:()=>Mc},{no:8,name:"id",kind:"scalar",T:5},{no:9,name:"use_single_layer",kind:"scalar",T:8}])}}const Ia=new kL;class OL extends ce{constructor(){super("stream.video.sfu.models.Codec",[{no:16,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:15,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}}const Ls=new OL;let AL=class extends ce{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ft,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const jg=new AL;class NL extends ce{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:2,T:()=>ox},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8},{no:11,name:"codec",kind:"message",T:()=>Ls},{no:12,name:"publish_option_id",kind:"scalar",T:5}])}}const $f=new NL;let DL=class extends ce{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",xr,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const vs=new DL;class IL extends ce{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>lx},{no:2,name:"os",kind:"message",T:()=>ux},{no:3,name:"browser",kind:"message",T:()=>fx},{no:4,name:"device",kind:"message",T:()=>hx}])}}const cx=new IL;class PL extends ce{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",qi,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}}const lx=new PL;class LL extends ce{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}}const ux=new LL;class jL extends ce{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const fx=new jL;class ML extends ce{constructor(){super("stream.video.sfu.models.RTMPIngress",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13},{no:3,name:"frame_rate",kind:"scalar",T:1},{no:4,name:"software",kind:"scalar",T:9},{no:5,name:"version",kind:"scalar",T:9},{no:6,name:"encoder",kind:"scalar",T:9},{no:7,name:"remote_addr",kind:"scalar",T:9}])}}const dx=new ML;class UL extends ce{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const hx=new UL;class BL extends ce{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>nf},{no:6,name:"created_at",kind:"message",T:()=>bc},{no:7,name:"updated_at",kind:"message",T:()=>bc}])}}const FL=new BL;class VL extends ce{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}}const px=new VL;class $L extends ce{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}}const jm=new $L;class HL extends ce{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",rf,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}}const mx=new HL;class zL extends ce{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",af,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}}const gx=new zL;class qL extends ce{constructor(){super("stream.video.sfu.models.PerformanceStats",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Ls},{no:3,name:"avg_frame_time_ms",kind:"scalar",T:2},{no:4,name:"avg_fps",kind:"scalar",T:2},{no:5,name:"video_dimension",kind:"message",T:()=>Mc},{no:6,name:"target_bitrate",kind:"scalar",T:5}])}}const of=new qL;var Mm=Object.freeze({__proto__:null,AndroidState:mx,get AndroidThermalState(){return rf},AppleState:gx,get AppleThermalState(){return af},Browser:fx,Call:FL,get CallEndedReason(){return Da},CallGrants:px,CallState:ax,ClientDetails:cx,Codec:Ls,get ConnectionQuality(){return vc},Device:hx,Error:vs,get ErrorCode(){return xr},get GoAwayReason(){return sf},ICETrickle:jg,InputDevices:jm,OS:ux,Participant:Ar,ParticipantCount:Ig,get PeerType(){return Ft},PerformanceStats:of,Pin:Pg,PublishOption:Ia,RTMPIngress:dx,Sdk:lx,get SdkType(){return qi},StreamQuality:EL,SubscribeOption:Lg,TrackInfo:$f,get TrackType(){return ae},get TrackUnpublishReason(){return Sc},VideoDimension:Mc,VideoLayer:ox,get VideoQuality(){return $i},get WebsocketReconnectStrategy(){return De}});class GL extends ce{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const KL=new GL;class YL extends ce{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>vs}])}}const JL=new YL;class XL extends ce{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const QL=new XL;class WL extends ce{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>vs}])}}const ZL=new WL;class ej extends ce{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",De,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}}const tj=new ej;class nj extends ce{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>tj}])}}const sj=new nj;class ij extends ce{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>jm},{no:8,name:"video_devices",kind:"message",T:()=>jm},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>mx},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>gx},{no:11,name:"telemetry",kind:"message",T:()=>sj},{no:12,name:"rtmp",kind:"message",T:()=>dx},{no:13,name:"subscriber_rtc_stats",kind:"scalar",T:9},{no:14,name:"publisher_rtc_stats",kind:"scalar",T:9},{no:15,name:"rtc_stats",kind:"scalar",T:9},{no:16,name:"encode_stats",kind:"message",repeat:2,T:()=>of},{no:17,name:"decode_stats",kind:"message",repeat:2,T:()=>of},{no:18,name:"unified_session_id",kind:"scalar",T:9}])}}const rj=new ij;class aj extends ce{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>vs}])}}const oj=new aj;class cj extends ce{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ft,"PEER_TYPE_"]}])}}const lj=new cj;class uj extends ce{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>vs}])}}const fj=new uj;class dj extends ce{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:2,T:()=>yj}])}}const hj=new dj;class pj extends ce{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>vs}])}}const mj=new pj;class gj extends ce{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}}const yj=new gj;class bj extends ce{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}}new bj;class vj extends ce{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}}new vj;class Sj extends ce{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:2,T:()=>Mg}])}}const Tj=new Sj;class Cj extends ce{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>vs}])}}const wj=new Cj;class Ej extends ce{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>Mc}])}}const Mg=new Ej;class xj extends ce{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ft,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}}const Rj=new xj;class _j extends ce{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>vs}])}}const kj=new _j;class Oj extends ce{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>vs}])}}const Aj=new Oj;class Nj extends ce{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:2,T:()=>$f}])}}const Dj=new Nj;class Ij extends ce{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>vs}])}}const Pj=new Ij,Hp=new QI("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:Dj,O:Pj},{name:"SendAnswer",options:{},I:Rj,O:kj},{name:"IceTrickle",options:{},I:jg,O:Aj},{name:"UpdateSubscriptions",options:{},I:Tj,O:wj},{name:"UpdateMuteStates",options:{},I:hj,O:mj},{name:"IceRestart",options:{},I:lj,O:fj},{name:"SendStats",options:{},I:rj,O:oj},{name:"StartNoiseCancellation",options:{},I:KL,O:JL},{name:"StopNoiseCancellation",options:{},I:QL,O:ZL}]);class Lj extends ce{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>vM},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>TM},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>wM},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>NM},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>jg},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>BM},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>hM},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>mM},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>_M},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>fM},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>eM},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>nM},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>iM},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>zj},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>VM},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>HM},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>Kj},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>$j},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>qM},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>yM},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>Fj},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>Mj}])}}const ET=new Lj;class jj extends ce{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_options",kind:"message",repeat:2,T:()=>Ia},{no:2,name:"reason",kind:"scalar",T:9}])}}const Mj=new jj;class Uj extends ce{constructor(){super("stream.video.sfu.event.ChangePublishOptionsComplete",[])}}new Uj;class Bj extends ce{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}}const Fj=new Bj;class Vj extends ce{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:2,T:()=>Pg}])}}const $j=new Vj;class Hj extends ce{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>vs},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",De,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}}const zj=new Hj;class qj extends ce{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ft,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}}new qj;class Gj extends ce{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",Ft,"PEER_TYPE_"]}])}}const Kj=new Gj;class Yj extends ce{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>yx},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>Wj},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>Xj}])}}const Qo=new Yj;class Jj extends ce{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}}const Xj=new Jj;class Qj extends ce{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}}const Wj=new Qj;class Zj extends ce{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>Ig}])}}const eM=new Zj;class tM extends ce{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>Ar}])}}const nM=new tM;class sM extends ce{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",Sc,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>Ar}])}}const iM=new sM;class rM extends ce{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>cx},{no:5,name:"migration",kind:"message",T:()=>lM},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>oM},{no:9,name:"preferred_publish_options",kind:"message",repeat:2,T:()=>Ia},{no:10,name:"preferred_subscribe_options",kind:"message",repeat:2,T:()=>Lg}])}}const yx=new rM;class aM extends ce{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",De,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:2,T:()=>$f},{no:4,name:"subscriptions",kind:"message",repeat:2,T:()=>Mg},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9},{no:8,name:"reason",kind:"scalar",T:9}])}}const oM=new aM;class cM extends ce{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:2,T:()=>$f},{no:3,name:"subscriptions",kind:"message",repeat:2,T:()=>Mg}])}}const lM=new cM;class uM extends ce{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>ax},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",repeat:2,T:()=>Ia}])}}const fM=new uM;class dM extends ce{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Ar}])}}const hM=new dM;class pM extends ce{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Ar}])}}const mM=new pM;class gM extends ce{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>Ar}])}}const yM=new gM;class bM extends ce{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}}const vM=new bM;class SM extends ce{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}}const TM=new SM;class CM extends ce{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:2,T:()=>xM}])}}const wM=new CM;class EM extends ce{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",vc,"CONNECTION_QUALITY_"]}])}}const xM=new EM;class RM extends ce{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const _M=new RM;class kM extends ce{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}}const OM=new kM;class AM extends ce{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:2,T:()=>OM}])}}const NM=new AM;class DM extends ce{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>Ls},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:4,name:"publish_option_id",kind:"scalar",T:5}])}}const IM=new DM;class PM extends ce{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>Ls},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}}const LM=new PM;class jM extends ce{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>Ls},{no:3,name:"layers",kind:"message",repeat:2,T:()=>LM},{no:4,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",ae,"TRACK_TYPE_"]},{no:5,name:"publish_option_id",kind:"scalar",T:5}])}}const MM=new jM;class UM extends ce{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:2,T:()=>IM},{no:2,name:"video_senders",kind:"message",repeat:2,T:()=>MM}])}}const BM=new UM;class FM extends ce{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>px},{no:2,name:"message",kind:"scalar",T:9}])}}const VM=new FM;class $M extends ce{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",sf,"GO_AWAY_REASON_"]}])}}const HM=new $M;class zM extends ce{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",Da,"CALL_ENDED_REASON_"]}])}}const qM=new zM;var Et;(function(t){t.UNKNOWN="UNKNOWN",t.VISIBLE="VISIBLE",t.INVISIBLE="INVISIBLE"})(Et||(Et={}));var Rs;(function(t){t[t.IMMEDIATE=20]="IMMEDIATE",t[t.FAST=100]="FAST",t[t.MEDIUM=600]="MEDIUM",t[t.SLOW=1200]="SLOW"})(Rs||(Rs={}));class GM{constructor(e){this._transport=e,this.typeName=Hp.typeName,this.methods=Hp.methods,this.options=Hp.options}setPublisher(e,n){const s=this.methods[0],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}sendAnswer(e,n){const s=this.methods[1],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}iceTrickle(e,n){const s=this.methods[2],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}updateSubscriptions(e,n){const s=this.methods[3],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}updateMuteStates(e,n){const s=this.methods[4],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}iceRestart(e,n){const s=this.methods[5],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}sendStats(e,n){const s=this.methods[6],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}startNoiseCancellation(e,n){const s=this.methods[7],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}stopNoiseCancellation(e,n){const s=this.methods[8],r=this._transport.mergeOptions(n);return Zs("unary",this._transport,s,r,e)}}const KM={baseUrl:"",sendJson:!0,timeout:5*1e3,jsonOptions:{ignoreUnknownFields:!0}},YM=t=>({interceptUnary(e,n,s,r){return r.meta={...r.meta,...t},e(n,s,r)}}),JM=(t,e)=>({interceptUnary:(n,s,r,o)=>{const l=n(s,r,o);return t(e,`Invoked SFU RPC method ${s.name}`,{request:l.request,headers:l.requestHeaders,response:l.response}),l}}),XM=t=>{const e=(s,r,o)=>t(`${s}OnFailure`,[o,r]),n={SendStats:!0};return{interceptUnary(s,r,o,l){if(n[r.name])return s(r,o,l);t(r.name,o);const u=s(r,o,l);return u.then(h=>{const d=h.response?.error;d&&e(r.name,o,d)},h=>e(r.name,o,h)),u}}},QM=t=>{const e=new iP({...KM,...t});return new GM(e)},Hi=t=>new Promise(e=>setTimeout(e,t));function Um(t){return t&&(Object.prototype.toString.call(t)==="[object Function]"||typeof t=="function"||t instanceof Function)}const Ta={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function Uc(t){const e=Math.min(500+t*2e3,5e3),n=Math.min(Math.max(250,(t-1)*2e3),5e3);return Math.floor(Math.random()*(e-n)+n)}function Wo(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e}function Bm(){const t=ZM(16);return t[6]=t[6]&15|64,t[8]=t[8]&191|128,[Wo(t.subarray(0,4)),Wo(t.subarray(4,6)),Wo(t.subarray(6,8)),Wo(t.subarray(8,10)),Wo(t.subarray(10,16))].join("-")}const WM=typeof crypto<"u"&&crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){const n=Math.pow(2,8*e.byteLength/e.length);for(let s=0;s<e.length;s++)e[s]=Math.random()*n};function ZM(t){const e=new Uint8Array(t);return WM(e),e}function Fm(t){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",t),window.addEventListener("online",t))}function bx(t){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}function eU(t){return!t.status||t.status<200||300<=t.status}function tU(t){return t.code!==void 0}const Jt=()=>typeof navigator>"u"?!1:navigator.product?.toLowerCase()==="reactnative",xT=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let vx,Ug="info";const Sx=(t,e,...n)=>{let s;switch(t){case"error":if(Jt()){e=`ERROR: ${e}`,s=console.info;break}s=console.error;break;case"warn":if(Jt()){e=`WARN: ${e}`,s=console.info;break}s=console.warn;break;case"info":s=console.info;break;case"trace":s=console.trace;break;default:s=console.log;break}s(e,...n)},nU=(t,e)=>{vx=t,sU(e)},sU=t=>{Ug=t},Vm=()=>Ug,Ze=t=>{const e=vx||Sx,n=(t||[]).filter(Boolean).join(":");return(r,o,...l)=>{xT[r]>=xT[Ug]&&e(r,`[${n}]: ${o}`,...l)}},Pi=async(t,e)=>{let n=0,s;do{n>0&&await Hi(Uc(n));try{s=await t()}catch(r){const o=r instanceof _n&&r.code===yt[yt.cancelled],l=e?.aborted??!1;if(o||l)throw r;Ze(["sfu-client","rpc"])("debug",`rpc failed (${n})`,r),n++}}while(!s||s.response.error?.shouldRetry);return s},RT=async t=>{const e=new RTCPeerConnection;e.addTransceiver("video",{direction:t}),e.addTransceiver("audio",{direction:t});const s=(await e.createOffer()).sdp??"";return e.getTransceivers().forEach(r=>{r.stop?.()}),e.close(),s},$m=t=>t?(t=t.toLowerCase(),t==="vp9"||t==="av1"||t==="video/vp9"||t==="video/av1"):!1,iU={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,changePublishOptions:void 0},_T=t=>Object.prototype.hasOwnProperty.call(iU,t);class rU{constructor(){this.logger=Ze(["Dispatcher"]),this.subscribers={},this.dispatch=(e,n="0")=>{const s=e.eventPayload.oneofKind;if(!s)return;const r=e.eventPayload[s];this.logger("debug",`Dispatching ${s}, tag=${n}`,r);const o=this.subscribers[s];if(o)for(const l of o)try{l(r)}catch(u){this.logger("warn","Listener failed with error",u)}},this.on=(e,n)=>{var s;return((s=this.subscribers)[e]??(s[e]=[])).push(n),()=>{this.off(e,n)}},this.off=(e,n)=>{this.subscribers[e]=(this.subscribers[e]||[]).filter(s=>s!==n)}}}class aU{constructor(){this.subscriberCandidates=new Im,this.publisherCandidates=new Im,this.push=e=>{const n=oU(e);n&&(e.peerType===Ft.SUBSCRIBER?this.subscriberCandidates.next(n):e.peerType===Ft.PUBLISHER_UNSPECIFIED?this.publisherCandidates.next(n):Ze(["sfu-client"])("warn","ICETrickle, Unknown peer type",e))},this.dispose=()=>{this.subscriberCandidates.complete(),this.publisherCandidates.complete()}}}const oU=t=>{try{return JSON.parse(t.iceCandidate)}catch(e){Ze(["sfu-client"])("error","Failed to parse ICE Trickle",e,t);return}},In=Tx(lU),zp=Tx(uU),Pa=new Map;function cU(t){return Pa.has(t)}async function qp(t){let e;for(;e=Pa.get(t);)await e.promise}function Tx(t){return function(n,s){const{cb:r,onContinued:o}=t(n,s),l=Pa.get(n);l?.onContinued();const u=l?l.promise.then(r,r):r();return Pa.set(n,{promise:u,onContinued:o}),u}}function lU(t,e){let n=!1;return{cb:()=>e().finally(()=>{n||Pa.delete(t)}),onContinued:()=>n=!0}}function uU(t,e){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):e(n.signal).finally(()=>{n.signal.aborted||Pa.delete(t)}),onContinued:()=>n.abort()}}const fU=t=>typeof t=="function",Rt=t=>{let e,n;if(Er([t]).subscribe({next:([s])=>{e=s},error:s=>{n=s}}).unsubscribe(),n)throw n;return e},Bt=(t,e)=>{const n=fU(e)?e(Rt(t)):e;return t.next(n),n},Cx=(t,e)=>{const n=t.getValue(),s=Bt(t,e);return{lastValue:n,value:s,rollback:()=>Bt(t,n)}},ss=(t,e,n=s=>Ze(["RxUtils"])("warn","An observable emitted an error",s))=>{const s=t.subscribe({next:e,error:n});return()=>{s.unsubscribe()}},Hf=(t,e)=>{const n=Symbol();return ss(t,s=>{In(n,()=>e(s))})};var kT=Object.freeze({__proto__:null,createSafeAsyncSubscription:Hf,createSubscription:ss,getCurrentValue:Rt,setCurrentValue:Bt,updateValue:Cx}),de;(function(t){t.UNKNOWN="unknown",t.IDLE="idle",t.RINGING="ringing",t.JOINING="joining",t.JOINED="joined",t.LEFT="left",t.RECONNECTING="reconnecting",t.MIGRATING="migrating",t.RECONNECTING_FAILED="reconnecting-failed",t.OFFLINE="offline"})(de||(de={}));class dU{constructor(){this.connectedUserSubject=new je(void 0),this.callsSubject=new je([]),this.setConnectedUser=e=>Bt(this.connectedUserSubject,e),this.setCalls=e=>Bt(this.callsSubject,e),this.registerCall=e=>{this.calls.find(n=>n.cid===e.cid)||this.setCalls(n=>[...n,e])},this.unregisterCall=e=>(Ze(["client-state"])("trace",`Unregistering call: ${e.cid}`),this.setCalls(s=>s.filter(r=>r!==e))),this.findCall=(e,n)=>this.calls.find(s=>s.type===e&&s.id===n),this.connectedUserSubject.subscribe(async e=>{if(!e){const n=Ze(["client-state"]);for(const s of this.calls)s.state.callingState!==de.LEFT&&(n("info",`User disconnected, leaving call: ${s.cid}`),await s.leave({message:"client.disconnectUser() called"}).catch(r=>{n("error",`Error leaving call: ${s.cid}`,r)}))}})}get connectedUser(){return Rt(this.connectedUserSubject)}get calls(){return Rt(this.callsSubject)}}class hU{constructor(e){this.getCurrentValue=Rt,this.connectedUser$=e.connectedUserSubject.asObservable(),this.calls$=e.callsSubject.asObservable()}get connectedUser(){return Rt(this.connectedUser$)}get calls(){return Rt(this.calls$)}}const ci=(...t)=>(e,n)=>{for(const s of t){const r=s(e,n);if(r!==0)return r}return 0},wx=t=>e=>(n,s)=>t(n,s)?e(n,s):0,fs=t=>t.publishedTracks.includes(ae.VIDEO),ti=t=>t.publishedTracks.includes(ae.AUDIO),ds=t=>t.publishedTracks.includes(ae.SCREEN_SHARE),zf=t=>t.publishedTracks.includes(ae.SCREEN_SHARE_AUDIO),pU=t=>!!t.pin&&(t.pin.isLocalPin||t.pin.pinnedAt>0),qf=(t,e)=>t.isDominantSpeaker&&!e.isDominantSpeaker?-1:!t.isDominantSpeaker&&e.isDominantSpeaker?1:0,Gf=(t,e)=>t.isSpeaking&&!e.isSpeaking?-1:!t.isSpeaking&&e.isSpeaking?1:0,Bg=(t,e)=>ds(t)&&!ds(e)?-1:!ds(t)&&ds(e)?1:0,Kf=(t,e)=>fs(t)&&!fs(e)?-1:!fs(t)&&fs(e)?1:0,Yf=(t,e)=>ti(t)&&!ti(e)?-1:!ti(t)&&ti(e)?1:0,Fg=(t,e)=>{if(t.pin&&e.pin){if(!t.pin.isLocalPin&&e.pin.isLocalPin)return-1;if(t.pin.isLocalPin&&!e.pin.isLocalPin)return 1;if(t.pin.pinnedAt>e.pin.pinnedAt)return-1;if(t.pin.pinnedAt<e.pin.pinnedAt)return 1}return t.pin&&!e.pin?-1:!t.pin&&e.pin?1:0},Jf=t=>(e,n)=>e.reaction?.type===t&&n.reaction?.type!==t?-1:e.reaction?.type!==t&&n.reaction?.type===t?1:0,mU=(...t)=>(e,n)=>fu(e,t)&&!fu(n,t)?-1:!fu(e,t)&&fu(n,t)?1:0,fu=(t,e)=>(t.roles||[]).some(n=>e.includes(n)),Vg=wx((t,e)=>t.viewportVisibilityState?.videoTrack===Et.INVISIBLE||e.viewportVisibilityState?.videoTrack===Et.INVISIBLE),gU=wx((t,e)=>t.viewportVisibilityState?.videoTrack===Et.INVISIBLE||t.viewportVisibilityState?.videoTrack===Et.UNKNOWN||e.viewportVisibilityState?.videoTrack===Et.INVISIBLE||e.viewportVisibilityState?.videoTrack===Et.UNKNOWN),Tc=ci(Fg,Bg,Vg(ci(qf,Gf,Jf("raised-hand"),Kf,Yf))),yU=ci(Fg,Bg,qf,Vg(ci(Gf,Jf("raised-hand"),Kf,Yf)));ci(Fg,gU(ci(qf,Gf,Jf("raised-hand"),Kf,Yf)));const OT=ci(Vg(ci(qf,Gf,Jf("raised-hand"),Kf,Yf)),mU("admin","host","speaker")),AT={broadcasting:!1,hls:{playlist_url:"",status:""},rtmps:[]};class Ex{constructor(){this.backstageSubject=new je(!0),this.blockedUserIdsSubject=new je([]),this.createdAtSubject=new je(new Date),this.endedAtSubject=new je(void 0),this.startsAtSubject=new je(void 0),this.updatedAtSubject=new je(new Date),this.createdBySubject=new je(void 0),this.customSubject=new je({}),this.egressSubject=new je(void 0),this.ingressSubject=new je(void 0),this.recordingSubject=new je(!1),this.sessionSubject=new je(void 0),this.settingsSubject=new je(void 0),this.transcribingSubject=new je(!1),this.captioningSubject=new je(!1),this.endedBySubject=new je(void 0),this.thumbnailsSubject=new je(void 0),this.membersSubject=new je([]),this.ownCapabilitiesSubject=new je([]),this.callingStateSubject=new je(de.UNKNOWN),this.startedAtSubject=new je(void 0),this.participantCountSubject=new je(0),this.anonymousParticipantCountSubject=new je(0),this.participantsSubject=new je([]),this.callStatsReportSubject=new je(void 0),this.closedCaptionsSubject=new je([]),this.orphanedTracks=[],this.logger=Ze(["CallState"]),this.sortParticipantsBy=Tc,this.closedCaptionsTasks=new Map,this.dispose=()=>{for(const[s,r]of this.closedCaptionsTasks.entries())clearTimeout(r),this.closedCaptionsTasks.delete(s)},this.setSortParticipantsBy=s=>{this.sortParticipantsBy=s,this.setCurrentValue(this.participantsSubject,r=>r)},this.getCurrentValue=Rt,this.setCurrentValue=Bt,this.setParticipantCount=s=>this.setCurrentValue(this.participantCountSubject,s),this.setStartedAt=s=>this.setCurrentValue(this.startedAtSubject,s),this.setCaptioning=s=>Cx(this.captioningSubject,s),this.setAnonymousParticipantCount=s=>this.setCurrentValue(this.anonymousParticipantCountSubject,s),this.setParticipants=s=>this.setCurrentValue(this.participantsSubject,s),this.setCallingState=s=>this.setCurrentValue(this.callingStateSubject,s),this.setCallStatsReport=s=>this.setCurrentValue(this.callStatsReportSubject,s),this.setMembers=s=>{this.setCurrentValue(this.membersSubject,s)},this.setOwnCapabilities=s=>this.setCurrentValue(this.ownCapabilitiesSubject,s),this.setBackstage=s=>this.setCurrentValue(this.backstageSubject,s),this.setEndedAt=s=>this.setCurrentValue(this.endedAtSubject,s),this.findParticipantBySessionId=s=>this.participants.find(r=>r.sessionId===s),this.getParticipantLookupBySessionId=()=>this.participants.reduce((s,r)=>(s[r.sessionId]=r,s),{}),this.updateParticipant=(s,r)=>{const o=this.findParticipantBySessionId(s);if(!o){this.logger("warn",`Participant with sessionId ${s} not found`);return}const l=typeof r=="function"?r(o):r,u={...o,...l};return this.setParticipants(h=>h.map(d=>d.sessionId===s?u:d))},this.updateOrAddParticipant=(s,r)=>this.setParticipants(o=>{let l=!0;const u=o.map(h=>h.sessionId===s?(l=!1,{...h,...r}):h);return l&&u.push(r),u}),this.updateParticipants=s=>Object.keys(s).length===0?this.participants:this.setParticipants(r=>r.map(o=>{const l=s[o.sessionId];return l?{...o,...l}:o})),this.updateParticipantTracks=(s,r)=>this.updateParticipants(Object.entries(r).reduce((o,[l,u])=>{u.dimension&&(u.dimension.height=Math.ceil(u.dimension.height),u.dimension.width=Math.ceil(u.dimension.width));const h=s==="videoTrack"?"videoDimension":s==="screenShareTrack"?"screenShareDimension":void 0;return h&&(o[l]={[h]:u.dimension}),o},{})),this.updateFromEvent=s=>{const r=this.eventHandlers[s.type];r&&r(s)},this.setServerSidePins=s=>{const r=s.reduce((o,l)=>(o[l.sessionId]=Date.now(),o),{});return this.setParticipants(o=>o.map(l=>{const u=r[l.sessionId];return u?{...l,pin:{isLocalPin:!1,pinnedAt:u}}:l.pin&&!l.pin.isLocalPin?{...l,pin:void 0}:l}))},this.registerOrphanedTrack=s=>{this.orphanedTracks.push(s)},this.removeOrphanedTrack=s=>{this.orphanedTracks=this.orphanedTracks.filter(r=>r.id!==s)},this.takeOrphanedTracks=s=>{const r=this.orphanedTracks.filter(o=>o.trackLookupPrefix===s);return r.length>0&&(this.orphanedTracks=this.orphanedTracks.filter(o=>o.trackLookupPrefix!==s)),r},this.updateClosedCaptionSettings=s=>{this.closedCaptionsSettings={...this.closedCaptionsSettings,...s}},this.updateFromCallResponse=s=>{this.setBackstage(s.backstage),this.setCurrentValue(this.blockedUserIdsSubject,s.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(s.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(s.updated_at)),this.setCurrentValue(this.startsAtSubject,s.starts_at?new Date(s.starts_at):void 0),this.setEndedAt(s.ended_at?new Date(s.ended_at):void 0),this.setCurrentValue(this.createdBySubject,s.created_by),this.setCurrentValue(this.customSubject,s.custom),this.setCurrentValue(this.egressSubject,s.egress),this.setCurrentValue(this.ingressSubject,s.ingress),this.setCurrentValue(this.recordingSubject,s.recording);const r=this.setCurrentValue(this.sessionSubject,s.session);this.updateParticipantCountFromSession(r),this.setCurrentValue(this.settingsSubject,s.settings),this.setCurrentValue(this.transcribingSubject,s.transcribing),this.setCurrentValue(this.captioningSubject,s.captioning),this.setCurrentValue(this.thumbnailsSubject,s.thumbnails)},this.updateFromSfuCallState=(s,r,o)=>{const{participants:l,participantCount:u,startedAt:h,pins:d}=s,m=o?.announcedTracks.map(b=>b.trackType)??[];this.setParticipants(()=>{const b=this.getParticipantLookupBySessionId();return l.map(g=>{const v=b[g.sessionId],S=g.sessionId===r;return Object.assign({},v,g,{isLocalParticipant:S,publishedTracks:S?m:g.publishedTracks,viewportVisibilityState:v?.viewportVisibilityState??{videoTrack:Et.UNKNOWN,screenShareTrack:Et.UNKNOWN}})})}),this.setParticipantCount(u?.total||0),this.setAnonymousParticipantCount(u?.anonymous||0),this.setStartedAt(h?bc.toDate(h):new Date),this.setServerSidePins(d)},this.updateFromMemberRemoved=s=>{this.updateFromCallResponse(s.call),this.setCurrentValue(this.membersSubject,r=>r.filter(o=>s.members.indexOf(o.user_id)===-1))},this.updateFromMemberAdded=s=>{this.updateFromCallResponse(s.call),this.setCurrentValue(this.membersSubject,r=>[...r,...s.members])},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(s=AT)=>({...s,broadcasting:!1,hls:{...s.hls,status:""}}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(s=AT)=>({...s,broadcasting:!1,hls:{...s.hls,status:""}}))},this.updateParticipantCountFromSession=s=>{if(!s||this.callingState===de.JOINED)return;const r=Object.values(s.participants_count_by_role).reduce((l,u)=>l+u,0),o=Math.max(r,s.participants.length);this.setParticipantCount(o),this.setAnonymousParticipantCount(s.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=s=>{const r=this.setCurrentValue(this.sessionSubject,o=>o&&{...o,anonymous_participant_count:s.anonymous_participant_count,participants_count_by_role:s.participants_count_by_role});this.updateParticipantCountFromSession(r)},this.updateFromSessionParticipantLeft=s=>{const r=this.setCurrentValue(this.sessionSubject,o=>{if(!o)return o;const{participants:l,participants_count_by_role:u}=o,{user:h,user_session_id:d}=s.participant;return{...o,participants:l.filter(m=>m.user_session_id!==d),participants_count_by_role:{...u,[h.role]:Math.max(0,(u[h.role]||0)-1)}}});this.updateParticipantCountFromSession(r)},this.updateFromSessionParticipantJoined=s=>{const r=this.setCurrentValue(this.sessionSubject,o=>{if(!o)return o;const{participants:l,participants_count_by_role:u}=o,{user:h,user_session_id:d}=s.participant;let m=!0;const b=l.map(v=>v.user_session_id===d?(m=!1,s.participant):v);m&&b.push(s.participant);const g=m?1:0;return{...o,participants:b,participants_count_by_role:{...u,[h.role]:(u[h.role]||0)+g}}});this.updateParticipantCountFromSession(r)},this.updateMembers=s=>{this.updateFromCallResponse(s.call),this.setCurrentValue(this.membersSubject,r=>r.map(o=>{const l=s.members.find(u=>u.user_id===o.user_id);return l||o}))},this.updateParticipantReaction=s=>{const{user:r,custom:o,type:l,emoji_code:u}=s.reaction;this.setParticipants(h=>h.map(d=>d.userId!==r.id?d:{...d,reaction:{type:l,emoji_code:u,custom:o}}))},this.unblockUser=s=>{this.setCurrentValue(this.blockedUserIdsSubject,r=>r&&r.filter(o=>o!==s.user.id))},this.blockUser=s=>{this.setCurrentValue(this.blockedUserIdsSubject,r=>[...r||[],s.user.id])},this.updateOwnCapabilities=s=>{s.user.id===this.localParticipant?.userId&&this.setCurrentValue(this.ownCapabilitiesSubject,s.own_capabilities)},this.updateFromClosedCaptions=s=>{this.setCurrentValue(this.closedCaptionsSubject,r=>{const{closed_caption:o}=s,l=g=>`${g.speaker_id}/${g.start_time}`,u=l(o);if(r.some(g=>l(g)===u))return r;const d=[...r,o],{visibilityDurationMs:m=2700,maxVisibleCaptions:b=2}=this.closedCaptionsSettings||{};if(m>0){const g=setTimeout(()=>{this.setCurrentValue(this.closedCaptionsSubject,v=>v.filter(S=>S!==o)),this.closedCaptionsTasks.delete(u)},m);this.closedCaptionsTasks.set(u,g);for(let v=0;v<d.length-b;v++){const S=l(d[v]),T=this.closedCaptionsTasks.get(S);clearTimeout(T),this.closedCaptionsTasks.delete(S)}}return d.slice(-b)})},this.rawParticipants$=this.participantsSubject.asObservable().pipe(tn({bufferSize:1,refCount:!0})),this.participants$=this.participantsSubject.asObservable().pipe(fn(s=>s.sort(this.sortParticipantsBy)),tn({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(fn(s=>s.find(r=>r.isLocalParticipant)),tn({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(fn(s=>s.filter(r=>!r.isLocalParticipant)),tn({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(fn(s=>s.filter(r=>!!r.pin)),tn({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(fn(s=>s.find(r=>r.isDominantSpeaker)),tn({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(fn(s=>s.some(r=>ds(r))),yn(),tn({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable(),this.closedCaptions$=this.closedCaptionsSubject.asObservable();const e=(s,r)=>{if(s.length!==r.length)return!1;for(const o of s)if(!r.includes(o))return!1;for(const o of r)if(!s.includes(o))return!1;return!0},n=(s,r)=>s.asObservable().pipe(yn(r));this.anonymousParticipantCount$=n(this.anonymousParticipantCountSubject),this.blockedUserIds$=n(this.blockedUserIdsSubject,e),this.backstage$=n(this.backstageSubject),this.callingState$=n(this.callingStateSubject),this.ownCapabilities$=n(this.ownCapabilitiesSubject,e),this.participantCount$=n(this.participantCountSubject),this.recording$=n(this.recordingSubject),this.transcribing$=n(this.transcribingSubject),this.captioning$=n(this.captioningSubject),this.eventHandlers={"call.frame_recording_ready":void 0,"call.moderation_blur":void 0,"call.moderation_warning":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.rtmp_broadcast_failed":void 0,"call.rtmp_broadcast_started":void 0,"call.rtmp_broadcast_stopped":void 0,"call.stats_report_ready":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.updated":void 0,custom:void 0,"call.accepted":s=>this.updateFromCallResponse(s.call),"call.blocked_user":this.blockUser,"call.closed_caption":this.updateFromClosedCaptions,"call.closed_captions_failed":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.closed_captions_started":()=>{this.setCurrentValue(this.captioningSubject,!0)},"call.closed_captions_stopped":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.created":s=>this.updateFromCallResponse(s.call),"call.deleted":s=>this.updateFromCallResponse(s.call),"call.ended":s=>{this.updateFromCallResponse(s.call),this.setCurrentValue(this.endedBySubject,s.user)},"call.frame_recording_failed":s=>{this.updateFromCallResponse(s.call)},"call.frame_recording_started":s=>{this.updateFromCallResponse(s.call)},"call.frame_recording_stopped":s=>{this.updateFromCallResponse(s.call)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":s=>{this.updateFromCallResponse(s.call)},"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":s=>this.updateFromCallResponse(s.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":s=>{this.updateFromCallResponse(s.call),this.setMembers(s.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":s=>this.updateFromCallResponse(s.call),"call.ring":s=>this.updateFromCallResponse(s.call),"call.missed":s=>this.updateFromCallResponse(s.call),"call.session_ended":s=>this.updateFromCallResponse(s.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":s=>this.updateFromCallResponse(s.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":s=>this.updateFromCallResponse(s.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get captioning(){return this.getCurrentValue(this.captioning$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get rawParticipants(){return this.getCurrentValue(this.rawParticipants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get isCallStatsReportObserved(){return this.callStatsReportSubject.observed}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}get closedCaptions(){return this.getCurrentValue(this.closedCaptions$)}}class $g extends Error{constructor(e){super(e.message),this.name="NegotiationError",this.error=e}}const cf=t=>{const e=[];return t.forEach(n=>{e.push(n)}),e},xx=t=>({id:t.id,tracks:t.getTracks().map(e=>({id:e.id,kind:e.kind,label:e.label,enabled:e.enabled,muted:e.muted,readyState:e.readyState}))}),bU=t=>{const{sdk:e,...n}=t,s=Rx(e),r=_x(e);return{sdkName:s,sdkVersion:r,...n}},Rx=t=>t&&t.type===qi.REACT?"stream-react":t&&t.type===qi.REACT_NATIVE?"stream-react-native":"stream-js",_x=t=>t?`${t.major}.${t.minor}.${t.patch}`:"0.0.0-development",Hm=()=>typeof navigator>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),Xf=()=>typeof navigator>"u"?!1:navigator.userAgent?.includes("Firefox"),vU=()=>typeof navigator>"u"?!1:navigator.userAgent?.includes("Chrome");var NT=Object.freeze({__proto__:null,isChrome:vU,isFirefox:Xf,isSafari:Hm});const SU=({subscriber:t,publisher:e,state:n,datacenter:s,pollingIntervalInMs:r=2e3})=>{const o=Ze(["stats"]),l=async(S,T)=>S==="subscriber"&&t?t.getStats(T):S==="publisher"&&e?e.getStats(T):void 0,u=async(S,T)=>{const w=S==="subscriber"?t:e;if(!w)return[];const R=[];for(const O of T){const k=await w.getStats(O),D=DT(k,{trackKind:O.kind,kind:S,publisher:void 0});R.push(D)}return R},h=S=>{m.add(S),b()},d=S=>{m.delete(S),b()},m=new Set,b=async()=>{const S={};if(m.size>0){const D=new Set(m);for(const P of n.participants){if(!D.has(P.sessionId))continue;const{audioStream:H,isLocalParticipant:G,sessionId:X,userId:ie,videoStream:ee}=P,le=G?"publisher":"subscriber";try{const re=G?e?.getPublishedTracks()||[]:[...ee?.getVideoTracks()||[],...H?.getAudioTracks()||[]];S[X]=await u(le,re)}catch(re){o("warn",`Failed to collect ${le} stats for ${ie}`,re)}}}const[T,w]=await Promise.all([l("subscriber"),e?l("publisher"):void 0]),R=(D,P)=>TU(DT(D,{kind:P,trackKind:"video",publisher:e})),O=T?R(T,"subscriber"):zm(),k=w?R(w,"publisher"):zm();n.setCallStatsReport({datacenter:s,publisherStats:k,subscriberStats:O,subscriberRawStats:T,publisherRawStats:w,participants:S,timestamp:Date.now()})};let g;if(r>0){const S=async()=>{n.isCallStatsReportObserved&&await b().catch(T=>{o("debug","Failed to collect stats",T)}),g=setTimeout(S,r)};S()}return{getRawStatsForTrack:l,getStatsForStream:u,startReportingStatsFor:h,stopReportingStatsFor:d,stop:()=>{g&&clearTimeout(g)}}},DT=(t,e)=>{const{trackKind:n,kind:s,publisher:r}=e,o=s==="subscriber"?"inbound-rtp":"outbound-rtp",l=cf(t),u=l.filter(h=>h.type===o&&h.kind===n).map(h=>{const d=h,m=l.find(S=>S.type==="codec"&&S.id===d.codecId),b=l.find(S=>S.type==="transport"&&S.id===d.transportId);let g;b&&b.dtlsState==="connected"&&(g=l.find(T=>T.type==="candidate-pair"&&T.id===b.selectedCandidatePairId)?.currentRoundTripTime);let v;if(s==="publisher"&&r){const S=Xf(),T=l.find(w=>w.type==="media-source"&&(S?!0:w.id===d.mediaSourceId));T&&(v=r.getTrackType(T.trackIdentifier))}return{bytesSent:d.bytesSent,bytesReceived:d.bytesReceived,codec:m?.mimeType,currentRoundTripTime:g,frameHeight:d.frameHeight,frameWidth:d.frameWidth,framesPerSecond:d.framesPerSecond,jitter:d.jitter,kind:d.kind,mediaSourceId:d.mediaSourceId,qualityLimitationReason:d.qualityLimitationReason,rid:d.rid,ssrc:d.ssrc,trackType:v}});return{rawStats:t,streams:u,timestamp:Date.now()}},zm=t=>({rawReport:t??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",codecPerTrackType:{},timestamp:Date.now()}),TU=t=>{const e=zm(t);let n=-1;const s=(h,d)=>h*d,r=new Set,o=t.streams,l=o.reduce((h,d)=>{h.totalBytesSent+=d.bytesSent||0,h.totalBytesReceived+=d.bytesReceived||0,h.averageJitterInMs+=d.jitter||0,h.averageRoundTripTimeInMs+=d.currentRoundTripTime||0;const m=s(d.frameWidth||0,d.frameHeight||0);return m>n&&(h.highestFrameWidth=d.frameWidth||0,h.highestFrameHeight=d.frameHeight||0,h.highestFramesPerSecond=d.framesPerSecond||0,n=m),r.add(d.qualityLimitationReason||""),h},e);o.length>0&&(l.averageJitterInMs=Math.round(l.averageJitterInMs/o.length*1e3),l.averageRoundTripTimeInMs=Math.round(l.averageRoundTripTimeInMs/o.length*1e3),l.codec=o[0].codec||"",l.codecPerTrackType=o.reduce((h,d)=>(d.trackType&&(h[d.trackType]=d.codec||""),h),{}));const u=[r.has("cpu")&&"cpu",r.has("bandwidth")&&"bandwidth",r.has("other")&&"other"].filter(Boolean).join(", ");return u&&(l.qualityLimitationReasons=u),l},CU="1.25.5",[wU,EU,xU]=CU.split(".");let lf={type:qi.PLAIN_JAVASCRIPT,major:wU,minor:EU,patch:xU},RU,_U,kU={oneofKind:void 0};const OU=t=>{lf=t},AU=()=>lf,NU=()=>kU,IT=async()=>{if(Jt())return{sdk:lf,os:RU,device:_U};const t=navigator.userAgentData;let e;if(t&&t.getHighEntropyValues)try{e=await t.getHighEntropyValues(["platform","platformVersion"])}catch{}const n=new fL.UAParser(navigator.userAgent),{browser:s,os:r,device:o,cpu:l}=n.getResult();return{sdk:lf,browser:{name:s.name||navigator.userAgent,version:s.version||""},os:{name:e?.platform||r.name||"",version:e?.platformVersion||r.version||"",architecture:l.architecture||""},device:{name:[o.vendor,o.model,o.type].filter(Boolean).join(" "),version:""}}};class DU{constructor(e,{options:n,clientDetails:s,subscriber:r,publisher:o,microphone:l,camera:u,state:h,tracer:d,unifiedSessionId:m}){this.logger=Ze(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(v,S)=>{const{browserPermissionState$:T}=v.state;this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=ss(Er([T,this.state.ownCapabilities$]),([w,R])=>{this.unsubscribeListDevicesSubscription?.();const O=S==="mic"?R.includes(we.SEND_AUDIO):R.includes(we.SEND_VIDEO);if(w!=="granted"||!O){this.inputDevices.set(S,{currentDevice:"",availableDevices:[],isPermitted:!1});return}this.unsubscribeListDevicesSubscription=ss(Er([v.listDevices(),v.state.selectedDevice$]),([k,D])=>{const P=k.find(H=>H.deviceId===D);this.inputDevices.set(S,{currentDevice:P?.label||D||"",availableDevices:k.map(H=>H.label),isPermitted:!0})})})},this.sendConnectionTime=v=>{this.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:v}})},this.sendReconnectionTime=(v,S)=>{this.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{strategy:v,timeSeconds:S}}})},this.sendTelemetryData=v=>{this.run(v).catch(S=>{this.logger("warn","Failed to send telemetry data",S)})},this.run=async v=>{const[S,T]=await Promise.all([this.subscriber.stats.get(),this.publisher?.stats.get()]);this.subscriber.tracer?.trace("getstats",S.delta),T&&this.publisher?.tracer?.trace("getstats",T.delta);const w=this.subscriber.tracer?.take(),R=this.publisher?.tracer?.take(),O=this.tracer.take(),k=this.sfuClient.getTrace(),D=[...O.snapshot,...k?.snapshot??[],...R?.snapshot??[],...w?.snapshot??[]];try{await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:JSON.stringify(cf(S.stats)),publisherStats:T?JSON.stringify(cf(T.stats)):"[]",subscriberRtcStats:"",publisherRtcStats:"",rtcStats:JSON.stringify(D),encodeStats:T?.performanceStats??[],decodeStats:S.performanceStats,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),unifiedSessionId:this.unifiedSessionId,deviceState:NU(),telemetry:v})}catch(P){throw R?.rollback(),w?.rollback(),O.rollback(),k?.rollback(),P}},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.run().catch(v=>{this.logger("warn","Failed to report stats",v)})},this.options.reporting_interval_ms))},this.stop=()=>{this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=void 0,this.unsubscribeListDevicesSubscription?.(),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0,clearTimeout(this.timeoutId),this.timeoutId=void 0},this.flush=()=>{this.run().catch(v=>{this.logger("warn","Failed to flush report stats",v)})},this.scheduleOne=v=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.run().catch(S=>{this.logger("warn","Failed to report stats",S)})},v)},this.sfuClient=e,this.options=n,this.subscriber=r,this.publisher=o,this.microphone=l,this.camera=u,this.state=h,this.tracer=d,this.unifiedSessionId=m;const{sdk:b,browser:g}=s;this.sdkName=Rx(b),this.sdkVersion=_x(b),this.webRTCVersion=`${g?.name||""}-${g?.version||""}`||"N/A"}}const IU=(t,e)=>{t.addEventListener("icecandidate",s=>{e("onicecandidate",s.candidate)}),t.addEventListener("track",s=>{const r=s.streams.map(o=>`stream:${o.id}`);e("ontrack",`${s.track.kind}:${s.track.id} ${r}`)}),t.addEventListener("signalingstatechange",()=>{e("signalingstatechange",t.signalingState)}),t.addEventListener("iceconnectionstatechange",()=>{e("iceconnectionstatechange",t.iceConnectionState)}),t.addEventListener("icegatheringstatechange",()=>{e("icegatheringstatechange",t.iceGatheringState)}),t.addEventListener("connectionstatechange",()=>{e("connectionstatechange",t.connectionState)}),t.addEventListener("negotiationneeded",()=>{e("negotiationneeded",void 0)}),t.addEventListener("datachannel",({channel:s})=>{e("datachannel",[s.id,s.label])});const n=t.close;t.close=function(){return e("close",void 0),n.call(this)};for(const s of["createOffer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate"]){const r=t[s];r&&(t[s]=async function(...l){try{e(s,l);const u=await r.apply(this,l);return e(`${s}OnSuccess`,u),u}catch(u){throw e(`${s}OnFailure`,u.toString()),u}})}};class PU{constructor(e,n,s){this.previousStats={},this.frameTimeHistory=[],this.fpsHistory=[],this.get=async()=>{const r=await this.pc.getStats(),o=LU(r),l=this.withOverrides(this.peerType===Ft.SUBSCRIBER?this.getDecodeStats(o):this.getEncodeStats(o)),u=jU(this.previousStats,o);return this.previousStats=o,this.frameTimeHistory=this.frameTimeHistory.slice(-2),this.fpsHistory=this.fpsHistory.slice(-2),{performanceStats:l,delta:u,stats:r}},this.getEncodeStats=r=>{const o=[];for(const l of Object.values(r)){if(l.type!=="outbound-rtp")continue;const{codecId:u,framesSent:h=0,kind:d,id:m,totalEncodeTime:b=0,framesPerSecond:g=0,frameHeight:v=0,frameWidth:S=0,targetBitrate:T=0,mediaSourceId:w}=l;if(d==="audio"||!this.previousStats[m])continue;const R=this.previousStats[m],O=b-(R.totalEncodeTime||0),k=h-(R.framesSent||0),D=k>0?O/k*1e3:0;this.frameTimeHistory.push(D),this.fpsHistory.push(g);let P=ae.VIDEO;if(w&&r[w]){const H=r[w];P=this.trackIdToTrackType.get(H.trackIdentifier)||P}o.push({trackType:P,codec:PT(r,u),avgFrameTimeMs:du(this.frameTimeHistory),avgFps:du(this.fpsHistory),targetBitrate:Math.round(T),videoDimension:{width:S,height:v}})}return o},this.getDecodeStats=r=>{let o,l=0;for(const w of Object.values(r)){if(w.type!=="inbound-rtp")continue;const R=w,{kind:O,frameWidth:k=0,frameHeight:D=0}=R,P=k*D;O==="video"&&P>l&&(o=R,l=P)}if(!o||!this.previousStats[o.id])return[];const u=this.previousStats[o.id],{framesDecoded:h=0,framesPerSecond:d=0,totalDecodeTime:m=0,trackIdentifier:b}=o,g=m-(u.totalDecodeTime||0),v=h-(u.framesDecoded||0),S=v>0?g/v*1e3:0;this.frameTimeHistory.push(S),this.fpsHistory.push(d);const T=this.trackIdToTrackType.get(b)||ae.VIDEO;return[of.create({trackType:T,codec:PT(r,o.codecId),avgFrameTimeMs:du(this.frameTimeHistory),avgFps:du(this.fpsHistory),videoDimension:{width:o.frameWidth,height:o.frameHeight}})]},this.withOverrides=r=>{if(this.costOverrides)for(const o of r){const l=this.costOverrides.get(o.trackType);l!==void 0&&(o.avgFrameTimeMs=l+(o.avgFrameTimeMs||0)/1e3)}return r},this.setCost=(r,o=ae.VIDEO)=>{this.costOverrides||(this.costOverrides=new Map),this.costOverrides.set(o,r)},this.pc=e,this.peerType=n,this.trackIdToTrackType=s}}const LU=t=>{const e={};return t.forEach((n,s)=>{e[s]=n}),e},jU=(t,e)=>{e=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(e))if(delete o.id,!!t[r])for(const[l,u]of Object.entries(o))u===t[r][l]&&delete o[l];let n=-1/0;const s=Object.values(e);for(const r of s)r.timestamp>n&&(n=r.timestamp);for(const r of s)r.timestamp===n&&(r.timestamp=0);return e.timestamp=n,e},du=t=>t.reduce((e,n)=>e+n,0)/t.length,PT=(t,e)=>{if(!e||!t[e])return;const n=t[e];return Ls.create({name:n.mimeType.split("/").pop(),clockRate:n.clockRate,payloadType:n.payloadType,fmtp:n.sdpFmtpLine})};class Hg{constructor(e){this.buffer=[],this.enabled=!0,this.setEnabled=n=>{this.enabled!==n&&(this.enabled=n,this.buffer=[])},this.trace=(n,s)=>{this.enabled&&this.buffer.push([n,this.id,s,Date.now()])},this.take=()=>{const n=this.buffer;return this.buffer=[],{snapshot:n,rollback:()=>{this.buffer.unshift(...n)}}},this.dispose=()=>{this.buffer=[]},this.id=e}}class kx{constructor(e,{sfuClient:n,connectionConfig:s,state:r,dispatcher:o,onReconnectionNeeded:l,logTag:u,enableTracing:h,iceRestartDelay:d=2500}){if(this.isIceRestarting=!1,this.isDisposed=!1,this.trackIdToTrackType=new Map,this.subscriptions=[],this.lock=Math.random().toString(36).slice(2),this.createPeerConnection=m=>{const b=new RTCPeerConnection(m);return b.addEventListener("icecandidate",this.onIceCandidate),b.addEventListener("icecandidateerror",this.onIceCandidateError),b.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),b.addEventListener("icegatheringstatechange",this.onIceGatherChange),b.addEventListener("signalingstatechange",this.onSignalingChange),b.addEventListener("connectionstatechange",this.onConnectionStateChange),b},this.tryRestartIce=()=>{this.restartIce().catch(m=>{const b="restartICE() failed, initiating reconnect";this.logger("error",b,m);const g=m instanceof $g&&m.error.code===xr.PARTICIPANT_SIGNAL_LOST?De.FAST:De.REJOIN;this.onReconnectionNeeded?.(g,b)})},this.on=(m,b)=>{this.subscriptions.push(this.dispatcher.on(m,g=>{const v=`pc.${this.lock}.${m}`;In(v,async()=>b(g)).catch(S=>{this.isDisposed||this.logger("warn",`Error handling ${m}`,S)})}))},this.addTrickledIceCandidates=()=>{const{iceTrickleBuffer:m}=this.sfuClient,b=this.peerType===Ft.SUBSCRIBER?m.subscriberCandidates:m.publisherCandidates;this.unsubscribeIceTrickle?.(),this.unsubscribeIceTrickle=Hf(b,async g=>this.pc.addIceCandidate(g).catch(v=>{this.isDisposed||this.logger("warn","ICE candidate error",v,g)}))},this.setSfuClient=m=>{this.sfuClient=m},this.getStats=m=>this.pc.getStats(m),this.getTrackType=m=>this.trackIdToTrackType.get(m),this.isHealthy=()=>{const m=new Set(["failed","closed"]),b=this.pc.iceConnectionState,g=this.pc.connectionState;return!m.has(b)&&!m.has(g)},this.onIceCandidate=m=>{const{candidate:b}=m;if(!b){this.logger("debug","null ice candidate");return}const g=this.asJSON(b);this.sfuClient.iceTrickle({peerType:this.peerType,iceCandidate:g}).catch(v=>{this.isDisposed||this.logger("warn","ICETrickle failed",v)})},this.asJSON=m=>{if(!m.usernameFragment){const b=m.candidate.split(" "),g=b.findIndex(S=>S==="ufrag")+1,v=b[g];return JSON.stringify({...m,usernameFragment:v})}return JSON.stringify(m.toJSON())},this.onConnectionStateChange=async()=>{const m=this.pc.connectionState;if(this.logger("debug","Connection state changed",m),this.tracer&&(m==="connected"||m==="failed"))try{const b=await this.stats.get();this.tracer.trace("getstats",b.delta)}catch(b){this.tracer.trace("getstatsOnFailure",b.toString())}if(m==="failed"){this.onReconnectionNeeded?.(De.REJOIN,"Connection failed");return}this.handleConnectionStateUpdate(m)},this.onIceConnectionStateChange=()=>{const m=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",m),this.handleConnectionStateUpdate(m)},this.handleConnectionStateUpdate=m=>{const{callingState:b}=this.state;if(b!==de.OFFLINE&&b!==de.RECONNECTING&&!this.isIceRestarting)switch(m){case"failed":this.logger("info","restartICE due to failed connection"),this.tryRestartIce();break;case"disconnected":this.logger("info","disconnected connection, scheduling restartICE"),clearTimeout(this.iceRestartTimeout),this.iceRestartTimeout=setTimeout(()=>{const g=this.pc.iceConnectionState;(g==="disconnected"||g==="failed")&&this.tryRestartIce()},this.iceRestartDelay);break;case"connected":this.iceRestartTimeout&&(this.logger("info","connected connection, canceling restartICE"),clearTimeout(this.iceRestartTimeout),this.iceRestartTimeout=void 0);break}},this.onIceCandidateError=m=>{const b=m instanceof RTCPeerConnectionIceErrorEvent?`${m.errorCode}: ${m.errorText}`:m;this.logger("debug","ICE Candidate error",b)},this.onIceGatherChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.peerType=e,this.sfuClient=n,this.state=r,this.dispatcher=o,this.iceRestartDelay=d,this.onReconnectionNeeded=l,this.logger=Ze([e===Ft.SUBSCRIBER?"Subscriber":"Publisher",u]),this.pc=this.createPeerConnection(s),this.stats=new PU(this.pc,e,this.trackIdToTrackType),h){const m=`${u}-${e===Ft.SUBSCRIBER?"sub":"pub"}`;this.tracer=new Hg(m),this.tracer.trace("create",{url:n.edgeName,...s}),IU(this.pc,this.tracer.trace)}}dispose(){clearTimeout(this.iceRestartTimeout),this.iceRestartTimeout=void 0,this.onReconnectionNeeded=void 0,this.isDisposed=!0,this.detachEventHandlers(),this.pc.close(),this.tracer?.dispose()}detachEventHandlers(){const e=this.pc;e.removeEventListener("icecandidate",this.onIceCandidate),e.removeEventListener("icecandidateerror",this.onIceCandidateError),e.removeEventListener("signalingstatechange",this.onSignalingChange),e.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),e.removeEventListener("icegatheringstatechange",this.onIceGatherChange),this.unsubscribeIceTrickle?.(),this.subscriptions.forEach(n=>n())}}class MU{constructor(){this.cache=[],this.layers=[],this.transceiverOrder=[],this.add=(e,n)=>{this.cache.push({publishOption:e,transceiver:n}),this.transceiverOrder.push(n)},this.get=e=>this.findTransceiver(e)?.transceiver,this.has=e=>!!this.get(e),this.find=e=>this.cache.find(e),this.items=()=>this.cache,this.indexOf=e=>this.transceiverOrder.indexOf(e),this.getLayers=e=>this.layers.find(s=>s.publishOption.id===e.id&&s.publishOption.trackType===e.trackType)?.layers,this.setLayers=(e,n=[])=>{const s=this.findLayer(e);s?s.layers=n:this.layers.push({publishOption:e,layers:n})},this.findTransceiver=e=>this.cache.find(n=>n.publishOption.id===e.id&&n.publishOption.trackType===e.trackType),this.findLayer=e=>this.layers.find(n=>n.publishOption.id===e.id&&n.publishOption.trackType===e.trackType)}}const Cc=(t,e)=>{Ze(["helpers"])("warn",e,t)},zg=t=>{switch(t){case ae.SCREEN_SHARE:return"screenShareStream";case ae.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case ae.VIDEO:return"videoStream";case ae.AUDIO:return"audioStream";case ae.UNSPECIFIED:throw new Error("Track type is unspecified");default:Cc(t,"Unknown track type")}},UU=t=>{switch(t){case"audio":return ae.AUDIO;case"video":return ae.VIDEO;case"screenshare":return ae.SCREEN_SHARE;case"screenshare_audio":return ae.SCREEN_SHARE_AUDIO;default:Cc(t,"Unknown mute type")}},BU=t=>{switch(t){case"TRACK_TYPE_AUDIO":return ae.AUDIO;case"TRACK_TYPE_VIDEO":return ae.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return ae.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return ae.SCREEN_SHARE_AUDIO;default:return}},qg=t=>t===ae.AUDIO||t===ae.SCREEN_SHARE_AUDIO,FU={q:3e5,h:75e4,f:125e4},VU=t=>{if(!t)return;const e=s=>r=>r.rid===s;return[{...t.find(e("f"))||t.find(e("h"))||t.find(e("q")),rid:"q"}]},$U=t=>t==="q"?$i.LOW_UNSPECIFIED:t==="h"?$i.MID:$i.HIGH,HU=(t=[])=>t.map(e=>({rid:e.rid||"",bitrate:e.maxBitrate||0,fps:e.maxFramerate||0,quality:$U(e.rid||""),videoDimension:{width:e.width,height:e.height}})),zU=(t,e)=>`L${t}T${e}${t>1?"_KEY":""}`,LT=(t,e)=>{if(qg(e.trackType))return;const n=[],s=t.getSettings(),{width:r=0,height:o=0}=s,{bitrate:l,codec:u,fps:h,maxSpatialLayers:d=3,maxTemporalLayers:m=3,videoDimension:b={width:1280,height:720},useSingleLayer:g}=e,v=qU(b,r,o,l);let S=1,T=1;const w=$m(u?.name);for(const R of["f","h","q"].slice(0,d)){const O={active:!0,rid:R,width:Math.round(r/S),height:Math.round(o/S),maxBitrate:Math.round(v/T)||FU[R],maxFramerate:h};w?O.scalabilityMode=zU(g?1:d,m):O.scaleResolutionDownBy=S,S*=2,T*=2,n.unshift(O)}return GU(s,n,g)},qU=(t,e,n,s)=>{const{width:r,height:o}=t;if(e<r||n<o){const l=e*n,u=r*o,h=l/u;return Math.round(s*h)}return s},GU=(t,e,n)=>{let s;const r=Math.max(t.width||0,t.height||0);r<=320?s=e.filter(l=>l.rid==="f"):r<=640?s=e.filter(l=>l.rid!=="q"):s=e;const o=["q","h","f"];return s.map((l,u,h)=>({...l,rid:o[u],active:n&&u<h.length-1?!1:l.active}))},KU=(t,e,n)=>{if(t.mid)return t.mid;if(!n)return String(e);const s=t.sender.track,o=Uu.parse(n).media.find(l=>l.type===s.kind&&(l.msid?.includes(s.id)??!0));return typeof o?.mid<"u"?String(o.mid):e<0?"":String(e)},YU=(t,e)=>{const n=new Set,s=Uu.parse(t);for(const o of s.media){if(o.type!=="audio")continue;const l=o.rtp.find(u=>u.codec==="opus");if(l)for(const u of o.fmtp)u.payload===l.payload&&u.config.includes("stereo=1")&&n.add(o.mid)}if(n.size===0)return e;const r=Uu.parse(e);for(const o of r.media){if(o.type!=="audio"||!n.has(o.mid))continue;const l=o.rtp.find(u=>u.codec==="opus");if(l)for(const u of o.fmtp)u.payload===l.payload&&!u.config.includes("stereo=1")&&(u.config+=";stereo=1")}return Uu.write(r)};class JU extends kx{constructor({publishOptions:e,...n}){super(Ft.PUBLISHER_UNSPECIFIED,n),this.transceiverCache=new MU,this.clonedTracks=new Set,this.publish=async(s,r)=>{if(!this.publishOptions.some(o=>o.trackType===r))throw new Error(`No publish options found for ${ae[r]}`);for(const o of this.publishOptions){if(o.trackType!==r)continue;const l=this.cloneTrack(s),u=this.transceiverCache.get(o);if(!u)await this.addTransceiver(l,o);else{const h=u.sender.track;await this.updateTransceiver(u,l,r),Jt()||this.stopTrack(h)}}},this.addTransceiver=async(s,r)=>{const o=LT(s,r),l=$m(r.codec?.name)?VU(o):o,u=this.pc.addTransceiver(s,{direction:"sendonly",sendEncodings:l}),h=u.sender.getParameters();h.degradationPreference="maintain-framerate",await u.sender.setParameters(h);const d=r.trackType;this.logger("debug",`Added ${ae[d]} transceiver`),this.transceiverCache.add(r,u),this.trackIdToTrackType.set(s.id,d),await this.negotiate()},this.updateTransceiver=async(s,r,o)=>{const l=s.sender;l.track&&this.trackIdToTrackType.delete(l.track.id),await l.replaceTrack(r),r&&this.trackIdToTrackType.set(r.id,o)},this.syncPublishOptions=async()=>{for(const s of this.publishOptions){const{trackType:r}=s;if(!this.isPublishing(r)||this.transceiverCache.has(s))continue;const o=this.transceiverCache.find(u=>!!u.transceiver.sender.track&&u.publishOption.trackType===r);if(!o||!o.transceiver)continue;const l=this.cloneTrack(o.transceiver.sender.track);await this.addTransceiver(l,s)}for(const s of this.transceiverCache.items()){const{publishOption:r,transceiver:o}=s;this.publishOptions.some(u=>u.id===r.id&&u.trackType===r.trackType)||(this.stopTrack(o.sender.track),await this.updateTransceiver(o,null,r.trackType))}},this.isPublishing=s=>{for(const r of this.transceiverCache.items()){if(s&&r.publishOption.trackType!==s)continue;const o=r.transceiver.sender.track;if(o&&o.readyState==="live"&&o.enabled)return!0}return!1},this.stopTracks=(...s)=>{for(const r of this.transceiverCache.items()){const{publishOption:o,transceiver:l}=r;s.includes(o.trackType)&&this.stopTrack(l.sender.track)}},this.stopAllTracks=()=>{for(const{transceiver:s}of this.transceiverCache.items())this.stopTrack(s.sender.track);for(const s of this.clonedTracks)this.stopTrack(s)},this.changePublishQuality=async s=>{const{trackType:r,layers:o,publishOptionId:l}=s,u=o.filter(w=>w.active),h="Update publish quality:";this.logger("info",`${h} requested layers by SFU:`,u);const d=this.transceiverCache.find(w=>w.publishOption.id===l&&w.publishOption.trackType===r),m=d?.transceiver.sender;if(!m)return this.logger("warn",`${h} no video sender found.`);const b=m.getParameters();if(b.encodings.length===0)return this.logger("warn",`${h} there are no encodings set.`);const g=d?.publishOption.codec?.name,v=g&&$m(g);let S=!1;for(const w of b.encodings){const R=v?u[0]:u.find(G=>G.name===w.rid)??(b.encodings.length===1?u[0]:void 0),O=!!R?.active;if(O!==w.active&&(w.active=O,S=!0),!R)continue;const{maxFramerate:k,scaleResolutionDownBy:D,maxBitrate:P,scalabilityMode:H}=R;D>=1&&D!==w.scaleResolutionDownBy&&(w.scaleResolutionDownBy=D,S=!0),P>0&&P!==w.maxBitrate&&(w.maxBitrate=P,S=!0),k>0&&k!==w.maxFramerate&&(w.maxFramerate=k,S=!0),H&&H!==w.scalabilityMode&&(w.scalabilityMode=H,S=!0)}const T=b.encodings.filter(w=>w.active);if(!S)return this.logger("info",`${h} no change:`,T);await m.setParameters(b),this.logger("info",`${h} enabled rids:`,T)},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const s=this.pc.signalingState;if(this.isIceRestarting||s==="have-local-offer"){this.logger("debug","ICE restart is already in progress");return}await this.negotiate({iceRestart:!0})},this.negotiate=async s=>In(`publisher.negotiate.${this.lock}`,async()=>{const r=await this.pc.createOffer(s),o=this.getAnnouncedTracks(r.sdp);if(!o.length)throw new Error("Can't negotiate without any tracks");try{this.isIceRestarting=s?.iceRestart??!1,await this.pc.setLocalDescription(r);const{sdp:l=""}=r,{response:u}=await this.sfuClient.setPublisher({sdp:l,tracks:o});if(u.error)throw new $g(u.error);const{sdp:h}=u;await this.pc.setRemoteDescription({type:"answer",sdp:h})}catch(l){throw this.pc.signalingState==="have-local-offer"&&await this.pc.setLocalDescription({type:"rollback"}),l}finally{this.isIceRestarting=!1}this.addTrickledIceCandidates()}),this.getPublishedTracks=()=>{const s=[];for(const{transceiver:r}of this.transceiverCache.items()){const o=r.sender.track;o&&o.readyState==="live"&&s.push(o)}return s},this.getAnnouncedTracks=s=>{const r=[];for(const o of this.transceiverCache.items()){const{transceiver:l,publishOption:u}=o;l.sender.track&&r.push(this.toTrackInfo(l,u,s))}return r},this.getAnnouncedTracksForReconnect=()=>{const s=this.pc.localDescription?.sdp,r=[];for(const o of this.publishOptions){const l=this.transceiverCache.get(o);!l||!l.sender.track||r.push(this.toTrackInfo(l,o,s))}return r},this.toTrackInfo=(s,r,o)=>{const l=s.sender.track,u=l.readyState==="live",h=u?LT(l,r):this.transceiverCache.getLayers(r);this.transceiverCache.setLayers(r,h);const d=qg(r.trackType),m=d&&l.getSettings().channelCount===2,b=this.transceiverCache.indexOf(s),g=this.state.settings?.audio;return{trackId:l.id,layers:HU(h),trackType:r.trackType,mid:KU(s,b,o),stereo:m,dtx:d&&!!g?.opus_dtx_enabled,red:d&&!!g?.redundant_coding_enabled,muted:!u,codec:r.codec,publishOptionId:r.id}},this.cloneTrack=s=>{const r=s.clone();return this.clonedTracks.add(r),r},this.stopTrack=s=>{s&&(s.stop(),this.clonedTracks.delete(s))},this.publishOptions=e,this.on("iceRestart",s=>{s.peerType===Ft.PUBLISHER_UNSPECIFIED&&this.tryRestartIce()}),this.on("changePublishQuality",async s=>{for(const r of s.videoSenders)await this.changePublishQuality(r)}),this.on("changePublishOptions",s=>(this.publishOptions=s.publishOptions,this.syncPublishOptions()))}dispose(){super.dispose(),this.stopAllTracks(),this.clonedTracks.clear()}}class XU extends kx{constructor(e){super(Ft.SUBSCRIBER,e),this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),this.pc.signalingState==="have-remote-offer"){this.logger("debug","ICE restart is already in progress");return}if(this.pc.connectionState==="new"){this.logger("debug","ICE connection is not yet established, skipping restart.");return}const n=this.isIceRestarting;this.isIceRestarting=!0;try{const{response:s}=await this.sfuClient.iceRestart({peerType:Ft.SUBSCRIBER});if(s.error)throw new $g(s.error)}catch(s){throw this.isIceRestarting=n,s}},this.handleOnTrack=n=>{const[s]=n.streams,[r,o]=s.id.split(":"),l=this.state.participants.find(b=>b.trackLookupPrefix===r);this.logger("debug",`[onTrack]: Got remote ${o} track for userId: ${l?.userId}`,n.track.id,n.track);const u=`${l?.userId} ${o}:${r}`;n.track.addEventListener("mute",()=>{this.logger("info",`[onTrack]: Track muted: ${u}`)}),n.track.addEventListener("unmute",()=>{this.logger("info",`[onTrack]: Track unmuted: ${u}`)}),n.track.addEventListener("ended",()=>{this.logger("info",`[onTrack]: Track ended: ${u}`),this.state.removeOrphanedTrack(s.id)});const h=BU(o);if(!h)return this.logger("error",`Unknown track type: ${o}`);if(this.trackIdToTrackType.set(n.track.id,h),!l){this.logger("warn",`[onTrack]: Received track for unknown participant: ${r}`,n),this.state.registerOrphanedTrack({id:s.id,trackLookupPrefix:r,track:s,trackType:h});return}const d=zg(h);if(!d){this.logger("error",`Unknown track type: ${o}`);return}const m=l[d];this.state.updateParticipant(l.sessionId,{[d]:s}),m&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${n.track.kind} tracks for userId: ${l.userId}`),m.getTracks().forEach(b=>{b.stop(),m.removeTrack(b)}))},this.negotiate=async n=>{await this.pc.setRemoteDescription({type:"offer",sdp:n.sdp}),this.addTrickledIceCandidates();const s=await this.pc.createAnswer();s.sdp&&(s.sdp=YU(n.sdp,s.sdp)),await this.pc.setLocalDescription(s),await this.sfuClient.sendAnswer({peerType:Ft.SUBSCRIBER,sdp:s.sdp||""}),this.isIceRestarting=!1},this.pc.addEventListener("track",this.handleOnTrack),this.on("subscriberOffer",async n=>this.negotiate(n).catch(s=>{this.logger("error","Negotiation failed.",s)}))}detachEventHandlers(){super.detachEventHandlers(),this.pc.removeEventListener("track",this.handleOnTrack)}}const QU=t=>{const{endpoint:e,onMessage:n,logTag:s}=t,r=Ze(["SfuClientWS",s]);r("debug","Creating signaling WS channel:",e);const o=new WebSocket(e);return o.binaryType="arraybuffer",o.addEventListener("error",l=>{r("error","Signaling WS channel error",l)}),o.addEventListener("close",l=>{r("info","Signaling WS channel is closed",l)}),o.addEventListener("open",l=>{r("info","Signaling WS channel is open",l)}),o.addEventListener("message",l=>{try{const u=l.data instanceof ArrayBuffer?ET.fromBinary(new Uint8Array(l.data)):ET.fromJsonString(l.data.toString());n(u)}catch(u){r("error","Failed to decode a message. Check whether the Proto models match.",{event:l,error:u})}}),o},WU=t=>({bundlePolicy:"max-bundle",iceServers:t.map(e=>({urls:e.urls,username:e.username,credential:e.password}))});function wc(t){let e=!0;const n=t.then(r=>({status:"resolved",result:r}),r=>({status:"rejected",error:r})).finally(()=>e=!1),s=()=>n.then(r=>{if(r.status==="rejected")throw r.error;return r.result});return s.checkPending=()=>e,s}const ic=()=>{let t,e;const n=new Promise((u,h)=>{t=u,e=h});let s=!1,r=!1;return{promise:n,resolve:u=>{s=!0,t(u)},reject:u=>{r=!0,e(u)},isResolved:()=>s,isRejected:()=>r}},jT=Symbol("uninitialized");function Nr(t){let e=jT;return()=>(e===jT&&(e=t()),e)}const ZU={src:`const timerIdMapping = new Map();
self.addEventListener('message', (event) => {
    const request = event.data;
    switch (request.type) {
        case 'setTimeout':
        case 'setInterval':
            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {
                tick(request.id);
                if (request.type === 'setTimeout') {
                    timerIdMapping.delete(request.id);
                }
            }, request.timeout));
            break;
        case 'clearTimeout':
        case 'clearInterval':
            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));
            timerIdMapping.delete(request.id);
            break;
    }
});
function tick(id) {
    const message = { type: 'tick', id };
    self.postMessage(message);
}`};class e3{constructor(){this.currentTimerId=1,this.callbacks=new Map,this.fallback=!1}setup({useTimerWorker:e=!0}={}){if(!e){this.fallback=!0;return}try{const n=ZU.src,s=new Blob([n],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(s);this.worker=new Worker(r,{name:"str-timer-worker"}),this.worker.addEventListener("message",o=>{const{type:l,id:u}=o.data;l==="tick"&&this.callbacks.get(u)?.()})}catch(n){Ze(["timer-worker"])("error",n),this.fallback=!0}}destroy(){this.callbacks.clear(),this.worker?.terminate(),this.worker=void 0,this.fallback=!1}get ready(){return this.fallback||!!this.worker}setInterval(e,n){return this.setTimer("setInterval",e,n)}clearInterval(e){this.clearTimer("clearInterval",e)}setTimeout(e,n){return this.setTimer("setTimeout",e,n)}clearTimeout(e){this.clearTimer("clearTimeout",e)}setTimer(e,n,s){if(this.ready||this.setup(),this.fallback)return(e==="setTimeout"?setTimeout:setInterval)(n,s);const r=this.getTimerId();return this.callbacks.set(r,()=>{n(),e==="setTimeout"&&this.callbacks.delete(r)}),this.sendMessage({type:e,id:r,timeout:s}),r}clearTimer(e,n){if(n){if(this.ready||this.setup(),this.fallback){(e==="clearTimeout"?clearTimeout:clearInterval)(n);return}this.callbacks.delete(n),this.sendMessage({type:e,id:n})}}getTimerId(){return this.currentTimerId++}sendMessage(e){if(!this.worker)throw new Error("Cannot use timer worker before it's set up");this.worker.postMessage(e)}}let Ox=!1;const t3=()=>{Ox=!0},uf=Nr(()=>{const t=new e3;return t.setup({useTimerWorker:Ox}),t});class On{constructor({dispatcher:e,credentials:n,sessionId:s,logTag:r,joinResponseTimeout:o=5e3,onSignalClose:l,streamClient:u,enableTracing:h}){this.iceTrickleBuffer=new aU,this.isLeaving=!1,this.isClosingClean=!1,this.pingIntervalInMs=5*1e3,this.unhealthyTimeoutInMs=15*1e3,this.joinResponseTask=ic(),this.abortController=new AbortController,this.createWebSocket=()=>{const b={callEnded:!0,changePublishQuality:!0,changePublishOptions:!0,connectionQualityChanged:!0,error:!0,goAway:!0};this.signalWs=QU({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:g=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck();const v=g.eventPayload.oneofKind;b[v]&&this.tracer?.trace(v,g),this.dispatcher.dispatch(g,this.logTag)}}),this.signalReady=wc(Promise.race([new Promise((g,v)=>{const S=()=>{this.signalWs.removeEventListener("open",S),g(this.signalWs)};this.signalWs.addEventListener("open",S),this.signalWs.addEventListener("close",T=>{this.handleWebSocketClose(T),v(new Error("SFU WS closed or connection can't be established"))})}),new Promise((g,v)=>{setTimeout(()=>v(new Error("SFU WS connection timed out")),this.joinResponseTimeout)})]))},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.handleWebSocketClose=b=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose),uf().clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),this.onSignalClose?.(`${b.code} ${b.reason}`)},this.close=(b=On.NORMAL_CLOSURE,g)=>{this.isClosingClean=b!==On.ERROR_CONNECTION_UNHEALTHY,this.signalWs.readyState===WebSocket.OPEN&&(this.logger("debug",`Closing SFU WS connection: ${b} - ${g}`),this.signalWs.close(b,`js-client: ${g}`),this.cleanUpWebSocket()),this.dispose()},this.dispose=()=>{this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),this.migrationTask?.resolve(),this.iceTrickleBuffer.dispose()},this.getTrace=()=>this.tracer?.take(),this.leaveAndClose=async b=>{try{this.isLeaving=!0,await this.joinTask,await this.notifyLeave(b)}catch(g){this.logger("debug","Error notifying SFU about leaving call",g)}this.close(On.NORMAL_CLOSURE,b.substring(0,115))},this.updateSubscriptions=async b=>(await this.joinTask,Pi(()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:b}),this.abortController.signal)),this.setPublisher=async b=>(await this.joinTask,Pi(()=>this.rpc.setPublisher({...b,sessionId:this.sessionId}),this.abortController.signal)),this.sendAnswer=async b=>(await this.joinTask,Pi(()=>this.rpc.sendAnswer({...b,sessionId:this.sessionId}),this.abortController.signal)),this.iceTrickle=async b=>(await this.joinTask,Pi(()=>this.rpc.iceTrickle({...b,sessionId:this.sessionId}),this.abortController.signal)),this.iceRestart=async b=>(await this.joinTask,Pi(()=>this.rpc.iceRestart({...b,sessionId:this.sessionId}),this.abortController.signal)),this.updateMuteStates=async b=>(await this.joinTask,Pi(()=>this.rpc.updateMuteStates({muteStates:b,sessionId:this.sessionId}),this.abortController.signal)),this.sendStats=async b=>(await this.joinTask,this.rpc.sendStats({...b,sessionId:this.sessionId})),this.startNoiseCancellation=async()=>(await this.joinTask,Pi(()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,Pi(()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.enterMigration=async(b={})=>{this.isLeaving=!0;const{timeout:g=7*1e3}=b;this.migrationTask?.reject(new Error("Cancelled previous migration"));const v=this.migrationTask=ic(),S=this.dispatcher.on("participantMigrationComplete",()=>{S(),clearTimeout(this.migrateAwayTimeout),v.resolve()});return this.migrateAwayTimeout=setTimeout(()=>{S(),v.reject(new Error(`Migration (${this.logTag}) failed to complete in ${g}ms`))},g),v.promise},this.join=async b=>{await this.signalReady(),(this.joinResponseTask.isResolved()||this.joinResponseTask.isRejected())&&(this.joinResponseTask=ic());const g=this.joinResponseTask;let v;const S=this.dispatcher.on("joinResponse",w=>{this.logger("debug","Received joinResponse",w),clearTimeout(v),S(),this.keepAlive(),g.resolve(w)});v=setTimeout(()=>{S(),g.reject(new Error('Waiting for "joinResponse" has timed out'))},this.joinResponseTimeout);const T=Qo.create({requestPayload:{oneofKind:"joinRequest",joinRequest:yx.create({...b,sessionId:this.sessionId,token:this.credentials.token})}});return this.tracer?.trace("joinRequest",T),await this.send(T),g.promise},this.ping=async()=>this.send(Qo.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async b=>this.send(Qo.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:b}}})),this.send=async b=>{await this.signalReady();const g=Qo.toJson(b);if(this.signalWs.readyState!==WebSocket.OPEN){this.logger("debug","Signal WS is not open. Skipping message",g);return}this.logger("debug",`Sending message to: ${this.edgeName}`,g),this.signalWs.send(Qo.toBinary(b))},this.keepAlive=()=>{const b=uf();b.clearInterval(this.keepAliveInterval),this.keepAliveInterval=b.setInterval(()=>{this.ping().catch(g=>{this.logger("error","Error sending healthCheckRequest to SFU",g)})},this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout(()=>{this.lastMessageTimestamp&&new Date().getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(On.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)},this.unhealthyTimeoutInMs)},this.dispatcher=e,this.sessionId=s||Bm(),this.onSignalClose=l,this.credentials=n;const{server:d,token:m}=n;this.edgeName=d.edge_name,this.joinResponseTimeout=o,this.logTag=r,this.logger=Ze(["SfuClient",r]),this.tracer=h?new Hg(`${r}-${this.edgeName}`):void 0,this.rpc=QM({baseUrl:d.url,interceptors:[YM({Authorization:`Bearer ${m}`}),this.tracer&&XM(this.tracer.trace),Vm()==="trace"&&JM(this.logger,"trace")].filter(b=>!!b)}),this.unsubscribeIceTrickle=e.on("iceTrickle",b=>{this.iceTrickleBuffer.push(b)}),this.unsubscribeNetworkChanged=u.on("network.changed",b=>{b.online?this.networkAvailableTask?.resolve():this.networkAvailableTask=ic()}),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN&&this.joinResponseTask.isResolved()}get joinTask(){return this.joinResponseTask.promise}}On.NORMAL_CLOSURE=1e3;On.ERROR_CONNECTION_UNHEALTHY=4001;On.DISPOSE_OLD_SOCKET=4100;On.JOIN_FAILED=4101;const n3=t=>async function(n){if(n.user.id===t.currentUserId)return;const{state:s}=t;n.call.created_by.id===t.currentUserId&&s.callingState===de.RINGING&&await t.join()},s3=t=>async function(n){if(n.user.id===t.currentUserId)return;const{call:s}=n,{session:r}=s;if(!r){t.logger("warn","No call session provided. Ignoring call.rejected event.",n);return}const o=r.rejected_by,{members:l,callingState:u}=t.state;if(u!==de.RINGING){t.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",n);return}t.isCreatedByMe?l.filter(d=>d.user_id!==t.currentUserId).every(d=>o[d.user_id])&&(t.logger("info","everyone rejected, leaving the call"),await t.leave({reject:!0,reason:"cancel",message:"ring: everyone rejected"})):o[s.created_by.id]&&(t.logger("info","call creator rejected, leaving call"),await t.leave({message:"ring: creator rejected"}))},i3=t=>function(){const{callingState:n}=t.state;n!==de.IDLE&&n!==de.LEFT&&t.leave({message:"call.ended event received",reject:!1}).catch(s=>{t.logger("error","Failed to leave call after call.ended ",s)})},r3=t=>t.on("callEnded",async e=>{if(t.state.callingState!==de.LEFT)try{if(e.reason===Da.LIVE_ENDED){t.state.setBackstage(!0);const{hasPermission:s}=t.permissionsContext;if(s(we.JOIN_BACKSTAGE))return}t.state.setEndedAt(new Date);const n=Da[e.reason];await t.leave({message:`callEnded received: ${n}`})}catch(n){t.logger("error","Failed to leave call after being ended by the SFU",n)}}),a3=t=>function(n){const{currentGrants:s}=n;if(s){const{canPublishAudio:r,canPublishVideo:o,canScreenshare:l}=s,u={[we.SEND_AUDIO]:r,[we.SEND_VIDEO]:o,[we.SCREENSHARE]:l},h=t.ownCapabilities.filter(d=>u[d]!==!1);Object.entries(u).forEach(([d,m])=>{m&&!h.includes(d)&&h.push(d)}),t.setOwnCapabilities(h)}},o3=(t,e)=>t.on("connectionQualityChanged",n=>{const{connectionQualityUpdates:s}=n;s&&e.updateParticipants(s.reduce((r,o)=>{const{sessionId:l,connectionQuality:u}=o;return r[l]={connectionQuality:u},r},{}))}),c3=(t,e)=>t.on("healthCheckResponse",n=>{const{participantCount:s}=n;s&&(e.setParticipantCount(s.total),e.setAnonymousParticipantCount(s.anonymous))}),l3=(t,e)=>t.on("error",n=>{n.error&&n.error.code!==xr.LIVE_ENDED||(e.state.setBackstage(!0),e.permissionsContext.hasPermission(we.JOIN_BACKSTAGE)||e.leave({message:"live ended"}).catch(s=>{e.logger("error","Failed to leave call after live ended",s)}))}),u3=t=>t.on("error",e=>{if(!e.error)return;const n=Ze(["SfuClient"]),{error:s,reconnectStrategy:r}=e;n("error","SFU reported error",{code:xr[s.code],reconnectStrategy:De[r],message:s.message,shouldRetry:s.shouldRetry})}),f3=t=>function(n){const{pins:s}=n;t.setServerSidePins(s)},d3=t=>t.on("trackUnpublished",async e=>{const{cause:n,type:s,sessionId:r}=e,{localParticipant:o}=t.state;if(n===Sc.MODERATION&&r===o?.sessionId){const l=t.logger;l("info",`Local participant's ${ae[s]} track is muted remotely`);try{s===ae.VIDEO?await t.camera.disable():s===ae.AUDIO?await t.microphone.disable():s===ae.SCREEN_SHARE||s===ae.SCREEN_SHARE_AUDIO?await t.screenShare.disable():l("warn","Unsupported track type to soft mute",ae[s])}catch(u){l("error","Failed to stop publishing",u)}}}),Bu=(t,...e)=>{for(const n of e)t.includes(n)||t.push(n);return t},h3=t=>function(n){const{participant:s}=n;if(!s)return;const r=Gg(t,s);t.updateOrAddParticipant(s.sessionId,Object.assign(s,r,{viewportVisibilityState:{videoTrack:Et.UNKNOWN,screenShareTrack:Et.UNKNOWN}}))},p3=t=>function(n){const{participant:s}=n;s&&t.setParticipants(r=>r.filter(o=>o.sessionId!==s.sessionId))},m3=t=>function(n){const{participant:s}=n;s&&t.updateParticipant(s.sessionId,s)},g3=t=>function(n){const{type:s,sessionId:r}=n;if(n.participant){const o=Gg(t,n.participant),l=Object.assign(n.participant,o);t.updateOrAddParticipant(r,l)}else t.updateParticipant(r,o=>({publishedTracks:Bu([...o.publishedTracks],s)}))},y3=t=>function(n){const{type:s,sessionId:r}=n;if(n.participant){const o=Gg(t,n.participant),l=Object.assign(n.participant,o);t.updateOrAddParticipant(r,l)}else t.updateParticipant(r,o=>({publishedTracks:o.publishedTracks.filter(l=>l!==s)}))},Gg=(t,e)=>{const n=t.takeOrphanedTracks(e.trackLookupPrefix);if(!n.length)return;const s={};for(const r of n){const o=zg(r.trackType);o&&(s[o]=r.track)}return s},b3=(t,e)=>t.on("dominantSpeakerChanged",n=>{const{sessionId:s}=n;s!==e.dominantSpeaker?.sessionId&&e.setParticipants(r=>r.map(o=>o.sessionId===s?{...o,isDominantSpeaker:!0}:o.isDominantSpeaker?{...o,isDominantSpeaker:!1}:o))}),v3=(t,e)=>t.on("audioLevelChanged",n=>{const{audioLevels:s}=n;e.updateParticipants(s.reduce((r,o)=>(r[o.sessionId]={audioLevel:o.level,isSpeaking:o.isSpeaking},r),{}))}),S3=(t,e)=>{const n=t.state,s=[t.on("call.ended",i3(t)),r3(t),l3(e,t),u3(e),o3(e,n),c3(e,n),t.on("participantJoined",h3(n)),t.on("participantLeft",p3(n)),t.on("participantUpdated",m3(n)),t.on("trackPublished",g3(n)),t.on("trackUnpublished",y3(n)),v3(e,n),b3(e,n),t.on("callGrantsUpdated",a3(n)),t.on("pinsUpdated",f3(n)),d3(t)];return t.ringing&&s.push(Ax(t)),()=>{s.forEach(r=>r())}},Ax=t=>{const e={"call.accepted":n3(t),"call.rejected":s3(t)},n=Object.keys(e).map(s=>{const r=s;return t.on(r,e[r])});return()=>{n.forEach(s=>s())}},T3=.35;class C3{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(e,n)=>{const s=()=>{this.observer?.disconnect(),this.observer=null,this.elementHandlerMap.clear()};return this.observer=new IntersectionObserver(r=>{r.forEach(o=>{this.elementHandlerMap.get(o.target)?.(o)})},{root:e,...n,threshold:n?.threshold??T3}),this.queueSet.size&&(this.queueSet.forEach(([r,o])=>{e.contains(r)&&(this.observer.observe(r),this.elementHandlerMap.set(r,o))}),this.queueSet.clear()),s},this.observe=(e,n)=>{const s=[e,n],r=()=>{this.elementHandlerMap.delete(e),this.observer?.unobserve(e),this.queueSet.delete(s)};return this.elementHandlerMap.has(e)?r:this.observer?(this.observer.root.contains(e)&&(this.elementHandlerMap.set(e,n),this.observer.observe(e)),r):(this.queueSet.add(s),r)}}}const MT={videoTrack:Et.UNKNOWN,screenShareTrack:Et.UNKNOWN},hu=Symbol("globalOverrideKey");class w3{constructor(e,n){this.viewportTracker=new C3,this.logger=Ze(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new je({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(fn(s=>{const{[hu]:r,...o}=s;return{enabled:r?.enabled!==!1,preferredResolution:r?.enabled?r.dimension:void 0,participants:Object.fromEntries(Object.entries(o).map(([l,u])=>[l,{enabled:u?.enabled!==!1,preferredResolution:u?.enabled?u.dimension:void 0}])),isParticipantVideoEnabled:l=>s[l]?.enabled??s[hu]?.enabled??!0}}),tn(1)),this.dispose=async()=>{this.pendingSubscriptionsUpdate&&clearTimeout(this.pendingSubscriptionsUpdate);const s=this.getOrCreateAudioContext();s&&s.state!=="closed"&&(document.removeEventListener("click",this.resumeAudioContext),await s.close(),this.audioContext=void 0)},this.setVideoTrackSubscriptionOverrides=(s,r)=>r?Bt(this.videoTrackSubscriptionOverridesSubject,o=>({...o,...Object.fromEntries(r.map(l=>[l,s]))})):Bt(this.videoTrackSubscriptionOverridesSubject,s?{[hu]:s}:{}),this.applyTrackSubscriptions=(s=Rs.SLOW)=>{this.pendingSubscriptionsUpdate&&clearTimeout(this.pendingSubscriptionsUpdate);const r=()=>{this.pendingSubscriptionsUpdate=null,this.sfuClient?.updateSubscriptions(this.trackSubscriptions).catch(o=>{this.logger("debug","Failed to update track subscriptions",o)})};s?this.pendingSubscriptionsUpdate=setTimeout(r,s):r()},this.trackElementVisibility=(s,r,o)=>{const l=this.viewportTracker.observe(s,u=>{this.callState.updateParticipant(r,h=>{const d=h.viewportVisibilityState??MT,m=u.isIntersecting||document.fullscreenElement===s?Et.VISIBLE:Et.INVISIBLE;return{...h,viewportVisibilityState:{...d,[o]:m}}})});return()=>{l(),this.callState.updateParticipant(r,u=>{const h=u.viewportVisibilityState??MT;return{...u,viewportVisibilityState:{...h,[o]:Et.UNKNOWN}}})}},this.setViewport=s=>this.viewportTracker.setViewport(s),this.bindVideoElement=(s,r,o)=>{const l=this.callState.findParticipantBySessionId(r);if(!l)return;const u=(T,w)=>{w&&(w.width===0||w.height===0)&&(this.logger("debug","Ignoring 0x0 dimension",l),w=void 0),this.callState.updateParticipantTracks(o,{[r]:{dimension:w}}),this.applyTrackSubscriptions(T)},h=this.callState.participants$.pipe(fn(T=>T.find(w=>w.sessionId===r)),Lm(T=>!!T),yn(),tn({bufferSize:1,refCount:!0}));let d;const m=l.isLocalParticipant?null:h.pipe(fn(T=>T.viewportVisibilityState?.[o]),yn()).subscribe(T=>{if(!d){d=T??Et.UNKNOWN;return}if(d=T??Et.UNKNOWN,T===Et.INVISIBLE)return u(Rs.MEDIUM,void 0);u(Rs.MEDIUM,{width:s.clientWidth,height:s.clientHeight})});let b;const g=l.isLocalParticipant?null:new ResizeObserver(()=>{const T={width:s.clientWidth,height:s.clientHeight};if(!b){b=T;return}if(b.width===T.width&&b.height===T.height||d===Et.INVISIBLE)return;const R=Math.max(T.width/b.width,T.height/b.height)>1.2?Rs.IMMEDIATE:Rs.MEDIUM;u(R,{width:s.clientWidth,height:s.clientHeight}),b=T});g?.observe(s);const v=l.isLocalParticipant?null:h.pipe(uu("publishedTracks"),fn(T=>o==="videoTrack"?fs(T):ds(T)),yn()).subscribe(T=>{T?u(Rs.IMMEDIATE,{width:s.clientWidth,height:s.clientHeight}):u(Rs.FAST,void 0)});s.autoplay=!0,s.playsInline=!0,s.muted=!0;const S=h.pipe(uu(o==="videoTrack"?"videoStream":"screenShareStream")).subscribe(T=>{const w=o==="videoTrack"?T.videoStream:T.screenShareStream;s.srcObject!==w&&(s.srcObject=w??null,(Hm()||Xf())&&setTimeout(()=>{s.srcObject=w??null,s.play().catch(R=>{this.logger("warn","Failed to play stream",R)})},25))});return()=>{u(Rs.FAST,void 0),m?.unsubscribe(),v?.unsubscribe(),S.unsubscribe(),g?.disconnect()}},this.bindAudioElement=(s,r,o)=>{const l=this.callState.findParticipantBySessionId(r);if(!l||l.isLocalParticipant)return;const u=this.callState.participants$.pipe(fn(S=>S.find(T=>T.sessionId===r)),Lm(S=>!!S),yn(),tn({bufferSize:1,refCount:!0})),h=(S,T)=>{S&&("setSinkId"in s&&s.setSinkId(S).catch(w=>{this.logger("warn","Can't to set AudioElement sinkId",w)}),T&&"setSinkId"in T&&T.setSinkId(S).catch(w=>{this.logger("warn","Can't to set AudioContext sinkId",w)}))};let d,m;const b=u.pipe(uu(o==="screenShareAudioTrack"?"screenShareAudioStream":"audioStream")).subscribe(S=>{const T=o==="screenShareAudioTrack"?S.screenShareAudioStream:S.audioStream;s.srcObject!==T&&setTimeout(()=>{if(s.srcObject=T??null,!T)return;const w=this.getOrCreateAudioContext();w?(s.muted=!0,d?.disconnect(),d=w.createMediaStreamSource(T),m??(m=w.createGain()),m.gain.value=S.audioVolume??this.speaker.state.volume,d.connect(m).connect(w.destination),this.resumeAudioContext()):(s.muted=!1,s.play().catch(O=>{this.logger("warn","Failed to play audio stream",O)}));const{selectedDevice:R}=this.speaker.state;R&&h(R,w)})}),g="setSinkId"in s?this.speaker.state.selectedDevice$.subscribe(S=>{const T=this.getOrCreateAudioContext();h(S,T)}):null,v=Er([this.speaker.state.volume$,u.pipe(uu("audioVolume"))]).subscribe(([S,T])=>{const w=T.audioVolume??S;s.volume=w,m&&(m.gain.value=w)});return s.autoplay=!0,()=>{g?.unsubscribe(),v.unsubscribe(),b.unsubscribe(),s.srcObject=null,d?.disconnect(),m?.disconnect()}},this.getOrCreateAudioContext=()=>{if(this.audioContext||!Hm())return this.audioContext;const s=new AudioContext;return s.state==="suspended"&&document.addEventListener("click",this.resumeAudioContext),this.audioContext=s},this.resumeAudioContext=()=>{this.audioContext?.state==="suspended"&&this.audioContext.resume().catch(s=>this.logger("warn","Can't resume audio context",s)).then(()=>{document.removeEventListener("click",this.resumeAudioContext)})},this.callState=e,this.speaker=n}setSfuClient(e){this.sfuClient=e}get trackSubscriptions(){const e=[];for(const n of this.callState.remoteParticipants){if(n.videoDimension&&fs(n)){const s=this.videoTrackSubscriptionOverrides[n.sessionId]??this.videoTrackSubscriptionOverrides[hu];s?.enabled!==!1&&e.push({userId:n.userId,sessionId:n.sessionId,trackType:ae.VIDEO,dimension:s?.dimension??n.videoDimension})}n.screenShareDimension&&ds(n)&&e.push({userId:n.userId,sessionId:n.sessionId,trackType:ae.SCREEN_SHARE,dimension:n.screenShareDimension}),zf(n)&&e.push({userId:n.userId,sessionId:n.sessionId,trackType:ae.SCREEN_SHARE_AUDIO})}return e}get videoTrackSubscriptionOverrides(){return Rt(this.videoTrackSubscriptionOverrides$)}}class E3{constructor(){this.permissions=[],this.setPermissions=e=>{this.permissions=e||[]},this.setCallSettings=e=>{this.settings=e},this.hasPermission=e=>this.permissions.includes(e),this.canPublish=e=>{switch(e){case ae.AUDIO:return this.hasPermission(we.SEND_AUDIO);case ae.VIDEO:return this.hasPermission(we.SEND_VIDEO);case ae.SCREEN_SHARE:case ae.SCREEN_SHARE_AUDIO:return this.hasPermission(we.SCREENSHARE);case ae.UNSPECIFIED:return!1;default:Cc(e,"Unknown track type")}},this.canRequest=(e,n=this.settings)=>{if(!n)return!1;const{audio:s,video:r,screensharing:o}=n;switch(e){case we.SEND_AUDIO:return s.access_request_enabled;case we.SEND_VIDEO:return r.access_request_enabled;case we.SCREENSHARE:return o.access_request_enabled;default:return!1}}}}class rc{constructor(e,n={sortParticipantsBy:Tc}){this.name=e,this.options=n}}class x3{constructor(e){this.register=n=>{this.callTypes[n.name]=n},this.unregister=n=>{delete this.callTypes[n]},this.get=n=>(this.callTypes[n]||this.register(new rc(n)),this.callTypes[n]),this.callTypes=e.reduce((n,s)=>(n[s.name]=s,n),{})}}const Nx=new x3([new rc("default",{sortParticipantsBy:Tc}),new rc("development",{sortParticipantsBy:Tc}),new rc("livestream",{sortParticipantsBy:OT}),new rc("audio_room",{sortParticipantsBy:OT})]);class Dx{constructor(e){this.permission=e,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=Ze(["permissions"]);const n=this.disposeController.signal;this.ready=(async()=>{const s=()=>{Jt()?this.setState("granted"):this.setState("prompt")};if(!R3())return s();try{const r=await navigator.permissions.query({name:e.queryName});n.aborted||(this.setState(r.state),r.addEventListener("change",()=>this.setState(r.state),{signal:n}))}catch(r){this.logger("debug","Failed to query permission status",r),s()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt({forcePrompt:e=!1,throwOnNotAllowed:n=!1}={}){return await In(`permission-prompt-${this.permission.queryName}`,async()=>{if(await this.getState()!=="prompt"||this.wasPrompted&&!e){const s=this.state==="granted";if(!s&&n)throw new Error("Permission was not granted previously, and prompting again is not allowed");return s}try{this.wasPrompted=!0,this.setState("prompting");const s=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return P3(s),this.setState("granted"),!0}catch(s){if(s&&typeof s=="object"&&"name"in s&&(s.name==="NotAllowedError"||s.name==="SecurityError")){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),n)throw s;return!1}throw this.logger("error","Failed to getUserMedia",{error:s,permission:this.permission}),this.setState("prompt"),s}})}listen(e){return this.listeners.add(e),this.state&&e(this.state),()=>this.listeners.delete(e)}asObservable(){return this.getStateObservable().pipe(fn(e=>e!=="denied"))}asStateObservable(){return this.getStateObservable()}getIsPromptingObservable(){return this.getStateObservable().pipe(fn(e=>e==="prompting"))}getStateObservable(){return iL(e=>this.listen(e),(e,n)=>n())}setState(e){this.state!==e&&(this.state=e,this.listeners.forEach(n=>n(e)))}}function R3(){return!Jt()&&typeof navigator<"u"&&!!navigator.permissions?.query}const Kg=(t,e)=>Or((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some(r=>r.kind===e&&r.label==="")&&await t.prompt()&&(n=await navigator.mediaDevices.enumerateDevices()),n.filter(r=>r.kind===e&&r.label!==""&&r.deviceId!=="default")})()),_3=()=>typeof document>"u"?!1:"setSinkId"in document.createElement("audio"),Ix={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},Px={video:{width:1280,height:720}},La=Nr(()=>new Dx({constraints:Ix,queryName:"microphone"})),ff=Nr(()=>new Dx({constraints:Px,queryName:"camera"})),Qf=Nr(()=>navigator.mediaDevices.addEventListener?Pm(navigator.mediaDevices,"devicechange").pipe(fn(()=>{}),rL(500)):Or([])),k3=Nr(()=>Ng(Qf(),La().asObservable()).pipe(Vf(void 0),Ff(()=>Kg(La(),"audioinput")),tn(1))),O3=Nr(()=>Ng(Qf(),ff().asObservable()).pipe(Vf(void 0),Ff(()=>Kg(ff(),"videoinput")),tn(1))),A3=Nr(()=>Ng(Qf(),La().asObservable()).pipe(Vf(void 0),Ff(()=>Kg(La(),"audiooutput")),tn(1)));let N3=0;const Lx=async(t,e)=>{const n=`navigator.mediaDevices.getUserMedia.${N3++}.`;try{e?.trace(n,t);const s=await navigator.mediaDevices.getUserMedia(t);if(e?.trace(`${n}OnSuccess`,xx(s)),Xf()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t.video){const[r]=s.getVideoTracks();if(r){const{width:o,height:l}=r.getSettings(),u=t.video;(o!==u.width||l!==u.height)&&e?.trace(`${n}Warn`,`Requested resolution ${u.width}x${u.height} but got ${o}x${l}`)}}return s}catch(s){throw e?.trace(`${n}OnFailure`,s.name),s}};function jx(t){if(!t||typeof t!="object")return!1;if("name"in t&&typeof t.name=="string"){const e=t.name;if(["OverconstrainedError","NotFoundError"].includes(e))return!0}return!!("message"in t&&typeof t.message=="string"&&t.message.startsWith("OverconstrainedError"))}const Mx=async(t,e)=>{const n={audio:{...Ix.audio,...t}};try{return await La().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Lx(n,e)}catch(s){if(jx(s)&&t?.deviceId){const{deviceId:r,...o}=t;return Ze(["devices"])("warn","Failed to get audio stream, will try again with relaxed constraints",{error:s,constraints:n,relaxedConstraints:o}),Mx(o)}throw Ze(["devices"])("error","Failed to get audio stream",{error:s,constraints:n}),s}},Ux=async(t,e)=>{const n={video:{...Px.video,...t}};try{return await ff().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Lx(n,e)}catch(s){if(jx(s)&&t?.deviceId){const{deviceId:r,...o}=t;return Ze(["devices"])("warn","Failed to get video stream, will try again with relaxed constraints",{error:s,constraints:n,relaxedConstraints:o}),Ux(o)}throw Ze(["devices"])("error","Failed to get video stream",{error:s,constraints:n}),s}};let D3=0;const I3=async(t,e)=>{const n=`navigator.mediaDevices.getDisplayMedia.${D3++}.`;try{const s={systemAudio:"include",...t,video:typeof t?.video=="boolean"?t.video:{width:{max:2560},height:{max:1440},frameRate:{ideal:30},...t?.video},audio:typeof t?.audio=="boolean"?t.audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,...t?.audio}};e?.trace(n,s);const r=await navigator.mediaDevices.getDisplayMedia(s);return e?.trace(`${n}OnSuccess`,xx(r)),r}catch(s){throw e?.trace(`${n}OnFailure`,s.name),Ze(["devices"])("error","Failed to get screen share stream",s),s}},ja=typeof navigator<"u"&&typeof navigator.mediaDevices<"u"?Qf().pipe(Vf(void 0),Ff(()=>navigator.mediaDevices.enumerateDevices()),tn(1)):void 0,P3=t=>{t.active&&(t.getTracks().forEach(e=>{e.stop()}),typeof t.release=="function"&&t.release())};function L3(t,e){if(t!=="default")return t;const n=ja&&Rt(ja);if(!n)return t;const s=n.find(l=>l.deviceId===t);if(!s)return t;const r=s.groupId,o=n.filter(l=>l.kind===e&&l.deviceId!=="default"&&l.groupId===r);return o.length===1?o[0].deviceId:t}const Bx=()=>/Mobi/i.test(navigator.userAgent);class Yg{constructor(e,n,s){this.stopOnLeave=!0,this.subscriptions=[],this.areSubscriptionsSetUp=!1,this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach(r=>r()),this.subscriptions=[],this.areSubscriptionsSetUp=!1},this.call=e,this.state=n,this.trackType=s,this.logger=Ze([`${ae[s].toLowerCase()} manager`]),this.setup()}setup(){this.areSubscriptionsSetUp||(this.areSubscriptionsSetUp=!0,ja&&!Jt()&&(this.trackType===ae.AUDIO||this.trackType===ae.VIDEO)&&this.handleDisconnectedOrReplacedDevices())}listDevices(){return this.getDevices()}get enabled(){return this.state.status==="enabled"}async enable(){this.state.prevStatus=this.state.optimisticStatus,this.state.optimisticStatus!=="enabled"&&(this.state.setPendingStatus("enabled"),await zp(this.statusChangeConcurrencyTag,async e=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}}))}async disable(e=!1){this.state.prevStatus=this.state.optimisticStatus,!(!e&&this.state.optimisticStatus==="disabled")&&(this.state.setPendingStatus("disabled"),await zp(this.statusChangeConcurrencyTag,async n=>{try{const s=e||this.state.disableMode==="stop-tracks";await this.muteStream(s),this.state.setStatus("disabled")}finally{n.aborted||this.state.setPendingStatus(this.state.status)}}))}async statusChangeSettled(){await qp(this.statusChangeConcurrencyTag)}async resume(){this.state.prevStatus==="enabled"&&this.state.status!=="enabled"&&await this.enable()}async toggle(){return this.state.optimisticStatus==="enabled"?await this.disable():await this.enable()}registerFilter(e){const n={start:e,stop:void 0};return this.call.tracer.trace(`registerFilter.${ae[this.trackType]}`,null),{registered:In(this.filterRegistrationConcurrencyTag,async()=>{await qp(this.statusChangeConcurrencyTag),this.filters.push(n),await this.applySettingsToStream()}),unregister:()=>In(this.filterRegistrationConcurrencyTag,async()=>{await qp(this.statusChangeConcurrencyTag),n.stop?.(),this.filters=this.filters.filter(r=>r!==n),await this.applySettingsToStream()})}}setDefaultConstraints(e){this.state.setDefaultConstraints(e)}async select(e){if(Jt())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const n=this.state.selectedDevice;if(e!==n)try{this.state.setDevice(e),await this.applySettingsToStream()}catch(s){throw this.state.setDevice(n),s}}async applySettingsToStream(){await zp(this.statusChangeConcurrencyTag,async e=>{if(this.enabled)try{if(await this.muteStream(),this.state.setStatus("disabled"),e.aborted)return;await this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}})}publishStream(e){return this.call.publish(e,this.trackType)}stopPublishStream(){return this.call.stopPublish(this.trackType)}getTracks(){return this.state.mediaStream?.getTracks()??[]}async muteStream(e=!0){const n=this.state.mediaStream;if(!n)return;this.logger("debug",`${e?"Stopping":"Disabling"} stream`),this.call.state.callingState===de.JOINED&&await this.stopPublishStream(),this.muteLocalStream(e),this.getTracks().every(r=>r.readyState==="ended")&&(typeof n.release=="function"&&n.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach(r=>r.stop?.()))}disableTracks(){this.getTracks().forEach(e=>{e.enabled&&(e.enabled=!1)})}enableTracks(){this.getTracks().forEach(e=>{e.enabled||(e.enabled=!0)})}stopTracks(){this.getTracks().forEach(e=>{e.readyState==="live"&&e.stop()})}muteLocalStream(e){this.state.mediaStream&&(e?this.stopTracks():this.disableTracks())}async unmuteStream(){this.logger("debug","Starting stream");let e,n;if(this.state.mediaStream&&this.getTracks().every(s=>s.readyState==="live"))e=this.state.mediaStream,this.enableTracks();else{const r={...this.state.defaultConstraints,deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0},o=l=>async u=>{if(!l)return u;const h=await l;return u.getTracks().forEach(d=>{const m=d.stop;d.stop=function(){m.call(d),h.getTracks().forEach(g=>{g.kind===d.kind&&g.stop()})}}),h.getTracks().forEach(d=>{const m=()=>{u.getTracks().forEach(b=>{d.kind===b.kind&&(b.stop(),b.dispatchEvent(new Event("ended")))})};d.addEventListener("ended",m),this.subscriptions.push(()=>{d.removeEventListener("ended",m)})}),u};n=this.getStream(r),e=await this.filters.reduce((l,u)=>l.then(h=>{const{stop:d,output:m}=u.start(h);return u.stop=d,m}).then(o(l),h=>(this.logger("warn","Filter failed to start and will be ignored",h),l)),n)}if(this.call.state.callingState===de.JOINED&&await this.publishStream(e),this.state.mediaStream!==e){this.state.setMediaStream(e,await n);const s=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout(()=>{this.isTrackStoppedDueToTrackEnd=!1},2e3),await this.disable())},r=o=>()=>{!Bx()||this.trackType!==ae.VIDEO||this.call.notifyTrackMuteState(o,this.trackType).catch(l=>{this.logger("warn","Error while notifying track mute state",l)})};e.getTracks().forEach(o=>{const l=r(!0),u=r(!1);o.addEventListener("mute",l),o.addEventListener("unmute",u),o.addEventListener("ended",s),this.subscriptions.push(()=>{o.removeEventListener("mute",l),o.removeEventListener("unmute",u),o.removeEventListener("ended",s)})})}}get mediaDeviceKind(){return this.trackType===ae.AUDIO?"audioinput":this.trackType===ae.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(ss(Er([ja.pipe(oL()),this.state.selectedDevice$]),async([[e,n],s])=>{try{if(!s)return;await this.statusChangeSettled();let r=!1,o=!1;const l=this.findDevice(n,s),u=this.findDevice(e,s);!l&&u?r=!0:l&&u&&l.deviceId===u.deviceId&&l.groupId!==u.groupId&&(o=!0),r&&(await this.disable(),await this.select(void 0)),o&&(this.isTrackStoppedDueToTrackEnd&&this.state.status==="disabled"?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(r){this.logger("warn","Unexpected error while handling disconnected or replaced device",r)}}))}findDevice(e,n){const s=this.mediaDeviceKind;return e.find(r=>r.deviceId===n&&r.kind===s)}}class Jg{constructor(e="stop-tracks",n){this.disableMode=e,this.statusSubject=new je(void 0),this.optimisticStatusSubject=new je(void 0),this.mediaStreamSubject=new je(void 0),this.selectedDeviceSubject=new je(void 0),this.defaultConstraintsSubject=new je(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(yn()),this.status$=this.statusSubject.asObservable().pipe(yn()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(yn()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.hasBrowserPermission$=n?n.asObservable().pipe(tn(1)):lc(!0),this.browserPermissionState$=n?n.asStateObservable().pipe(tn(1)):lc("prompt"),this.isPromptingPermission$=n?n.getIsPromptingObservable().pipe(tn(1)):lc(!1)}get status(){return Rt(this.status$)}get optimisticStatus(){return Rt(this.optimisticStatus$)}get selectedDevice(){return Rt(this.selectedDevice$)}get mediaStream(){return Rt(this.mediaStream$)}setStatus(e){Bt(this.statusSubject,e)}setPendingStatus(e){Bt(this.optimisticStatusSubject,e)}setMediaStream(e,n){Bt(this.mediaStreamSubject,e),n&&this.setDevice(this.getDeviceIdFromStream(n))}setDevice(e){Bt(this.selectedDeviceSubject,e)}get defaultConstraints(){return Rt(this.defaultConstraints$)}setDefaultConstraints(e){Bt(this.defaultConstraintsSubject,e)}}class j3 extends Jg{constructor(){super("stop-tracks",ff()),this.directionSubject=new je(void 0),this.direction$=this.directionSubject.asObservable().pipe(yn())}get direction(){return Rt(this.direction$)}setDirection(e){Bt(this.directionSubject,e)}setMediaStream(e,n){if(super.setMediaStream(e,n),e){const s=Jt()?this.direction:e.getVideoTracks()[0]?.getSettings().facingMode==="environment"?"back":"front";this.setDirection(s)}}getDeviceIdFromStream(e){const[n]=e.getVideoTracks();return n?.getSettings().deviceId}}class M3 extends Yg{constructor(e){super(e,new j3,ae.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return Jt()||Bx()}async selectDirection(e){if(!this.isDirectionSupportedByDevice()){this.logger("warn","Setting direction is not supported on this device");return}if(this.state.setDirection(e),this.state.setDevice(void 0),Jt()){await this.getTracks()[0]?.applyConstraints({facingMode:e==="front"?"user":"environment"});return}this.getTracks().forEach(n=>n.stop());try{await this.unmuteStream()}catch(n){throw n instanceof Error&&n.name==="NotReadableError"&&(await this.muteStream(),await this.unmuteStream()),n}}async flip(){const e=this.state.direction==="front"?"back":"front";await this.selectDirection(e)}async selectTargetResolution(e){if(this.targetResolution.height=e.height,this.targetResolution.width=e.width,this.state.optimisticStatus==="enabled")try{await this.statusChangeSettled()}catch(n){this.logger("warn","could not apply target resolution",n)}if(this.enabled&&this.state.mediaStream){const[n]=this.state.mediaStream.getVideoTracks();if(!n)return;const{width:s,height:r}=n.getSettings();(s!==this.targetResolution.width||r!==this.targetResolution.height)&&(await this.applySettingsToStream(),this.logger("debug",`${s}x${r} target resolution applied to media stream`))}}async apply(e,n){const s=!!this.call.state.localParticipant?.videoStream,r=this.call.permissionsContext.hasPermission(we.SEND_AUDIO);if(s||!r)return;await this.statusChangeSettled();const{target_resolution:o,camera_facing:l,camera_default_on:u}=e;let{width:h,height:d}=o;if(h<d&&([h,d]=[d,h]),await this.selectTargetResolution({width:h,height:d}),!this.state.direction&&!this.state.selectedDevice&&this.state.setDirection(l==="front"?"front":"back"),!n)return;const{mediaStream:m}=this.state;this.enabled&&m?await this.publishStream(m):this.state.status===void 0&&u&&await this.enable()}getDevices(){return O3()}getStream(e){return e.width=this.targetResolution.width,e.height=this.targetResolution.height,!e.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(e.facingMode=this.state.direction==="front"?"user":"environment"),Ux(e,this.call.tracer)}}class U3 extends Jg{constructor(e){super(e,La()),this.speakingWhileMutedSubject=new je(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(yn())}get speakingWhileMuted(){return Rt(this.speakingWhileMuted$)}setSpeakingWhileMuted(e){Bt(this.speakingWhileMutedSubject,e)}getDeviceIdFromStream(e){const[n]=e.getAudioTracks(),s=n?.getSettings().deviceId;return L3(s,"audioinput")}}const B3=500,F3=150,V3=128,$3=(t,e,n={})=>{const{detectionFrequencyInMs:s=B3,audioLevelThreshold:r=F3,fftSize:o=V3,destroyStreamOnStop:l=!0}=n,u=new AudioContext,h=u.createAnalyser();h.fftSize=o;const d=u.createMediaStreamSource(t);d.connect(h);const m=setInterval(()=>{const b=new Uint8Array(h.frequencyBinCount);h.getByteFrequencyData(b);const g=b.some(T=>T>=r),v=b.reduce((T,w)=>T+w,0)/b.length,S=v>r?100:Math.round(v/r*100);t.getAudioTracks()[0]?.enabled?e({isSoundDetected:g,audioLevel:S}):e({isSoundDetected:!1,audioLevel:0})},s);return async function(){clearInterval(m),d.disconnect(),h.disconnect(),u.state!=="closed"&&await u.close(),l&&t.getTracks().forEach(g=>{g.stop(),t.removeTrack(g)})}};class H3{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(e){try{this.cleanupAudioStream();const n=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=n,this.pc1.addEventListener("icecandidate",async l=>{await this.pc2.addIceCandidate(l.candidate)}),this.pc2.addEventListener("icecandidate",async l=>{await this.pc1.addIceCandidate(l.candidate)}),this.pc2.addEventListener("track",l=>{l.streams[0].getTracks().forEach(u=>{u._setVolume(0)})}),n.getTracks().forEach(l=>this.pc1.addTrack(l,n));const s=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(s),await this.pc1.setLocalDescription(s);const r=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(r),await this.pc2.setLocalDescription(r);const o=this.onSpeakingDetectedStateChange(e);return()=>{o(),this.stop()}}catch(n){return Ze(["RNSpeechDetector"])("error","error handling permissions: ",n),()=>{}}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream()}onSpeakingDetectedStateChange(e){let s=.13,r=!1,o,l;const u=[],h=10,d=1.1,m=.9,b=500,g=5e3,S=setInterval(async()=>{try{const T=await this.pc1.getStats(),R=cf(T).find(O=>O.type==="media-source"&&O.kind==="audio");if(R){const{audioLevel:O}=R;if(O){u.push(O),u.length>h&&u.shift();const k=u.reduce((D,P)=>D+P,0)/u.length;k<s*d?l||(l=setTimeout(()=>{s=Math.min(k*m,.13)},g)):(clearTimeout(l),l=void 0),k>s*1.5&&(r||(r=!0,e({isSoundDetected:!0,audioLevel:O})),clearTimeout(o),o=setTimeout(()=>{r=!1,e({isSoundDetected:!1,audioLevel:0})},b))}}}catch(T){Ze(["RNSpeechDetector"])("error","error checking audio level from stats",T)}},100);return()=>{clearInterval(S),clearTimeout(o),clearTimeout(l)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach(e=>e.stop()),typeof this.audioStream.release=="function"&&this.audioStream.release())}}class z3 extends Yg{constructor(e,n="stop-tracks"){super(e,new U3(n),ae.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag")}setup(){super.setup(),this.subscriptions.push(Hf(Er([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),async([e,n,s,r])=>{try{if(e===de.LEFT&&await this.stopSpeakingWhileMutedDetection(),e!==de.JOINED||!this.speakingWhileMutedNotificationEnabled)return;n.includes(we.SEND_AUDIO)?r==="disabled"?await this.startSpeakingWhileMutedDetection(s):await this.stopSpeakingWhileMutedDetection():await this.stopSpeakingWhileMutedDetection()}catch(o){this.logger("warn","Could not enable speaking while muted",o)}})),this.subscriptions.push(ss(this.call.state.callingState$,e=>{if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;this.call.state.settings?.audio.noise_cancellation?.mode===$p.AUTO_ON&&e===de.JOINED?this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.canAutoEnable?this.noiseCancellation.canAutoEnable():!0).then(s=>{s&&this.noiseCancellation?.enable()}).catch(s=>(this.logger("warn","Failed to enable noise cancellation",s),this.call.notifyNoiseCancellationStopped())):e===de.LEFT&&this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.disable()).catch(s=>{this.logger("warn","Failed to disable noise cancellation",s)})}))}async enableNoiseCancellation(e){const{ownCapabilities:n,settings:s}=this.call.state;if(!n.includes(we.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");const o=s?.audio.noise_cancellation;if(!o||o.mode===$p.DISABLED)throw new Error("Noise cancellation is disabled for this call type.");try{if(this.noiseCancellation=e,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",l=>{this.call.tracer.trace("noiseCancellation.enabled",l),l?this.call.notifyNoiseCancellationStarting().catch(u=>{this.logger("warn","notifyNoiseCancellationStart failed",u)}):this.call.notifyNoiseCancellationStopped().catch(u=>{this.logger("warn","notifyNoiseCancellationStop failed",u)})}),Jt())this.noiseCancellationRegistration=Promise.resolve();else{const l=this.registerFilter(e.toFilter());this.noiseCancellationRegistration=l.registered,this.unregisterNoiseCancellation=l.unregister,await this.noiseCancellationRegistration}if(o.mode===$p.AUTO_ON&&this.call.state.callingState===de.JOINED){let l=!0;e.canAutoEnable&&(l=await e.canAutoEnable()),l&&e.enable()}}catch(l){throw this.logger("warn","Failed to enable noise cancellation",l),await this.disableNoiseCancellation().catch(u=>{this.logger("warn","Failed to disable noise cancellation",u)}),l}}async disableNoiseCancellation(){await(this.unregisterNoiseCancellation?.()??Promise.resolve()).then(()=>this.noiseCancellation?.disable()).then(()=>this.noiseCancellationChangeUnsubscribe?.()).catch(e=>{this.logger("warn","Failed to unregister noise cancellation",e)}),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,this.state.status==="disabled"&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}async apply(e,n){if(!n)return;const s=!!this.call.state.localParticipant?.audioStream,r=this.call.permissionsContext.hasPermission(we.SEND_AUDIO);if(s||!r)return;await this.statusChangeSettled();const{mediaStream:o}=this.state;this.enabled&&o?await this.publishStream(o):this.state.status===void 0&&e.mic_default_on&&await this.enable()}getDevices(){return k3()}getStream(e){return Mx(e,this.call.tracer)}async startSpeakingWhileMutedDetection(e){await In(this.soundDetectorConcurrencyTag,async()=>{if(await this.stopSpeakingWhileMutedDetection(),Jt()){this.rnSpeechDetector=new H3;const n=await this.rnSpeechDetector.start(s=>{this.state.setSpeakingWhileMuted(s.isSoundDetected)});this.soundDetectorCleanup=()=>{n(),this.rnSpeechDetector=void 0}}else{const n=await this.getStream({deviceId:{exact:e}});this.soundDetectorCleanup=$3(n,s=>{this.state.setSpeakingWhileMuted(s.isSoundDetected)})}})}async stopSpeakingWhileMutedDetection(){await In(this.soundDetectorConcurrencyTag,async()=>{if(!this.soundDetectorCleanup)return;const e=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await e()})}}class q3 extends Jg{constructor(){super(...arguments),this.audioEnabledSubject=new je(!0),this.settingsSubject=new je(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(yn()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=e=>{const[n]=e.getTracks();return n?.getSettings().deviceId}}get audioEnabled(){return Rt(this.audioEnabled$)}setAudioEnabled(e){Bt(this.audioEnabledSubject,e)}get settings(){return Rt(this.settings$)}setSettings(e){Bt(this.settingsSubject,e)}}class G3 extends Yg{constructor(e){super(e,new q3,ae.SCREEN_SHARE)}setup(){super.setup(),this.subscriptions.push(ss(this.call.state.settings$,e=>{const n=e?.screensharing.target_resolution;n&&this.setDefaultConstraints({video:{width:n.width,height:n.height}})}))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){this.state.setAudioEnabled(!1),this.call.publisher?.isPublishing(ae.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(ae.SCREEN_SHARE_AUDIO)}getSettings(){return this.state.settings}setSettings(e){this.state.setSettings(e)}getDevices(){return lc([])}async getStream(e){this.state.audioEnabled||(e.audio=!1);const n=await I3(e,this.call.tracer),[s]=n.getVideoTracks(),{contentHint:r}=this.state.settings||{};return typeof r<"u"&&s&&"contentHint"in s&&(this.call.tracer.trace("navigator.mediaDevices.getDisplayMedia.contentHint",r),s.contentHint=r),n}async stopPublishStream(){return this.call.stopPublish(ae.SCREEN_SHARE,ae.SCREEN_SHARE_AUDIO)}async select(){throw new Error("Not supported")}}class K3{constructor(e){this.selectedDeviceSubject=new je(""),this.volumeSubject=new je(1),this.isDeviceSelectionSupported=_3(),this.tracer=e,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(yn()),this.volume$=this.volumeSubject.asObservable().pipe(yn())}get selectedDevice(){return Rt(this.selectedDevice$)}get volume(){return Rt(this.volume$)}setDevice(e){Bt(this.selectedDeviceSubject,e),this.tracer.trace("navigator.mediaDevices.setSinkId",e)}setVolume(e){Bt(this.volumeSubject,e)}}class Y3{constructor(e){this.subscriptions=[],this.areSubscriptionsSetUp=!1,this.dispose=()=>{this.subscriptions.forEach(n=>n.unsubscribe()),this.subscriptions=[],this.areSubscriptionsSetUp=!1},this.call=e,this.state=new K3(e.tracer),this.setup()}setup(){this.areSubscriptionsSetUp||(this.areSubscriptionsSetUp=!0,ja&&!Jt()&&this.subscriptions.push(Er([ja,this.state.selectedDevice$]).subscribe(([e,n])=>{if(!n)return;e.find(r=>r.deviceId===n&&r.kind==="audiooutput")||this.select("")})))}listDevices(){if(Jt())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return A3()}select(e){if(Jt())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(e)}setVolume(e){if(Jt())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(e&&(e<0||e>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(e)}setParticipantVolume(e,n){if(Jt())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(n&&(n<0||n>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(e,{audioVolume:n})}}class Zo{constructor({type:e,id:n,streamClient:s,members:r,ownCapabilities:o,sortParticipantsBy:l,clientStore:u,ringing:h=!1,watching:d=!1}){this.state=new Ex,this.permissionsContext=new E3,this.tracer=new Hg(null),this.dispatcher=new rU,this.statsReportingIntervalInMs=2e3,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=De.UNSPECIFIED,this.reconnectReason="",this.fastReconnectDeadlineSeconds=0,this.disconnectionTimeoutSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.setup=async()=>{await In(this.joinLeaveConcurrencyTag,async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",g=>{this.state.updateFromEvent(g)})),this.leaveCallHooks.add(this.on("changePublishOptions",g=>{this.currentPublishOptions=g.publishOptions})),this.leaveCallHooks.add(S3(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.camera.setup(),this.microphone.setup(),this.screenShare.setup(),this.speaker.setup(),this.state.callingState===de.LEFT&&this.state.setCallingState(de.IDLE),this.initialized=!0)})},this.registerEffects=()=>{this.leaveCallHooks.add(ss(this.state.settings$,g=>{g&&this.permissionsContext.setCallSettings(g)})),this.leaveCallHooks.add(Hf(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(ss(this.state.blockedUserIds$,async g=>{if(!g||g.length===0)return;const v=this.currentUserId;v&&g.includes(v)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({message:"user blocked"}).catch(S=>{this.logger("error","Error leaving call after being blocked",S)}))})),this.leaveCallHooks.add(ss(this.state.session$,g=>{if(!this.ringing)return;const v=this.clientStore.connectedUser?.id;if(!v)return;const S=!!g?.accepted_by[v],T=!!g?.rejected_by[v];(S||T)&&this.cancelAutoDrop(),(S&&this.state.callingState===de.RINGING||T)&&!cU(this.joinLeaveConcurrencyTag)&&this.leave().catch(()=>{this.logger("error","Could not leave a call that was accepted or rejected elsewhere")})})),this.leaveCallHooks.add(ss(this.ringingSubject,g=>{if(!g)return;const v=this.state.session,S=this.clientStore.connectedUser?.id,T=v?.ended_at,w=this.state.createdBy?.id,R=v?.rejected_by,O=v?.accepted_by;let k=!1;T?k=!0:w&&R?R[w]&&(k=!0):S&&R?R[S]&&(k=!0):S&&O&&O[S]&&(k=!0),k?this.state.callingState!==de.IDLE&&this.state.setCallingState(de.IDLE):(this.state.callingState===de.IDLE&&this.state.setCallingState(de.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(Ax(this)))}))},this.handleOwnCapabilitiesUpdated=async g=>{if(this.permissionsContext.setPermissions(g),!this.publisher)return;const v={[we.SEND_AUDIO]:ae.AUDIO,[we.SEND_VIDEO]:ae.VIDEO,[we.SCREENSHARE]:ae.SCREEN_SHARE};for(const[S,T]of Object.entries(v))if(!this.permissionsContext.hasPermission(S))try{switch(T){case ae.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case ae.VIDEO:this.camera.enabled&&await this.camera.disable();break;case ae.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable();break}}catch(R){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",R)}},this.on=(g,v)=>{if(_T(g))return this.dispatcher.on(g,v);const S=this.streamClient.on(g,T=>{const w=T;w.call_cid&&w.call_cid===this.cid&&v(w)});return this.streamClientEventHandlers.set(v,S),()=>{this.off(g,v)}},this.off=(g,v)=>{if(_T(g))return this.dispatcher.off(g,v);const S=this.streamClientEventHandlers.get(v);S&&S()},this.leave=async({reject:g,reason:v,message:S}={})=>{if(this.state.callingState===de.LEFT)throw new Error("Cannot leave call that has already been left.");await In(this.joinLeaveConcurrencyTag,async()=>{const T=this.state.callingState;if(T===de.LEFT)return;if(T===de.JOINING&&await new Promise(O=>{this.state.callingState$.pipe(Lm(k=>k!==de.JOINED,!0)).subscribe(()=>O())}),T===de.RINGING&&g!==!1)if(g)await this.reject(v??"decline");else{const R=this.state.remoteParticipants.length>0;this.isCreatedByMe&&!R&&await this.reject("cancel")}this.statsReporter?.stop(),this.statsReporter=void 0,this.sfuStatsReporter?.flush(),this.sfuStatsReporter?.stop(),this.sfuStatsReporter=void 0,this.subscriber?.dispose(),this.subscriber=void 0,this.publisher?.dispose(),this.publisher=void 0,await this.sfuClient?.leaveAndClose(S??v??"user is leaving the call"),this.sfuClient=void 0,this.dynascaleManager.setSfuClient(void 0),await this.dynascaleManager.dispose(),this.state.setCallingState(de.LEFT),this.state.setParticipants([]),this.state.dispose(),this.leaveCallHooks.forEach(R=>R()),this.initialized=!1,this.hasJoinedOnce=!1,this.unifiedSessionId=void 0,this.ringingSubject.next(!1),this.cancelAutoDrop(),this.clientStore.unregisterCall(this),this.camera.dispose(),this.microphone.dispose(),this.screenShare.dispose(),this.speaker.dispose(),this.deviceSettingsAppliedOnce=!1;const w=[];this.camera.stopOnLeave&&w.push(this.camera.disable(!0)),this.microphone.stopOnLeave&&w.push(this.microphone.disable(!0)),this.screenShare.stopOnLeave&&w.push(this.screenShare.disable(!0)),await Promise.all(w)})},this.updateFromRingingEvent=async g=>{await this.setup();const{created_by:v,settings:S}=g.call,T=this.state.members.find(R=>R.user.id===v.id);T?this.state.setMembers([T,...g.members]):this.state.setMembers(g.members),this.state.updateFromCallResponse(g.call),this.watching=!0,this.ringingSubject.next(!0);const w=this.clientStore.calls.filter(R=>R.cid!==this.cid);this.clientStore.setCalls([this,...w]),await this.applyDeviceConfig(S,!1)},this.get=async g=>{await this.setup();const v=await this.streamClient.get(this.streamClientBasePath,g);return this.state.updateFromCallResponse(v.call),this.state.setMembers(v.members),this.state.setOwnCapabilities(v.own_capabilities),g?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(v.call.settings,!1),v},this.getOrCreate=async g=>{await this.setup();const v=await this.streamClient.post(this.streamClientBasePath,g);return this.state.updateFromCallResponse(v.call),this.state.setMembers(v.members),this.state.setOwnCapabilities(v.own_capabilities),g?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(v.call.settings,!1),v},this.create=async g=>this.getOrCreate(g),this.delete=async(g={})=>this.streamClient.post(`${this.streamClientBasePath}/delete`,g),this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post(`${this.streamClientBasePath}/accept`),this.reject=async(g="decline")=>this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:g}),this.join=async({maxJoinRetries:g=3,...v}={})=>{await this.setup();const S=this.state.callingState;if([de.JOINED,de.JOINING].includes(S))throw new Error("Illegal State: call.join() shall be called only once");this.state.setCallingState(de.JOINING),g=Math.max(g,1);for(let T=0;T<g;T++){try{return this.logger("trace",`Joining call (${T})`,this.cid),await this.doJoin(v)}catch(w){if(this.logger("warn",`Failed to join call (${T})`,this.cid),T===g-1)throw this.state.setCallingState(S),w}await Hi(Uc(T))}},this.doJoin=async g=>{const v=Date.now(),S=this.state.callingState;this.joinCallData=g,this.logger("debug","Starting join flow"),this.state.setCallingState(de.JOINING);const T=this.reconnectStrategy===De.MIGRATE,w=this.reconnectStrategy===De.REJOIN,R=this.reconnectStrategy===De.FAST;let O=this.sfuStatsReporter?.options;if(!this.credentials||!O||w||T)try{const X=await this.doJoinRequest(g);this.credentials=X.credentials,O=X.stats_options}catch(X){throw this.state.callingState===de.OFFLINE||this.state.setCallingState(S),X}const k=this.sfuClient,D=k?.sessionId,P=!!k?.isHealthy,H=w||T||!P?new On({logTag:String(++this.sfuClientTag),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,enableTracing:O.enable_rtc_stats,sessionId:w?void 0:D,onSignalClose:X=>this.handleSfuSignalClose(H,X)}):k;this.sfuClient=H,this.dynascaleManager.setSfuClient(H);const G=await IT();if(k!==H){const[X,ie]=await Promise.all([RT("recvonly"),RT("sendonly")]),ee=this.reconnectStrategy!==De.UNSPECIFIED,le=ee?this.getReconnectDetails(g?.migrating_from,D):void 0,re=ee?this.currentPublishOptions||[]:this.getPreferredPublishOptions(),oe=ee?[]:this.getPreferredSubscribeOptions();try{const{callState:te,fastReconnectDeadlineSeconds:Y,publishOptions:L}=await H.join({subscriberSdp:X,publisherSdp:ie,clientDetails:G,fastReconnect:R,reconnectDetails:le,preferredPublishOptions:re,preferredSubscribeOptions:oe});this.currentPublishOptions=L,this.fastReconnectDeadlineSeconds=Y,te&&this.state.updateFromSfuCallState(te,H.sessionId,le)}catch(te){throw this.logger("warn","Join SFU request failed",te),H.close(On.JOIN_FAILED,"Join request failed, connection considered unhealthy"),this.state.setCallingState(S),te}}if(T||this.state.setCallingState(de.JOINED),this.hasJoinedOnce=!0,R)await this.restoreICE(H,{includeSubscriber:!1});else{const X=WU(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:H,connectionConfig:X,clientDetails:G,statsOptions:O,publishOptions:this.currentPublishOptions||[],closePreviousInstances:!T})}if(!w&&!R&&!T&&this.sfuStatsReporter?.sendConnectionTime((Date.now()-v)/1e3),w&&P){const X=De[this.reconnectStrategy];await k?.leaveAndClose(`Closing previous WS after reconnect with strategy: ${X}`)}else P||k?.close(On.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");!this.deviceSettingsAppliedOnce&&this.state.settings&&(await this.applyDeviceConfig(this.state.settings,!0),this.deviceSettingsAppliedOnce=!0),delete this.joinCallData?.ring,delete this.joinCallData?.notify,this.reconnectStrategy=De.UNSPECIFIED,this.reconnectReason="",this.logger("info",`Joined call ${this.cid}`)},this.getReconnectDetails=(g,v)=>{const S=this.reconnectStrategy,T=S===De.REJOIN,w=this.publisher?.getAnnouncedTracksForReconnect()||[];return{strategy:S,announcedTracks:w,subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:g||"",previousSessionId:T&&v||"",reason:this.reconnectReason}},this.getPreferredPublishOptions=()=>{const{preferredCodec:g,fmtpLine:v,preferredBitrate:S,maxSimulcastLayers:T}=this.clientPublishOptions||{};if(!g&&!S&&!T)return[];const w=g?Ls.create({name:g.split("/").pop(),fmtp:v}):void 0,R=[Ia.create({trackType:ae.VIDEO,codec:w,bitrate:S,maxSpatialLayers:T})],O=this.screenShare.getSettings();return O&&R.push(Ia.create({trackType:ae.SCREEN_SHARE,fps:O.maxFramerate,bitrate:O.maxBitrate})),R},this.getPreferredSubscribeOptions=()=>{const{subscriberCodec:g,subscriberFmtpLine:v}=this.clientPublishOptions||{};return!g||!v?[]:[Lg.create({trackType:ae.VIDEO,codecs:[{name:g.split("/").pop(),fmtp:v}]})]},this.restoreICE=async(g,v={})=>{const{includeSubscriber:S=!0,includePublisher:T=!0}=v;this.subscriber&&(this.subscriber.setSfuClient(g),S&&await this.subscriber.restartIce()),this.publisher&&(this.publisher.setSfuClient(g),T&&this.publisher.isPublishing()&&await this.publisher.restartIce())},this.initPublisherAndSubscriber=g=>{const{sfuClient:v,connectionConfig:S,clientDetails:T,statsOptions:w,publishOptions:R,closePreviousInstances:O}=g,{enable_rtc_stats:k}=w;O&&this.subscriber&&this.subscriber.dispose(),this.subscriber=new XU({sfuClient:v,dispatcher:this.dispatcher,state:this.state,connectionConfig:S,logTag:String(this.sfuClientTag),enableTracing:k,onReconnectionNeeded:(P,H)=>{this.reconnect(P,H).catch(G=>{const X=`[Reconnect] Error reconnecting after a subscriber error: ${H}`;this.logger("warn",X,G)})}}),this.streamClient.user?.type==="anonymous"||(O&&this.publisher&&this.publisher.dispose(),this.publisher=new JU({sfuClient:v,dispatcher:this.dispatcher,state:this.state,connectionConfig:S,publishOptions:R,logTag:String(this.sfuClientTag),enableTracing:k,onReconnectionNeeded:(P,H)=>{this.reconnect(P,H).catch(G=>{const X=`[Reconnect] Error reconnecting after a publisher error: ${H}`;this.logger("warn",X,G)})}})),this.statsReporter?.stop(),this.statsReportingIntervalInMs>0&&(this.statsReporter=SU({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:v.edgeName,pollingIntervalInMs:this.statsReportingIntervalInMs})),this.tracer.setEnabled(k),this.sfuStatsReporter?.stop(),w?.reporting_interval_ms>0&&(this.unifiedSessionId??(this.unifiedSessionId=v.sessionId),this.sfuStatsReporter=new DU(v,{clientDetails:T,options:w,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state,tracer:this.tracer,unifiedSessionId:this.unifiedSessionId}),this.sfuStatsReporter.start())},this.doJoinRequest=async g=>{const v=await this.streamClient.getLocationHint(),S={...g,location:v},T=await this.streamClient.post(`${this.streamClientBasePath}/join`,S);return this.state.updateFromCallResponse(T.call),this.state.setMembers(T.members),this.state.setOwnCapabilities(T.own_capabilities),g?.ring&&this.ringingSubject.next(!0),!(this.reconnectStrategy!==De.UNSPECIFIED)&&this.ringing&&!this.isCreatedByMe&&await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),T},this.handleSfuSignalClose=(g,v)=>{this.logger("debug","[Reconnect] SFU signal connection closed");const{callingState:S}=this.state;if(S===de.JOINING||S===de.RECONNECTING||S===de.IDLE||S===de.LEFT||g.isLeaving||g.isClosingClean)return;const T=this.publisher?.isHealthy()&&this.subscriber?.isHealthy()?De.FAST:De.REJOIN;this.reconnect(T,v).catch(w=>{this.logger("warn","[Reconnect] Error reconnecting",w)})},this.reconnect=async(g,v)=>{if(!(this.state.callingState===de.RECONNECTING||this.state.callingState===de.MIGRATING||this.state.callingState===de.RECONNECTING_FAILED))return In(this.reconnectConcurrencyTag,async()=>{const S=Date.now();this.reconnectStrategy=g,this.reconnectReason=v;const T=async()=>{try{await this.get()}finally{this.state.setCallingState(de.RECONNECTING_FAILED)}};let w=0;do{const R=Date.now()-S;if(this.disconnectionTimeoutSeconds>0&&R/1e3>this.disconnectionTimeoutSeconds){this.logger("warn","[Reconnect] Stopping reconnection attempts after reaching disconnection timeout"),await T();return}this.reconnectStrategy!==De.FAST&&this.reconnectAttempts++;const k=De[this.reconnectStrategy];try{switch(await this.networkAvailableTask?.promise,this.logger("info",`[Reconnect] Reconnecting with strategy ${De[this.reconnectStrategy]}`),this.reconnectStrategy){case De.UNSPECIFIED:case De.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${k}`);break;case De.FAST:await this.reconnectFast();break;case De.REJOIN:await this.reconnectRejoin();break;case De.MIGRATE:await this.reconnectMigrate();break;default:Cc(this.reconnectStrategy,"Unknown reconnection strategy");break}break}catch(D){if(this.state.callingState===de.OFFLINE){this.logger("debug","[Reconnect] Can't reconnect while offline, stopping reconnection attempts");break}if(D instanceof rx&&D.unrecoverable){this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",D),await T();return}await Hi(500);const P=this.reconnectStrategy===De.MIGRATE,G=(Date.now()-S)/1e3>this.fastReconnectDeadlineSeconds||P||w>=3||!(this.publisher?.isHealthy()??!0)||!(this.subscriber?.isHealthy()??!0);w++;const X=G?De.REJOIN:De.FAST;this.reconnectStrategy=X,this.logger("info",`[Reconnect] ${k} (${this.reconnectAttempts}) failed. Attempting with ${De[X]}`,D)}}while(this.state.callingState!==de.JOINED&&this.state.callingState!==de.RECONNECTING_FAILED&&this.state.callingState!==de.LEFT);this.logger("info","[Reconnect] Reconnection flow finished")})},this.reconnectFast=async()=>{const g=Date.now();this.reconnectStrategy=De.FAST,this.state.setCallingState(de.RECONNECTING),await this.doJoin(this.joinCallData),await this.get(),this.sfuStatsReporter?.sendReconnectionTime(De.FAST,(Date.now()-g)/1e3)},this.reconnectRejoin=async()=>{const g=Date.now();this.reconnectStrategy=De.REJOIN,this.state.setCallingState(de.RECONNECTING),await this.doJoin(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks(),this.sfuStatsReporter?.sendReconnectionTime(De.REJOIN,(Date.now()-g)/1e3)},this.reconnectMigrate=async()=>{const g=Date.now(),v=this.sfuClient;if(!v)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=De.MIGRATE,this.state.setCallingState(de.MIGRATING);const S=this.subscriber,T=this.publisher;S?.detachEventHandlers(),T?.detachEventHandlers();const w=wc(v.enterMigration());try{const R=v.edgeName;await this.doJoin({...this.joinCallData,migrating_from:R})}finally{delete this.joinCallData?.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await w(),this.state.setCallingState(de.JOINED)}finally{S?.dispose(),T?.dispose(),v.close(On.NORMAL_CLOSURE,"Migrating away")}this.sfuStatsReporter?.sendReconnectionTime(De.MIGRATE,(Date.now()-g)/1e3)},this.registerReconnectHandlers=()=>{const g=this.on("goAway",()=>{this.reconnect(De.MIGRATE,"goAway").catch(T=>this.logger("warn","[Reconnect] Error reconnecting",T))}),v=this.on("error",T=>{const{reconnectStrategy:w,error:R}=T;w!==De.UNSPECIFIED&&(w===De.DISCONNECT?this.leave({message:"SFU instructed to disconnect"}).catch(O=>{this.logger("warn","Can't leave call after disconnect request",O)}):this.reconnect(w,R?.message||"SFU Error").catch(O=>{this.logger("warn","[Reconnect] Error reconnecting",O)}))}),S=this.streamClient.on("network.changed",T=>{if(this.tracer.trace("network.changed",T),T.online)this.logger("debug","[Reconnect] Going online"),this.sfuClient?.close(On.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),this.networkAvailableTask?.resolve(),this.networkAvailableTask=void 0,this.sfuStatsReporter?.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const w=ic();w.promise.then(()=>{let R=De.FAST;this.lastOfflineTimestamp&&(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(R=De.REJOIN),this.reconnect(R,"Going online").catch(O=>{this.logger("warn","[Reconnect] Error reconnecting after going online",O)})}),this.networkAvailableTask=w,this.sfuStatsReporter?.stop(),this.state.setCallingState(de.OFFLINE)}});this.leaveCallHooks.add(g).add(v).add(S)},this.restorePublishedTracks=async()=>{for(const g of this.trackPublishOrder){let v;switch(g){case ae.AUDIO:v=this.microphone.state.mediaStream;break;case ae.VIDEO:v=this.camera.state.mediaStream;break;case ae.SCREEN_SHARE:v=this.screenShare.state.mediaStream;break;case ae.SCREEN_SHARE_AUDIO:case ae.UNSPECIFIED:break;default:Cc(g,"Unknown track type");break}v&&await this.publish(v,g)}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:g}=this.state;g.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async g=>{await this.publish(g,ae.VIDEO)},this.publishAudioStream=async g=>{await this.publish(g,ae.AUDIO)},this.publishScreenShareStream=async g=>{await this.publish(g,ae.SCREEN_SHARE)},this.publish=async(g,v)=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.canPublish(v))throw new Error(`No permission to publish ${ae[v]}`);if(!this.publisher)throw new Error("Publisher is not initialized");const[S]=qg(v)?g.getAudioTracks():g.getVideoTracks();if(!S)throw new Error(`There is no ${ae[v]} track in the stream`);if(S.readyState==="ended")throw new Error("Can't publish ended tracks.");Bu(this.trackPublishOrder,v),await this.publisher.publish(S,v);const T=[v];if(v===ae.SCREEN_SHARE){const[w]=g.getAudioTracks();w&&(Bu(this.trackPublishOrder,ae.SCREEN_SHARE_AUDIO),await this.publisher.publish(w,ae.SCREEN_SHARE_AUDIO),T.push(ae.SCREEN_SHARE_AUDIO))}S.kind==="video"&&this.sfuStatsReporter?.scheduleOne(3e3),await this.updateLocalStreamState(g,...T)},this.stopPublish=async(...g)=>{!this.sfuClient||!this.publisher||(this.publisher.stopTracks(...g),await this.updateLocalStreamState(void 0,...g))},this.updateLocalStreamState=async(g,...v)=>{if(!this.sfuClient||!this.sfuClient.sessionId)return;await this.notifyTrackMuteState(!g,...v);const{sessionId:S}=this.sfuClient;for(const T of v){const w=zg(T);w&&this.state.updateParticipant(S,R=>({publishedTracks:g?Bu([...R.publishedTracks],T):R.publishedTracks.filter(O=>O!==T),[w]:g}))}},this.updatePublishOptions=g=>{this.logger("warn","[call.updatePublishOptions]: You are manually overriding the publish options for this call. This is not recommended, and it can cause call stability/compatibility issues. Use with caution."),this.state.callingState===de.JOINED&&this.logger("warn","Updating publish options after joining the call does not have an effect"),this.clientPublishOptions={...this.clientPublishOptions,...g}},this.notifyNoiseCancellationStarting=async()=>this.sfuClient?.startNoiseCancellation().catch(g=>{this.logger("warn","Failed to notify start of noise cancellation",g)}),this.notifyNoiseCancellationStopped=async()=>this.sfuClient?.stopNoiseCancellation().catch(g=>{this.logger("warn","Failed to notify stop of noise cancellation",g)}),this.notifyTrackMuteState=async(g,...v)=>{this.sfuClient&&await this.sfuClient.updateMuteStates(v.map(S=>({trackType:S,muted:g})))},this.startReportingStatsFor=g=>this.statsReporter?.startReportingStatsFor(g),this.stopReportingStatsFor=g=>this.statsReporter?.stopReportingStatsFor(g),this.setStatsReportingIntervalInMs=g=>{this.statsReportingIntervalInMs=g},this.resetReaction=g=>{this.state.updateParticipant(g,{reaction:void 0})},this.setSortParticipantsBy=g=>this.state.setSortParticipantsBy(g),this.sendReaction=async g=>this.streamClient.post(`${this.streamClientBasePath}/reaction`,g),this.blockUser=async g=>this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:g}),this.unblockUser=async g=>this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:g}),this.muteSelf=g=>{const v=this.currentUserId;if(v)return this.muteUser(v,g)},this.muteOthers=g=>{const v=UU(g);if(!v)return;const S=[];for(const T of this.state.remoteParticipants)T.publishedTracks.includes(v)&&S.push(T.userId);if(S.length>0)return this.muteUser(S,g)},this.muteUser=(g,v)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(g)?g:[g],[v]:!0}),this.muteAllUsers=g=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[g]:!0}),this.startRecording=async g=>this.streamClient.post(`${this.streamClientBasePath}/start_recording`,g||{}),this.stopRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{}),this.startTranscription=async g=>this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,g),this.stopTranscription=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`),this.startClosedCaptions=async g=>{const v=this.state.setCaptioning(!0);try{return await this.streamClient.post(`${this.streamClientBasePath}/start_closed_captions`,g)}catch(S){throw v.rollback(),S}},this.stopClosedCaptions=async g=>{const v=this.state.setCaptioning(!1);try{return await this.streamClient.post(`${this.streamClientBasePath}/stop_closed_captions`,g)}catch(S){throw v.rollback(),S}},this.updateClosedCaptionSettings=g=>{this.state.updateClosedCaptionSettings(g)},this.requestPermissions=async g=>{const{permissions:v}=g;if(!v.every(T=>this.permissionsContext.canRequest(T)))throw new Error(`You are not allowed to request permissions: ${v.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,g)},this.grantPermissions=async(g,v)=>this.updateUserPermissions({user_id:g,grant_permissions:v}),this.revokePermissions=async(g,v)=>this.updateUserPermissions({user_id:g,revoke_permissions:v}),this.updateUserPermissions=async g=>this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,g),this.goLive=async(g={},v)=>this.streamClient.post(`${this.streamClientBasePath}/go_live`,g,v),this.stopLive=async(g={})=>this.streamClient.post(`${this.streamClientBasePath}/stop_live`,g),this.startHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{}),this.stopHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{}),this.startRTMPBroadcasts=async g=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts`,g),this.stopAllRTMPBroadcasts=async()=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/stop`),this.stopRTMPBroadcast=async g=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/${g}/stop`),this.startFrameRecording=async g=>this.streamClient.post(`${this.streamClientBasePath}/start_frame_recording`,g),this.stopFrameRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_frame_recording`),this.update=async g=>{const v=await this.streamClient.patch(`${this.streamClientBasePath}`,g),{call:S,members:T,own_capabilities:w}=v;return this.state.updateFromCallResponse(S),this.state.setMembers(T),this.state.setOwnCapabilities(w),v},this.endCall=async()=>this.streamClient.post(`${this.streamClientBasePath}/mark_ended`),this.pin=g=>{this.state.updateParticipant(g,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=g=>{this.state.updateParticipant(g,{pin:void 0})},this.pinForEveryone=async g=>this.streamClient.post(`${this.streamClientBasePath}/pin`,g),this.unpinForEveryone=async g=>this.streamClient.post(`${this.streamClientBasePath}/unpin`,g),this.queryMembers=g=>this.streamClient.post("/call/members",{...g||{},id:this.id,type:this.type}),this.updateCallMembers=async g=>this.streamClient.post(`${this.streamClientBasePath}/members`,g),this.scheduleAutoDrop=()=>{this.cancelAutoDrop();const g=this.state.settings;if(!g||this.state.callingState!==de.RINGING)return;const v=this.isCreatedByMe?g.ring.auto_cancel_timeout_ms:g.ring.incoming_call_timeout_ms;v<=0||(this.dropTimeout=setTimeout(()=>{this.state.callingState===de.RINGING&&this.leave({reject:!0,reason:"timeout",message:`ringing timeout - ${this.isCreatedByMe?"no one accepted":"user didn't interact with incoming call screen"}`}).catch(S=>{this.logger("error","Failed to drop call",S)})},v))},this.cancelAutoDrop=()=>{clearTimeout(this.dropTimeout),this.dropTimeout=void 0},this.queryRecordings=async g=>{let v=this.streamClientBasePath;return g&&(v=`${v}/${g}`),this.streamClient.get(`${v}/recordings`)},this.queryTranscriptions=async()=>this.streamClient.get(`${this.streamClientBasePath}/transcriptions`),this.getCallStats=async g=>{const v=`${this.streamClientBasePath}/stats/${g}`;return this.streamClient.get(v)},this.getCallReport=async(g="")=>{const v=`${this.streamClientBasePath}/report`,S=g!==""?{session_id:g}:{};return this.streamClient.get(v,S)},this.submitFeedback=async(g,{reason:v,custom:S}={})=>{const{sdkName:T,sdkVersion:w,...R}=bU(await IT());return this.streamClient.post(`${this.streamClientBasePath}/feedback`,{rating:g,reason:v,user_session_id:this.sfuClient?.sessionId,sdk:T,sdk_version:w,custom:{...S,"x-stream-platform-data":R}})},this.sendCustomEvent=async g=>this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:g}),this.applyDeviceConfig=async(g,v)=>{await this.camera.apply(g.video,v).catch(S=>{this.logger("warn","Camera init failed",S)}),await this.microphone.apply(g.audio,v).catch(S=>{this.logger("warn","Mic init failed",S)})},this.trackElementVisibility=(g,v,S)=>this.dynascaleManager.trackElementVisibility(g,v,S),this.setViewport=g=>this.dynascaleManager.setViewport(g),this.bindVideoElement=(g,v,S)=>{const T=this.dynascaleManager.bindVideoElement(g,v,S);if(T)return this.leaveCallHooks.add(T),()=>{this.leaveCallHooks.delete(T),T()}},this.bindAudioElement=(g,v,S="audioTrack")=>{const T=this.dynascaleManager.bindAudioElement(g,v,S);if(T)return this.leaveCallHooks.add(T),()=>{this.leaveCallHooks.delete(T),T()}},this.bindCallThumbnailElement=(g,v={})=>{const S=()=>{g.src=v.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},T=ss(this.state.thumbnails$,w=>{if(!w)return;g.addEventListener("error",S);const R=new URL(w.image_url);R.searchParams.set("w",String(g.clientWidth)),R.searchParams.set("h",String(g.clientHeight)),g.src=R.toString()});return()=>{T(),g.removeEventListener("error",S)}},this.setPreferredIncomingVideoResolution=(g,v)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(g?{enabled:!0,dimension:g}:void 0,v),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=g=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(g?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.setDisconnectionTimeout=g=>{this.disconnectionTimeoutSeconds=g},this.type=e,this.id=n,this.cid=`${e}:${n}`,this.ringingSubject=new je(h),this.watching=d,this.streamClient=s,this.clientStore=u,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=Ze(["Call"]);const m=Nx.get(e),b=l||m.options.sortParticipantsBy;b&&this.state.setSortParticipantsBy(b),this.state.setMembers(r||[]),this.state.setOwnCapabilities(o||[]),this.state.setCallingState(h?de.RINGING:de.IDLE),this.camera=new M3(this),this.microphone=new z3(this),this.speaker=new Y3(this),this.screenShare=new G3(this),this.dynascaleManager=new w3(this.state,this.speaker)}get ringing(){return Rt(this.ringingSubject)}get currentUserId(){return this.clientStore.connectedUser?.id}get isCreatedByMe(){return this.state.createdBy?.id===this.currentUserId}}var J3=null;const X3={[-1]:"InternalSystemError",2:"AccessKeyError",3:"AuthenticationFailedError",4:"InputError",5:"AuthenticationError",6:"DuplicateUsernameError",9:"RateLimitError",16:"DoesNotExistError",17:"NotAllowedError",18:"EventNotSupportedError",19:"ChannelFeatureNotSupportedError",20:"MessageTooLongError",21:"MultipleNestingLevelError",22:"PayloadTooBigError",23:"RequestTimeoutError",24:"MaxHeaderSizeExceededError",40:"AuthErrorTokenExpired",41:"AuthErrorTokenNotValidYet",42:"AuthErrorTokenUsedBeforeIssuedAt",43:"AuthErrorTokenSignatureInvalid",44:"CustomCommandEndpointMissingError",45:"CustomCommandEndpointCallError",46:"ConnectionIDNotFoundError",60:"CoolDownError",69:"ErrWrongRegion",70:"ErrQueryChannelPermissions",71:"ErrTooManyConnections",73:"MessageModerationFailedError",99:"AppSuspendedError"};class Q3{constructor(e){this._log=(n,s={},r="info")=>{this.client.logger(r,`connection:${n}`,s)},this.setClient=n=>{this.client=n},this._buildUrl=()=>{const n=new URLSearchParams;return n.set("api_key",this.client.key),n.set("stream-auth-type",this.client.getAuthType()),n.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${n.toString()}`},this.onlineStatusChanged=n=>{n.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):n.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=n=>{if(this.wsID!==n)return;const s=this.client.user;if(!s){this.client.logger("error","User not set, can't connect to WS");return}const r=this.client._getToken();if(!r){this.client.logger("error","Token not set, can't connect authenticate");return}const o=JSON.stringify({token:r,user_details:{id:s.id,name:s.name,image:s.image,custom:s.custom}});this._log(`onopen() - Sending auth message ${o}`,{},"trace"),this.ws?.send(o),this._log("onopen() - onopen callback",{wsID:n})},this.onmessage=(n,s)=>{if(this.wsID!==n)return;this._log("onmessage() - onmessage callback",{event:s,wsID:n});const r=typeof s.data=="string"?JSON.parse(s.data):null;if(!this.isConnectionOpenResolved&&r&&r.type==="connection.error"&&(this.isConnectionOpenResolved=!0,r.error)){this.rejectConnectionOpen?.(this._errorFromWSEvent(r,!1));return}if(this.lastEvent=new Date,r&&(r.type==="health.check"||r.type==="connection.ok")&&this.scheduleNextPing(),r&&r.type==="connection.ok"&&(this.resolveConnectionOpen?.(r),this._setHealth(!0)),r&&r.type==="connection.error"&&r.error){const{code:o}=r.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,o===Ta.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic()&&(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}r&&(r.received_at=new Date,this.client.dispatchEvent(r)),this.scheduleConnectionCheck()},this.onclose=(n,s)=>{if(this.wsID===n)if(this._log("onclose() - onclose callback - "+s.code,{event:s,wsID:n}),s.code===Ta.WS_CLOSED_SUCCESS){const r=new Error(`WS connection reject with error ${s.reason}`);r.reason=s.reason,r.code=s.code,r.wasClean=s.wasClean,r.target=s.target,this.rejectConnectionOpen?.(r),this._log(`onclose() - WS connection reject with error ${s.reason}`,{event:s})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(this._errorFromWSEvent(s)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:s}),this._reconnect()},this.onerror=(n,s)=>{this.wsID===n&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(new Error(`WebSocket error: ${s}`)),this._log("onerror() - WS connection resulted into error",{event:s}),this._reconnect())},this._setHealth=(n,s=!1)=>{if(n!==this.isHealthy){if(this.isHealthy=n,this.isHealthy||s){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(n,s=!0)=>{let r,o,l;if(tU(n))r=n.code,l=n.reason,o=0;else{const{error:d}=n;r=d.code,l=d.message,o=d.StatusCode}const u=`WS failed with code: ${r}: ${X3[r]||r} and reason: ${l}`;this._log(u,{event:n},"warn");const h=new Error(u);return h.code=r,h.StatusCode=o,h.isWSFailure=s,h},this._setupConnectionPromise=()=>{this.isConnectionOpenResolved=!1,this.connectionOpenSafe=wc(new Promise((n,s)=>{this.resolveConnectionOpen=n,this.rejectConnectionOpen=s}))},this.scheduleNextPing=()=>{const n=uf();this.healthCheckTimeoutRef&&n.clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=n.setTimeout(()=>{const s=[{type:"health.check",client_id:this.client.clientID}];try{this.ws?.send(JSON.stringify(s))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const n=new Date;this.lastEvent&&n.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=e,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isConnectionOpenResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,Fm(this.onlineStatusChanged)}async connect(e=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const n=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${n}`)}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===Ta.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!n.isWSFailure)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}))}return await this._waitForHealthy(e)}async _waitForHealthy(e=15e3){return Promise.race([(async()=>{for(let s=0;s<=e;s+=50)try{return await this.connectionOpen}catch(r){if(s===e)throw new Error(JSON.stringify({code:r.code,StatusCode:r.StatusCode,message:r.message,isWSFailure:r.isWSFailure}));await Hi(50)}})(),(async()=>{throw await Hi(e),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(e){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&uf().clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),bx(this.onlineStatusChanged),this.isHealthy=!1;let n;const{ws:s}=this;return s&&s.close&&s.readyState===s.OPEN?(n=new Promise(r=>{const o=l=>{this._log(`disconnect() - resolving isClosedPromise ${l?"with":"without"} close frame`,{event:l}),r()};s.onclose=o,setTimeout(o,e??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),s.close(Ta.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),n=Promise.resolve()),delete this.ws,n}async _connect(){if(this.isConnecting)return;this.isConnecting=!0;let e=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),e=!0}catch{}try{e||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this.client.isConnectionIsPromisePending||this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const n=this._buildUrl();this._log(`_connect() - Connecting to ${n}`);const s=this.client.options.WebSocketImpl??WebSocket;this.ws=new s(n),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const r=await this.connectionOpen;if(this.isConnecting=!1,r)return this.connectionID=r.connection_id,this.client.resolveConnectionId?.(this.connectionID),r}catch(n){throw this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",n),this.client.rejectConnectionId?.(n),n}}async _reconnect(e={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let n=e.interval;if(n||(n=Uc(this.consecutiveFailures)),await Hi(n),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),e.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(s){if(this.isHealthy=!1,this.consecutiveFailures+=1,s.code===Ta.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});s.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){this.wsID+=1;try{this?.ws?.close()}catch{}}get connectionOpen(){return this.connectionOpenSafe?.()}}function W3(t){const e=t.split(".");if(e.length!==3)return"";const n=e[1],s=Z3(n);return JSON.parse(s).user_id}const Z3=t=>{const e={},n=String.fromCharCode,s=t.length;let r,o=0,l,u,h=0,d,m="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=0;r<64;r++)e[b.charAt(r)]=r;for(u=0;u<s;u++)for(l=e[t.charAt(u)],o=(o<<6)+l,h+=6;h>=8;)((d=o>>>(h-=8)&255)||u<s-2)&&(m+=n(d));return m};class e4{constructor(e){this.loadTokenPromise=null,this.type="static",this.setTokenOrProvider=async(n,s,r)=>{this.user=s,this.isAnonymous=r,this.validateToken(n),Um(n)&&(this.tokenProvider=n,this.type="provider"),typeof n=="string"&&(this.token=n,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=n=>{if(!(this.user&&this.isAnonymous&&!n)){if(!this.secret&&!n)throw new Error("User token can not be empty");if(typeof n!="string"&&!Um(n))throw new Error("User token should either be a string or a function");if(typeof n=="string"){if(this.isAnonymous&&n==="")return;const s=W3(n);if(n!=null&&(s==null||s===""||!this.isAnonymous&&s!==this.user.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(n,s)=>{if(this.type==="static")return n(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{const r=await this.tokenProvider();this.validateToken(r),this.token=r}catch(r){return s(new Error(`Call to tokenProvider failed with message: ${r}`,{cause:r}))}n(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.secret=e}}const UT=async(t="https://hint.stream-io-video.com/",e=2e3,n=3)=>{const s=Ze(["location-hint"]);let r=0,o="ERR";do{const l=new AbortController,u=setTimeout(()=>l.abort(),e);try{const d=(await fetch(t,{method:"HEAD",signal:l.signal})).headers.get("x-amz-cf-pop")||"ERR";s("debug",`Location header: ${d}`),o=d.substring(0,3)}catch(h){s("warn",`Failed to get location hint from ${t}`,h),o="ERR"}finally{clearTimeout(u)}}while(o==="ERR"&&++r<n);return o};class t4{constructor(e,n){this.listeners={},this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=r=>{this.baseURL=r,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(r,o)=>{const l=await this.locationHint;return!l||l==="ERR"?(this.locationHint=UT(r??this.options.locationHintUrl,o??this.options.locationHintTimeout),this.locationHint):l},this._getConnectionID=()=>this.wsConnection?.connectionID,this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(r,o)=>{if(!r.id)throw new Error('The "id" field on the user is missing');if(this.userID===r.id&&this.connectUserTask)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.connectUserTask;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this.secret||this.node)&&!this.options.allowServerSideConnect&&this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=r.id,this.anonymous=!1,await this.tokenManager.setTokenOrProvider(o,r,!1),this._setUser(r),this.connectUserTask=this.openConnection();try{return Fm(this.updateNetworkConnectionStatus),await this.connectUserTask}catch(l){throw this.persistUserOnConnectionFailure?await this.closeConnection():await this.disconnectUser(),l}},this._setUser=r=>{this.user=r,this.userID=r.id,this._user={...r}},this.closeConnection=async r=>{await this.wsConnection?.disconnect(r)},this.openConnection=async()=>{if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");const r=this.wsPromiseSafe?.();if(this.wsConnection?.isConnecting&&r)return this.logger("info","client:openConnection() - connection already in progress"),await r;if(this.wsConnection?.isHealthy&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists");return}this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${Bm()}`;const o=this.connect();return this.wsPromiseSafe=wc(o),await o},this.disconnectUser=async r=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(r),bx(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromiseSafe=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async r=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:r},{publicEndpoint:!0});const o=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise=void 0),this.connectUser(o.user,o.access_token)},this.connectAnonymousUser=async(r,o)=>{Fm(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,await this.tokenManager.setTokenOrProvider(o,r,!0),this._setUser(r),this.resolveConnectionId?.()},this.on=(r,o)=>(this.listeners[r]||(this.listeners[r]=[]),this.logger("debug",`Adding listener for ${r} event`),this.listeners[r]?.push(o),()=>{this.off(r,o)}),this.off=(r,o)=>{this.listeners[r]||(this.listeners[r]=[]),this.logger("debug",`Removing listener for ${r} event`),this.listeners[r]=this.listeners[r]?.filter(l=>l!==o)},this._setupConnectionIdPromise=()=>{this.connectionIdPromiseSafe=wc(new Promise((r,o)=>{this.resolveConnectionId=r,this.rejectConnectionId=o}))},this._logApiRequest=(r,o,l,u)=>{Vm()==="trace"&&this.logger("trace",`client: ${r} - Request - ${o}`,{payload:l,config:u})},this._logApiResponse=(r,o,l)=>{Vm()==="trace"&&this.logger("trace",`client:${r} - Response - url: ${o} > status ${l.status}`,{response:l})},this._logApiError=(r,o,l)=>{this.logger("error",`client:${r} - Error - url: ${o}`,{url:o,error:l})},this.doAxiosRequest=async(r,o,l,u={})=>{if(!u.publicEndpoint){await Promise.all([this.tokenManager.tokenReady(),this.guestUserCreatePromise]);try{await this.connectionIdPromise}catch{await this.wsConnection?._waitForHealthy(),await this.connectionIdPromise}}const h=this._enrichAxiosOptions(u);try{let d;switch(this._logApiRequest(r,o,l,h),r){case"get":d=await this.axiosInstance.get(o,h);break;case"delete":d=await this.axiosInstance.delete(o,h);break;case"post":d=await this.axiosInstance.post(o,l,h);break;case"put":d=await this.axiosInstance.put(o,l,h);break;case"patch":d=await this.axiosInstance.patch(o,l,h);break;case"options":d=await this.axiosInstance.options(o,h);break;default:throw new Error("Invalid request type")}return this._logApiResponse(r,o,d),this.consecutiveFailures=0,this.handleResponse(d)}catch(d){if(d.client_request_id=h.headers?.["x-client-request-id"],this.consecutiveFailures+=1,d.response)return this._logApiError(r,o,d.response),d.response.data.code===Ta.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await Hi(Uc(this.consecutiveFailures)),await this.tokenManager.loadToken(),await this.doAxiosRequest(r,o,l,u)):this.handleResponse(d.response);throw this._logApiError(r,o,d),d}},this.get=(r,o)=>this.doAxiosRequest("get",r,null,{params:o}),this.put=(r,o,l)=>this.doAxiosRequest("put",r,o,{params:l}),this.post=(r,o,l)=>this.doAxiosRequest("post",r,o,{params:l}),this.patch=(r,o,l)=>this.doAxiosRequest("patch",r,o,{params:l}),this.delete=(r,o)=>this.doAxiosRequest("delete",r,null,{params:o}),this.errorFromResponse=r=>{const{data:o,status:l}=r;return new rx({message:`Stream error code ${o.code}: ${o.message}`,code:o.code??null,unrecoverable:o.unrecoverable??null,response:r,status:l})},this.handleResponse=r=>{const o=r.data;if(eU(r))throw this.errorFromResponse(r);return o},this.dispatchEvent=r=>{if(this.logger("debug",`Dispatching event: ${r.type}`,r),!!this.listeners){for(const o of this.listeners.all||[])o(r);for(const o of this.listeners[r.type]||[])o(r)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");return this.wsConnection=new Q3(this),this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.defaultWSTimeout)},this.getUserAgent=()=>{if(!this.cachedUserAgent){const{clientAppIdentifier:r={}}=this.options,{sdkName:o="js",sdkVersion:l="1.25.5",...u}=r;this.cachedUserAgent=[`stream-video-${o}-v${l}`,...Object.entries(u).map(([h,d])=>`${h}=${d}`),"client_bundle=browser-esm"].join("|")}return this.cachedUserAgent},this._enrichAxiosOptions=(r={params:{},headers:{},config:{}})=>{const o=r.publicEndpoint&&!this.user?void 0:this._getToken(),l=o?{Authorization:o}:void 0;return r.headers?.["x-client-request-id"]||(r.headers={...r.headers,"x-client-request-id":Bm()}),{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...r.params},headers:{...l,"stream-auth-type":r.publicEndpoint&&!this.user?"anonymous":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...r.headers},...r.config,...this.options.axiosRequestConfig}},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this.updateNetworkConnectionStatus=r=>{r.type==="offline"?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):r.type==="online"&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=e,this.secret=n?.secret;const s=n||{browser:typeof window<"u"};this.browser=s.browser||typeof window<"u",this.node=!this.browser,this.browser&&(this.locationHint=UT(n?.locationHintUrl,n?.locationHintTimeout,n?.locationHintMaxAttempts)),this.options={timeout:5e3,withCredentials:!1,...s},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new J3.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),this.axiosInstance=Tt.create({...this.options,baseURL:this.baseURL}),this.wsConnection=null,this.wsPromiseSafe=null,this.connectUserTask=null,this.anonymous=!1,this.persistUserOnConnectionFailure=this.options?.persistUserOnConnectionFailure,this.tokenManager=new e4(this.secret),this.consecutiveFailures=0,this.defaultWSTimeout=this.options.defaultWsTimeout??15e3,this.logger=Um(s.logger)?s.logger:()=>null}get connectionIdPromise(){return this.connectionIdPromiseSafe?.()}get isConnectionIsPromisePending(){return this.connectionIdPromiseSafe?.checkPending()??!1}get wsPromise(){return this.wsPromiseSafe?.()}}const Gp=(t,e)=>`${t}/${e.id}`,n4=t=>{const e=t?.clientAppIdentifier||{},n=AU();return n&&(e.sdkName=qi[n.type].toLowerCase(),e.sdkVersion=`${n.major}.${n.minor}.${n.patch}`),e},s4=(t,e)=>{const n=n4(e),s=Ze(["coordinator"]);return new t4(t,{persistUserOnConnectionFailure:!0,...e,clientAppIdentifier:n,logger:s})},i4=t=>{const{token:e,tokenProvider:n}=t;if(e&&n){let s=!1;return async function(){return s?n():(s=!0,e)}}return e||n};class Mi{constructor(e,n){this.effectsRegistered=!1,this.eventHandlersToUnregister=[],this.connectionConcurrencyTag=Symbol("connectionConcurrencyTag"),this.registerClientInstance=(l,u)=>{const h=Gp(l,u);Mi._instances.has(h)&&this.logger("warn",`A StreamVideoClient already exists for ${u.id}; Prefer using getOrCreateInstance method`),Mi._instances.set(h,this)},this.registerEffects=()=>{this.effectsRegistered||(this.eventHandlersToUnregister.push(this.on("connection.changed",l=>{if(!l.online)return;const u=this.writeableStateStore.calls.filter(h=>h.watching).map(h=>h.cid);u.length<=0||(this.logger("info",`Rewatching calls ${u.join(", ")}`),this.queryCalls({watch:!0,filter_conditions:{cid:{$in:u}},sort:[{field:"cid",direction:1}]}).catch(h=>{this.logger("error","Failed to re-watch calls",h)}))})),this.eventHandlersToUnregister.push(this.on("call.created",l=>{const{call:u,members:h}=l;if(this.state.connectedUser?.id===u.created_by.id){this.logger("warn","Received `call.created` sent by the current user");return}this.logger("info",`New call created and registered: ${u.cid}`);const d=new Zo({streamClient:this.streamClient,type:u.type,id:u.id,members:h,clientStore:this.writeableStateStore});d.state.updateFromCallResponse(u),this.writeableStateStore.registerCall(d)})),this.eventHandlersToUnregister.push(this.on("call.ring",async l=>{const{call:u,members:h}=l;if(this.state.connectedUser?.id===u.created_by.id){this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");return}const d=this.writeableStateStore.findCall(u.type,u.id);d?await d.updateFromRingingEvent(l):await new Zo({streamClient:this.streamClient,type:u.type,id:u.id,members:h,clientStore:this.writeableStateStore,ringing:!0}).get()})),this.effectsRegistered=!0)},this.connectUser=async(l,u)=>{if(l.type==="anonymous")return l.id="!anon",this.connectAnonymousUser(l,u);const h=await In(this.connectionConcurrencyTag,async()=>{const d=this.streamClient,{onConnectUserError:m,persistUserOnConnectionFailure:b}=d.options;let{maxConnectUserRetries:g=5}=d.options;g=Math.max(g,1);const v=[];for(let S=0;S<g;S++)try{return this.logger("trace",`Connecting user (${S})`,l),l.type==="guest"?await d.connectGuestUser(l):await d.connectUser(l,u)}catch(T){if(this.logger("warn",`Failed to connect a user (${S})`,T),v.push(T),S===g-1)throw m?.(T,v),T;b&&await d.disconnectUser(),await Hi(Uc(S))}});return h?.me&&this.writeableStateStore.setConnectedUser(h.me),this.registerEffects(),h},this.disconnectUser=async l=>{await In(this.connectionConcurrencyTag,async()=>{const{user:u,key:h}=this.streamClient;u&&(await this.streamClient.disconnectUser(l),u.id&&Mi._instances.delete(Gp(h,u)),this.eventHandlersToUnregister.forEach(d=>d()),this.eventHandlersToUnregister=[],this.effectsRegistered=!1,this.writeableStateStore.setConnectedUser(void 0))})},this.on=(l,u)=>this.streamClient.on(l,u),this.off=(l,u)=>this.streamClient.off(l,u),this.call=(l,u,h={})=>(h.reuseInstance?this.writeableStateStore.findCall(l,u):void 0)??new Zo({streamClient:this.streamClient,id:u,type:l,clientStore:this.writeableStateStore}),this.createGuestUser=async l=>this.streamClient.doAxiosRequest("post","/guest",l,{publicEndpoint:!0}),this.queryCalls=async(l={})=>{const u=await this.streamClient.post("/calls",l),h=[];for(const d of u.calls){const m=new Zo({streamClient:this.streamClient,id:d.call.id,type:d.call.type,members:d.members,ownCapabilities:d.own_capabilities,watching:l.watch,clientStore:this.writeableStateStore});m.state.updateFromCallResponse(d.call),await m.applyDeviceConfig(d.call.settings,!1),l.watch&&(await m.setup(),this.writeableStateStore.registerCall(m)),h.push(m)}return{...u,calls:h}},this.queryCallStats=async(l={})=>this.streamClient.post("/call/stats",l),this.queryAggregateCallStats=async(l={})=>this.streamClient.post("/stats",l),this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(l,u,h,d,m)=>await this.streamClient.post("/devices",{id:l,push_provider:u,voip_token:m,...d!=null?{user_id:d}:{},...h!=null?{push_provider_name:h}:{}}),this.addVoipDevice=async(l,u,h,d)=>await this.addDevice(l,u,h,d,!0),this.getDevices=async l=>await this.streamClient.get("/devices",l?{user_id:l}:{}),this.removeDevice=async(l,u)=>await this.streamClient.delete("/devices",{id:l,...u?{user_id:u}:{}}),this.onRingingCall=async l=>{let u=this.state.calls.find(h=>h.cid===l&&h.ringing);if(!u){const[h,d]=l.split(":");u=new Zo({streamClient:this.streamClient,type:h,id:d,clientStore:this.writeableStateStore,ringing:!0}),await u.get()}return u},this.connectAnonymousUser=async(l,u)=>In(this.connectionConcurrencyTag,()=>this.streamClient.connectAnonymousUser(l,u));const s=typeof e=="string"?e:e.apiKey,r=typeof e=="string"?n:e.options;r?.enableTimerWorker&&t3();const o=r?.logger||Sx;if(nU(o,r?.logLevel||"warn"),this.logger=Ze(["client"]),this.streamClient=s4(s,r),this.writeableStateStore=new dU,this.readOnlyStateStore=new hU(this.writeableStateStore),typeof e!="string"&&e.user){const l=e.user;l.type==="anonymous"&&(l.id="!anon"),l.id&&this.registerClientInstance(s,l);const u=i4(e);this.connectUser(l,u).catch(h=>{this.logger("error","Failed to connect",h)})}}static getOrCreateInstance(e){const{apiKey:n,user:s,token:r,tokenProvider:o}=e;if(!s.id&&s.type!=="anonymous")throw new Error("user.id is required for a non-anonymous user");if(!r&&!o&&s.type!=="anonymous"&&s.type!=="guest")throw new Error("tokenProvider or token is required for a authenticated users");return Mi._instances.get(Gp(n,s))||new Mi(e)}get state(){return this.readOnlyStateStore}}Mi._instances=new Map;const Ae=t=>typeof t=="string",ec=()=>{let t,e;const n=new Promise((s,r)=>{t=s,e=r});return n.resolve=t,n.reject=e,n},BT=t=>t==null?"":""+t,r4=(t,e,n)=>{t.forEach(s=>{e[s]&&(n[s]=e[s])})},a4=/###/g,FT=t=>t&&t.indexOf("###")>-1?t.replace(a4,"."):t,VT=t=>!t||Ae(t),uc=(t,e,n)=>{const s=Ae(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(VT(t))return{};const o=FT(s[r]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++r}return VT(t)?{}:{obj:t,k:FT(s[r])}},$T=(t,e,n)=>{const{obj:s,k:r}=uc(t,e,Object);if(s!==void 0||e.length===1){s[r]=n;return}let o=e[e.length-1],l=e.slice(0,e.length-1),u=uc(t,l,Object);for(;u.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),u=uc(t,l,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=n},o4=(t,e,n,s)=>{const{obj:r,k:o}=uc(t,e,Object);r[o]=r[o]||[],r[o].push(n)},df=(t,e)=>{const{obj:n,k:s}=uc(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},c4=(t,e,n)=>{const s=df(t,n);return s!==void 0?s:df(e,n)},Fx=(t,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?Ae(t[s])||t[s]instanceof String||Ae(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):Fx(t[s],e[s],n):t[s]=e[s]);return t},Sa=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var l4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const u4=t=>Ae(t)?t.replace(/[&<>"'\/]/g,e=>l4[e]):t;class f4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const d4=[" ",",","?","!",";"],h4=new f4(20),p4=(t,e,n)=>{e=e||"",n=n||"";const s=d4.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(s.length===0)return!0;const r=h4.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!r.test(t);if(!o){const l=t.indexOf(n);l>0&&!r.test(t.substring(0,l))&&(o=!0)}return o},qm=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(n);let r=t;for(let o=0;o<s.length;){if(!r||typeof r!="object")return;let l,u="";for(let h=o;h<s.length;++h)if(h!==o&&(u+=n),u+=s[h],l=r[u],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&h<s.length-1)continue;o+=h-o+1;break}r=l}return r},Ec=t=>t?.replace("_","-"),m4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class hf{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||m4,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,r){return r&&!this.debug?null:(Ae(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new hf(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new hf(this.logger,e)}}var Os=new hf;class Wf{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let l=0;l<o;l++)r(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let l=0;l<o;l++)r.apply(r,[e,...n])})}}class HT extends Wf{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,n],s&&(Array.isArray(s)?u.push(...s):Ae(s)&&o?u.push(...s.split(o)):u.push(s)));const h=df(this.data,u);return!h&&!n&&!s&&e.indexOf(".")>-1&&(e=u[0],n=u[1],s=u.slice(2).join(".")),h||!l||!Ae(s)?h:qm(this.data?.[e]?.[n],s,o)}addResource(e,n,s,r,o={silent:!1}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,n];s&&(u=u.concat(l?s.split(l):s)),e.indexOf(".")>-1&&(u=e.split("."),r=n,n=u[1]),this.addNamespaces(n),$T(this.data,u,r),o.silent||this.emit("added",e,n,s,r)}addResources(e,n,s,r={silent:!1}){for(const o in s)(Ae(s[o])||Array.isArray(s[o]))&&this.addResource(e,n,o,s[o],{silent:!0});r.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,r,o,l={silent:!1,skipCopy:!1}){let u=[e,n];e.indexOf(".")>-1&&(u=e.split("."),r=s,s=n,n=u[1]),this.addNamespaces(n);let h=df(this.data,u)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?Fx(h,s,o):h={...h,...s},$T(this.data,u,h),l.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var Vx={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,r){return t.forEach(o=>{e=this.processors[o]?.process(e,n,s,r)??e}),e}};const zT={},qT=t=>!Ae(t)&&typeof t!="boolean"&&typeof t!="number";class pf extends Wf{constructor(e,n={}){super(),r4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Os.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};return e==null?!1:this.resolve(e,s)?.res!==void 0}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const l=s&&e.indexOf(s)>-1,u=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!p4(e,s,r);if(l&&!u){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:Ae(o)?[o]:o};const d=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(d[0])>-1)&&(o=d.shift()),e=d.join(r)}return{key:e,namespaces:Ae(o)?[o]:o}}translate(e,n,s){let r=typeof n=="object"?{...n}:n;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:u,namespaces:h}=this.extractFromKey(e[e.length-1],r),d=h[h.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const b=r.lng||this.language,g=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b?.toLowerCase()==="cimode")return g?o?{res:`${d}${m}${u}`,usedKey:u,exactUsedKey:u,usedLng:b,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:`${d}${m}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:b,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:u;const v=this.resolve(e,r);let S=v?.res;const T=v?.usedKey||u,w=v?.exactUsedKey||u,R=["[object Number]","[object Function]","[object RegExp]"],O=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,D=r.count!==void 0&&!Ae(r.count),P=pf.hasDefaultValue(r),H=D?this.pluralResolver.getSuffix(b,r.count,r):"",G=r.ordinal&&D?this.pluralResolver.getSuffix(b,r.count,{ordinal:!1}):"",X=D&&!r.ordinal&&r.count===0,ie=X&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${H}`]||r[`defaultValue${G}`]||r.defaultValue;let ee=S;k&&!S&&P&&(ee=ie);const le=qT(ee),re=Object.prototype.toString.apply(ee);if(k&&ee&&le&&R.indexOf(re)<0&&!(Ae(O)&&Array.isArray(ee))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const oe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,ee,{...r,ns:h}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(v.res=oe,v.usedParams=this.getUsedParamsDetails(r),v):oe}if(l){const oe=Array.isArray(ee),te=oe?[]:{},Y=oe?w:T;for(const L in ee)if(Object.prototype.hasOwnProperty.call(ee,L)){const q=`${Y}${l}${L}`;P&&!S?te[L]=this.translate(q,{...r,defaultValue:qT(ie)?ie[L]:void 0,joinArrays:!1,ns:h}):te[L]=this.translate(q,{...r,joinArrays:!1,ns:h}),te[L]===q&&(te[L]=ee[L])}S=te}}else if(k&&Ae(O)&&Array.isArray(S))S=S.join(O),S&&(S=this.extendTranslation(S,e,r,s));else{let oe=!1,te=!1;!this.isValidLookup(S)&&P&&(oe=!0,S=ie),this.isValidLookup(S)||(te=!0,S=u);const L=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:S,q=P&&ie!==S&&this.options.updateMissing;if(te||oe||q){if(this.logger.log(q?"updateKey":"missingKey",b,d,u,q?ie:S),l){const $=this.resolve(u,{...r,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ne&&ne[0])for(let $=0;$<ne.length;$++)F.push(ne[$]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(r.lng||this.language):F.push(r.lng||this.language);const A=($,K,se)=>{const ue=P&&se!==S?se:L;this.options.missingKeyHandler?this.options.missingKeyHandler($,d,K,ue,q,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing($,d,K,ue,q,r),this.emit("missingKey",$,d,K,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?F.forEach($=>{const K=this.pluralResolver.getSuffixes($,r);X&&r[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(se=>{A([$],u+se,r[`defaultValue${se}`]||ie)})}):A(F,u,ie))}S=this.extendTranslation(S,e,r,v,s),te&&S===u&&this.options.appendNamespaceToMissingKey&&(S=`${d}${m}${u}`),(te||oe)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${m}${u}`:u,oe?S:void 0,r))}return o?(v.res=S,v.usedParams=this.getUsedParamsDetails(r),v):S}extendTranslation(e,n,s,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=Ae(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(h){const b=e.match(this.interpolator.nestingRegexp);d=b&&b.length}let m=s.replace&&!Ae(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,s.lng||this.language||r.usedLng,s),h){const b=e.match(this.interpolator.nestingRegexp),g=b&&b.length;d<g&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>o?.[0]===b[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):this.translate(...b,n),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,u=Ae(l)?[l]:l;return e!=null&&u?.length&&s.applyPostProcessor!==!1&&(e=Vx.handle(u,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,r,o,l,u;return Ae(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(h,n),m=d.key;r=m;let b=d.namespaces;this.options.fallbackNS&&(b=b.concat(this.options.fallbackNS));const g=n.count!==void 0&&!Ae(n.count),v=g&&!n.ordinal&&n.count===0,S=n.context!==void 0&&(Ae(n.context)||typeof n.context=="number")&&n.context!=="",T=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);b.forEach(w=>{this.isValidLookup(s)||(u=w,!zT[`${T[0]}-${w}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(zT[`${T[0]}-${w}`]=!0,this.logger.warn(`key "${r}" for languages "${T.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(R=>{if(this.isValidLookup(s))return;l=R;const O=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(O,m,R,w,n);else{let D;g&&(D=this.pluralResolver.getSuffix(R,n.count,n));const P=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(O.push(m+D),n.ordinal&&D.indexOf(H)===0&&O.push(m+D.replace(H,this.options.pluralSeparator)),v&&O.push(m+P)),S){const G=`${m}${this.options.contextSeparator}${n.context}`;O.push(G),g&&(O.push(G+D),n.ordinal&&D.indexOf(H)===0&&O.push(G+D.replace(H,this.options.pluralSeparator)),v&&O.push(G+P))}}let k;for(;k=O.pop();)this.isValidLookup(s)||(o=k,s=this.getResource(R,w,k,n))}))})}),{res:s,usedKey:r,exactUsedKey:o,usedLng:l,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,s,r):this.resourceStore.getResource(e,n,s,r)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Ae(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const o of n)delete r[o]}return r}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class GT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Os.create("languageUtils")}getScriptPartFromCode(e){if(e=Ec(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ec(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ae(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return n=r;const o=this.getLanguagePartFromCode(s);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(l=>{if(l===o)return l;if(!(l.indexOf("-")<0&&o.indexOf("-")<0)&&(l.indexOf("-")>0&&o.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===o||l.indexOf(o)===0&&o.length>1))return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ae(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),r=[],o=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Ae(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ae(e)&&o(this.formatLanguageCode(e)),s.forEach(l=>{r.indexOf(l)<0&&o(this.formatLanguageCode(l))}),r}}const KT={zero:0,one:1,two:2,few:3,many:4,other:5},YT={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class g4{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Os.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=Ec(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:s,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(s,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),YT;if(!e.match(/-|_/))return YT;const h=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(h,n)}return this.pluralRulesCache[o]=l,l}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(r=>`${n}${r}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((r,o)=>KT[r]-KT[o]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const JT=(t,e,n,s=".",r=!0)=>{let o=c4(t,e,n);return!o&&r&&Ae(n)&&(o=qm(t,n,s),o===void 0&&(o=qm(e,n,s))),o},Kp=t=>t.replace(/\$/g,"$$$$");class y4{constructor(e={}){this.logger=Os.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:o,prefixEscaped:l,suffix:u,suffixEscaped:h,formatSeparator:d,unescapeSuffix:m,unescapePrefix:b,nestingPrefix:g,nestingPrefixEscaped:v,nestingSuffix:S,nestingSuffixEscaped:T,nestingOptionsSeparator:w,maxReplaces:R,alwaysFormat:O}=e.interpolation;this.escape=n!==void 0?n:u4,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?Sa(o):l||"{{",this.suffix=u?Sa(u):h||"}}",this.formatSeparator=d||",",this.unescapePrefix=m?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=g?Sa(g):v||Sa("$t("),this.nestingSuffix=S?Sa(S):T||Sa(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=R||1e3,this.alwaysFormat=O!==void 0?O:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>n?.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,s,r){let o,l,u;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const R=JT(n,h,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(R,void 0,s,{...r,...n,interpolationkey:v}):R}const S=v.split(this.formatSeparator),T=S.shift().trim(),w=S.join(this.formatSeparator).trim();return this.format(JT(n,h,T,this.options.keySeparator,this.options.ignoreJSONStructure),w,s,{...r,...n,interpolationkey:T})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,b=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>Kp(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?Kp(this.escape(v)):Kp(v)}].forEach(v=>{for(u=0;o=v.regex.exec(e);){const S=o[1].trim();if(l=d(S),l===void 0)if(typeof m=="function"){const w=m(e,o,r);l=Ae(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,S))l="";else if(b){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${e}`),l="";else!Ae(l)&&!this.useRawValueToEscape&&(l=BT(l));const T=v.safeValue(l);if(e=e.replace(o[0],T),b?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=o[0].length):v.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,n,s={}){let r,o,l;const u=(h,d)=>{const m=this.nestingOptionsSeparator;if(h.indexOf(m)<0)return h;const b=h.split(new RegExp(`${m}[ ]*{`));let g=`{${b[1]}`;h=b[0],g=this.interpolate(g,l);const v=g.match(/'/g),S=g.match(/"/g);((v?.length??0)%2===0&&!S||S.length%2!==0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),d&&(l={...d,...l})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,T),`${h}${m}${g}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,h};for(;r=this.nestingRegexp.exec(e);){let h=[];l={...s},l=l.replace&&!Ae(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const d=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(d!==-1&&(h=r[1].slice(d).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,d)),o=n(u.call(this,r[1].trim(),l),l),o&&r[0]===e&&!Ae(o))return o;Ae(o)||(o=BT(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),h.length&&(o=h.reduce((m,b)=>this.format(m,b,s.lng,{...s,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const b4=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(l=>{if(l){const[u,...h]=l.split(":"),d=h.join(":").trim().replace(/^'+|'+$/g,""),m=u.trim();n[m]||(n[m]=d),d==="false"&&(n[m]=!1),d==="true"&&(n[m]=!0),isNaN(d)||(n[m]=parseInt(d,10))}})}return{formatName:e,formatOptions:n}},XT=t=>{const e={};return(n,s,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const l=s+JSON.stringify(o);let u=e[l];return u||(u=t(Ec(s),r),e[l]=u),u(n)}},v4=t=>(e,n,s)=>t(Ec(n),s)(e);class S4{constructor(e={}){this.logger=Os.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?XT:v4;this.formats={number:s((r,o)=>{const l=new Intl.NumberFormat(r,{...o});return u=>l.format(u)}),currency:s((r,o)=>{const l=new Intl.NumberFormat(r,{...o,style:"currency"});return u=>l.format(u)}),datetime:s((r,o)=>{const l=new Intl.DateTimeFormat(r,{...o});return u=>l.format(u)}),relativetime:s((r,o)=>{const l=new Intl.RelativeTimeFormat(r,{...o});return u=>l.format(u,o.range||"day")}),list:s((r,o)=>{const l=new Intl.ListFormat(r,{...o});return u=>l.format(u)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=XT(n)}format(e,n,s,r={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,h)=>{const{formatName:d,formatOptions:m}=b4(h);if(this.formats[d]){let b=u;try{const g=r?.formatParams?.[r.interpolationkey]||{},v=g.locale||g.lng||r.locale||r.lng||s;b=this.formats[d](u,v,{...m,...r,...g})}catch(g){this.logger.warn(g)}return b}else this.logger.warn(`there was no format function for ${d}`);return u},e)}}const T4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class C4 extends Wf{constructor(e,n,s,r={}){super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=Os.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,r.backend,r)}queueLoad(e,n,s,r){const o={},l={},u={},h={};return e.forEach(d=>{let m=!0;n.forEach(b=>{const g=`${d}|${b}`;!s.reload&&this.store.hasResourceBundle(d,b)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?l[g]===void 0&&(l[g]=!0):(this.state[g]=1,m=!1,l[g]===void 0&&(l[g]=!0),o[g]===void 0&&(o[g]=!0),h[b]===void 0&&(h[b]=!0)))}),m||(u[d]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}loaded(e,n,s){const r=e.split("|"),o=r[0],l=r[1];n&&this.emit("failedLoading",o,l,n),!n&&s&&this.store.addResourceBundle(o,l,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const u={};this.queue.forEach(h=>{o4(h.loaded,[o],l),T4(h,e),n&&h.errors.push(n),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(d=>{u[d]||(u[d]={});const m=h.loaded[d];m.length&&m.forEach(b=>{u[d][b]===void 0&&(u[d][b]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(h=>!h.done)}read(e,n,s,r=0,o=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:r,wait:o,callback:l});return}this.readingCalls++;const u=(d,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const b=this.waitingReads.shift();this.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(d&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,r+1,o*2,l)},o);return}l(d,m)},h=this.backend[s].bind(this.backend);if(h.length===2){try{const d=h(e,n);d&&typeof d.then=="function"?d.then(m=>u(null,m)).catch(u):u(null,d)}catch(d){u(d)}return}return h(e,n,u)}prepareLoading(e,n,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ae(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ae(n)&&(n=[n]);const o=this.queueLoad(e,n,s,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),r=s[0],o=s[1];this.read(r,o,"read",void 0,void 0,(l,u)=>{l&&this.logger.warn(`${n}loading namespace ${o} for language ${r} failed`,l),!l&&u&&this.logger.log(`${n}loaded namespace ${o} for language ${r}`,u),this.loaded(e,l,u)})}saveMissing(e,n,s,r,o,l={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const h={...l,isUpdate:o},d=this.backend.create.bind(this.backend);if(d.length<6)try{let m;d.length===5?m=d(e,n,s,r,h):m=d(e,n,s,r),m&&typeof m.then=="function"?m.then(b=>u(null,b)).catch(u):u(null,m)}catch(m){u(m)}else d(e,n,s,r,u,h)}!e||!e[0]||this.store.addResource(e[0],n,s,r)}}}const QT=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ae(t[1])&&(e.defaultValue=t[1]),Ae(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),WT=t=>(Ae(t.ns)&&(t.ns=[t.ns]),Ae(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ae(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),pu=()=>{},w4=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class xc extends Wf{constructor(e={},n){if(super(),this.options=WT(e),this.services={},this.logger=Os,this.modules={external:[]},w4(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Ae(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=QT();this.options={...s,...this.options,...WT(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Os.init(r(this.modules.logger),this.options):Os.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=S4;const m=new GT(this.options);this.store=new HT(this.options.resources,this.options);const b=this.services;b.logger=Os,b.resourceStore=this.store,b.languageUtils=m,b.pluralResolver=new g4(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(b.formatter=r(d),b.formatter.init&&b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new y4(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new C4(r(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",(v,...S)=>{this.emit(v,...S)}),this.modules.languageDetector&&(b.languageDetector=r(this.modules.languageDetector),b.languageDetector.init&&b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=r(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new pf(this.services,this.options),this.translator.on("*",(v,...S)=>{this.emit(v,...S)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,n||(n=pu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...m)=>this.store[d](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...m)=>(this.store[d](...m),this)});const u=ec(),h=()=>{const d=(m,b)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(b),n(m,b)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),u}loadResources(e,n=pu){let s=n;const r=Ae(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),this.options.preload?.forEach?.(u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(u)})}else s(null)}reloadResources(e,n,s){const r=ec();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=pu),this.services.backendConnector.reload(e,n,o=>{r.resolve(),s(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Vx.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=ec();this.emit("languageChanging",e);const r=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,h)=>{h?this.isLanguageChangingTo===e&&(r(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve((...d)=>this.t(...d)),n&&n(u,(...d)=>this.t(...d))},l=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const h=Ae(u)?u:u&&u[0],d=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(Ae(u)?[u]:u);d&&(this.language||r(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,m=>{o(m,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}getFixedT(e,n,s){const r=(o,l,...u)=>{let h;typeof l!="object"?h=this.options.overloadTranslationOptionHandler([o,l].concat(u)):h={...l},h.lng=h.lng||r.lng,h.lngs=h.lngs||r.lngs,h.ns=h.ns||r.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||s||r.keyPrefix);const d=this.options.keySeparator||".";let m;return h.keyPrefix&&Array.isArray(o)?m=o.map(b=>`${h.keyPrefix}${d}${b}`):m=h.keyPrefix?`${h.keyPrefix}${d}${o}`:o,this.t(m,h)};return Ae(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=s,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(u,h)=>{const d=this.services.backendConnector.state[`${u}|${h}`];return d===-1||d===0||d===2};if(n.precheck){const u=n.precheck(this,l);if(u!==void 0)return u}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,e)&&(!r||l(o,e)))}loadNamespaces(e,n){const s=ec();return this.options.ns?(Ae(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=ec();Ae(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=r.concat(o),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new GT(QT());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new xc(e,n)}cloneInstance(e={},n=pu){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new xc(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},s){const u=Object.keys(this.store.data).reduce((h,d)=>(h[d]={...this.store.data[d]},h[d]=Object.keys(h[d]).reduce((m,b)=>(m[b]={...h[d][b]},m),h[d]),h),{});o.store=new HT(u,r),o.services.resourceStore=o.store}return o.translator=new pf(o.services,r),o.translator.on("*",(u,...h)=>{o.emit(u,...h)}),o.init(r,n),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pn=xc.createInstance();pn.createInstance=xc.createInstance;pn.createInstance;pn.dir;pn.init;pn.loadResources;pn.reloadResources;pn.use;pn.changeLanguage;pn.getFixedT;pn.t;pn.exists;pn.setDefaultNamespace;pn.hasLoadedNamespace;pn.loadNamespaces;pn.loadLanguages;const $x=x.createContext(void 0),E4=t=>{const{call:e,children:n}=t;return C.jsx($x.Provider,{value:e,children:n})},$t=()=>x.useContext($x),x4=(t,e)=>Object.entries(t).reduce((n,[s,r])=>(n[s]={[e]:r},n),{}),Gm=t=>t;class R4{constructor({debug:e=!1,currentLanguage:n="en",fallbackLanguage:s,translationsOverrides:r={en:{}}}={}){this.t=Gm,this.init=async()=>(this.t=await this.i18nInstance.init(),this.t),this.changeLanguage=async l=>(this.t=await this.i18nInstance.changeLanguage(l),this.t);const o="stream-video";this.i18nInstance=pn.createInstance({debug:e,defaultNS:o,fallbackLng:s,interpolation:{escapeValue:!1},keySeparator:!1,lng:n,nsSeparator:!1,parseMissingKeyHandler:Gm,resources:x4(r,o)})}get currentLanguage(){return this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const Hx=x.createContext({t:Gm}),_4=({children:t,...e})=>{const n=k4(e);return C.jsx(Hx.Provider,{value:n,children:t})},k4=({i18nInstance:t,language:e,fallbackLanguage:n,translationsOverrides:s})=>{const[r]=x.useState(()=>t||new R4({currentLanguage:e,fallbackLanguage:n,translationsOverrides:s})),[o,l]=x.useState(()=>r.t);return x.useEffect(()=>{r.isInitialized?r.currentLanguage!==e&&r.changeLanguage(e).then(()=>l(()=>r.t)):r.init().then(()=>l(()=>r.t))},[r,e]),x.useMemo(()=>({i18n:r,t:o}),[r,o])},sn=()=>x.useContext(Hx),O4=x.createContext(void 0),A4=({children:t,client:e,i18nInstance:n,language:s,translationsOverrides:r})=>C.jsx(O4.Provider,{value:e,children:C.jsx(_4,{i18nInstance:n,language:s,translationsOverrides:r,children:t})}),N4=()=>typeof navigator>"u"?!1:navigator.product?.toLowerCase()==="reactnative",Te=(t,e)=>{const[n,s]=x.useState(()=>{try{return kT.getCurrentValue(t)}catch(r){if(typeof e>"u")throw r;return e}});return x.useEffect(()=>kT.createSubscription(t,s,r=>{console.log("An error occurred while reading an observable",r),e&&s(e)}),[e,t]),n},ZT=Object.freeze([]),Ye=()=>{const t=$t();return t?t.state:(console.warn('You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.'),new Ex)},zx=()=>{const{recording$:t}=Ye();return Te(t)},D4=()=>{const{egress$:t}=Ye(),e=Te(t);return e?e.broadcasting:!1},I4=()=>{const{backstage$:t}=Ye();return!Te(t)},P4=()=>{const{blockedUserIds$:t}=Ye();return Te(t)},L4=()=>{const{createdAt$:t}=Ye();return Te(t)},j4=()=>{const{endedAt$:t}=Ye();return Te(t)},M4=()=>{const{startsAt$:t}=Ye();return Te(t)},U4=()=>{const{updatedAt$:t}=Ye();return Te(t)},B4=()=>{const{createdBy$:t}=Ye();return Te(t)},F4=()=>{const{custom$:t}=Ye();return Te(t)},V4=()=>{const{egress$:t}=Ye();return Te(t)},$4=()=>{const{ingress$:t}=Ye();return Te(t)},H4=()=>{const{session$:t}=Ye();return Te(t)},z4=()=>{const{settings$:t}=Ye();return Te(t)},q4=()=>{const{transcribing$:t}=Ye();return Te(t)},G4=()=>{const{endedBy$:t}=Ye();return Te(t)},K4=()=>{const{hasOngoingScreenShare$:t}=Ye();return Te(t)},Y4=()=>{const{callStatsReport$:t}=Ye();return Te(t)},J4=()=>{const{dominantSpeaker$:t}=Ye();return Te(t)},X4=()=>{const{members$:t}=Ye();return Te(t)},Q4=()=>{const{callingState$:t}=Ye();return Te(t)},W4=()=>{const{startedAt$:t}=Ye();return Te(t)},Z4=({sortBy:t}={})=>{const{participants$:e}=Ye(),n=Te(e);return x.useMemo(()=>t?[...n].sort(t):n,[n,t])},eB=()=>{const{rawParticipants$:t}=Ye();return Te(t)},tB=()=>{const{localParticipant$:t}=Ye();return Te(t)},nB=()=>{const{remoteParticipants$:t}=Ye();return Te(t)},sB=()=>{const{participantCount$:t}=Ye();return Te(t)},iB=()=>{const{anonymousParticipantCount$:t}=Ye();return Te(t)},rB=()=>{const{thumbnails$:t}=Ye();return Te(t)},qx=()=>{const{ownCapabilities$:t}=Ye();return Te(t)},aB=(...t)=>{const e=qx();return t.every(n=>e?.includes(n))},oB=()=>{const t=$t(),{camera:e}=t,{state:n}=e,s=Te(n.direction$),r=Te(n.mediaStream$),o=Te(n.selectedDevice$),{getDevices:l}=Qg(e),u=Te(n.hasBrowserPermission$),h=Te(n.isPromptingPermission$);return{camera:e,direction:s,mediaStream:r,get devices(){return l()},hasBrowserPermission:u,isPromptingPermission:h,selectedDevice:o,...Xg(Te(n.status$),Te(n.optimisticStatus$))}},cB=()=>{const t=$t(),{microphone:e}=t,{state:n}=e,s=Te(n.mediaStream$),r=Te(n.selectedDevice$),{getDevices:o}=Qg(e),l=Te(n.hasBrowserPermission$),u=Te(n.isPromptingPermission$),h=Te(n.speakingWhileMuted$);return{microphone:e,mediaStream:s,get devices(){return o()},selectedDevice:r,hasBrowserPermission:l,isPromptingPermission:u,isSpeakingWhileMuted:h,...Xg(Te(n.status$),Te(n.optimisticStatus$))}},lB=()=>{if(N4())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const t=$t(),{speaker:e}=t,{getDevices:n}=Qg(e),s=Te(e.state.selectedDevice$);return{speaker:e,get devices(){return n()},selectedDevice:s,isDeviceSelectionSupported:e.state.isDeviceSelectionSupported}},uB=()=>{const t=$t(),{screenShare:e}=t;return{screenShare:e,mediaStream:Te(e.state.mediaStream$),...Xg(Te(e.state.status$),Te(e.state.optimisticStatus$))}},fB=()=>{const t=$t();return Te(t.dynascaleManager.incomingVideoSettings$)},dB=()=>{const{closedCaptions$:t}=Ye();return Te(t)},hB=()=>{const{captioning$:t}=Ye();return Te(t)};function Xg(t,e){const n=e??t;return{status:t,optimisticStatus:n,isEnabled:t==="enabled",isMute:t!=="enabled",optimisticIsMute:n!=="enabled",isTogglePending:n!==t}}function Qg(t){const e=x.useMemo(()=>lc(ZT),[]),[n,s]=x.useState(e),r=Te(n,ZT);return{getDevices:()=>(n===e&&s(t.listDevices()),r)}}var pB=Object.freeze({__proto__:null,useAnonymousParticipantCount:iB,useCallBlockedUserIds:P4,useCallCallingState:Q4,useCallClosedCaptions:dB,useCallCreatedAt:L4,useCallCreatedBy:B4,useCallCustomData:F4,useCallEgress:V4,useCallEndedAt:j4,useCallEndedBy:G4,useCallIngress:$4,useCallMembers:X4,useCallSession:H4,useCallSettings:z4,useCallStartedAt:W4,useCallStartsAt:M4,useCallState:Ye,useCallStatsReport:Y4,useCallThumbnail:rB,useCallUpdatedAt:U4,useCameraState:oB,useDominantSpeaker:J4,useHasOngoingScreenShare:K4,useHasPermissions:aB,useIncomingVideoSettings:fB,useIsCallCaptioningInProgress:hB,useIsCallHLSBroadcastingInProgress:D4,useIsCallLive:I4,useIsCallRecordingInProgress:zx,useIsCallTranscribingInProgress:q4,useLocalParticipant:tB,useMicrophoneState:cB,useOwnCapabilities:qx,useParticipantCount:sB,useParticipants:Z4,useRawParticipants:eB,useRemoteParticipants:nB,useScreenShareState:uB,useSpeakerState:lB});const mB=()=>{const t=$t(),e=zx(),[n,s]=x.useState(!1);return x.useEffect(()=>{s(o=>o&&!1)},[e]),{toggleCallRecording:x.useCallback(async()=>{try{s(!0),e?await t?.stopRecording():await t?.startRecording()}catch(o){throw console.error("Failed start recording",o),o}},[t,e]),isAwaitingResponse:n,isCallRecordingInProgress:e}},Pn=()=>pB,An=({canRequestOnly:t,hasPermissionsOnly:e,requiredGrants:n,requireAll:s=!0,children:r})=>{const o=$t(),{useCallSettings:l,useOwnCapabilities:u}=Pn(),h=u(),d=l(),m=n[s?"every":"some"](g=>h?.includes(g));if(e)return m?C.jsx(C.Fragment,{children:r}):null;const b=n.some(g=>o?.permissionsContext.canRequest(g,d));return t?b?C.jsx(C.Fragment,{children:r}):null:m||b?C.jsx(C.Fragment,{children:r}):null};function Zf(){return typeof window<"u"}function Xi(t){return Gx(t)?(t.nodeName||"").toLowerCase():"#document"}function Hn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function js(t){var e;return(e=(Gx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Gx(t){return Zf()?t instanceof Node||t instanceof Hn(t).Node:!1}function xt(t){return Zf()?t instanceof Element||t instanceof Hn(t).Element:!1}function It(t){return Zf()?t instanceof HTMLElement||t instanceof Hn(t).HTMLElement:!1}function Km(t){return!Zf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Hn(t).ShadowRoot}const gB=new Set(["inline","contents"]);function Bc(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=zn(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!gB.has(r)}const yB=new Set(["table","td","th"]);function bB(t){return yB.has(Xi(t))}const vB=[":popover-open",":modal"];function ed(t){return vB.some(e=>{try{return t.matches(e)}catch{return!1}})}const SB=["transform","translate","scale","rotate","perspective"],TB=["transform","translate","scale","rotate","perspective","filter"],CB=["paint","layout","strict","content"];function Wg(t){const e=td(),n=xt(t)?zn(t):t;return SB.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||TB.some(s=>(n.willChange||"").includes(s))||CB.some(s=>(n.contain||"").includes(s))}function wB(t){let e=li(t);for(;It(e)&&!ii(e);){if(Wg(e))return e;if(ed(e))return null;e=li(e)}return null}function td(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EB=new Set(["html","body","#document"]);function ii(t){return EB.has(Xi(t))}function zn(t){return Hn(t).getComputedStyle(t)}function nd(t){return xt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function li(t){if(Xi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Km(t)&&t.host||js(t);return Km(e)?e.host:e}function Kx(t){const e=li(t);return ii(e)?t.ownerDocument?t.ownerDocument.body:t.body:It(e)&&Bc(e)?e:Kx(e)}function zi(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Kx(t),o=r===((s=t.ownerDocument)==null?void 0:s.body),l=Hn(r);if(o){const u=Ym(l);return e.concat(l,l.visualViewport||[],Bc(r)?r:[],u&&n?zi(u):[])}return e.concat(r,zi(r,[],n))}function Ym(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Gi=Math.min,$n=Math.max,mf=Math.round,Ca=Math.floor,Ns=t=>({x:t,y:t}),xB={left:"right",right:"left",bottom:"top",top:"bottom"},RB={start:"end",end:"start"};function Jm(t,e,n){return $n(t,Gi(e,n))}function qa(t,e){return typeof t=="function"?t(e):t}function Ki(t){return t.split("-")[0]}function Ga(t){return t.split("-")[1]}function Yx(t){return t==="x"?"y":"x"}function Zg(t){return t==="y"?"height":"width"}const _B=new Set(["top","bottom"]);function ni(t){return _B.has(Ki(t))?"y":"x"}function ey(t){return Yx(ni(t))}function kB(t,e,n){n===void 0&&(n=!1);const s=Ga(t),r=ey(t),o=Zg(r);let l=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=gf(l)),[l,gf(l)]}function OB(t){const e=gf(t);return[Xm(t),e,Xm(e)]}function Xm(t){return t.replace(/start|end/g,e=>RB[e])}const eC=["left","right"],tC=["right","left"],AB=["top","bottom"],NB=["bottom","top"];function DB(t,e,n){switch(t){case"top":case"bottom":return n?e?tC:eC:e?eC:tC;case"left":case"right":return e?AB:NB;default:return[]}}function IB(t,e,n,s){const r=Ga(t);let o=DB(Ki(t),n==="start",s);return r&&(o=o.map(l=>l+"-"+r),e&&(o=o.concat(o.map(Xm)))),o}function gf(t){return t.replace(/left|right|bottom|top/g,e=>xB[e])}function PB(t){return{top:0,right:0,bottom:0,left:0,...t}}function Jx(t){return typeof t!="number"?PB(t):{top:t,right:t,bottom:t,left:t}}function yf(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var LB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bf=LB.join(","),Xx=typeof Element>"u",Ma=Xx?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,vf=!Xx&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Sf=function t(e,n){var s;n===void 0&&(n=!0);var r=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"inert"),o=r===""||r==="true",l=o||n&&e&&t(e.parentNode);return l},jB=function(e){var n,s=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return s===""||s==="true"},Qx=function(e,n,s){if(Sf(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(bf));return n&&Ma.call(e,bf)&&r.unshift(e),r=r.filter(s),r},Wx=function t(e,n,s){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(!Sf(l,!1))if(l.tagName==="SLOT"){var u=l.assignedElements(),h=u.length?u:l.children,d=t(h,!0,s);s.flatten?r.push.apply(r,d):r.push({scopeParent:l,candidates:d})}else{var m=Ma.call(l,bf);m&&s.filter(l)&&(n||!e.includes(l))&&r.push(l);var b=l.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(l),g=!Sf(b,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(l));if(b&&g){var v=t(b===!0?l.children:b.children,!0,s);s.flatten?r.push.apply(r,v):r.push({scopeParent:l,candidates:v})}else o.unshift.apply(o,l.children)}}return r},Zx=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},eR=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||jB(e))&&!Zx(e)?0:e.tabIndex},MB=function(e,n){var s=eR(e);return s<0&&n&&!Zx(e)?0:s},UB=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},tR=function(e){return e.tagName==="INPUT"},BB=function(e){return tR(e)&&e.type==="hidden"},FB=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return n},VB=function(e,n){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===n)return e[s]},$B=function(e){if(!e.name)return!0;var n=e.form||vf(e),s=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=s(window.CSS.escape(e.name));else try{r=s(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=VB(r,e.form);return!o||o===e},HB=function(e){return tR(e)&&e.type==="radio"},zB=function(e){return HB(e)&&!$B(e)},qB=function(e){var n,s=e&&vf(e),r=(n=s)===null||n===void 0?void 0:n.host,o=!1;if(s&&s!==e){var l,u,h;for(o=!!((l=r)!==null&&l!==void 0&&(u=l.ownerDocument)!==null&&u!==void 0&&u.contains(r)||e!=null&&(h=e.ownerDocument)!==null&&h!==void 0&&h.contains(e));!o&&r;){var d,m,b;s=vf(r),r=(d=s)===null||d===void 0?void 0:d.host,o=!!((m=r)!==null&&m!==void 0&&(b=m.ownerDocument)!==null&&b!==void 0&&b.contains(r))}}return o},nC=function(e){var n=e.getBoundingClientRect(),s=n.width,r=n.height;return s===0&&r===0},GB=function(e,n){var s=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Ma.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(Ma.call(l,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof r=="function"){for(var u=e;e;){var h=e.parentElement,d=vf(e);if(h&&!h.shadowRoot&&r(h)===!0)return nC(e);e.assignedSlot?e=e.assignedSlot:!h&&d!==e.ownerDocument?e=d.host:e=h}e=u}if(qB(e))return!e.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return nC(e);return!1},KB=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var s=0;s<n.children.length;s++){var r=n.children.item(s);if(r.tagName==="LEGEND")return Ma.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Qm=function(e,n){return!(n.disabled||Sf(n)||BB(n)||GB(n,e)||FB(n)||KB(n))},Wm=function(e,n){return!(zB(n)||eR(n)<0||!Qm(e,n))},YB=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},JB=function t(e){var n=[],s=[];return e.forEach(function(r,o){var l=!!r.scopeParent,u=l?r.scopeParent:r,h=MB(u,l),d=l?t(r.candidates):u;h===0?l?n.push.apply(n,d):n.push(u):s.push({documentOrder:o,tabIndex:h,item:r,isScope:l,content:d})}),s.sort(UB).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},sd=function(e,n){n=n||{};var s;return n.getShadowRoot?s=Wx([e],n.includeContainer,{filter:Wm.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:YB}):s=Qx(e,n.includeContainer,Wm.bind(null,n)),JB(s)},XB=function(e,n){n=n||{};var s;return n.getShadowRoot?s=Wx([e],n.includeContainer,{filter:Qm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):s=Qx(e,n.includeContainer,Qm.bind(null,n)),s},nR=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ma.call(e,bf)===!1?!1:Wm(n,e)};function sR(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function iR(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:s}=e;return n+"/"+s}).join(" "):navigator.userAgent}function QB(){return/apple/i.test(navigator.vendor)}function Zm(){const t=/android/i;return t.test(sR())||t.test(iR())}function WB(){return iR().includes("jsdom/")}const sC="data-floating-ui-focusable",ZB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",Yp="ArrowLeft",Jp="ArrowRight",eF="ArrowUp",tF="ArrowDown";function Ui(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function kn(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Km(n)){let s=e;for(;s;){if(t===s)return!0;s=s.parentNode||s.host}}return!1}function Bi(t){return"composedPath"in t?t.composedPath()[0]:t.target}function Xp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function nF(t){return t.matches("html,body")}function ns(t){return t?.ownerDocument||document}function rR(t){return It(t)&&t.matches(ZB)}function eg(t){return t?t.getAttribute("role")==="combobox"&&rR(t):!1}function Tf(t){return t?t.hasAttribute(sC)?t:t.querySelector("["+sC+"]")||t:null}function Tr(t,e,n){return n===void 0&&(n=!0),t.filter(r=>{var o;return r.parentId===e&&(!n||((o=r.context)==null?void 0:o.open))}).flatMap(r=>[r,...Tr(t,r.id,n)])}function sF(t,e){let n,s=-1;function r(o,l){l>s&&(n=o,s=l),Tr(t,o).forEach(h=>{r(h.id,l+1)})}return r(e,0),t.find(o=>o.id===n)}function iC(t,e){var n;let s=[],r=(n=t.find(o=>o.id===e))==null?void 0:n.parentId;for(;r;){const o=t.find(l=>l.id===r);r=o?.parentId,o&&(s=s.concat(o))}return s}function en(t){t.preventDefault(),t.stopPropagation()}function iF(t){return"nativeEvent"in t}function aR(t){return t.mozInputSource===0&&t.isTrusted?!0:Zm()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function oR(t){return WB()?!1:!Zm()&&t.width===0&&t.height===0||Zm()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function rC(t,e){return["mouse","pen"].includes(t)}var rF=typeof document<"u",aF=function(){},mt=rF?x.useLayoutEffect:aF;const oF={...LC};function ks(t){const e=x.useRef(t);return mt(()=>{e.current=t}),e}const cF=oF.useInsertionEffect,lF=cF||(t=>t());function nn(t){const e=x.useRef(()=>{});return lF(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current==null?void 0:e.current(...s)},[])}function mu(t,e,n){return Math.floor(t/e)!==n}function fc(t,e){return e<0||e>=t.current.length}function Qp(t,e){return un(t,{disabledIndices:e})}function aC(t,e){return un(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function un(t,e){let{startingIndex:n=-1,decrement:s=!1,disabledIndices:r,amount:o=1}=e===void 0?{}:e,l=n;do l+=s?-o:o;while(l>=0&&l<=t.current.length-1&&Fu(t,l,r));return l}function uF(t,e){let{event:n,orientation:s,loop:r,rtl:o,cols:l,disabledIndices:u,minIndex:h,maxIndex:d,prevIndex:m,stopEvent:b=!1}=e,g=m;if(n.key===eF){if(b&&en(n),m===-1)g=d;else if(g=un(t,{startingIndex:g,amount:l,decrement:!0,disabledIndices:u}),r&&(m-l<h||g<0)){const v=m%l,S=d%l,T=d-(S-v);S===v?g=d:g=S>v?T:T-l}fc(t,g)&&(g=m)}if(n.key===tF&&(b&&en(n),m===-1?g=h:(g=un(t,{startingIndex:m,amount:l,disabledIndices:u}),r&&m+l>d&&(g=un(t,{startingIndex:m%l-l,amount:l,disabledIndices:u}))),fc(t,g)&&(g=m)),s==="both"){const v=Ca(m/l);n.key===(o?Yp:Jp)&&(b&&en(n),m%l!==l-1?(g=un(t,{startingIndex:m,disabledIndices:u}),r&&mu(g,l,v)&&(g=un(t,{startingIndex:m-m%l-1,disabledIndices:u}))):r&&(g=un(t,{startingIndex:m-m%l-1,disabledIndices:u})),mu(g,l,v)&&(g=m)),n.key===(o?Jp:Yp)&&(b&&en(n),m%l!==0?(g=un(t,{startingIndex:m,decrement:!0,disabledIndices:u}),r&&mu(g,l,v)&&(g=un(t,{startingIndex:m+(l-m%l),decrement:!0,disabledIndices:u}))):r&&(g=un(t,{startingIndex:m+(l-m%l),decrement:!0,disabledIndices:u})),mu(g,l,v)&&(g=m));const S=Ca(d/l)===v;fc(t,g)&&(r&&S?g=n.key===(o?Jp:Yp)?d:un(t,{startingIndex:m-m%l-1,disabledIndices:u}):g=m)}return g}function fF(t,e,n){const s=[];let r=0;return t.forEach((o,l)=>{let{width:u,height:h}=o,d=!1;for(n&&(r=0);!d;){const m=[];for(let b=0;b<u;b++)for(let g=0;g<h;g++)m.push(r+b+g*e);r%e+u<=e&&m.every(b=>s[b]==null)?(m.forEach(b=>{s[b]=l}),d=!0):r++}}),[...s]}function dF(t,e,n,s,r){if(t===-1)return-1;const o=n.indexOf(t),l=e[t];switch(r){case"tl":return o;case"tr":return l?o+l.width-1:o;case"bl":return l?o+(l.height-1)*s:o;case"br":return n.lastIndexOf(t)}}function hF(t,e){return e.flatMap((n,s)=>t.includes(n)?[s]:[])}function Fu(t,e,n){if(typeof n=="function")return n(e);if(n)return n.includes(e);const s=t.current[e];return s==null||s.hasAttribute("disabled")||s.getAttribute("aria-disabled")==="true"}const Fc=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function cR(t,e){const n=sd(t,Fc()),s=n.length;if(s===0)return;const r=Ui(ns(t)),o=n.indexOf(r),l=o===-1?e===1?0:s-1:o+e;return n[l]}function lR(t){return cR(ns(t).body,1)||t}function uR(t){return cR(ns(t).body,-1)||t}function dc(t,e){const n=e||t.currentTarget,s=t.relatedTarget;return!s||!kn(n,s)}function pF(t){sd(t,Fc()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function oC(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const s=n.dataset.tabindex;delete n.dataset.tabindex,s?n.setAttribute("tabindex",s):n.removeAttribute("tabindex")})}function cC(t,e,n){let{reference:s,floating:r}=t;const o=ni(e),l=ey(e),u=Zg(l),h=Ki(e),d=o==="y",m=s.x+s.width/2-r.width/2,b=s.y+s.height/2-r.height/2,g=s[u]/2-r[u]/2;let v;switch(h){case"top":v={x:m,y:s.y-r.height};break;case"bottom":v={x:m,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:b};break;case"left":v={x:s.x-r.width,y:b};break;default:v={x:s.x,y:s.y}}switch(Ga(e)){case"start":v[l]-=g*(n&&d?-1:1);break;case"end":v[l]+=g*(n&&d?-1:1);break}return v}const mF=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let d=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:b}=cC(d,s,h),g=s,v={},S=0;for(let T=0;T<u.length;T++){const{name:w,fn:R}=u[T],{x:O,y:k,data:D,reset:P}=await R({x:m,y:b,initialPlacement:s,placement:g,strategy:r,middlewareData:v,rects:d,platform:l,elements:{reference:t,floating:e}});m=O??m,b=k??b,v={...v,[w]:{...v[w],...D}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(d=P.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):P.rects),{x:m,y:b}=cC(d,g,h)),T=-1)}return{x:m,y:b,placement:g,strategy:r,middlewareData:v}};async function ty(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:o,rects:l,elements:u,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:b="floating",altBoundary:g=!1,padding:v=0}=qa(e,t),S=Jx(v),w=u[g?b==="floating"?"reference":"floating":b],R=yf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:d,rootBoundary:m,strategy:h})),O=b==="floating"?{x:s,y:r,width:l.floating.width,height:l.floating.height}:l.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),D=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},P=yf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:O,offsetParent:k,strategy:h}):O);return{top:(R.top-P.top+S.top)/D.y,bottom:(P.bottom-R.bottom+S.bottom)/D.y,left:(R.left-P.left+S.left)/D.x,right:(P.right-R.right+S.right)/D.x}}const gF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:o,platform:l,elements:u,middlewareData:h}=e,{element:d,padding:m=0}=qa(t,e)||{};if(d==null)return{};const b=Jx(m),g={x:n,y:s},v=ey(r),S=Zg(v),T=await l.getDimensions(d),w=v==="y",R=w?"top":"left",O=w?"bottom":"right",k=w?"clientHeight":"clientWidth",D=o.reference[S]+o.reference[v]-g[v]-o.floating[S],P=g[v]-o.reference[v],H=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let G=H?H[k]:0;(!G||!await(l.isElement==null?void 0:l.isElement(H)))&&(G=u.floating[k]||o.floating[S]);const X=D/2-P/2,ie=G/2-T[S]/2-1,ee=Gi(b[R],ie),le=Gi(b[O],ie),re=ee,oe=G-T[S]-le,te=G/2-T[S]/2+X,Y=Jm(re,te,oe),L=!h.arrow&&Ga(r)!=null&&te!==Y&&o.reference[S]/2-(te<re?ee:le)-T[S]/2<0,q=L?te<re?te-re:te-oe:0;return{[v]:g[v]+q,data:{[v]:Y,centerOffset:te-Y-q,...L&&{alignmentOffset:q}},reset:L}}}),yF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:o,rects:l,initialPlacement:u,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:b=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:T=!0,...w}=qa(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const R=Ki(r),O=ni(u),k=Ki(u)===u,D=await(h.isRTL==null?void 0:h.isRTL(d.floating)),P=g||(k||!T?[gf(u)]:OB(u)),H=S!=="none";!g&&H&&P.push(...IB(u,T,S,D));const G=[u,...P],X=await ty(e,w),ie=[];let ee=((s=o.flip)==null?void 0:s.overflows)||[];if(m&&ie.push(X[R]),b){const te=kB(r,l,D);ie.push(X[te[0]],X[te[1]])}if(ee=[...ee,{placement:r,overflows:ie}],!ie.every(te=>te<=0)){var le,re;const te=(((le=o.flip)==null?void 0:le.index)||0)+1,Y=G[te];if(Y&&(!(b==="alignment"?O!==ni(Y):!1)||ee.every(F=>F.overflows[0]>0&&ni(F.placement)===O)))return{data:{index:te,overflows:ee},reset:{placement:Y}};let L=(re=ee.filter(q=>q.overflows[0]<=0).sort((q,F)=>q.overflows[1]-F.overflows[1])[0])==null?void 0:re.placement;if(!L)switch(v){case"bestFit":{var oe;const q=(oe=ee.filter(F=>{if(H){const ne=ni(F.placement);return ne===O||ne==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(ne=>ne>0).reduce((ne,A)=>ne+A,0)]).sort((F,ne)=>F[1]-ne[1])[0])==null?void 0:oe[0];q&&(L=q);break}case"initialPlacement":L=u;break}if(r!==L)return{reset:{placement:L}}}return{}}}},bF=new Set(["left","top"]);async function vF(t,e){const{placement:n,platform:s,elements:r}=t,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),l=Ki(n),u=Ga(n),h=ni(n)==="y",d=bF.has(l)?-1:1,m=o&&h?-1:1,b=qa(e,t);let{mainAxis:g,crossAxis:v,alignmentAxis:S}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return u&&typeof S=="number"&&(v=u==="end"?S*-1:S),h?{x:v*m,y:g*d}:{x:g*d,y:v*m}}const SF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:o,placement:l,middlewareData:u}=e,h=await vF(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:r+h.x,y:o+h.y,data:{...h,placement:l}}}}},TF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:R,y:O}=w;return{x:R,y:O}}},...h}=qa(t,e),d={x:n,y:s},m=await ty(e,h),b=ni(Ki(r)),g=Yx(b);let v=d[g],S=d[b];if(o){const w=g==="y"?"top":"left",R=g==="y"?"bottom":"right",O=v+m[w],k=v-m[R];v=Jm(O,v,k)}if(l){const w=b==="y"?"top":"left",R=b==="y"?"bottom":"right",O=S+m[w],k=S-m[R];S=Jm(O,S,k)}const T=u.fn({...e,[g]:v,[b]:S});return{...T,data:{x:T.x-n,y:T.y-s,enabled:{[g]:o,[b]:l}}}}}},CF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:o,platform:l,elements:u}=e,{apply:h=()=>{},...d}=qa(t,e),m=await ty(e,d),b=Ki(r),g=Ga(r),v=ni(r)==="y",{width:S,height:T}=o.floating;let w,R;b==="top"||b==="bottom"?(w=b,R=g===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(R=b,w=g==="end"?"top":"bottom");const O=T-m.top-m.bottom,k=S-m.left-m.right,D=Gi(T-m[w],O),P=Gi(S-m[R],k),H=!e.middlewareData.shift;let G=D,X=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(X=k),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(G=O),H&&!g){const ee=$n(m.left,0),le=$n(m.right,0),re=$n(m.top,0),oe=$n(m.bottom,0);v?X=S-2*(ee!==0||le!==0?ee+le:$n(m.left,m.right)):G=T-2*(re!==0||oe!==0?re+oe:$n(m.top,m.bottom))}await h({...e,availableWidth:X,availableHeight:G});const ie=await l.getDimensions(u.floating);return S!==ie.width||T!==ie.height?{reset:{rects:!0}}:{}}}};function fR(t){const e=zn(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=It(t),o=r?t.offsetWidth:n,l=r?t.offsetHeight:s,u=mf(n)!==o||mf(s)!==l;return u&&(n=o,s=l),{width:n,height:s,$:u}}function ny(t){return xt(t)?t:t.contextElement}function _a(t){const e=ny(t);if(!It(e))return Ns(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:o}=fR(e);let l=(o?mf(n.width):n.width)/s,u=(o?mf(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const wF=Ns(0);function dR(t){const e=Hn(t);return!td()||!e.visualViewport?wF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Hn(t)?!1:e}function Rr(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=ny(t);let l=Ns(1);e&&(s?xt(s)&&(l=_a(s)):l=_a(t));const u=EF(o,n,s)?dR(o):Ns(0);let h=(r.left+u.x)/l.x,d=(r.top+u.y)/l.y,m=r.width/l.x,b=r.height/l.y;if(o){const g=Hn(o),v=s&&xt(s)?Hn(s):s;let S=g,T=Ym(S);for(;T&&s&&v!==S;){const w=_a(T),R=T.getBoundingClientRect(),O=zn(T),k=R.left+(T.clientLeft+parseFloat(O.paddingLeft))*w.x,D=R.top+(T.clientTop+parseFloat(O.paddingTop))*w.y;h*=w.x,d*=w.y,m*=w.x,b*=w.y,h+=k,d+=D,S=Hn(T),T=Ym(S)}}return yf({width:m,height:b,x:h,y:d})}function sy(t,e){const n=nd(t).scrollLeft;return e?e.left+n:Rr(js(t)).left+n}function hR(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-(n?0:sy(t,s)),o=s.top+e.scrollTop;return{x:r,y:o}}function xF(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const o=r==="fixed",l=js(s),u=e?ed(e.floating):!1;if(s===l||u&&o)return n;let h={scrollLeft:0,scrollTop:0},d=Ns(1);const m=Ns(0),b=It(s);if((b||!b&&!o)&&((Xi(s)!=="body"||Bc(l))&&(h=nd(s)),It(s))){const v=Rr(s);d=_a(s),m.x=v.x+s.clientLeft,m.y=v.y+s.clientTop}const g=l&&!b&&!o?hR(l,h,!0):Ns(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-h.scrollLeft*d.x+m.x+g.x,y:n.y*d.y-h.scrollTop*d.y+m.y+g.y}}function RF(t){return Array.from(t.getClientRects())}function _F(t){const e=js(t),n=nd(t),s=t.ownerDocument.body,r=$n(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=$n(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+sy(t);const u=-n.scrollTop;return zn(s).direction==="rtl"&&(l+=$n(e.clientWidth,s.clientWidth)-r),{width:r,height:o,x:l,y:u}}function kF(t,e){const n=Hn(t),s=js(t),r=n.visualViewport;let o=s.clientWidth,l=s.clientHeight,u=0,h=0;if(r){o=r.width,l=r.height;const d=td();(!d||d&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}return{width:o,height:l,x:u,y:h}}const OF=new Set(["absolute","fixed"]);function AF(t,e){const n=Rr(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,o=It(t)?_a(t):Ns(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,h=r*o.x,d=s*o.y;return{width:l,height:u,x:h,y:d}}function lC(t,e,n){let s;if(e==="viewport")s=kF(t,n);else if(e==="document")s=_F(js(t));else if(xt(e))s=AF(e,n);else{const r=dR(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return yf(s)}function pR(t,e){const n=li(t);return n===e||!xt(n)||ii(n)?!1:zn(n).position==="fixed"||pR(n,e)}function NF(t,e){const n=e.get(t);if(n)return n;let s=zi(t,[],!1).filter(u=>xt(u)&&Xi(u)!=="body"),r=null;const o=zn(t).position==="fixed";let l=o?li(t):t;for(;xt(l)&&!ii(l);){const u=zn(l),h=Wg(l);!h&&u.position==="fixed"&&(r=null),(o?!h&&!r:!h&&u.position==="static"&&!!r&&OF.has(r.position)||Bc(l)&&!h&&pR(t,l))?s=s.filter(m=>m!==l):r=u,l=li(l)}return e.set(t,s),s}function DF(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const l=[...n==="clippingAncestors"?ed(e)?[]:NF(e,this._c):[].concat(n),s],u=l[0],h=l.reduce((d,m)=>{const b=lC(e,m,r);return d.top=$n(b.top,d.top),d.right=Gi(b.right,d.right),d.bottom=Gi(b.bottom,d.bottom),d.left=$n(b.left,d.left),d},lC(e,u,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function IF(t){const{width:e,height:n}=fR(t);return{width:e,height:n}}function PF(t,e,n){const s=It(e),r=js(e),o=n==="fixed",l=Rr(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const h=Ns(0);function d(){h.x=sy(r)}if(s||!s&&!o)if((Xi(e)!=="body"||Bc(r))&&(u=nd(e)),s){const v=Rr(e,!0,o,e);h.x=v.x+e.clientLeft,h.y=v.y+e.clientTop}else r&&d();o&&!s&&r&&d();const m=r&&!s&&!o?hR(r,u):Ns(0),b=l.left+u.scrollLeft-h.x-m.x,g=l.top+u.scrollTop-h.y-m.y;return{x:b,y:g,width:l.width,height:l.height}}function Wp(t){return zn(t).position==="static"}function uC(t,e){if(!It(t)||zn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return js(t)===n&&(n=n.ownerDocument.body),n}function mR(t,e){const n=Hn(t);if(ed(t))return n;if(!It(t)){let r=li(t);for(;r&&!ii(r);){if(xt(r)&&!Wp(r))return r;r=li(r)}return n}let s=uC(t,e);for(;s&&bB(s)&&Wp(s);)s=uC(s,e);return s&&ii(s)&&Wp(s)&&!Wg(s)?n:s||wB(t)||n}const LF=async function(t){const e=this.getOffsetParent||mR,n=this.getDimensions,s=await n(t.floating);return{reference:PF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function jF(t){return zn(t).direction==="rtl"}const MF={convertOffsetParentRelativeRectToViewportRelativeRect:xF,getDocumentElement:js,getClippingRect:DF,getOffsetParent:mR,getElementRects:LF,getClientRects:RF,getDimensions:IF,getScale:_a,isElement:xt,isRTL:jF};function gR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function UF(t,e){let n=null,s;const r=js(t);function o(){var u;clearTimeout(s),(u=n)==null||u.disconnect(),n=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const d=t.getBoundingClientRect(),{left:m,top:b,width:g,height:v}=d;if(u||e(),!g||!v)return;const S=Ca(b),T=Ca(r.clientWidth-(m+g)),w=Ca(r.clientHeight-(b+v)),R=Ca(m),k={rootMargin:-S+"px "+-T+"px "+-w+"px "+-R+"px",threshold:$n(0,Gi(1,h))||1};let D=!0;function P(H){const G=H[0].intersectionRatio;if(G!==h){if(!D)return l();G?l(!1,G):s=setTimeout(()=>{l(!1,1e-7)},1e3)}G===1&&!gR(d,t.getBoundingClientRect())&&l(),D=!1}try{n=new IntersectionObserver(P,{...k,root:r.ownerDocument})}catch{n=new IntersectionObserver(P,k)}n.observe(t)}return l(!0),o}function yR(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,d=ny(t),m=r||o?[...d?zi(d):[],...zi(e)]:[];m.forEach(R=>{r&&R.addEventListener("scroll",n,{passive:!0}),o&&R.addEventListener("resize",n)});const b=d&&u?UF(d,n):null;let g=-1,v=null;l&&(v=new ResizeObserver(R=>{let[O]=R;O&&O.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=v)==null||k.observe(e)})),n()}),d&&!h&&v.observe(d),v.observe(e));let S,T=h?Rr(t):null;h&&w();function w(){const R=Rr(t);T&&!gR(T,R)&&n(),T=R,S=requestAnimationFrame(w)}return n(),()=>{var R;m.forEach(O=>{r&&O.removeEventListener("scroll",n),o&&O.removeEventListener("resize",n)}),b?.(),(R=v)==null||R.disconnect(),v=null,h&&cancelAnimationFrame(S)}}const BF=SF,FF=TF,VF=yF,$F=CF,fC=gF,HF=(t,e,n)=>{const s=new Map,r={platform:MF,...n},o={...r.platform,_c:s};return mF(t,e,{...r,platform:o})};var zF=typeof document<"u",qF=function(){},Vu=zF?x.useLayoutEffect:qF;function Cf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Cf(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const o=r[s];if(!(o==="_owner"&&t.$$typeof)&&!Cf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function bR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dC(t,e){const n=bR(t);return Math.round(e*n)/n}function Zp(t){const e=x.useRef(t);return Vu(()=>{e.current=t}),e}function GF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:h,open:d}=t,[m,b]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,v]=x.useState(s);Cf(g,s)||v(s);const[S,T]=x.useState(null),[w,R]=x.useState(null),O=x.useCallback(F=>{F!==H.current&&(H.current=F,T(F))},[]),k=x.useCallback(F=>{F!==G.current&&(G.current=F,R(F))},[]),D=o||S,P=l||w,H=x.useRef(null),G=x.useRef(null),X=x.useRef(m),ie=h!=null,ee=Zp(h),le=Zp(r),re=Zp(d),oe=x.useCallback(()=>{if(!H.current||!G.current)return;const F={placement:e,strategy:n,middleware:g};le.current&&(F.platform=le.current),HF(H.current,G.current,F).then(ne=>{const A={...ne,isPositioned:re.current!==!1};te.current&&!Cf(X.current,A)&&(X.current=A,QC.flushSync(()=>{b(A)}))})},[g,e,n,le,re]);Vu(()=>{d===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,b(F=>({...F,isPositioned:!1})))},[d]);const te=x.useRef(!1);Vu(()=>(te.current=!0,()=>{te.current=!1}),[]),Vu(()=>{if(D&&(H.current=D),P&&(G.current=P),D&&P){if(ee.current)return ee.current(D,P,oe);oe()}},[D,P,oe,ee,ie]);const Y=x.useMemo(()=>({reference:H,floating:G,setReference:O,setFloating:k}),[O,k]),L=x.useMemo(()=>({reference:D,floating:P}),[D,P]),q=x.useMemo(()=>{const F={position:n,left:0,top:0};if(!L.floating)return F;const ne=dC(L.floating,m.x),A=dC(L.floating,m.y);return u?{...F,transform:"translate("+ne+"px, "+A+"px)",...bR(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:A}},[n,u,L.floating,m.x,m.y]);return x.useMemo(()=>({...m,update:oe,refs:Y,elements:L,floatingStyles:q}),[m,oe,Y,L,q])}const KF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?fC({element:s.current,padding:r}).fn(n):{}:s?fC({element:s,padding:r}).fn(n):{}}}},YF=(t,e)=>({...BF(t),options:[t,e]}),JF=(t,e)=>({...FF(t),options:[t,e]}),vR=(t,e)=>({...VF(t),options:[t,e]}),XF=(t,e)=>({...$F(t),options:[t,e]}),QF=(t,e)=>({...KF(t),options:[t,e]});function WF(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const SR=x.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function ZF(t){const{children:e,elementsRef:n,labelsRef:s}=t,[r,o]=x.useState(()=>new Set),l=x.useCallback(d=>{o(m=>new Set(m).add(d))},[]),u=x.useCallback(d=>{o(m=>{const b=new Set(m);return b.delete(d),b})},[]),h=x.useMemo(()=>{const d=new Map;return Array.from(r.keys()).sort(WF).forEach((b,g)=>{d.set(b,g)}),d},[r]);return C.jsx(SR.Provider,{value:x.useMemo(()=>({register:l,unregister:u,map:h,elementsRef:n,labelsRef:s}),[l,u,h,n,s]),children:e})}function e6(t){t===void 0&&(t={});const{label:e}=t,{register:n,unregister:s,map:r,elementsRef:o,labelsRef:l}=x.useContext(SR),[u,h]=x.useState(null),d=x.useRef(null),m=x.useCallback(b=>{if(d.current=b,u!==null&&(o.current[u]=b,l)){var g;const v=e!==void 0;l.current[u]=v?e:(g=b?.textContent)!=null?g:null}},[u,o,l,e]);return mt(()=>{const b=d.current;if(b)return n(b),()=>{s(b)}},[n,s]),mt(()=>{const b=d.current?r.get(d.current):null;b!=null&&h(b)},[r]),x.useMemo(()=>({ref:m,index:u??-1}),[u,m])}const t6="data-floating-ui-focusable",hC="active",pC="selected",Vc="ArrowLeft",$c="ArrowRight",TR="ArrowUp",id="ArrowDown",n6={...LC};let mC=!1,s6=0;const gC=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+s6++;function i6(){const[t,e]=x.useState(()=>mC?gC():void 0);return mt(()=>{t==null&&e(gC())},[]),x.useEffect(()=>{mC=!0},[]),t}const r6=n6.useId,rd=r6||i6,a6=x.forwardRef(function(e,n){const{context:{placement:s,elements:{floating:r},middlewareData:{arrow:o,shift:l}},width:u=14,height:h=7,tipRadius:d=0,strokeWidth:m=0,staticOffset:b,stroke:g,d:v,style:{transform:S,...T}={},...w}=e,R=rd(),[O,k]=x.useState(!1);if(mt(()=>{if(!r)return;zn(r).direction==="rtl"&&k(!0)},[r]),!r)return null;const[D,P]=s.split("-"),H=D==="top"||D==="bottom";let G=b;(H&&l!=null&&l.x||!H&&l!=null&&l.y)&&(G=null);const X=m*2,ie=X/2,ee=u/2*(d/-8+1),le=h/2*d/4,re=!!v,oe=G&&P==="end"?"bottom":"top";let te=G&&P==="end"?"right":"left";G&&O&&(te=P==="end"?"left":"right");const Y=o?.x!=null?G||o.x:"",L=o?.y!=null?G||o.y:"",q=v||"M0,0"+(" H"+u)+(" L"+(u-ee)+","+(h-le))+(" Q"+u/2+","+h+" "+ee+","+(h-le))+" Z",F={top:re?"rotate(180deg)":"",left:re?"rotate(90deg)":"rotate(-90deg)",bottom:re?"":"rotate(180deg)",right:re?"rotate(-90deg)":"rotate(90deg)"}[D];return C.jsxs("svg",{...w,"aria-hidden":!0,ref:n,width:re?u:u+X,height:u,viewBox:"0 0 "+u+" "+(h>u?h:u),style:{position:"absolute",pointerEvents:"none",[te]:Y,[oe]:L,[D]:H||re?"100%":"calc(100% - "+X/2+"px)",transform:[F,S].filter(ne=>!!ne).join(" "),...T},children:[X>0&&C.jsx("path",{clipPath:"url(#"+R+")",fill:"none",stroke:g,strokeWidth:X+(v?0:1),d:q}),C.jsx("path",{stroke:X&&!v?w.fill:"none",d:q}),C.jsx("clipPath",{id:R,children:C.jsx("rect",{x:-ie,y:ie*(re?-1:1),width:u+X,height:u})})]})});function o6(){const t=new Map;return{emit(e,n){var s;(s=t.get(e))==null||s.forEach(r=>r(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var s;(s=t.get(e))==null||s.delete(n)}}}const c6=x.createContext(null),l6=x.createContext(null),iy=()=>{var t;return((t=x.useContext(c6))==null?void 0:t.id)||null},ad=()=>x.useContext(l6);function Rc(t){return"data-floating-ui-"+t}function tg(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}let yC=0;function mr(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:s=!0,sync:r=!1}=e;s&&cancelAnimationFrame(yC);const o=()=>t?.focus({preventScroll:n});r?o():yC=requestAnimationFrame(o)}function u6(t){return t?.ownerDocument||document}const ka={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function bC(t){return t==="inert"?ka.inert:t==="aria-hidden"?ka["aria-hidden"]:ka.none}let gu=new WeakSet,yu={},em=0;const f6=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,CR=t=>t&&(t.host||CR(t.parentNode)),d6=(t,e)=>e.map(n=>{if(t.contains(n))return n;const s=CR(n);return t.contains(s)?s:null}).filter(n=>n!=null);function h6(t,e,n,s){const r="data-floating-ui-inert",o=s?"inert":n?"aria-hidden":null,l=d6(e,t),u=new Set,h=new Set(l),d=[];yu[r]||(yu[r]=new WeakMap);const m=yu[r];l.forEach(b),g(e),u.clear();function b(v){!v||u.has(v)||(u.add(v),v.parentNode&&b(v.parentNode))}function g(v){!v||h.has(v)||[].forEach.call(v.children,S=>{if(Xi(S)!=="script")if(u.has(S))g(S);else{const T=o?S.getAttribute(o):null,w=T!==null&&T!=="false",R=bC(o),O=(R.get(S)||0)+1,k=(m.get(S)||0)+1;R.set(S,O),m.set(S,k),d.push(S),O===1&&w&&gu.add(S),k===1&&S.setAttribute(r,""),!w&&o&&S.setAttribute(o,o==="inert"?"":"true")}})}return em++,()=>{d.forEach(v=>{const S=bC(o),w=(S.get(v)||0)-1,R=(m.get(v)||0)-1;S.set(v,w),m.set(v,R),w||(!gu.has(v)&&o&&v.removeAttribute(o),gu.delete(v)),R||v.removeAttribute(r)}),em--,em||(ka.inert=new WeakMap,ka["aria-hidden"]=new WeakMap,ka.none=new WeakMap,gu=new WeakSet,yu={})}}function vC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=u6(t[0]).body;return h6(t.concat(Array.from(s.querySelectorAll('[aria-live],[role="status"],output'))),s,e,n)}const od={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},wf=x.forwardRef(function(e,n){const[s,r]=x.useState();mt(()=>{QB()&&r("button")},[]);const o={ref:n,tabIndex:0,role:s,"aria-hidden":s?void 0:!0,[Rc("focus-guard")]:"",style:od};return C.jsx("span",{...e,...o})}),wR=x.createContext(null),SC=Rc("portal");function p6(t){t===void 0&&(t={});const{id:e,root:n}=t,s=rd(),r=ER(),[o,l]=x.useState(null),u=x.useRef(null);return mt(()=>()=>{o?.remove(),queueMicrotask(()=>{u.current=null})},[o]),mt(()=>{if(!s||u.current)return;const h=e?document.getElementById(e):null;if(!h)return;const d=document.createElement("div");d.id=s,d.setAttribute(SC,""),h.appendChild(d),u.current=d,l(d)},[e,s]),mt(()=>{if(n===null||!s||u.current)return;let h=n||r?.portalNode;h&&!xt(h)&&(h=h.current),h=h||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,h.appendChild(d));const m=document.createElement("div");m.id=s,m.setAttribute(SC,""),h=d||h,h.appendChild(m),u.current=m,l(m)},[e,n,s,r]),o}function m6(t){const{children:e,id:n,root:s,preserveTabOrder:r=!0}=t,o=p6({id:n,root:s}),[l,u]=x.useState(null),h=x.useRef(null),d=x.useRef(null),m=x.useRef(null),b=x.useRef(null),g=l?.modal,v=l?.open,S=!!l&&!l.modal&&l.open&&r&&!!(s||o);return x.useEffect(()=>{if(!o||!r||g)return;function T(w){o&&dc(w)&&(w.type==="focusin"?oC:pF)(o)}return o.addEventListener("focusin",T,!0),o.addEventListener("focusout",T,!0),()=>{o.removeEventListener("focusin",T,!0),o.removeEventListener("focusout",T,!0)}},[o,r,g]),x.useEffect(()=>{o&&(v||oC(o))},[v,o]),C.jsxs(wR.Provider,{value:x.useMemo(()=>({preserveTabOrder:r,beforeOutsideRef:h,afterOutsideRef:d,beforeInsideRef:m,afterInsideRef:b,portalNode:o,setFocusManagerState:u}),[r,o]),children:[S&&o&&C.jsx(wf,{"data-type":"outside",ref:h,onFocus:T=>{if(dc(T,o)){var w;(w=m.current)==null||w.focus()}else{const R=l?l.domReference:null,O=uR(R);O?.focus()}}}),S&&o&&C.jsx("span",{"aria-owns":o.id,style:od}),o&&QC.createPortal(e,o),S&&o&&C.jsx(wf,{"data-type":"outside",ref:d,onFocus:T=>{if(dc(T,o)){var w;(w=b.current)==null||w.focus()}else{const R=l?l.domReference:null,O=lR(R);O?.focus(),l?.closeOnFocusOut&&l?.onOpenChange(!1,T.nativeEvent,"focus-out")}}})]})}const ER=()=>x.useContext(wR);function TC(t){return x.useMemo(()=>e=>{t.forEach(n=>{n&&(n.current=e)})},t)}const g6=20;let gr=[];function y6(t){gr=gr.filter(e=>e.isConnected),t&&Xi(t)!=="body"&&(gr.push(t),gr.length>g6&&(gr=gr.slice(-20)))}function CC(){return gr.slice().reverse().find(t=>t.isConnected)}function b6(t){const e=Fc();return nR(t,e)?t:sd(t,e)[0]||t}function wC(t,e){var n;if(!e.current.includes("floating")&&!((n=t.getAttribute("role"))!=null&&n.includes("dialog")))return;const s=Fc(),o=XB(t,s).filter(u=>{const h=u.getAttribute("data-tabindex")||"";return nR(u,s)||u.hasAttribute("data-tabindex")&&!h.startsWith("-")}),l=t.getAttribute("tabindex");e.current.includes("floating")||o.length===0?l!=="0"&&t.setAttribute("tabindex","0"):(l!=="-1"||t.hasAttribute("data-tabindex")&&t.getAttribute("data-tabindex")!=="-1")&&(t.setAttribute("tabindex","-1"),t.setAttribute("data-tabindex","-1"))}const v6=x.forwardRef(function(e,n){return C.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:od})});function S6(t){const{context:e,children:n,disabled:s=!1,order:r=["content"],guards:o=!0,initialFocus:l=0,returnFocus:u=!0,restoreFocus:h=!1,modal:d=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:b=!0,outsideElementsInert:g=!1,getInsideElements:v=()=>[]}=t,{open:S,onOpenChange:T,events:w,dataRef:R,elements:{domReference:O,floating:k}}=e,D=nn(()=>{var ke;return(ke=R.current.floatingContext)==null?void 0:ke.nodeId}),P=nn(v),H=typeof l=="number"&&l<0,G=eg(O)&&H,X=f6(),ie=X?o:!0,ee=!ie||X&&g,le=ks(r),re=ks(l),oe=ks(u),te=ad(),Y=ER(),L=x.useRef(null),q=x.useRef(null),F=x.useRef(!1),ne=x.useRef(!1),A=x.useRef(-1),$=Y!=null,K=Tf(k),se=nn(function(ke){return ke===void 0&&(ke=K),ke?sd(ke,Fc()):[]}),ue=nn(ke=>{const Ue=se(ke);return le.current.map(Re=>O&&Re==="reference"?O:K&&Re==="floating"?K:Ue).filter(Boolean).flat()});x.useEffect(()=>{if(s||!d)return;function ke(Re){if(Re.key==="Tab"){kn(K,Ui(ns(K)))&&se().length===0&&!G&&en(Re);const Oe=ue(),tt=Bi(Re);le.current[0]==="reference"&&tt===O&&(en(Re),Re.shiftKey?mr(Oe[Oe.length-1]):mr(Oe[1])),le.current[1]==="floating"&&tt===K&&Re.shiftKey&&(en(Re),mr(Oe[0]))}}const Ue=ns(K);return Ue.addEventListener("keydown",ke),()=>{Ue.removeEventListener("keydown",ke)}},[s,O,K,d,le,G,se,ue]),x.useEffect(()=>{if(s||!k)return;function ke(Ue){const Re=Bi(Ue),tt=se().indexOf(Re);tt!==-1&&(A.current=tt)}return k.addEventListener("focusin",ke),()=>{k.removeEventListener("focusin",ke)}},[s,k,se]),x.useEffect(()=>{if(s||!b)return;function ke(){ne.current=!0,setTimeout(()=>{ne.current=!1})}function Ue(Re){const Oe=Re.relatedTarget,tt=Re.currentTarget,ht=Bi(Re);queueMicrotask(()=>{const et=D(),vt=!(kn(O,Oe)||kn(k,Oe)||kn(Oe,k)||kn(Y?.portalNode,Oe)||Oe!=null&&Oe.hasAttribute(Rc("focus-guard"))||te&&(Tr(te.nodesRef.current,et).find(ze=>{var nt,jt;return kn((nt=ze.context)==null?void 0:nt.elements.floating,Oe)||kn((jt=ze.context)==null?void 0:jt.elements.domReference,Oe)})||iC(te.nodesRef.current,et).find(ze=>{var nt,jt,ve;return[(nt=ze.context)==null?void 0:nt.elements.floating,Tf((jt=ze.context)==null?void 0:jt.elements.floating)].includes(Oe)||((ve=ze.context)==null?void 0:ve.elements.domReference)===Oe})));if(tt===O&&K&&wC(K,le),h&&tt!==O&&!(ht!=null&&ht.isConnected)&&Ui(ns(K))===ns(K).body){It(K)&&K.focus();const ze=A.current,nt=se(),jt=nt[ze]||nt[nt.length-1]||K;It(jt)&&jt.focus()}if(R.current.insideReactTree){R.current.insideReactTree=!1;return}(G||!d)&&Oe&&vt&&!ne.current&&Oe!==CC()&&(F.current=!0,T(!1,Re,"focus-out"))})}if(k&&It(O))return O.addEventListener("focusout",Ue),O.addEventListener("pointerdown",ke),k.addEventListener("focusout",Ue),()=>{O.removeEventListener("focusout",Ue),O.removeEventListener("pointerdown",ke),k.removeEventListener("focusout",Ue)}},[s,O,k,K,d,te,Y,T,b,h,se,G,D,le,R]);const xe=x.useRef(null),fe=x.useRef(null),Ke=TC([xe,Y?.beforeInsideRef]),Ve=TC([fe,Y?.afterInsideRef]);x.useEffect(()=>{var ke,Ue;if(s||!k)return;const Re=Array.from((Y==null||(ke=Y.portalNode)==null?void 0:ke.querySelectorAll("["+Rc("portal")+"]"))||[]),Oe=te?iC(te.nodesRef.current,D()):[],tt=te&&!d?Oe.map(ze=>{var nt;return(nt=ze.context)==null?void 0:nt.elements.floating}):[],ht=(Ue=Oe.find(ze=>{var nt;return eg(((nt=ze.context)==null?void 0:nt.elements.domReference)||null)}))==null||(Ue=Ue.context)==null?void 0:Ue.elements.domReference,et=[k,ht,...Re,...tt,...P(),L.current,q.current,xe.current,fe.current,Y?.beforeOutsideRef.current,Y?.afterOutsideRef.current,le.current.includes("reference")||G?O:null].filter(ze=>ze!=null),vt=d||G?vC(et,!ee,ee):vC(et);return()=>{vt()}},[s,O,k,d,le,Y,G,ie,ee,te,D,P]),mt(()=>{if(s||!It(K))return;const ke=ns(K),Ue=Ui(ke);queueMicrotask(()=>{const Re=ue(K),Oe=re.current,tt=(typeof Oe=="number"?Re[Oe]:Oe.current)||K,ht=kn(K,Ue);!H&&!ht&&S&&mr(tt,{preventScroll:tt===K})})},[s,S,K,H,ue,re]),mt(()=>{if(s||!K)return;const ke=ns(K),Ue=Ui(ke);y6(Ue);function Re(ht){let{reason:et,event:vt,nested:ze}=ht;if(["hover","safe-polygon"].includes(et)&&vt.type==="mouseleave"&&(F.current=!0),et==="outside-press")if(ze)F.current=!1;else if(aR(vt)||oR(vt))F.current=!1;else{let nt=!1;document.createElement("div").focus({get preventScroll(){return nt=!0,!1}}),nt?F.current=!1:F.current=!0}}w.on("openchange",Re);const Oe=ke.createElement("span");Oe.setAttribute("tabindex","-1"),Oe.setAttribute("aria-hidden","true"),Object.assign(Oe.style,od),$&&O&&O.insertAdjacentElement("afterend",Oe);function tt(){if(typeof oe.current=="boolean"){const ht=O||CC();return ht&&ht.isConnected?ht:Oe}return oe.current.current||Oe}return()=>{w.off("openchange",Re);const ht=Ui(ke),et=kn(k,ht)||te&&Tr(te.nodesRef.current,D(),!1).some(ze=>{var nt;return kn((nt=ze.context)==null?void 0:nt.elements.floating,ht)}),vt=tt();queueMicrotask(()=>{const ze=b6(vt);oe.current&&!F.current&&It(ze)&&(!(ze!==ht&&ht!==ke.body)||et)&&ze.focus({preventScroll:!0}),Oe.remove()})}},[s,k,K,oe,R,w,te,$,O,D]),x.useEffect(()=>{queueMicrotask(()=>{F.current=!1})},[s]),mt(()=>{if(!s&&Y)return Y.setFocusManagerState({modal:d,closeOnFocusOut:b,open:S,onOpenChange:T,domReference:O}),()=>{Y.setFocusManagerState(null)}},[s,Y,d,S,T,b,O]),mt(()=>{s||K&&wC(K,le)},[s,K,le]);function Lt(ke){return s||!m||!d?null:C.jsx(v6,{ref:ke==="start"?L:q,onClick:Ue=>T(!1,Ue.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const rn=!s&&ie&&(d?!G:!0)&&($||d);return C.jsxs(C.Fragment,{children:[rn&&C.jsx(wf,{"data-type":"inside",ref:Ke,onFocus:ke=>{if(d){const Re=ue();mr(r[0]==="reference"?Re[0]:Re[Re.length-1])}else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(F.current=!1,dc(ke,Y.portalNode)){const Re=lR(O);Re?.focus()}else{var Ue;(Ue=Y.beforeOutsideRef.current)==null||Ue.focus()}}}),!G&&Lt("start"),n,Lt("end"),rn&&C.jsx(wf,{"data-type":"inside",ref:Ve,onFocus:ke=>{if(d)mr(ue()[0]);else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(b&&(F.current=!0),dc(ke,Y.portalNode)){const Re=uR(O);Re?.focus()}else{var Ue;(Ue=Y.afterOutsideRef.current)==null||Ue.focus()}}})]})}let bu=0;const EC="--floating-ui-scrollbar-width";function T6(){const t=sR(),e=/iP(hone|ad|od)|iOS/.test(t)||t==="MacIntel"&&navigator.maxTouchPoints>1,n=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth,l=n.left?parseFloat(n.left):window.scrollX,u=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",n.setProperty(EC,o+"px"),o&&(n[r]=o+"px"),e){var h,d;const m=((h=window.visualViewport)==null?void 0:h.offsetLeft)||0,b=((d=window.visualViewport)==null?void 0:d.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(u-Math.floor(b))+"px",left:-(l-Math.floor(m))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[r]:""}),n.removeProperty(EC),e&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(l,u))}}let xC=()=>{};const C6=x.forwardRef(function(e,n){const{lockScroll:s=!1,...r}=e;return mt(()=>{if(s)return bu++,bu===1&&(xC=T6()),()=>{bu--,bu===0&&xC()}},[s]),C.jsx("div",{ref:n,...r,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}})});function RC(t){return It(t.target)&&t.target.tagName==="BUTTON"}function w6(t){return It(t.target)&&t.target.tagName==="A"}function _C(t){return rR(t)}function E6(t,e){e===void 0&&(e={});const{open:n,onOpenChange:s,dataRef:r,elements:{domReference:o}}=t,{enabled:l=!0,event:u="click",toggle:h=!0,ignoreMouse:d=!1,keyboardHandlers:m=!0,stickIfOpen:b=!0}=e,g=x.useRef(),v=x.useRef(!1),S=x.useMemo(()=>({onPointerDown(T){g.current=T.pointerType},onMouseDown(T){const w=g.current;T.button===0&&u!=="click"&&(rC(w)&&d||(n&&h&&(!(r.current.openEvent&&b)||r.current.openEvent.type==="mousedown")?s(!1,T.nativeEvent,"click"):(T.preventDefault(),s(!0,T.nativeEvent,"click"))))},onClick(T){const w=g.current;if(u==="mousedown"&&g.current){g.current=void 0;return}rC(w)&&d||(n&&h&&(!(r.current.openEvent&&b)||r.current.openEvent.type==="click")?s(!1,T.nativeEvent,"click"):s(!0,T.nativeEvent,"click"))},onKeyDown(T){g.current=void 0,!(T.defaultPrevented||!m||RC(T))&&(T.key===" "&&!_C(o)&&(T.preventDefault(),v.current=!0),!w6(T)&&T.key==="Enter"&&s(!(n&&h),T.nativeEvent,"click"))},onKeyUp(T){T.defaultPrevented||!m||RC(T)||_C(o)||T.key===" "&&v.current&&(v.current=!1,s(!(n&&h),T.nativeEvent,"click"))}}),[r,o,u,d,m,s,n,b,h]);return x.useMemo(()=>l?{reference:S}:{},[l,S])}const x6={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},R6={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},kC=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function _6(t,e){e===void 0&&(e={});const{open:n,onOpenChange:s,elements:r,dataRef:o}=t,{enabled:l=!0,escapeKey:u=!0,outsidePress:h=!0,outsidePressEvent:d="pointerdown",referencePress:m=!1,referencePressEvent:b="pointerdown",ancestorScroll:g=!1,bubbles:v,capture:S}=e,T=ad(),w=nn(typeof h=="function"?h:()=>!1),R=typeof h=="function"?w:h,O=x.useRef(!1),{escapeKey:k,outsidePress:D}=kC(v),{escapeKey:P,outsidePress:H}=kC(S),G=x.useRef(!1),X=x.useRef(-1),ie=nn(Y=>{var L;if(!n||!l||!u||Y.key!=="Escape"||G.current)return;const q=(L=o.current.floatingContext)==null?void 0:L.nodeId,F=T?Tr(T.nodesRef.current,q):[];if(!k&&(Y.stopPropagation(),F.length>0)){let ne=!0;if(F.forEach(A=>{var $;if(($=A.context)!=null&&$.open&&!A.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}s(!1,iF(Y)?Y.nativeEvent:Y,"escape-key")}),ee=nn(Y=>{var L;const q=()=>{var F;ie(Y),(F=Bi(Y))==null||F.removeEventListener("keydown",q)};(L=Bi(Y))==null||L.addEventListener("keydown",q)}),le=nn(Y=>{var L;const q=o.current.insideReactTree;o.current.insideReactTree=!1;const F=O.current;if(O.current=!1,d==="click"&&F||q||typeof R=="function"&&!R(Y))return;const ne=Bi(Y),A="["+Rc("inert")+"]",$=ns(r.floating).querySelectorAll(A);let K=xt(ne)?ne:null;for(;K&&!ii(K);){const fe=li(K);if(ii(fe)||!xt(fe))break;K=fe}if($.length&&xt(ne)&&!nF(ne)&&!kn(ne,r.floating)&&Array.from($).every(fe=>!kn(K,fe)))return;if(It(ne)&&te){const fe=ii(ne),Ke=zn(ne),Ve=/auto|scroll/,Lt=fe||Ve.test(Ke.overflowX),rn=fe||Ve.test(Ke.overflowY),ke=Lt&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ue=rn&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,Re=Ke.direction==="rtl",Oe=Ue&&(Re?Y.offsetX<=ne.offsetWidth-ne.clientWidth:Y.offsetX>ne.clientWidth),tt=ke&&Y.offsetY>ne.clientHeight;if(Oe||tt)return}const se=(L=o.current.floatingContext)==null?void 0:L.nodeId,ue=T&&Tr(T.nodesRef.current,se).some(fe=>{var Ke;return Xp(Y,(Ke=fe.context)==null?void 0:Ke.elements.floating)});if(Xp(Y,r.floating)||Xp(Y,r.domReference)||ue)return;const xe=T?Tr(T.nodesRef.current,se):[];if(xe.length>0){let fe=!0;if(xe.forEach(Ke=>{var Ve;if((Ve=Ke.context)!=null&&Ve.open&&!Ke.context.dataRef.current.__outsidePressBubbles){fe=!1;return}}),!fe)return}s(!1,Y,"outside-press")}),re=nn(Y=>{var L;const q=()=>{var F;le(Y),(F=Bi(Y))==null||F.removeEventListener(d,q)};(L=Bi(Y))==null||L.addEventListener(d,q)});x.useEffect(()=>{if(!n||!l)return;o.current.__escapeKeyBubbles=k,o.current.__outsidePressBubbles=D;let Y=-1;function L($){s(!1,$,"ancestor-scroll")}function q(){window.clearTimeout(Y),G.current=!0}function F(){Y=window.setTimeout(()=>{G.current=!1},td()?5:0)}const ne=ns(r.floating);u&&(ne.addEventListener("keydown",P?ee:ie,P),ne.addEventListener("compositionstart",q),ne.addEventListener("compositionend",F)),R&&ne.addEventListener(d,H?re:le,H);let A=[];return g&&(xt(r.domReference)&&(A=zi(r.domReference)),xt(r.floating)&&(A=A.concat(zi(r.floating))),!xt(r.reference)&&r.reference&&r.reference.contextElement&&(A=A.concat(zi(r.reference.contextElement)))),A=A.filter($=>{var K;return $!==((K=ne.defaultView)==null?void 0:K.visualViewport)}),A.forEach($=>{$.addEventListener("scroll",L,{passive:!0})}),()=>{u&&(ne.removeEventListener("keydown",P?ee:ie,P),ne.removeEventListener("compositionstart",q),ne.removeEventListener("compositionend",F)),R&&ne.removeEventListener(d,H?re:le,H),A.forEach($=>{$.removeEventListener("scroll",L)}),window.clearTimeout(Y)}},[o,r,u,R,d,n,s,g,l,k,D,ie,P,ee,le,H,re]),x.useEffect(()=>{o.current.insideReactTree=!1},[o,R,d]);const oe=x.useMemo(()=>({onKeyDown:ie,...m&&{[x6[b]]:Y=>{s(!1,Y.nativeEvent,"reference-press")},...b!=="click"&&{onClick(Y){s(!1,Y.nativeEvent,"reference-press")}}}}),[ie,s,m,b]),te=x.useMemo(()=>({onKeyDown:ie,onMouseDown(){O.current=!0},onMouseUp(){O.current=!0},[R6[d]]:()=>{o.current.insideReactTree=!0},onBlurCapture(){T||(tg(X),o.current.insideReactTree=!0,X.current=window.setTimeout(()=>{o.current.insideReactTree=!1}))}}),[ie,d,o,T]);return x.useMemo(()=>l?{reference:oe,floating:te}:{},[l,oe,te])}function k6(t){const{open:e=!1,onOpenChange:n,elements:s}=t,r=rd(),o=x.useRef({}),[l]=x.useState(()=>o6()),u=iy()!=null,[h,d]=x.useState(s.reference),m=nn((v,S,T)=>{o.current.openEvent=v?S:void 0,l.emit("openchange",{open:v,event:S,reason:T,nested:u}),n?.(v,S,T)}),b=x.useMemo(()=>({setPositionReference:d}),[]),g=x.useMemo(()=>({reference:h||s.reference||null,floating:s.floating||null,domReference:s.reference}),[h,s.reference,s.floating]);return x.useMemo(()=>({dataRef:o,open:e,onOpenChange:m,elements:g,events:l,floatingId:r,refs:b}),[e,m,g,l,r,b])}function xR(t){t===void 0&&(t={});const{nodeId:e}=t,n=k6({...t,elements:{reference:null,floating:null,...t.elements}}),s=t.rootContext||n,r=s.elements,[o,l]=x.useState(null),[u,h]=x.useState(null),m=r?.domReference||o,b=x.useRef(null),g=ad();mt(()=>{m&&(b.current=m)},[m]);const v=GF({...t,elements:{...r,...u&&{reference:u}}}),S=x.useCallback(k=>{const D=xt(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),getClientRects:()=>k.getClientRects(),contextElement:k}:k;h(D),v.refs.setReference(D)},[v.refs]),T=x.useCallback(k=>{(xt(k)||k===null)&&(b.current=k,l(k)),(xt(v.refs.reference.current)||v.refs.reference.current===null||k!==null&&!xt(k))&&v.refs.setReference(k)},[v.refs]),w=x.useMemo(()=>({...v.refs,setReference:T,setPositionReference:S,domReference:b}),[v.refs,T,S]),R=x.useMemo(()=>({...v.elements,domReference:m}),[v.elements,m]),O=x.useMemo(()=>({...v,...s,refs:w,elements:R,nodeId:e}),[v,w,R,e,s]);return mt(()=>{s.dataRef.current.floatingContext=O;const k=g?.nodesRef.current.find(D=>D.id===e);k&&(k.context=O)}),x.useMemo(()=>({...v,context:O,refs:w,elements:R}),[v,w,R,O])}function tm(t,e,n){const s=new Map,r=n==="item";let o=t;if(r&&t){const{[hC]:l,[pC]:u,...h}=t;o=h}return{...n==="floating"&&{tabIndex:-1,[t6]:""},...o,...e.map(l=>{const u=l?l[n]:null;return typeof u=="function"?t?u(t):null:u}).concat(t).reduce((l,u)=>(u&&Object.entries(u).forEach(h=>{let[d,m]=h;if(!(r&&[hC,pC].includes(d)))if(d.indexOf("on")===0){if(s.has(d)||s.set(d,[]),typeof m=="function"){var b;(b=s.get(d))==null||b.push(m),l[d]=function(){for(var g,v=arguments.length,S=new Array(v),T=0;T<v;T++)S[T]=arguments[T];return(g=s.get(d))==null?void 0:g.map(w=>w(...S)).find(w=>w!==void 0)}}}else l[d]=m}),l),{})}}function O6(t){t===void 0&&(t=[]);const e=t.map(u=>u?.reference),n=t.map(u=>u?.floating),s=t.map(u=>u?.item),r=x.useCallback(u=>tm(u,t,"reference"),e),o=x.useCallback(u=>tm(u,t,"floating"),n),l=x.useCallback(u=>tm(u,t,"item"),s);return x.useMemo(()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:l}),[r,o,l])}const A6="Escape";function cd(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function vu(t,e){return cd(e,t===TR||t===id,t===Vc||t===$c)}function nm(t,e,n){return cd(e,t===id,n?t===Vc:t===$c)||t==="Enter"||t===" "||t===""}function OC(t,e,n){return cd(e,n?t===Vc:t===$c,t===id)}function AC(t,e,n,s){const r=n?t===$c:t===Vc,o=t===TR;return e==="both"||e==="horizontal"&&s&&s>1?t===A6:cd(e,r,o)}function N6(t,e){const{open:n,onOpenChange:s,elements:r,floatingId:o}=t,{listRef:l,activeIndex:u,onNavigate:h=()=>{},enabled:d=!0,selectedIndex:m=null,allowEscape:b=!1,loop:g=!1,nested:v=!1,rtl:S=!1,virtual:T=!1,focusItemOnOpen:w="auto",focusItemOnHover:R=!0,openOnArrowKeyDown:O=!0,disabledIndices:k=void 0,orientation:D="vertical",parentOrientation:P,cols:H=1,scrollItemIntoView:G=!0,virtualItemRef:X,itemSizes:ie,dense:ee=!1}=e,le=Tf(r.floating),re=ks(le),oe=iy(),te=ad();mt(()=>{t.dataRef.current.orientation=D},[t,D]);const Y=nn(()=>{h(F.current===-1?null:F.current)}),L=eg(r.domReference),q=x.useRef(w),F=x.useRef(m??-1),ne=x.useRef(null),A=x.useRef(!0),$=x.useRef(Y),K=x.useRef(!!r.floating),se=x.useRef(n),ue=x.useRef(!1),xe=x.useRef(!1),fe=ks(k),Ke=ks(n),Ve=ks(G),Lt=ks(m),[rn,ke]=x.useState(),[Ue,Re]=x.useState(),Oe=nn(()=>{function ve(he){if(T){var pe;(pe=he.id)!=null&&pe.endsWith("-fui-option")&&(he.id=o+"-"+Math.random().toString(16).slice(2,10)),ke(he.id),te?.events.emit("virtualfocus",he),X&&(X.current=he)}else mr(he,{sync:ue.current,preventScroll:!0})}const Ie=l.current[F.current],ge=xe.current;Ie&&ve(Ie),(ue.current?he=>he():requestAnimationFrame)(()=>{const he=l.current[F.current]||Ie;if(!he)return;Ie||ve(he);const pe=Ve.current;pe&&ht&&(ge||!A.current)&&(he.scrollIntoView==null||he.scrollIntoView(typeof pe=="boolean"?{block:"nearest",inline:"nearest"}:pe))})});mt(()=>{d&&(n&&r.floating?q.current&&m!=null&&(xe.current=!0,F.current=m,Y()):K.current&&(F.current=-1,$.current()))},[d,n,r.floating,m,Y]),mt(()=>{if(d&&n&&r.floating)if(u==null){if(ue.current=!1,Lt.current!=null)return;if(K.current&&(F.current=-1,Oe()),(!se.current||!K.current)&&q.current&&(ne.current!=null||q.current===!0&&ne.current==null)){let ve=0;const Ie=()=>{l.current[0]==null?(ve<2&&(ve?requestAnimationFrame:queueMicrotask)(Ie),ve++):(F.current=ne.current==null||nm(ne.current,D,S)||v?Qp(l,fe.current):aC(l,fe.current),ne.current=null,Y())};Ie()}}else fc(l,u)||(F.current=u,Oe(),xe.current=!1)},[d,n,r.floating,u,Lt,v,l,D,S,Y,Oe,fe]),mt(()=>{var ve;if(!d||r.floating||!te||T||!K.current)return;const Ie=te.nodesRef.current,ge=(ve=Ie.find(pe=>pe.id===oe))==null||(ve=ve.context)==null?void 0:ve.elements.floating,Xe=Ui(ns(r.floating)),he=Ie.some(pe=>pe.context&&kn(pe.context.elements.floating,Xe));ge&&!he&&A.current&&ge.focus({preventScroll:!0})},[d,r.floating,te,oe,T]),mt(()=>{if(!d||!te||!T||oe)return;function ve(Ie){Re(Ie.id),X&&(X.current=Ie)}return te.events.on("virtualfocus",ve),()=>{te.events.off("virtualfocus",ve)}},[d,te,T,oe,X]),mt(()=>{$.current=Y,se.current=n,K.current=!!r.floating}),mt(()=>{n||(ne.current=null,q.current=w)},[n,w]);const tt=u!=null,ht=x.useMemo(()=>{function ve(ge){if(!Ke.current)return;const Xe=l.current.indexOf(ge);Xe!==-1&&F.current!==Xe&&(F.current=Xe,Y())}return{onFocus(ge){let{currentTarget:Xe}=ge;ue.current=!0,ve(Xe)},onClick:ge=>{let{currentTarget:Xe}=ge;return Xe.focus({preventScroll:!0})},...R&&{onMouseMove(ge){let{currentTarget:Xe}=ge;ue.current=!0,xe.current=!1,ve(Xe)},onPointerLeave(ge){let{pointerType:Xe}=ge;if(!(!A.current||Xe==="touch")&&(ue.current=!0,F.current=-1,Y(),!T)){var he;(he=re.current)==null||he.focus({preventScroll:!0})}}}}},[Ke,re,R,l,Y,T]),et=x.useCallback(()=>{var ve;return P??(te==null||(ve=te.nodesRef.current.find(Ie=>Ie.id===oe))==null||(ve=ve.context)==null||(ve=ve.dataRef)==null?void 0:ve.current.orientation)},[oe,te,P]),vt=nn(ve=>{if(A.current=!1,ue.current=!0,ve.which===229||!Ke.current&&ve.currentTarget===re.current)return;if(v&&AC(ve.key,D,S,H)){vu(ve.key,et())||en(ve),s(!1,ve.nativeEvent,"list-navigation"),It(r.domReference)&&(T?te?.events.emit("virtualfocus",r.domReference):r.domReference.focus());return}const Ie=F.current,ge=Qp(l,k),Xe=aC(l,k);if(L||(ve.key==="Home"&&(en(ve),F.current=ge,Y()),ve.key==="End"&&(en(ve),F.current=Xe,Y())),H>1){const he=ie||Array.from({length:l.current.length},()=>({width:1,height:1})),pe=fF(he,H,ee),ye=pe.findIndex(pt=>pt!=null&&!Fu(l,pt,k)),Ne=pe.reduce((pt,Me,Se)=>Me!=null&&!Fu(l,Me,k)?Se:pt,-1),Xt=pe[uF({current:pe.map(pt=>pt!=null?l.current[pt]:null)},{event:ve,orientation:D,loop:g,rtl:S,cols:H,disabledIndices:hF([...(typeof k!="function"?k:null)||l.current.map((pt,Me)=>Fu(l,Me,k)?Me:void 0),void 0],pe),minIndex:ye,maxIndex:Ne,prevIndex:dF(F.current>Xe?ge:F.current,he,pe,H,ve.key===id?"bl":ve.key===(S?Vc:$c)?"tr":"tl"),stopEvent:!0})];if(Xt!=null&&(F.current=Xt,Y()),D==="both")return}if(vu(ve.key,D)){if(en(ve),n&&!T&&Ui(ve.currentTarget.ownerDocument)===ve.currentTarget){F.current=nm(ve.key,D,S)?ge:Xe,Y();return}nm(ve.key,D,S)?g?F.current=Ie>=Xe?b&&Ie!==l.current.length?-1:ge:un(l,{startingIndex:Ie,disabledIndices:k}):F.current=Math.min(Xe,un(l,{startingIndex:Ie,disabledIndices:k})):g?F.current=Ie<=ge?b&&Ie!==-1?l.current.length:Xe:un(l,{startingIndex:Ie,decrement:!0,disabledIndices:k}):F.current=Math.max(ge,un(l,{startingIndex:Ie,decrement:!0,disabledIndices:k})),fc(l,F.current)&&(F.current=-1),Y()}}),ze=x.useMemo(()=>T&&n&&tt&&{"aria-activedescendant":Ue||rn},[T,n,tt,Ue,rn]),nt=x.useMemo(()=>({"aria-orientation":D==="both"?void 0:D,...L?{}:ze,onKeyDown:vt,onPointerMove(){A.current=!0}}),[ze,vt,D,L]),jt=x.useMemo(()=>{function ve(ge){w==="auto"&&aR(ge.nativeEvent)&&(q.current=!0)}function Ie(ge){q.current=w,w==="auto"&&oR(ge.nativeEvent)&&(q.current=!0)}return{...ze,onKeyDown(ge){A.current=!1;const Xe=ge.key.startsWith("Arrow"),he=["Home","End"].includes(ge.key),pe=Xe||he,ye=OC(ge.key,D,S),Ne=AC(ge.key,D,S,H),Xt=OC(ge.key,et(),S),pt=vu(ge.key,D),Me=(v?Xt:pt)||ge.key==="Enter"||ge.key.trim()==="";if(T&&n){const qn=te?.nodesRef.current.find(Ir=>Ir.parentId==null),Tn=te&&qn?sF(te.nodesRef.current,qn.id):null;if(pe&&Tn&&X){const Ir=new KeyboardEvent("keydown",{key:ge.key,bubbles:!0});if(ye||Ne){var Se,Ht;const zc=((Se=Tn.context)==null?void 0:Se.elements.domReference)===ge.currentTarget,Ka=Ne&&!zc?(Ht=Tn.context)==null?void 0:Ht.elements.domReference:ye?l.current.find(Pr=>Pr?.id===rn):null;Ka&&(en(ge),Ka.dispatchEvent(Ir),Re(void 0))}if((pt||he)&&Tn.context&&Tn.context.open&&Tn.parentId&&ge.currentTarget!==Tn.context.elements.domReference){var Sn;en(ge),(Sn=Tn.context.elements.domReference)==null||Sn.dispatchEvent(Ir);return}}return vt(ge)}if(!(!n&&!O&&Xe)){if(Me){const qn=vu(ge.key,et());ne.current=v&&qn?null:ge.key}if(v){Xt&&(en(ge),n?(F.current=Qp(l,fe.current),Y()):s(!0,ge.nativeEvent,"list-navigation"));return}pt&&(m!=null&&(F.current=m),en(ge),!n&&O?s(!0,ge.nativeEvent,"list-navigation"):vt(ge),n&&Y())}},onFocus(){n&&!T&&(F.current=-1,Y())},onPointerDown:Ie,onPointerEnter:Ie,onMouseDown:ve,onClick:ve}},[rn,ze,H,vt,fe,w,l,v,Y,s,n,O,D,et,S,m,te,T,X]);return x.useMemo(()=>d?{reference:jt,floating:nt,item:ht}:{},[d,jt,nt,ht])}const D6=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function I6(t,e){var n,s;e===void 0&&(e={});const{open:r,elements:o,floatingId:l}=t,{enabled:u=!0,role:h="dialog"}=e,d=rd(),m=((n=o.domReference)==null?void 0:n.id)||d,b=x.useMemo(()=>{var O;return((O=Tf(o.floating))==null?void 0:O.id)||l},[o.floating,l]),g=(s=D6.get(h))!=null?s:h,S=iy()!=null,T=x.useMemo(()=>g==="tooltip"||h==="label"?{["aria-"+(h==="label"?"labelledby":"describedby")]:r?b:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":g==="alertdialog"?"dialog":g,"aria-controls":r?b:void 0,...g==="listbox"&&{role:"combobox"},...g==="menu"&&{id:m},...g==="menu"&&S&&{role:"menuitem"},...h==="select"&&{"aria-autocomplete":"none"},...h==="combobox"&&{"aria-autocomplete":"list"}},[g,b,S,r,m,h]),w=x.useMemo(()=>{const O={id:b,...g&&{role:g}};return g==="tooltip"||h==="label"?O:{...O,...g==="menu"&&{"aria-labelledby":m}}},[g,b,m,h]),R=x.useCallback(O=>{let{active:k,selected:D}=O;const P={role:"option",...k&&{id:b+"-fui-option"}};switch(h){case"select":return{...P,"aria-selected":k&&D};case"combobox":return{...P,"aria-selected":D}}return{}},[b,h]);return x.useMemo(()=>u?{reference:T,floating:w,item:R}:{},[u,T,w,R])}function P6(t,e){var n;const{open:s,dataRef:r}=t,{listRef:o,activeIndex:l,onMatch:u,onTypingChange:h,enabled:d=!0,findMatch:m=null,resetMs:b=750,ignoreKeys:g=[],selectedIndex:v=null}=e,S=x.useRef(-1),T=x.useRef(""),w=x.useRef((n=v??l)!=null?n:-1),R=x.useRef(null),O=nn(u),k=nn(h),D=ks(m),P=ks(g);mt(()=>{s&&(tg(S),R.current=null,T.current="")},[s]),mt(()=>{if(s&&T.current===""){var ee;w.current=(ee=v??l)!=null?ee:-1}},[s,v,l]);const H=nn(ee=>{ee?r.current.typing||(r.current.typing=ee,k(ee)):r.current.typing&&(r.current.typing=ee,k(ee))}),G=nn(ee=>{function le(L,q,F){const ne=D.current?D.current(q,F):q.find(A=>A?.toLocaleLowerCase().indexOf(F.toLocaleLowerCase())===0);return ne?L.indexOf(ne):-1}const re=o.current;if(T.current.length>0&&T.current[0]!==" "&&(le(re,re,T.current)===-1?H(!1):ee.key===" "&&en(ee)),re==null||P.current.includes(ee.key)||ee.key.length!==1||ee.ctrlKey||ee.metaKey||ee.altKey)return;s&&ee.key!==" "&&(en(ee),H(!0)),re.every(L=>{var q,F;return L?((q=L[0])==null?void 0:q.toLocaleLowerCase())!==((F=L[1])==null?void 0:F.toLocaleLowerCase()):!0})&&T.current===ee.key&&(T.current="",w.current=R.current),T.current+=ee.key,tg(S),S.current=window.setTimeout(()=>{T.current="",w.current=R.current,H(!1)},b);const te=w.current,Y=le(re,[...re.slice((te||0)+1),...re.slice(0,(te||0)+1)],T.current);Y!==-1?(O(Y),R.current=Y):ee.key!==" "&&(T.current="",H(!1))}),X=x.useMemo(()=>({onKeyDown:G}),[G]),ie=x.useMemo(()=>({onKeyDown:G,onKeyUp(ee){ee.key===" "&&H(!1)}}),[G,H]);return x.useMemo(()=>d?{reference:X,floating:ie}:{},[d,X,ie])}function RR(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=RR(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Vt(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=RR(t))&&(s&&(s+=" "),s+=e);return s}const _c=({participant:t,trackType:e="audioTrack",...n})=>{const s=$t(),[r,o]=x.useState(null),{userId:l,sessionId:u}=t;return x.useEffect(()=>{if(!s||!r)return;const h=s.bindAudioElement(r,u,e);return()=>{h?.()}},[s,u,r,e]),C.jsx("audio",{autoPlay:!0,...n,ref:o,"data-user-id":l,"data-session-id":u,"data-track-type":e})};_c.displayName="Audio";const _R=t=>{const{participants:e,audioProps:n}=t;return C.jsx(C.Fragment,{children:e.map(s=>{if(s.isLocalParticipant)return null;const{audioStream:r,screenShareAudioStream:o,sessionId:l}=s,h=ti(s)&&r&&C.jsx(_c,{...n,trackType:"audioTrack",participant:s}),m=zf(s)&&o&&C.jsx(_c,{...n,trackType:"screenShareAudioTrack",participant:s});return C.jsxs(x.Fragment,{children:[h,m]},l)})})};_R.displayName="ParticipantsAudio";const kR=x.createContext(void 0),ld=()=>x.useContext(kR),ry=({middleware:t=[],placement:e,strategy:n,offset:s=10})=>{const{refs:r,x:o,y:l,update:u,elements:{domReference:h,floating:d},context:m}=xR({placement:e,strategy:n,middleware:[YF(s),JF(),vR(),XF({padding:10,apply:({availableHeight:b,elements:g})=>{Object.assign(g.floating.style,{maxHeight:`${b}px`})}}),...t]});return x.useEffect(()=>{if(!h||!d)return;const b=yR(h,d,u);return()=>b()},[h,d,u]),{refs:r,x:o,y:l,domReference:h,floating:d,strategy:n,context:m}},OR=10,L6=(t,e=OR)=>{const[n,s]=x.useState(null);return x.useEffect(()=>{if(!t)return;const r=()=>{const l=t;if(!(l.scrollHeight>l.clientHeight))return s(null);if(l.scrollTop<=e)return s("top");if(Math.abs(l.scrollHeight-l.scrollTop-l.clientHeight)<=e)return s("bottom");s("between")},o=new ResizeObserver(r);return o.observe(t),t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r),o.disconnect()}},[t,e]),n},j6=(t,e=OR)=>{const[n,s]=x.useState(null);return x.useEffect(()=>{if(!t)return;const r=()=>{const l=t;if(!(l.scrollWidth>l.clientWidth))return s(null);if(l.scrollLeft<=e)return s("start");if(Math.abs(l.scrollWidth-l.scrollLeft-l.clientWidth)<=e)return s("end");s("between")},o=new ResizeObserver(r);return o.observe(t),t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r),o.disconnect()}},[t,e]),n},ay=t=>{const e=$t(),{useHasPermissions:n}=Pn(),s=n(t),[r,o]=x.useState(!1);return x.useEffect(()=>{s&&o(!1)},[s]),{requestPermission:x.useCallback(async()=>{if(s)return!0;const u=!!e?.permissionsContext.canRequest(t);if(r||!u)return!1;o(!0);try{await e?.requestPermissions({permissions:[t]})}catch(h){throw o(!1),new Error(`requestPermission failed: ${h}`)}return!1},[e,s,r,t]),hasPermission:s,canRequestPermission:!!e?.permissionsContext.canRequest(t),isAwaitingPermission:r}};function AR(t,e){const{t:n}=sn();return x.useMemo(()=>{let s=null,r=null;const o=t.map((l,u)=>{const h=l.deviceId===e,d={deviceId:l.deviceId,label:l.label,isSelected:h};return h&&(s=d,r=u),d});if(s===null||r===null){const l={deviceId:"default",label:n("Default"),isSelected:!0};s=l,r=0,o.unshift(l)}return{deviceList:o,selectedDeviceInfo:s,selectedIndex:r}},[t,e,n])}var Oa;(function(t){t.PORTAL="portal",t.MENU="menu"})(Oa||(Oa={}));const NR=x.createContext({}),oy=()=>x.useContext(NR),M6=({children:t,refs:e})=>{const n=x.useMemo(()=>`str-video-portal-${Math.random().toString(36).substring(2,9)}`,[]);return C.jsxs(C.Fragment,{children:[C.jsx("div",{id:n,className:"str-video__portal"}),C.jsx(C6,{children:C.jsx(m6,{id:n,children:C.jsx("div",{className:"str-video__portal-content",ref:e.setFloating,children:t})})})]})},cy=({ToggleButton:t,placement:e="top-start",strategy:n="absolute",offset:s,visualType:r=Oa.MENU,children:o,onToggle:l})=>{const[u,h]=x.useState(!1),d=x.useRef(l);d.current=l;const{floating:m,domReference:b,refs:g,x:v,y:S}=ry({placement:e,strategy:n,offset:s});return x.useEffect(()=>{const T=b?.ownerDocument,w=O=>{!m&&b?.contains(O.target)?(h(!0),d.current?.(!0)):m&&!m?.contains(O.target)&&(h(!1),d.current?.(!1))},R=O=>{O.key&&O.key.toLowerCase()==="escape"&&!O.altKey&&!O.ctrlKey&&(h(!1),d.current?.(!1))};return T?.addEventListener("click",w,{capture:!0}),T?.addEventListener("keydown",R),()=>{T?.removeEventListener("click",w,{capture:!0}),T?.removeEventListener("keydown",R)}},[m,b]),C.jsxs(C.Fragment,{children:[u&&C.jsx(NR.Provider,{value:{close:()=>h(!1)},children:r===Oa.PORTAL?C.jsx(M6,{refs:g,children:o}):r===Oa.MENU?C.jsx("div",{className:"str-video__menu-container",ref:g.setFloating,style:{position:n,top:S??0,left:v??0,overflowY:"auto"},role:"menu",children:o}):null}),C.jsx(t,{menuShown:u,ref:g.setReference})]})},U6=({children:t,onItemClick:e})=>{const n=x.useRef(null);return C.jsx("ul",{className:"str-video__generic-menu",ref:n,onClick:s=>{e&&s.target!==n.current&&n.current?.contains(s.target)&&e(s)},children:t})},ln=({children:t,...e})=>C.jsx("li",{className:"str-video__generic-menu--item",children:C.jsx("button",{...e,children:t})}),At=({className:t,icon:e})=>C.jsx("span",{className:Vt("str-video__icon",e&&`str-video__icon--${e}`,t)});function DR(t){const[e,n]=x.useState(document.pictureInPictureElement===t);return!t&&e&&n(!1),x.useEffect(()=>{if(!t)return;const s=()=>{n(document.pictureInPictureElement===t)};return t.addEventListener("enterpictureinpicture",s),t.addEventListener("leavepictureinpicture",s),()=>{t.removeEventListener("enterpictureinpicture",s),t.removeEventListener("leavepictureinpicture",s)}},[t]),e}const B6=()=>{const{participant:t,participantViewElement:e,videoElement:n}=ld(),[s,r]=x.useState(!!document.fullscreenElement),o=$t(),l=DR(n??void 0),{t:u}=sn(),{pin:h,sessionId:d,userId:m}=t,b=ti(t),g=fs(t),v=ds(t),S=zf(t),T=()=>o?.blockUser(m),w=()=>o?.muteUser(m,"audio"),R=()=>o?.muteUser(m,"video"),O=()=>o?.muteUser(m,"screenshare"),k=()=>o?.muteUser(m,"screenshare_audio"),D=re=>()=>{o?.updateUserPermissions({user_id:m,grant_permissions:[re]})},P=re=>()=>{o?.updateUserPermissions({user_id:m,revoke_permissions:[re]})},H=()=>{h?o?.unpin(d):o?.pin(d)},G=()=>{o?.pinForEveryone({user_id:m,session_id:d}).catch(re=>{console.error(`Failed to pin participant ${m}`,re)})},X=()=>{o?.unpinForEveryone({user_id:m,session_id:d}).catch(re=>{console.error(`Failed to unpin participant ${m}`,re)})},ie=()=>s?document.exitFullscreen().catch(console.error):e?.requestFullscreen().catch(console.error);x.useEffect(()=>{const re=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",re),()=>{document.removeEventListener("fullscreenchange",re)}},[]);const ee=()=>n&&!l?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),{close:le}=oy()||{};return C.jsxs(U6,{onItemClick:le,children:[C.jsxs(ln,{onClick:H,disabled:h&&!h.isLocalPin,children:[C.jsx(At,{icon:"pin"}),u(h?"Unpin":"Pin")]}),C.jsxs(An,{requiredGrants:[we.PIN_FOR_EVERYONE],children:[C.jsxs(ln,{onClick:G,disabled:h&&!h.isLocalPin,children:[C.jsx(At,{icon:"pin"}),u("Pin for everyone")]}),C.jsxs(ln,{onClick:X,disabled:!h||h.isLocalPin,children:[C.jsx(At,{icon:"pin"}),u("Unpin for everyone")]})]}),C.jsx(An,{requiredGrants:[we.BLOCK_USERS],children:C.jsxs(ln,{onClick:T,children:[C.jsx(At,{icon:"not-allowed"}),u("Block")]})}),C.jsxs(An,{requiredGrants:[we.MUTE_USERS],children:[g&&C.jsxs(ln,{onClick:R,children:[C.jsx(At,{icon:"camera-off-outline"}),u("Turn off video")]}),v&&C.jsxs(ln,{onClick:O,children:[C.jsx(At,{icon:"screen-share-off"}),u("Turn off screen share")]}),b&&C.jsxs(ln,{onClick:w,children:[C.jsx(At,{icon:"no-audio"}),u("Mute audio")]}),S&&C.jsxs(ln,{onClick:k,children:[C.jsx(At,{icon:"no-audio"}),u("Mute screen share audio")]})]}),e&&typeof e.requestFullscreen<"u"&&C.jsx(ln,{onClick:ie,children:u("{{ direction }} fullscreen",{direction:u(s?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&C.jsx(ln,{onClick:ee,children:u("{{ direction }} picture-in-picture",{direction:u(l?"Leave":"Enter")})}),C.jsxs(An,{requiredGrants:[we.UPDATE_CALL_PERMISSIONS],children:[C.jsx(ln,{onClick:D(we.SEND_AUDIO),children:u("Allow audio")}),C.jsx(ln,{onClick:D(we.SEND_VIDEO),children:u("Allow video")}),C.jsx(ln,{onClick:D(we.SCREENSHARE),children:u("Allow screen sharing")}),C.jsx(ln,{onClick:P(we.SEND_AUDIO),children:u("Disable audio")}),C.jsx(ln,{onClick:P(we.SEND_VIDEO),children:u("Disable video")}),C.jsx(ln,{onClick:P(we.SCREENSHARE),children:u("Disable screen sharing")})]})]})},IR=t=>t===null?!1:!x.isValidElement(t),PR=(t,e)=>{if(t){if(typeof t=="function")return t(e);t.current=e}};x.forwardRef(function({stream:e,...n},s){const[r,o]=x.useState(null);return x.useEffect(()=>{if(!(!r||!e)&&e!==r.srcObject)return r.srcObject=e,(NT.isSafari()||NT.isFirefox())&&setTimeout(()=>{r.srcObject=e,r.play().catch(l=>{console.error("Failed to play stream",l)})},0),()=>{r.pause(),r.srcObject=null}},[e,r]),C.jsx("video",{autoPlay:!0,playsInline:!0,...n,ref:l=>{PR(s,l),o(l)}})});const LR=x.forwardRef(function({participant:e,style:n,children:s},r){const[o,l]=x.useState(!1),u=e.name||e.userId;return C.jsxs("div",{className:"str-video__video-placeholder",style:n,ref:r,children:[(!e.image||o)&&(u?C.jsx(F6,{name:u}):C.jsx("div",{className:"str-video__video-placeholder__no-video-label",children:s})),e.image&&!o&&C.jsx("img",{onError:()=>l(!0),alt:u,className:"str-video__video-placeholder__avatar",src:e.image})]})}),F6=t=>{const{name:e}=t,n=e.split(" ").slice(0,2).map(s=>s[0]).join("");return C.jsx("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},V6=x.forwardRef(function(e,n){const{t:s}=sn();return C.jsx(LR,{ref:n,...e,children:s("Video is disabled")})}),$6=x.forwardRef(function(e,n){const{t:s}=sn();return C.jsx(LR,{ref:n,...e,children:s("Video is playing in a popup")})}),jR=({enabled:t=!0,mirror:e,trackType:n,participant:s,className:r,VideoPlaceholder:o=V6,PictureInPicturePlaceholder:l=$6,refs:u,...h})=>{const{sessionId:d,videoStream:m,screenShareStream:b,viewportVisibilityState:g,isLocalParticipant:v,userId:S}=s,T=$t(),[w,R]=x.useState(null),[O,k]=x.useState(!0),[D,P]=x.useState(!0),H=DR(w??void 0),G=n==="videoTrack"?m:n==="screenShareTrack"?b:void 0;if(x.useLayoutEffect(()=>{if(!T||!w||n==="none")return;const oe=T.bindVideoElement(w,d,n);return()=>{oe?.()}},[T,n,d,w]),x.useEffect(()=>{if(!G||!w)return;const[oe]=G.getVideoTracks();if(!oe)return;const te=()=>{k(w.paused);const{width:Y=0,height:L=0}=oe.getSettings();P(Y>=L)};return k(w.paused),w.addEventListener("play",te),w.addEventListener("pause",te),oe.addEventListener("unmute",te),()=>{w.removeEventListener("play",te),w.removeEventListener("pause",te),oe.removeEventListener("unmute",te),k(!0)}},[G,w]),!T)return null;const X=n==="videoTrack"?fs(s):n==="screenShareTrack"?ds(s):!1,ie=n==="none"||g?.[n]===Et.INVISIBLE,ee=!t||!X||ie,le=e===void 0?v&&n==="videoTrack":e,re=n==="screenShareTrack";return C.jsxs(C.Fragment,{children:[!ee&&C.jsx("video",{...h,className:Vt("str-video__video",r,{"str-video__video--not-playing":O,"str-video__video--tall":!D,"str-video__video--mirror":le,"str-video__video--screen-share":re}),"data-user-id":S,"data-session-id":d,ref:oe=>{R(oe),u?.setVideoElement?.(oe)}}),H&&l&&C.jsx(l,{style:{position:"absolute"},participant:s}),(ee||O)&&o&&C.jsx(o,{style:{position:"absolute"},participant:s,ref:u?.setVideoPlaceholderElement})]})};jR.displayName="Video";const H6=({trackedElement:t,dynascaleManager:e,sessionId:n,trackType:s})=>{const r=$t(),o=e??r?.dynascaleManager;x.useEffect(()=>{if(!t||!o||!r||s==="none")return;const l=o.trackElementVisibility(t,n,s);return()=>{l()}},[t,o,r,n,s])};x.createContext(void 0);const ms=x.forwardRef(function(e,n){const{icon:s,enabled:r,variant:o,onClick:l,className:u,...h}=e;return C.jsx("button",{className:Vt("str-video__call-controls__button",u,{[`str-video__call-controls__button--variant-${o}`]:o,"str-video__call-controls__button--enabled":r}),onClick:d=>{d.preventDefault(),l?.(d)},ref:n,...h,children:C.jsx(At,{icon:s})})}),Dr=x.forwardRef(function({disabled:e,caption:n,children:s,className:r,active:o,Menu:l,menuPlacement:u,menuOffset:h,title:d,ToggleMenuButton:m=z6,variant:b,onClick:g,onMenuToggle:v,...S},T){return C.jsxs("div",{className:Vt("str-video__composite-button",r,{"str-video__composite-button--caption":n,"str-video__composite-button--menu":l}),title:d,ref:T,children:[C.jsxs("div",{className:Vt("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":o,"str-video__composite-button__button-group--active-primary":o&&b==="primary","str-video__composite-button__button-group--active-secondary":o&&b==="secondary","str-video__composite-button__button-group--disabled":e}),children:[C.jsx("button",{type:"button",className:"str-video__composite-button__button",onClick:w=>{w.preventDefault(),g?.(w)},disabled:e,...S,children:s}),l&&C.jsx(cy,{offset:h,placement:u,ToggleButton:m,onToggle:v,children:IR(l)?C.jsx(l,{}):l})]}),n&&C.jsx("div",{className:"str-video__composite-button__caption",children:n})]})}),z6=x.forwardRef(function({menuShown:e},n){return C.jsx(ms,{className:Vt("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":e}),icon:e?"caret-down":"caret-up",ref:n})}),Ef=t=>{const{isVisible:e,message:n,children:s,visibilityTimeout:r,resetIsVisible:o,placement:l="top",iconClassName:u="str-video__notification__icon",close:h}=t,{refs:d,x:m,y:b,strategy:g}=ry({placement:l,strategy:"absolute"});return x.useEffect(()=>{if(!e||!r||!o)return;const v=setTimeout(()=>{o()},r);return()=>clearTimeout(v)},[e,o,r]),C.jsxs("div",{ref:d.setReference,children:[e&&C.jsxs("div",{className:"str-video__notification",ref:d.setFloating,style:{position:g,top:b??0,left:m??0,overflowY:"auto"},children:[u&&C.jsx("i",{className:u}),C.jsx("span",{className:"str-video__notification__message",children:n}),h?C.jsx("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:h}):null]}),s]})},ly=t=>{const{permission:e,isAwaitingApproval:n,messageApproved:s,messageAwaitingApproval:r,messageRevoked:o,visibilityTimeout:l=3500,children:u}=t,{useHasPermissions:h}=Pn(),d=h(e),m=x.useRef(d),[b,g]=x.useState();x.useEffect(()=>{d&&!m.current?(g("granted"),m.current=!0):!d&&m.current&&(g("revoked"),m.current=!1)},[d]);const v=x.useCallback(()=>g(void 0),[]);return n?C.jsx(Ef,{isVisible:n&&!d,message:r,children:u}):C.jsx(Ef,{isVisible:!!b,visibilityTimeout:l,resetIsVisible:v,message:b==="granted"?s:o,children:u})},q6=({children:t,text:e,placement:n})=>{const{useMicrophoneState:s}=Pn(),{isSpeakingWhileMuted:r}=s(),{t:o}=sn(),l=e??o("You are muted. Unmute to speak.");return C.jsx(Ef,{message:l,isVisible:r,placement:n||"top-start",children:t})},G6=({className:t,type:e="spinner",text:n,tooltip:s})=>C.jsxs("div",{className:Vt("str-video__loading-indicator",t),title:s,children:[C.jsx("div",{className:Vt("str-video__loading-indicator__icon",e)}),n&&C.jsx("p",{className:"str-video__loading-indicator-text",children:n})]}),K6=({children:t,referenceElement:e,tooltipClassName:n,tooltipPlacement:s="top",visible:r=!1})=>{const o=x.useRef(null),{refs:l,x:u,y:h,strategy:d,context:m}=ry({placement:s,strategy:"absolute",middleware:[QF({element:o})]});return x.useEffect(()=>{l.setReference(e)},[e,l]),r?C.jsxs("div",{className:Vt("str-video__tooltip",n),ref:l.setFloating,style:{position:d,top:h??0,left:u??0},children:[C.jsx(a6,{ref:o,context:m,fill:"var(--str-video__tooltip--background-color)"}),t]}):null},Y6=({onMouseEnter:t,onMouseLeave:e}={})=>{const[n,s]=x.useState(!1),r=x.useCallback(l=>{s(!0),t?.(l)},[t]),o=x.useCallback(l=>{s(!1),e?.(l)},[e]);return{handleMouseEnter:r,handleMouseLeave:o,tooltipVisible:n}},Hc=({title:t,tooltipClassName:e,tooltipPlacement:n,tooltipDisabled:s,...r})=>{const{handleMouseEnter:o,handleMouseLeave:l,tooltipVisible:u}=Y6(),[h,d]=x.useState(null),m=!s&&!!t&&u;return C.jsxs(C.Fragment,{children:[C.jsx(K6,{referenceElement:h,visible:m,tooltipClassName:e,tooltipPlacement:n,children:t||""}),C.jsx("div",{ref:d,onMouseEnter:o,onMouseLeave:l,...r})]})};x.forwardRef(function(e,n){return C.jsx(Dr,{ref:n,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:C.jsx(At,{icon:"recording-off"})})});const J6=({caption:t})=>{const{t:e}=sn(),{toggleCallRecording:n,isAwaitingResponse:s,isCallRecordingInProgress:r}=mB();let o=t??e("Record call");return s&&(o=e(r?"Waiting for recording to stop...":"Waiting for recording to start...")),C.jsx(An,{requiredGrants:[we.START_RECORD_CALL,we.STOP_RECORD_CALL],children:C.jsx(Dr,{active:r,caption:t,variant:"secondary","data-testid":r?"recording-stop-button":"recording-start-button",title:o,onClick:s?void 0:n,children:s?C.jsx(G6,{}):C.jsx(At,{icon:r?"recording-on":"recording-off"})})})},MR={":like:":"",":raise-hand:":"",":fireworks:":"",":dislike:":"",":heart:":"",":smile:":""},X6=({participant:{reaction:t,sessionId:e},hideAfterTimeoutInMs:n=5500,emojiReactionMap:s=MR})=>{const r=$t();if(x.useEffect(()=>{if(!r||!t)return;const l=setTimeout(()=>{r.resetReaction(e)},n);return()=>{clearTimeout(l)}},[r,n,t,e]),!t)return null;const{emoji_code:o}=t;return C.jsx("div",{className:"str-video__reaction",children:C.jsx("span",{className:"str-video__reaction__emoji",children:o&&s[o]})})},Q6=[{type:"reaction",emoji_code:":like:"},{type:"raised-hand",emoji_code:":raise-hand:"},{type:"reaction",emoji_code:":fireworks:"},{type:"reaction",emoji_code:":dislike:"},{type:"reaction",emoji_code:":heart:"},{type:"reaction",emoji_code:":smile:"}],W6=({reactions:t=Q6})=>C.jsx(An,{requiredGrants:[we.CREATE_REACTION],children:C.jsx(cy,{placement:"top",ToggleButton:Z6,visualType:Oa.MENU,children:C.jsx(eV,{reactions:t})})}),Z6=x.forwardRef(function({menuShown:e},n){const{t:s}=sn();return C.jsx(Hc,{title:s("Reactions"),tooltipDisabled:e,children:C.jsx(Dr,{ref:n,active:e,variant:"primary",children:C.jsx(At,{icon:"reactions"})})})}),eV=({reactions:t,layout:e="horizontal"})=>{const n=$t(),{close:s}=oy();return C.jsx("div",{className:Vt("str-video__reactions-menu",{"str-video__reactions-menu--horizontal":e==="horizontal","str-video__reactions-menu--vertical":e==="vertical"}),children:t.map(r=>C.jsx("button",{type:"button",className:"str-video__reactions-menu__button",onClick:()=>{n?.sendReaction(r),s?.()},children:r.emoji_code&&MR[r.emoji_code]},r.emoji_code))})},uy=(t,e)=>{const n=Ze(["react-sdk"]);return async()=>{try{await e()}catch(s){if(t.onError){t.onError(s);return}tV(s)||n("error","Call control handler failed",s)}}};function tV(t){return t instanceof DOMException&&t.name==="NotAllowedError"}const nV=t=>{const{t:e}=sn(),{caption:n}=t,{useHasOngoingScreenShare:s,useScreenShareState:r,useCallSettings:o}=Pn(),l=s(),{hasPermission:u,requestPermission:h,isAwaitingPermission:d}=ay(we.SCREENSHARE),b=o()?.screensharing.enabled,{screenShare:g,optimisticIsMute:v}=r(),S=!v,T=!S&&(l||b===!1),w=uy(t,async()=>{u?await g.toggle():await h()});return C.jsx(An,{requiredGrants:[we.SCREENSHARE],children:C.jsx(ly,{permission:we.SCREENSHARE,isAwaitingApproval:d,messageApproved:e("You can now share your screen."),messageAwaitingApproval:e("Awaiting for an approval to share screen."),messageRevoked:e("You can no longer share your screen."),children:C.jsx(Hc,{title:n??e("Share screen"),children:C.jsx(Dr,{active:l||S,caption:n,variant:"primary","data-testid":l?"screen-share-stop-button":"screen-share-start-button",disabled:T,onClick:w,children:C.jsx(At,{icon:l?"screen-share-on":"screen-share-off"})})})})})},UR=x.createContext({}),sV=t=>{const{children:e,icon:n,defaultSelectedLabel:s,defaultSelectedIndex:r,handleSelect:o}=t,[l,u]=x.useState(!1),[h,d]=x.useState(null),[m,b]=x.useState(r),[g,v]=x.useState(s),{refs:S,context:T}=xR({placement:"bottom-start",open:l,onOpenChange:u,whileElementsMounted:yR,middleware:[vR()]}),w=x.useRef([]),R=x.useRef([]),O=x.useCallback(oe=>{b(oe),o(oe||0),u(!1),oe!==null&&v(R.current[oe])},[o]),k=oe=>{l?d(oe):O(oe)},D=N6(T,{listRef:w,activeIndex:h,selectedIndex:m,onNavigate:d}),P=P6(T,{listRef:R,activeIndex:h,selectedIndex:m,onMatch:k}),H=E6(T),G=_6(T),X=I6(T,{role:"listbox"}),{getReferenceProps:ie,getFloatingProps:ee,getItemProps:le}=O6([D,P,H,G,X]),re=x.useMemo(()=>({activeIndex:h,selectedIndex:m,getItemProps:le,handleSelect:O}),[h,m,le,O]);return C.jsxs("div",{className:"str-video__dropdown",children:[C.jsxs("div",{className:"str-video__dropdown-selected",ref:S.setReference,tabIndex:0,...ie(),children:[C.jsxs("label",{className:"str-video__dropdown-selected__label",children:[n&&C.jsx(At,{className:"str-video__dropdown-selected__icon",icon:n}),g]}),C.jsx(At,{className:"str-video__dropdown-selected__chevron",icon:l?"chevron-up":"chevron-down"})]}),C.jsx(UR.Provider,{value:re,children:l&&C.jsx(S6,{context:T,modal:!1,children:C.jsx("div",{className:"str-video__dropdown-list",ref:S.setFloating,...ee(),children:C.jsx(ZF,{elementsRef:w,labelsRef:R,children:e})})})})]})},iV=t=>{const{selected:e,label:n,icon:s}=t,{getItemProps:r,handleSelect:o}=x.useContext(UR),{ref:l,index:u}=e6();return C.jsxs("div",{className:Vt("str-video__dropdown-option",{"str-video__dropdown-option--selected":e}),ref:l,...r({onClick:()=>o(u)}),children:[s&&C.jsx(At,{className:"str-video__dropdown-icon",icon:s}),C.jsx("span",{className:"str-video__dropdown-label",children:n})]})},rV=t=>{const{children:e,icon:n,handleSelect:s,defaultSelectedLabel:r,defaultSelectedIndex:o}=t;return C.jsx(sV,{icon:n,handleSelect:s,defaultSelectedIndex:o,defaultSelectedLabel:r,children:e})},aV=({disabled:t,id:e,label:n,onChange:s,name:r,selected:o,defaultChecked:l,value:u})=>C.jsxs("label",{className:Vt("str-video__device-settings__option",{"str-video__device-settings__option--selected":o,"str-video__device-settings__option--disabled":t}),htmlFor:e,children:[C.jsx("input",{type:"radio",name:r,onChange:s,value:u,id:e,checked:o,defaultChecked:l,disabled:t}),n]}),oV=t=>{const{devices:e=[],selectedDeviceId:n,title:s,type:r,onChange:o}=t,{close:l}=oy(),{deviceList:u}=AR(e,n);return C.jsxs("div",{className:"str-video__device-settings__device-kind",children:[s&&C.jsx("div",{className:"str-video__device-settings__device-selector-title",children:s}),u.map(h=>C.jsx(aV,{id:`${r}--${h.deviceId}`,value:h.deviceId,label:h.label,onChange:d=>{const m=d.target.value;m!=="default"&&o?.(m),l?.()},name:r,selected:h.isSelected},h.deviceId))]})},cV=t=>{const{devices:e=[],selectedDeviceId:n,title:s,onChange:r,icon:o}=t,{deviceList:l,selectedDeviceInfo:u,selectedIndex:h}=AR(e,n),d=x.useCallback(m=>{const b=l[m].deviceId;b!=="default"&&r?.(b)},[l,r]);return C.jsxs("div",{className:"str-video__device-settings__device-kind",children:[C.jsx("div",{className:"str-video__device-settings__device-selector-title",children:s}),C.jsx(rV,{icon:o,defaultSelectedIndex:h,defaultSelectedLabel:u.label,handleSelect:d,children:l.map(m=>C.jsx(iV,{icon:o,label:m.label,selected:m.isSelected},m.deviceId))})]})},BR=t=>{const{visualType:e="list",icon:n,...s}=t;return e==="list"?C.jsx(oV,{...s}):C.jsx(cV,{...s,icon:n})},lV=({title:t,visualType:e})=>{const{useMicrophoneState:n}=Pn(),{microphone:s,selectedDevice:r,devices:o}=n();return C.jsx(BR,{devices:o||[],selectedDeviceId:r,type:"audioinput",onChange:async l=>{await s.select(l)},title:t,visualType:e,icon:"mic"})},uV=({title:t,visualType:e})=>{const{useCameraState:n}=Pn(),{camera:s,devices:r,selectedDevice:o}=n();return C.jsx(BR,{devices:r||[],type:"videoinput",selectedDeviceId:o,onChange:async l=>{await s.select(l)},title:t,visualType:e,icon:"camera"})};x.forwardRef(function({menuShown:e},n){const{t:s}=sn();return C.jsx(ms,{className:Vt("str-video__device-settings__button",{"str-video__device-settings__button--active":e}),title:s("Toggle device menu"),icon:"device-settings",ref:n})});const fV=t=>{const{t:e}=sn(),{caption:n,Menu:s=C.jsx(lV,{visualType:"list"}),menuPlacement:r="top",onMenuToggle:o,...l}=t,{hasPermission:u,requestPermission:h,isAwaitingPermission:d}=ay(we.SEND_AUDIO),{useMicrophoneState:m}=Pn(),{microphone:b,optimisticIsMute:g,hasBrowserPermission:v,isPromptingPermission:S}=m(),[T,w]=x.useState(!1),R=uy(t,async()=>{u?await b.toggle():await h()});return C.jsx(An,{requiredGrants:[we.SEND_AUDIO],children:C.jsx(ly,{permission:we.SEND_AUDIO,isAwaitingApproval:d,messageApproved:e("You can now speak."),messageAwaitingApproval:e("Awaiting for an approval to speak."),messageRevoked:e("You can no longer speak."),children:C.jsx(Hc,{title:u?v?n??e("Mic"):e("Check your browser mic permissions"):e("You have no permission to share your audio"),tooltipDisabled:T,children:C.jsxs(Dr,{active:g,caption:n,variant:"secondary",disabled:!v||!u,"data-testid":g?"audio-unmute-button":"audio-mute-button",onClick:R,Menu:s,menuPlacement:r,menuOffset:16,...l,onMenuToggle:O=>{w(O),o?.(O)},children:[C.jsx(At,{icon:g?"mic-off":"mic"}),(!v||!u)&&C.jsx("span",{className:"str-video__no-media-permission",children:"!"}),S&&C.jsx("span",{className:"str-video__pending-permission",title:e("Waiting for permission"),children:"?"})]})})})})},dV=t=>{const{t:e}=sn(),{caption:n,Menu:s=C.jsx(uV,{visualType:"list"}),menuPlacement:r="top",onMenuToggle:o,...l}=t,{hasPermission:u,requestPermission:h,isAwaitingPermission:d}=ay(we.SEND_VIDEO),{useCameraState:m,useCallSettings:b}=Pn(),{camera:g,optimisticIsMute:v,hasBrowserPermission:S,isPromptingPermission:T}=m(),R=b()?.video.enabled,[O,k]=x.useState(!1),D=uy(t,async()=>{u?await g.toggle():await h()});return C.jsx(An,{requiredGrants:[we.SEND_VIDEO],children:C.jsx(ly,{permission:we.SEND_VIDEO,isAwaitingApproval:d,messageApproved:e("You can now share your video."),messageAwaitingApproval:e("Awaiting for an approval to share your video."),messageRevoked:e("You can no longer share your video."),children:C.jsx(Hc,{title:u?S?R?n||e("Video"):e("Video publishing is disabled by the system"):e("Check your browser video permissions"):e("You have no permission to share your video"),tooltipDisabled:O,children:C.jsxs(Dr,{active:v,caption:n,variant:"secondary",disabled:!S||!u||!R,"data-testid":v?"video-unmute-button":"video-mute-button",onClick:D,Menu:s,menuPlacement:r,menuOffset:16,...l,onMenuToggle:P=>{k(P),o?.(P)},children:[C.jsx(At,{icon:v?"camera-off":"camera"}),(!S||!u||!R)&&C.jsx("span",{className:"str-video__no-media-permission",children:"!"}),T&&C.jsx("span",{className:"str-video__pending-permission",title:e("Waiting for permission"),children:"?"})]})})})})};x.forwardRef(function({menuShown:e},n){const{t:s}=sn();return C.jsx(Hc,{title:s("Leave call"),tooltipDisabled:e,children:C.jsx(ms,{icon:e?"close":"call-end",variant:e?"active":"danger","data-testid":"leave-call-button",ref:n})})});const hV=({disabled:t,caption:e,onClick:n,onLeave:s})=>{const r=$t(),{t:o}=sn(),l=x.useCallback(async u=>{n?n(u):r&&(await r.leave(),s?.())},[n,s,r]);return C.jsx(ms,{disabled:t,icon:"call-end",variant:"danger",title:e??o("Leave call"),"data-testid":"cancel-call-button",onClick:l})},pV=({onLeave:t})=>C.jsxs("div",{className:"str-video__call-controls",children:[C.jsx(An,{requiredGrants:[we.SEND_AUDIO],children:C.jsx(q6,{children:C.jsx(fV,{})})}),C.jsx(An,{requiredGrants:[we.SEND_VIDEO],children:C.jsx(dV,{})}),C.jsx(An,{requiredGrants:[we.CREATE_REACTION],children:C.jsx(W6,{})}),C.jsx(An,{requiredGrants:[we.SCREENSHARE],children:C.jsx(nV,{})}),C.jsx(An,{requiredGrants:[we.START_RECORD_CALL,we.STOP_RECORD_CALL],children:C.jsx(J6,{})}),C.jsx(hV,{onLeave:t})]});x.lazy(()=>dI(()=>import("./latency-chart-Bj5OSYzg.es-CJxhDpdO.js"),[]));var NC;(function(t){t.GOOD="Good",t.OK="Ok",t.BAD="Bad"})(NC||(NC={}));x.forwardRef(function(e,n){const{t:s}=sn(),{caption:r,menuShown:o}=e;return C.jsx(Dr,{ref:n,active:o,caption:r,title:r||s("Statistics"),"data-testid":"stats-button",children:C.jsx(At,{icon:"stats"})})});x.forwardRef(function(e,n){return C.jsx(ms,{enabled:e.menuShown,icon:"ellipsis",ref:n})});x.forwardRef(function(e,n){return C.jsx(ms,{enabled:e.menuShown,icon:"filter",ref:n})});x.createContext(null);de.JOINING+"",de.RINGING+"",de.MIGRATING+"",de.RECONNECTING+"",de.RECONNECTING_FAILED+"",de.OFFLINE+"",de.IDLE+"",de.UNKNOWN+"",de.JOINED+"",de.LEFT+"";x.forwardRef(function(e,n){const{permissionRequests:s,handleUpdatePermission:r,...o}=e,{t:l}=sn();return C.jsx("div",{className:"str-video__permission-requests-list",ref:n,...o,children:s.map((u,h)=>{const{user:d,permissions:m}=u;return C.jsx(x.Fragment,{children:m.map(b=>C.jsxs("div",{className:"str-video__permission-request",children:[C.jsx("div",{className:"str-video__permission-request__message",children:mV(d.name||d.id,b,l)}),C.jsx(sm,{className:"str-video__permission-request__button--allow",type:"button",onClick:r(u,"grant"),children:l("Allow")}),C.jsx(sm,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(u,"revoke"),children:l("Revoke")}),C.jsx(sm,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(u,"dismiss"),children:l("Dismiss")})]},b))},`${d.id}/${h}`)})})});const sm=t=>{const{className:e,...n}=t;return C.jsx("button",{className:Vt("str-video__permission-request__button",e),...n})},mV=(t,e,n)=>{switch(e){case we.SEND_AUDIO:return n("{{ userName }} is requesting to speak",{userName:t});case we.SEND_VIDEO:return n("{{ userName }} is requesting to share their camera",{userName:t});case we.SCREENSHARE:return n("{{ userName }} is requesting to present their screen",{userName:t});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:t,permission:e})}},gV=({as:t="div",className:e,children:n,...s})=>C.jsx(t,{...s,className:Vt("str-video",e),children:n}),yV=x.forwardRef(function(e,n){return C.jsx(ms,{enabled:e.menuShown,icon:"ellipsis",ref:n})}),bV=()=>{const t=$t(),{t:e}=sn(),n=()=>{t?.screenShare.disable()};return C.jsxs("div",{className:"str-video__screen-share-overlay",children:[C.jsx(At,{icon:"screen-share-off"}),C.jsx("span",{className:"str-video__screen-share-overlay__title",children:e("You are presenting your screen")}),C.jsxs("button",{onClick:n,className:"str-video__screen-share-overlay__button",children:[C.jsx(At,{icon:"close"})," ",e("Stop Screen Sharing")]})]})},fy=({indicatorsVisible:t=!0,menuPlacement:e="bottom-start",showMenuButton:n=!0,ParticipantActionsContextMenu:s=B6})=>{const{participant:r,trackType:o}=ld(),l=ds(r);return r.isLocalParticipant&&l&&o==="screenShareTrack"?C.jsxs(C.Fragment,{children:[C.jsx(bV,{}),C.jsx(DC,{indicatorsVisible:t})]}):C.jsxs(C.Fragment,{children:[n&&C.jsx(cy,{strategy:"fixed",placement:e,ToggleButton:yV,children:C.jsx(s,{})}),C.jsx(X6,{participant:r}),C.jsx(DC,{indicatorsVisible:t})]})},DC=({indicatorsVisible:t=!0})=>{const{participant:e}=ld(),{isLocalParticipant:n,connectionQuality:s,pin:r,sessionId:o,name:l,userId:u}=e,h=$t(),{t:d}=sn(),m=!!s&&Mm.ConnectionQuality[s].toLowerCase(),b=ti(e),g=fs(e),v=!!r&&r.isLocalPin;return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"str-video__participant-details",children:C.jsxs("span",{className:"str-video__participant-details__name",children:[l||u,t&&!b&&C.jsx("span",{className:"str-video__participant-details__name--audio-muted"}),t&&!g&&C.jsx("span",{className:"str-video__participant-details__name--video-muted"}),t&&v&&C.jsx("span",{title:d("Unpin"),onClick:()=>h?.unpin(o),className:"str-video__participant-details__name--pinned"}),t&&C.jsx(vV,{})]})}),t&&C.jsx(Ef,{isVisible:n&&s===Mm.ConnectionQuality.POOR,message:d("Poor connection quality"),children:m&&C.jsx("span",{className:Vt("str-video__participant-details__connection-quality",`str-video__participant-details__connection-quality--${m}`),title:m})})]})},vV=()=>{const{participant:t}=ld(),{isSpeaking:e,isDominantSpeaker:n}=t;return C.jsxs("span",{className:Vt("str-video__speech-indicator",e&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[C.jsx("span",{className:"str-video__speech-indicator__bar"}),C.jsx("span",{className:"str-video__speech-indicator__bar"}),C.jsx("span",{className:"str-video__speech-indicator__bar"})]})},$u=x.forwardRef(function({participant:e,trackType:n="videoTrack",mirror:s,muteAudio:r,refs:{setVideoElement:o,setVideoPlaceholderElement:l}={},className:u,VideoPlaceholder:h,PictureInPicturePlaceholder:d,ParticipantViewUI:m=fy},b){const{isLocalParticipant:g,isSpeaking:v,isDominantSpeaker:S,sessionId:T}=e,w=ti(e),R=fs(e),O=zf(e),[k,D]=x.useState(null),[P,H]=x.useState(null),[G,X]=x.useState(null);H6({sessionId:T,trackedElement:k,trackType:n});const{useIncomingVideoSettings:ie}=Pn(),{isParticipantVideoEnabled:ee}=ie(),le=x.useMemo(()=>({participant:e,participantViewElement:k,videoElement:P,videoPlaceholderElement:G,trackType:n}),[P,G,e,k,n]),re=x.useMemo(()=>({setVideoElement:oe=>{o?.(oe),H(oe)},setVideoPlaceholderElement:oe=>{l?.(oe),X(oe)}}),[o,l]);return C.jsx("div",{"data-testid":"participant-view",ref:oe=>{PR(b,oe),D(oe)},className:Vt("str-video__participant-view",S&&"str-video__participant-view--dominant-speaker",v&&"str-video__participant-view--speaking",!R&&"str-video__participant-view--no-video",!w&&"str-video__participant-view--no-audio",u),children:C.jsxs(kR.Provider,{value:le,children:[!g&&!r&&C.jsxs(C.Fragment,{children:[w&&C.jsx(_c,{participant:e,trackType:"audioTrack"}),O&&C.jsx(_c,{participant:e,trackType:"screenShareAudioTrack"})]}),C.jsx(jR,{VideoPlaceholder:h,PictureInPicturePlaceholder:d,participant:e,trackType:n,refs:re,enabled:g||n!=="videoTrack"||ee(e.sessionId),mirror:s,autoPlay:!0}),IR(m)?C.jsx(m,{}):m]})})});$u.displayName="ParticipantView";const FR=E4;FR.displayName="StreamCall";var SV="Joining",TV="Mic",CV="Ringing",wV="Speakers",EV="Video",xV="Live",RV="Reactions",_V="Statistics",kV="Invite",OV="Join",AV="You",NV="Me",DV="Unknown",IV="Default",PV="Refresh",LV="Allow",jV="Revoke",MV="Dismiss",UV="Pinned",BV="Unpin",FV="Pin",VV="Block",$V="Enter",HV="Leave",zV="Participants",qV=", and ({{ count }}) anonymous",GV={Joining:SV,Mic:TV,"No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:CV,"Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:wV,Video:EV,"You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:xV,"Livestream starts soon":"Livestream starts soon","Livestream starts at {{ startsAt }}":"Livestream starts at {{ startsAt, datetime }}","{{ count }} participants joined early_one":"{{ count }} participant joined early","{{ count }} participants joined early_other":"{{ count }} participants joined early","You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:RV,Statistics:_V,"You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:kV,Join:OV,You:AV,Me:NV,Unknown:DV,"Toggle device menu":"Toggle device menu",Default:IV,"Call Recordings":"Call Recordings",Refresh:PV,"Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:LV,Revoke:jV,Dismiss:MV,"Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:UV,Unpin:BV,Pin:FV,"Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:VV,"Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:$V,Leave:HV,"Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:zV,Anonymous:qV,"No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"};const KV={en:GV},VR=t=>C.jsx(A4,{translationsOverrides:KV,...t});VR.displayName="StreamVideo";function Hu(t,e){return"$and"in e?e.$and.every(n=>Hu(t,n)):"$or"in e?e.$or.some(n=>Hu(t,n)):"$not"in e?!Hu(t,e.$not):YV(t,e)}function YV(t,e){let n=!0;for(const s of Object.keys(e)){const r=e[s],o=r&&typeof r=="object",l=t[s];if(o&&"$eq"in r)n&&(n=r.$eq===l);else if(o&&"$neq"in r)n&&(n=r.$neq!==l);else if(o&&"$in"in r)n&&(n=r.$in.includes(l));else if(o&&"$contains"in r)if(Array.isArray(l)){const u=r;n&&(n=l.includes(u.$contains))}else n=!1;else n&&(n=r===l);if(!n)return!1}return!0}const JV=({excludeLocalParticipant:t=!1,filterParticipants:e})=>{const{useParticipants:n,useRemoteParticipants:s}=Pn(),r=n(),o=s();return x.useMemo(()=>{const l=t?o:r;return e?XV(l,e):l},[r,o,t,e])},XV=(t,e)=>{const n=typeof e=="function"?e:s=>Hu({userId:s.userId,isSpeaking:s.isSpeaking,isDominantSpeaker:s.isDominantSpeaker,name:s.name,roles:s.roles,isPinned:pU(s),hasVideo:fs(s),hasAudio:ti(s)},e);return t.filter(n)},QV=(t,e)=>{x.useEffect(()=>{if(t)return e?t.setSortParticipantsBy(ci(Bg,e$)):t.setSortParticipantsBy(yU),()=>{ZV(t)}},[t,e])},WV=()=>{const{useRawParticipants:t}=Pn(),e=t();return x.useMemo(()=>e.filter(n=>!n.isLocalParticipant),[e])},ZV=t=>{const e=Nx.get(t.type);t.setSortParticipantsBy(e.options.sortParticipantsBy||Tc)},e$=(t,e)=>t.isLocalParticipant?1:e.isLocalParticipant?-1:0,t$=(t,e,n)=>{const[s,r]=x.useState({vertical:typeof n=="number"?n:null,horizontal:typeof n=="number"?n:null});return x.useEffect(()=>{if(!e||!t||typeof n=="number"||typeof n>"u")return;let o=null,l=null;const u=new ResizeObserver((h,d)=>{if(h.length>1){const g=e.firstChild;g&&(l=g.clientHeight,o=g.clientWidth,d.unobserve(e))}if(l===null||o===null)return;const m=Math.floor(t.clientHeight/l),b=Math.floor(t.clientWidth/o);r(g=>g.vertical!==m||g.horizontal!==b?{vertical:m,horizontal:b}:g)});return u.observe(t),u.observe(e),()=>{u.disconnect()}},[e,n,t]),s},n$=()=>C.jsx(fy,{menuPlacement:"top-end"}),$R=({ParticipantViewUIBar:t=n$,ParticipantViewUISpotlight:e=fy,VideoPlaceholder:n,PictureInPicturePlaceholder:s,participantsBarPosition:r="bottom",participantsBarLimit:o,mirrorLocalParticipantVideo:l=!0,excludeLocalParticipant:u=!1,filterParticipants:h,pageArrowsVisible:d=!0,muted:m})=>{const b=$t(),{useParticipants:g}=Pn(),v=g(),S=WV(),[T,...w]=JV({excludeLocalParticipant:u,filterParticipants:h}),[R,O]=x.useState(null),[k,D]=x.useState(null),[P,H]=x.useState(null),G=T&&ds(T),X=t$(P,k,o),ie=r==="left"||r==="right",ee=r==="top"||r==="bottom";x.useEffect(()=>{if(!R||!b)return;const L=b.setViewport(R);return()=>L()},[R,b]);const le=v.length===2;QV(b,le);let re=w;const oe=ie?X.vertical:X.horizontal;typeof o<"u"&&oe!==null&&(re=w.slice(0,oe-(G?1:0)));const te=l?void 0:!1;if(!b)return null;const Y=r&&(re.length>0||G);return C.jsxs("div",{className:"str-video__speaker-layout__wrapper",children:[!m&&C.jsx(_R,{participants:S}),C.jsxs("div",{className:Vt("str-video__speaker-layout",r&&`str-video__speaker-layout--variant-${r}`),children:[C.jsx("div",{className:"str-video__speaker-layout__spotlight",children:T&&C.jsx($u,{participant:T,muteAudio:!0,mirror:te,trackType:G?"screenShareTrack":"videoTrack",ParticipantViewUI:e,VideoPlaceholder:n,PictureInPicturePlaceholder:s})}),Y&&C.jsxs("div",{ref:H,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[C.jsx("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:O,children:C.jsxs("div",{ref:D,className:"str-video__speaker-layout__participants-bar",children:[G&&C.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:C.jsx($u,{participant:T,ParticipantViewUI:t,VideoPlaceholder:n,PictureInPicturePlaceholder:s,mirror:te,muteAudio:!0})},T.sessionId),re.map(L=>C.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:C.jsx($u,{participant:L,ParticipantViewUI:t,VideoPlaceholder:n,PictureInPicturePlaceholder:s,mirror:te,muteAudio:!0})},L.sessionId))]})}),d&&ie&&C.jsx(i$,{scrollWrapper:R}),d&&ee&&C.jsx(s$,{scrollWrapper:R})]})]})]})};$R.displayName="SpeakerLayout";const s$=({scrollWrapper:t})=>{const e=j6(t),n=()=>{t?.scrollBy({left:-150,behavior:"smooth"})},s=()=>{t?.scrollBy({left:150,behavior:"smooth"})};return C.jsxs(C.Fragment,{children:[e&&e!=="start"&&C.jsx(ms,{onClick:n,icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),e&&e!=="end"&&C.jsx(ms,{onClick:s,icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},i$=({scrollWrapper:t})=>{const e=L6(t),n=()=>{t?.scrollBy({top:-150,behavior:"smooth"})},s=()=>{t?.scrollBy({top:150,behavior:"smooth"})};return C.jsxs(C.Fragment,{children:[e&&e!=="top"&&C.jsx(ms,{onClick:n,icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),e&&e!=="bottom"&&C.jsx(ms,{onClick:s,icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},[r$,a$,o$]="1.18.11".split(".");OU({type:Mm.SdkType.REACT,major:r$,minor:a$,patch:o$});function c$(){return C.jsxs("div",{className:"h-screen flex flex-col items-center justify-center p-4",children:[C.jsx(zw,{className:"animate-spin size-10 text-primary"}),C.jsx("p",{className:"mt-4 text-center text-lg font-mono",children:"Connecting to chat..."})]})}const l$=void 0,u$=()=>{const{id:t}=F1(),[e,n]=x.useState(null),[s,r]=x.useState(null),[o,l]=x.useState(!0),{authUser:u,isLoading:h}=ps(),{data:d}=cI({queryKey:["streamToken"],queryFn:lI,enabled:!!u});return x.useEffect(()=>{(async()=>{if(!(!d.token||!u||!t))try{console.log("Initializing Stream video client...");const b={id:u._id,name:u.fullName,image:u.profilePic},g=new Mi({apiKey:l$,user:b,token:d.token}),v=g.call("default",t);await v.join({create:!0}),console.log("Joined call successfully"),n(g),r(v)}catch(b){console.error("Error joining call:",b),Yt.error("Could not join the call. Please try again.")}finally{l(!1)}})()},[d,u,t]),h||o?C.jsx(c$,{}):C.jsx("div",{className:"h-screen flex flex-col items-center justify-center",children:C.jsx("div",{className:"relative",children:e&&s?C.jsx(VR,{client:e,children:C.jsx(FR,{call:s,children:C.jsx(f$,{})})}):C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsx("p",{children:"Could not initialize call. Please refresh or try again later."})})})})},f$=()=>{const{useCallCallingState:t}=Pn(),e=t(),n=ag();return e===de.LEFT?n("/"):C.jsxs(gV,{children:[C.jsx($R,{}),C.jsx(pV,{})]})},d$=()=>{const{authUser:t,checkAuth:e,isCheckingAuth:n,onlineUsers:s}=ps(),{theme:r}=Xw();return console.log({onlineUsers:s}),x.useEffect(()=>{e()},[e]),console.log({authUser:t}),n&&!t?C.jsx("div",{className:"flex items-center justify-center h-screen",children:C.jsx(zw,{className:"size-10 animate-spin"})}):C.jsxs("div",{"data-theme":r,children:[C.jsx(C2,{}),C.jsxs(tO,{children:[C.jsx(pr,{path:"/",element:t?C.jsx(O2,{}):C.jsx(Ko,{to:"/login"})}),C.jsx(pr,{path:"/signup",element:t?C.jsx(Ko,{to:"/"}):C.jsx(A2,{})}),C.jsx(pr,{path:"/login",element:t?C.jsx(Ko,{to:"/"}):C.jsx(N2,{})}),C.jsx(pr,{path:"/settings",element:C.jsx(P2,{})}),C.jsx(pr,{path:"/profile",element:t?C.jsx(L2,{}):C.jsx(Ko,{to:"/login"})}),C.jsx(pr,{path:"/call/:id",element:t?C.jsx(u$,{}):C.jsx(Ko,{to:"/login"})})]}),C.jsx(sD,{})]})};l1.createRoot(document.getElementById("root")).render(C.jsx(x.StrictMode,{children:C.jsxs(xO,{basename:"/Chat_App",children:["       ",C.jsx(d$,{})]})}));export{im as R,C as j,x as r};
